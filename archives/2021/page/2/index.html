
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Let&#39;s Code">
    <title>Archives: 2021 - Let&#39;s Code</title>
    <meta name="author" content="Eva Chan">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Let&#39;s Code">
<meta property="og:url" content="https://github.com/Eva813/Eva813.github.io.git/archives/2021/page/2/index.html">
<meta property="og:site_name" content="Let&#39;s Code">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Eva Chan">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://github.com/Eva813/Eva813.github.io.git/assets/images/eva-round.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-hjuj7gqklhxvgfqyp2tco44je7uogudiobbyggt7zgeywnz7l0sdc75zx3ix.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Let&#39;s Code
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/eva-round.png" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/eva-round.png" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Eva Chan</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Front-End Engineer</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/Eva813"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://eva813.github.io/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/02/23/API-youtube/"
                            aria-label=": API-youtube"
                        >
                            API-youtube
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-02-23T14:47:04+08:00">
	
		    Feb 23, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><a href="https://eva813.github.io/Eva_portfolio/YoutubeAPI/YoutubeAPI.html" target="_blank" rel="noopener">成品</a></p>
<h2 id="觀察功能需求"><a href="#觀察功能需求" class="headerlink" title="觀察功能需求"></a>觀察功能需求</h2><ul>
<li>搜尋框，輸入搜尋關鍵字，下方會列出5筆列表<ul>
<li>有圖片縮圖、影片標題、影片描述</li>
</ul>
</li>
<li>按下next page 會取得下5筆資料</li>
<li>按下prev page，會取得上5筆資料</li>
</ul>
<p>ajax 在同一個頁面，不做刷新就可以改變頁面的內容。<br>q: query</p>
<h2 id="youtube-API-application-programming-interface-資料查看"><a href="#youtube-API-application-programming-interface-資料查看" class="headerlink" title="youtube API(application programming interface)資料查看"></a>youtube API(application programming interface)資料查看</h2><p><a href="https://developers.google.com/youtube/v3/docs/" target="_blank" rel="noopener">YouTube 資料 API 參考手冊</a></p>
<p>取得授權：<a href="https://console.developers.google.com/projectselector2/apis/credentials?pli=1&supportedpurview=project" target="_blank" rel="noopener">憑證</a></p>
<p><img src="https://i.imgur.com/asf7coq.png" alt=""></p>
<p>API 金鑰:AIzaSyCKPRCaNS-PQJLl2jzoQEf-O4I0tnrtd8M</p>
<div class="alert info no-icon"><p>jQuery API D ocument =&gt; 表示看官方文件<br>串API =&gt;</p>
</div>

<h4 id="檢視範例，ajax資料的情形"><a href="#檢視範例，ajax資料的情形" class="headerlink" title="檢視範例，ajax資料的情形"></a>檢視範例，ajax資料的情形</h4><p><img src="https://i.imgur.com/wc6VWtV.png" alt=""></p>
<p><img src="https://i.imgur.com/tSYR4vu.png" alt=""></p>
<h2 id="JS-部分"><a href="#JS-部分" class="headerlink" title="JS 部分"></a>JS 部分</h2><h3 id="1-嘗試串接Youtube-API"><a href="#1-嘗試串接Youtube-API" class="headerlink" title="1.嘗試串接Youtube API"></a>1.嘗試串接Youtube API</h3><ul>
<li>首先需考量，我們所需要的資料參數有哪些(</li>
<li>在抓取成功的部分，要設置抓取五筆搜尋到的五筆資料，並將其呈現於頁面<ul>
<li>除了5筆資料外，還需要跳轉上、下頁的按鈕<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getVideo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> value = $(<span class="string">'#search-field'</span>).val();</span><br><span class="line">  <span class="keyword">let</span> youtubeURL = <span class="string">"https://www.googleapis.com/youtube/v3/search"</span>;</span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"GET"</span>,</span><br><span class="line">    url: youtubeURL,</span><br><span class="line">    data: &#123;<span class="comment">//將要放入網址的參數放在這</span></span><br><span class="line">      part:</span><br><span class="line">        <span class="string">'id,snippet'</span>,<span class="comment">// 必填，把需要的資訊列出來</span></span><br><span class="line">      q: value,<span class="comment">// 查詢文字</span></span><br><span class="line">      maxResults: <span class="number">5</span>,<span class="comment">// 預設為五筆資料，可以設定1~50</span></span><br><span class="line">      type: <span class="string">"video"</span>,</span><br><span class="line">      key: <span class="string">'AIzaSyCKPRCaNS-PQJLl2jzoQEf-O4I0tnrtd8M'</span><span class="comment">// 使用 API 只能取得公開的播放清單</span></span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="comment">//console.log(data);</span></span><br><span class="line">      <span class="keyword">let</span> nextPageToken = data.nextPageToken;</span><br><span class="line">      <span class="keyword">let</span> prevPageToken = data.prevPageToken;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//試著將收到的資料傳入，並呈現於畫面中</span></span><br><span class="line">      insertItems(data);</span><br><span class="line"></span><br><span class="line">      getBtn(data, prevPageToken, nextPageToken)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;, <span class="attr">error</span>: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'oh no'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
網址放入參數<br><a href="https://pjchender.blogspot.com/2018/08/js-javascript-url-parameters.html" target="_blank" rel="noopener">[JS] 使用 JavaScript 解析網址與處理網址中的參數（URL Parameters）</a></li>
</ul>
</li>
</ul>
<h3 id="2-將資料呈現於頁面-insertItems"><a href="#2-將資料呈現於頁面-insertItems" class="headerlink" title="2.將資料呈現於頁面(insertItems())"></a>2.將資料呈現於頁面(insertItems())</h3><ul>
<li>透過迴圈方式將要抓取的資料依序填入</li>
<li>觀察原本畫面結構，並依據去找尋資料中符合的資料<ul>
<li>videoId、videoTitle、description、channelTitle…</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertItems</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> output = <span class="string">''</span>;</span><br><span class="line">  $.each(item.items, <span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> videoId = item.items[index].id.videoId;</span><br><span class="line">    <span class="keyword">let</span> videoTitle = item.items[index].snippet.title;</span><br><span class="line">    <span class="keyword">let</span> description = item.items[index].snippet.description;</span><br><span class="line">    <span class="keyword">let</span> thumbnailURL = item.items[index].snippet.thumbnails.high.url;<span class="comment">//高解析度影片縮圖</span></span><br><span class="line">    <span class="keyword">let</span> channelTitle = item.items[index].snippet.channelTitle;</span><br><span class="line">    <span class="keyword">let</span> publishedDate = item.items[index].snippet.publishedAt;</span><br><span class="line">    <span class="comment">// 按鈕</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    output += <span class="string">`&lt;li&gt;&lt;div class="list-left"&gt;</span></span><br><span class="line"><span class="string">    &lt;img src=" <span class="subst">$&#123;thumbnailURL&#125;</span>"&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="list-right"&gt;</span></span><br><span class="line"><span class="string">    &lt;h3&gt;</span></span><br><span class="line"><span class="string">    &lt;a data-fancybox data-type="iframe" data-src="https://www.youtube.com/embed/<span class="subst">$&#123;videoId&#125;</span>" "href="javascript:;"&gt; <span class="subst">$&#123;videoTitle&#125;</span> &lt;/a&gt;&lt;/h3&gt; &lt;small&gt;By &lt;span class="cTitle"&gt; <span class="subst">$&#123;channelTitle&#125;</span>&lt;/span&gt; on <span class="subst">$&#123;publishedDate&#125;</span>&lt;/small&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt; <span class="subst">$&#123;description&#125;</span> &lt;p&gt;&lt;/div&gt;&lt;/li&gt; &lt;div classs="clearfix"&gt;&lt;/div&gt; </span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"></span><br><span class="line">    $(<span class="string">'#results'</span>).html(output);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="3-製作上、下頁的按鈕鍵"><a href="#3-製作上、下頁的按鈕鍵" class="headerlink" title="3.製作上、下頁的按鈕鍵"></a>3.製作上、下頁的按鈕鍵</h2><ul>
<li>注意該函式要帶入的參數有哪些</li>
<li>我們要判斷為，在第一頁時，只有下一頁的按鈕<ul>
<li>判斷方式為，<code>(!prevPageToken)</code>沒有上一頁的token</li>
<li>（截圖）</li>
</ul>
</li>
<li>在判斷之中，我們需要將要插入的標籤與內容，放入，並append到畫面要呈現的位置</li>
<li>注意：在插入的button之中，加入<code>data-token=&quot;${nextPageToken}&quot; data-query=&quot;${value}&quot;</code>，用於後續抓取屬性內容。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBtn</span>(<span class="params">value, prevPageToken, nextPageToken</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(nextPageToken)</span><br><span class="line">  <span class="keyword">if</span> (!prevPageToken) &#123;</span><br><span class="line">    <span class="keyword">var</span> btnOutput = $(<span class="string">`&lt;div class="button-container"&gt;</span></span><br><span class="line"><span class="string">    &lt;button id="next-button" class="paging-button" data-token="<span class="subst">$&#123;nextPageToken&#125;</span>" data-query="<span class="subst">$&#123;value&#125;</span>" onclick="pressNext();"&gt; Next Page&lt;/button&gt;&lt;/div&gt;`</span></span><br><span class="line">    )</span><br><span class="line">    $(<span class="string">"#buttons"</span>).append(btnOutput);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> btnOutput = $(<span class="string">`&lt;div class="button-container"&gt;&lt;button id="prev-button" class="paging-button" data-token="<span class="subst">$&#123;prevPageToken&#125;</span>" data-query="<span class="subst">$&#123;value&#125;</span>" onclick="pressPrev();"&gt; Prev Page&lt;/button&gt;  </span></span><br><span class="line"><span class="string">    &lt;button id="next-button" class="paging-button"  data-token="<span class="subst">$&#123;nextPageToken&#125;</span>" data-query="<span class="subst">$&#123;value&#125;</span>" onclick="pressNext();"&gt;Next Page&lt;/button&gt;&lt;/div&gt;`</span>)</span><br><span class="line">    $(<span class="string">"#buttons"</span>).append(btnOutput);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://developers.google.com/youtube/v3/guides/implementation/pagination" target="_blank" rel="noopener">Youtube:Implementation: Pagination</a></p>
<h2 id="4-下一頁點下後，下五筆的資料"><a href="#4-下一頁點下後，下五筆的資料" class="headerlink" title="4.下一頁點下後，下五筆的資料"></a>4.下一頁點下後，下五筆的資料</h2><ul>
<li>同樣以ajax的方式來抓取<ul>
<li>在參數的地方我們要抓取的是，按取下一頁的token</li>
</ul>
</li>
<li>success之中所應用的函示，同樣為插入5筆的資料，以及上下頁的按鈕</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//取得下一頁的資料</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pressNext</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> youtubeURL = <span class="string">"https://www.googleapis.com/youtube/v3/search"</span>;</span><br><span class="line">  <span class="keyword">let</span> token = $(<span class="string">'#next-button'</span>).data(<span class="string">'token'</span>);</span><br><span class="line">  <span class="keyword">let</span> value = $(<span class="string">'#search-field'</span>).val();</span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"GET"</span>,</span><br><span class="line">    url: youtubeURL,</span><br><span class="line">    data: &#123;<span class="comment">//將要放入網址的參數放在這</span></span><br><span class="line">      part:</span><br><span class="line">        <span class="string">'id,snippet'</span>,<span class="comment">// 必填，把需要的資訊列出來</span></span><br><span class="line">      q: value,<span class="comment">// 查詢文字</span></span><br><span class="line">      pageToken: token,</span><br><span class="line">      maxResults: <span class="number">5</span>,<span class="comment">// 預設為五筆資料，可以設定1~50</span></span><br><span class="line">      type: <span class="string">"video"</span>,</span><br><span class="line"></span><br><span class="line">      key: <span class="string">'AIzaSyCKPRCaNS-PQJLl2jzoQEf-O4I0tnrtd8M'</span><span class="comment">// 使用 API 只能取得公開的播放清單</span></span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">      <span class="keyword">let</span> nextPageToken = data.nextPageToken;</span><br><span class="line">      <span class="keyword">let</span> prevPageToken = data.prevPageToken;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 清空內容</span></span><br><span class="line">      $(<span class="string">'#results'</span>).html(<span class="string">''</span>);</span><br><span class="line">      $(<span class="string">'#buttons'</span>).html(<span class="string">''</span>);</span><br><span class="line">      <span class="comment">//試著將收到的資料傳入，並呈現於畫面中</span></span><br><span class="line">      insertItems(data);</span><br><span class="line"></span><br><span class="line">      getBtn(data, prevPageToken, nextPageToken)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;, <span class="attr">error</span>: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'oh no'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-上一頁"><a href="#5-上一頁" class="headerlink" title="5.上一頁"></a>5.上一頁</h3><ul>
<li>同樣的抓取方式，只有要帶入的資料有些差異</li>
<li><code>token = $(&#39;#prev-button&#39;).data(&#39;token&#39;);</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//前一頁</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pressPrev</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 清空內容</span></span><br><span class="line">  $(<span class="string">'#results'</span>).html(<span class="string">''</span>);</span><br><span class="line">  $(<span class="string">'#buttons'</span>).html(<span class="string">''</span>);</span><br><span class="line">  <span class="keyword">let</span> youtubeURL = <span class="keyword">new</span> URL(<span class="string">`https://www.googleapis.com/youtube/v3/search?`</span>);</span><br><span class="line">  <span class="keyword">let</span> token = $(<span class="string">'#prev-button'</span>).data(<span class="string">'token'</span>);</span><br><span class="line">  <span class="keyword">let</span> value = $(<span class="string">'#search-field'</span>).val();</span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"GET"</span>,</span><br><span class="line">    url: youtubeURL,</span><br><span class="line">    data: &#123;<span class="comment">//將要放入網址的參數放在這</span></span><br><span class="line">      part:</span><br><span class="line">        <span class="string">'id,snippet'</span>,<span class="comment">// 必填，把需要的資訊列出來</span></span><br><span class="line">      q: value,<span class="comment">// 查詢文字</span></span><br><span class="line">      pageToken: token,</span><br><span class="line">      maxResults: <span class="number">5</span>,<span class="comment">// 預設為五筆資料，可以設定1~50</span></span><br><span class="line">      type: <span class="string">"video"</span>,</span><br><span class="line"></span><br><span class="line">      key: <span class="string">'AIzaSyCKPRCaNS-PQJLl2jzoQEf-O4I0tnrtd8M'</span><span class="comment">// 使用 API 只能取得公開的播放清單</span></span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">      <span class="keyword">let</span> nextPageToken = data.nextPageToken;</span><br><span class="line">      <span class="keyword">let</span> prevPageToken = data.prevPageToken;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 清空內容</span></span><br><span class="line">      $(<span class="string">'#results'</span>).html(<span class="string">''</span>);</span><br><span class="line">      $(<span class="string">'#buttons'</span>).html(<span class="string">''</span>);</span><br><span class="line">      <span class="comment">//試著將收到的資料傳入，並呈現於畫面中</span></span><br><span class="line">      insertItems(data);</span><br><span class="line"></span><br><span class="line">      getBtn(data, prevPageToken, nextPageToken)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;, <span class="attr">error</span>: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'oh no'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<p><a href="https://codertw.com/%E5%89%8D%E7%AB%AF%E9%96%8B%E7%99%BC/177833/" target="_blank" rel="noopener">HTML5 自定義屬性 data-* 和 jQuery.data 詳解<br>2018.06.20</a><br><a href="https://pjchender.blogspot.com/2017/01/html-5-data-attribute.html" target="_blank" rel="noopener">[技術分享] 什麼是 HTML 5 中的資料屬性（data-* attribute）</a></p>
<h3 id="6-運用fancybox的方式彈出"><a href="#6-運用fancybox的方式彈出" class="headerlink" title="6.運用fancybox的方式彈出"></a>6.運用fancybox的方式彈出</h3><ul>
<li><p>使用fancyBox展示影片</p>
<ul>
<li><a href="http://fancyapps.com/fancybox/3/docs/#iframe" target="_blank" rel="noopener">fancybox Documention</a></li>
<li><a href="https://cdnjs.com/libraries/fancybox" target="_blank" rel="noopener">fancybox-CDN</a></li>
</ul>
</li>
<li><p>使用iframe連結欲嵌入的外部影片連結</p>
<ul>
<li>iframe 是框架的一種，也稱為內置框架或內聯框架，用來在網頁內嵌入另外一個網頁<br><a href="https://fancyapps.com/fancybox/3/docs/#iframe" target="_blank" rel="noopener"></a></li>
</ul>
</li>
<li><p>透過CDN方式連結fancybox套件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- fancyBox --&gt;</span><br><span class="line">  &lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"</span> /&gt;</span><br><span class="line">  &lt;script src=<span class="string">"https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在我們點選該影片名稱區，插入影片id</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3&gt;<span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">data-fancybox</span> <span class="attr">data-type</span>=<span class="string">"iframe"</span> <span class="attr">data-src</span>=<span class="string">"https://www.youtube.com/embed/$&#123;videoId&#125;"</span> "<span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span> $&#123;videoTitle&#125; </span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>&lt;<span class="regexp">/h3&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'[data-fancybox]'</span>).fancybox(&#123;</span><br><span class="line">  toolbar  : <span class="literal">false</span>,</span><br><span class="line">  smallBtn : <span class="literal">true</span>,</span><br><span class="line">  iframe : &#123;</span><br><span class="line">    preload : <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><a href="https://orow.github.io/2019/03/16/jQuery-youtube-search/" target="_blank" rel="noopener">[jQuery] - 練習-Youtube Search Engine</a></p>
</li>
</ul>
<hr>
<p>補充知識：<br>XMLHttpRequest(XHR):是一種規範，用來發ajax使用</p>
<p>token(令牌)：唯一的、可以認證身份或取得資料</p>
<p>GET:向伺服器發request，（伺服器會告訴我們要發伺服器的網址，我們向它請求資訊）</p>
<h4 id="用瀏覽器debug"><a href="#用瀏覽器debug" class="headerlink" title="用瀏覽器debug"></a>用瀏覽器debug</h4><p><img src="https://i.imgur.com/IlQ8Glx.png" alt=""></p>
<ul>
<li>可在watch加上要觀察的變數<br><img src="https://i.imgur.com/7RcELS4.png" alt=""></li>
</ul>
<hr>
<p>參考資料<br><a href="https://ithelp.ithome.com.tw/articles/10194007" target="_blank" rel="noopener">[30apis] Day 7 : YouTube Data API + 基礎 Fetch API</a><br><a href="https://www.c-sharpcorner.com/article/how-to-implement-youtube-video-search-using-youtube-data-api-v3-in-wordpress-web2/" target="_blank" rel="noopener">How To Implement A Youtube Video Search Using Youtube Data API V3</a><br><a href="https://hackmd.io/@c36ICNyhQE6-iTXKxoIocg/S1eYdtA1P" target="_blank" rel="noopener">Youtube Data API 使用手札</a><br><a href="https://a42033.gitbooks.io/api/content/Youtube/youtube_data_api/applicate.html" target="_blank" rel="noopener">Youtube Data API 申請</a><br><a href="https://console.cloud.google.com/iam-admin/quotas?hl=zh-tw&_ga=2.128962188.1087850229.1615615433-929425058.1615373715&orgonly=true&angularJsUrl=%2Fprojectselector%2Fiam-admin%2Fquotas%3Fhl%3Dzh-tw%26_ga%3D2.128962188.1087850229.1615615433-929425058.1615373715%26supportedpurview%3Dproject%26orgonly%3Dtrue%26folder%3Dtrue%26organizationId%3Dtrue&project=my-youtube-api-307211&folder=&organizationId=&supportedpurview=project" target="_blank" rel="noopener">配額</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"error"</span>: &#123;</span><br><span class="line">    <span class="string">"code"</span>: <span class="number">403</span>,</span><br><span class="line">    <span class="string">"message"</span>: <span class="string">"The request cannot be completed because you have exceeded your \u003ca href=\"/youtube/v3/getting-started#quota\"\u003equota\u003c/a\u003e."</span>,</span><br><span class="line">    <span class="string">"errors"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">"message"</span>: <span class="string">"The request cannot be completed because you have exceeded your \u003ca href=\"/youtube/v3/getting-started#quota\"\u003equota\u003c/a\u003e."</span>,</span><br><span class="line">        <span class="string">"domain"</span>: <span class="string">"youtube.quota"</span>,</span><br><span class="line">        <span class="string">"reason"</span>: <span class="string">"quotaExceeded"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><a href="https://stackoverflow.com/questions/31075893/im-getting-favicon-ico-error" target="_blank" rel="noopener">favicon.ico error</a></p>
<p>問題：</p>
<ul>
<li>script.js: Allow attribute will take precedence over ‘allowfullscreen’.<br><img src="https://i.imgur.com/0JiThlt.png" alt=""></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/02/23/API-youtube/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/02/23/API-weather/"
                            aria-label=": 串接API- 天氣預報"
                        >
                            串接API- 天氣預報
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-02-23T14:42:02+08:00">
	
		    Feb 23, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><a href="https://eva813.github.io/Eva_portfolio/weatherAPI/weatherAPI.html" target="_blank" rel="noopener">成品</a></p>
<p><img src="https://i.imgur.com/odl0KcP.png" alt=""></p>
<h1 id="觀察功能需求"><a href="#觀察功能需求" class="headerlink" title="觀察功能需求"></a>觀察功能需求</h1><ul>
<li>從公開的氣象資料平台取得氣象資料</li>
<li>建立下拉式選單，選擇地區，並按下按鈕取得氣象資料</li>
<li>呈現當日天氣狀況(包含氣溫、圖示、描述)</li>
<li>呈現未來一週的天氣預報(包含日期、星期;氣溫、圖示、描述)</li>
</ul>
<h2 id="了解要串接的資料open-data"><a href="#了解要串接的資料open-data" class="headerlink" title="了解要串接的資料open data"></a>了解要串接的資料open data</h2><p>至中央氣象局-氣象開放資料平台的網站，註冊會員<br>註冊並登入之後，要取得授權碼<br><img src="https://i.imgur.com/KoRQyNL.png" alt=""><br>到<a href="https://opendata.cwb.gov.tw/dist/opendata-swagger.html" target="_blank" rel="noopener">中央氣象局開放資料平臺之資料擷取API</a>，查看要取用的資料<br>我的授權碼：CWB-F0145DA5-2539-4333-BAFD-466910C1EECC</p>
<p>參考資料：<br><a href="https://www.youtube.com/watch?v=QDdn3yrsyCQ" target="_blank" rel="noopener">https://www.youtube.com/watch?v=QDdn3yrsyCQ</a><br><a href="https://ithelp.ithome.com.tw/articles/10222662" target="_blank" rel="noopener">[Day 13 - 即時天氣] 建立一個即時天氣 App - 前置準備</a></p>
<h2 id="尋找要參考實現畫面呈現的資料"><a href="#尋找要參考實現畫面呈現的資料" class="headerlink" title="尋找要參考實現畫面呈現的資料"></a>尋找要參考實現畫面呈現的資料</h2><p>畫面主要樣式是參考：<br><a href="https://webdesign.tutsplus.com/tutorials/build-a-simple-weather-app-with-vanilla-javascript--cms-33893" target="_blank" rel="noopener">Build a Simple Weather App With Vanilla JavaScript</a></p>
<h2 id="JS部分"><a href="#JS部分" class="headerlink" title="JS部分"></a>JS部分</h2><h3 id="1-利用Ajax串接資料"><a href="#1-利用Ajax串接資料" class="headerlink" title="1.利用Ajax串接資料"></a>1.利用Ajax串接資料</h3><ul>
<li>根據平台提供的url作為取得資料的地方</li>
<li>利用sucess/error，來查看是否有成功取得資料<ul>
<li>依據console.log()出要串接的資料<br><img src="https://i.imgur.com/Kdm159o.png" alt=""></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCity</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="string">"https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-D0047-091?Authorization=CWB-F0145DA5-2539-4333-BAFD-466910C1EECC&amp;format=JSON"</span>;</span><br><span class="line"></span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"get"</span>,</span><br><span class="line">    url: url,</span><br><span class="line"></span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">   </span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'oh no'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="2-製作下拉式選單"><a href="#2-製作下拉式選單" class="headerlink" title="2.製作下拉式選單"></a>2.製作下拉式選單</h3><ul>
<li>當串到想要的資料後，希望能在下拉選單，呈現出各個地區，以供選擇<br><img src="https://i.imgur.com/I2QTip1.png" alt=""></li>
<li>因為地區有很多，以迴圈方式來填入資料<ul>
<li><code>i</code>的長度 <code>data.records.locations[0].location.length</code><br><img src="https://i.imgur.com/QaNMU8d.png" alt=""></li>
<li><code>opt = $(&#39;&lt;option&gt;&lt;/option&gt;&#39;)</code>創立選項標籤</li>
<li>利用<code>attr</code>,<code>html</code>填入該地區的index，以及地區名稱<br><img src="https://i.imgur.com/xc7bwaP.png" alt=""></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCity</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="string">"https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-D0047-091?Authorization=CWB-F0145DA5-2539-4333-BAFD-466910C1EECC&amp;format=JSON"</span>;</span><br><span class="line"></span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"get"</span>,</span><br><span class="line">    url: url,</span><br><span class="line"></span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="comment">//console.log(data);</span></span><br><span class="line">      <span class="keyword">let</span> selectCity = $(<span class="string">'#selector-list'</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.records.locations[<span class="number">0</span>].location.length; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> opt = $(<span class="string">'&lt;option&gt;&lt;/option&gt;'</span>);</span><br><span class="line">        opt.attr(<span class="string">"data-index"</span>, i);</span><br><span class="line">        opt.html(data.records.locations[<span class="number">0</span>].location[i].locationName);</span><br><span class="line">        selectCity.append(opt);</span><br><span class="line">      &#125;</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'oh no'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-點選-submit-按鈕時要跳出取得今日天氣以及未來一週的天氣"><a href="#3-點選-submit-按鈕時要跳出取得今日天氣以及未來一週的天氣" class="headerlink" title="3.點選(submit)按鈕時要跳出取得今日天氣以及未來一週的天氣"></a>3.點選(submit)按鈕時要跳出取得今日天氣以及未來一週的天氣</h3><ul>
<li>在sucess:中放入取得今日天氣、週天氣的函式<ul>
<li>在此要宣告<code>selectedCityIndex</code>變數，並取得被選取的city index<code>$(&#39;#selector-list&#39;).get(0).selectedIndex</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCity</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> url = <span class="string">"https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-D0047-091?Authorization=CWB-F0145DA5-2539-4333-BAFD-466910C1EECC&amp;format=JSON"</span>;</span><br><span class="line"></span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: <span class="string">"get"</span>,</span><br><span class="line">    url: url,</span><br><span class="line"></span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">      <span class="keyword">let</span> selectCity = $(<span class="string">'#selector-list'</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.records.locations[<span class="number">0</span>].location.length; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> opt = $(<span class="string">'&lt;option&gt;&lt;/option&gt;'</span>);</span><br><span class="line">        opt.attr(<span class="string">"data-index"</span>, i);</span><br><span class="line">        opt.html(data.records.locations[<span class="number">0</span>].location[i].locationName);</span><br><span class="line">        selectCity.append(opt);</span><br><span class="line">      &#125;</span><br><span class="line">      $(<span class="string">'button'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        clear();</span><br><span class="line">        <span class="keyword">let</span> selectedCityIndex = $(<span class="string">'#selector-list'</span>).get(<span class="number">0</span>).selectedIndex;</span><br><span class="line">        getWeather(data, selectedCityIndex);</span><br><span class="line">        weekWeather(data, selectedCityIndex);</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'oh no'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<a href="https://codertw.com/%E5%89%8D%E7%AB%AF%E9%96%8B%E7%99%BC/287007/" target="_blank" rel="noopener">jQuery獲取Select選擇的Text和Value：</a></li>
</ul>
</li>
</ul>
<h3 id="4-取得今日天氣-getWeather"><a href="#4-取得今日天氣-getWeather" class="headerlink" title="4.取得今日天氣(getWeather();)"></a>4.取得今日天氣(<code>getWeather();</code>)</h3><ul>
<li>傳入參數分別為data\locationIndex:data為串接到的天氣資料,locationIndex，為放入要取的資料中的index</li>
<li>我們想要取得的氣象資料，分別有地區、溫度(最低溫、最高溫)、天氣描述、icon圖示<ul>
<li><code>name</code>變數就是要取得資料內的地區名稱<br><img src="https://i.imgur.com/SZZSUnh.png" alt=""></li>
<li><code>weather</code>變數就是取得氣象資料<br><img src="https://i.imgur.com/pVwq3xe.png" alt=""></li>
<li><code>weatherDescription</code>以及<code>weatherCode</code>分別就是氣象描述以及給予氣象描述的編號<br><img src="https://i.imgur.com/qeUH1iw.png" alt=""></li>
</ul>
</li>
<li><code>let weatherImg = checkImg(weatherCode);</code>依據天氣描述的分類放入對應圖示</li>
<li>抓取到所需要的變數資料後，就是將要填入呈現畫面的html標籤以及變數放入</li>
<li><code>after()</code>在該區塊後面在插入想要呈現的其他標籤內容</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWeather</span>(<span class="params">data, locationIndex</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//console.log(data, locationIndex)</span></span><br><span class="line">  <span class="keyword">let</span> name = data.records.locations[<span class="number">0</span>].location[locationIndex].locationName;</span><br><span class="line">  <span class="keyword">let</span> weather = data.records.locations[<span class="number">0</span>].location[locationIndex].weatherElement;</span><br><span class="line">  <span class="comment">//console.log(name);</span></span><br><span class="line">  <span class="comment">//console.log(weather);</span></span><br><span class="line">  <span class="comment">// 天氣描述</span></span><br><span class="line">  <span class="keyword">let</span> weatherDescription = weather[<span class="number">6</span>].time[<span class="number">0</span>].elementValue[<span class="number">0</span>].value;</span><br><span class="line">  <span class="keyword">let</span> weatherCode = weather[<span class="number">6</span>].time[<span class="number">0</span>].elementValue[<span class="number">1</span>].value;</span><br><span class="line">  <span class="keyword">let</span> minTemp = weather[<span class="number">8</span>].time[<span class="number">0</span>].elementValue[<span class="number">0</span>].value;</span><br><span class="line">  <span class="keyword">let</span> maxTemp = weather[<span class="number">12</span>].time[<span class="number">0</span>].elementValue[<span class="number">0</span>].value;</span><br><span class="line">  <span class="keyword">let</span> weatherImg = checkImg(weatherCode);</span><br><span class="line">  <span class="comment">// 今天日期</span></span><br><span class="line">  <span class="comment">// let date = getDate().toUTCString();</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(weatherCode);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> li = $(<span class="string">'&lt;li&gt;&lt;/li&gt;'</span>).appendTo(<span class="string">'.cities'</span>);</span><br><span class="line">  li.addClass(<span class="string">"city"</span>);</span><br><span class="line">  li.html(<span class="string">`</span></span><br><span class="line"><span class="string">  &lt;h2 class="city-name" data-name="<span class="subst">$&#123;name&#125;</span>,"&gt;</span></span><br><span class="line"><span class="string">    &lt;span&gt;<span class="subst">$&#123;name&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;sup&gt;Today&lt;/sup&gt;</span></span><br><span class="line"><span class="string">  &lt;/h2&gt;</span></span><br><span class="line"><span class="string">  &lt;div class="city-temp"&gt;<span class="subst">$&#123;<span class="built_in">Math</span>.round(minTemp)&#125;</span>&lt;sup&gt;°C&lt;/sup&gt; ~ <span class="subst">$&#123;<span class="built_in">Math</span>.round(maxTemp)&#125;</span>&lt;sup&gt;°C&lt;/sup&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;</span></span><br><span class="line"><span class="string">  &lt;figure class='weather-icon'&gt;</span></span><br><span class="line"><span class="string">    <span class="subst">$&#123;weatherImg&#125;</span></span></span><br><span class="line"><span class="string">    &lt;figcaption&gt;<span class="subst">$&#123;weatherDescription&#125;</span>&lt;/figcaption&gt;</span></span><br><span class="line"><span class="string">  &lt;/figure&gt;</span></span><br><span class="line"><span class="string">`</span>);</span><br><span class="line">  $(<span class="string">'.cities'</span>).after(<span class="string">`&lt;h2 class="sec-h2"&gt;未來一週預報&lt;/h2&gt;`</span>)</span><br><span class="line">  $(<span class="string">'.cities'</span>).append(li);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="5-根據weather-code分類，分配的圖示-checkImg"><a href="#5-根據weather-code分類，分配的圖示-checkImg" class="headerlink" title="5.根據weather code分類，分配的圖示(checkImg())"></a>5.根據weather code分類，分配的圖示(<code>checkImg()</code>)</h3><ul>
<li>將分類的代碼區分到各個天氣狀況</li>
<li>依分類代碼下判斷，並回傳要放入的圖示</li>
<li><code>weatherTypes.isThunderstorm.includes(weatherData)</code><ul>
<li>利用<code>includes()</code>取得 weatherTypes中各天氣情形陣列中，是否有符合參數的數值<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkImg</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> weatherData = +code;</span><br><span class="line">  <span class="keyword">const</span> weatherTypes = &#123;</span><br><span class="line">    isThunderstorm: [<span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">41</span>],</span><br><span class="line">    isClear: [<span class="number">1</span>],</span><br><span class="line">    isCloudyFog: [<span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>],</span><br><span class="line">    isCloudy: [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>],</span><br><span class="line">    isFog: [<span class="number">24</span>],</span><br><span class="line">    isPartiallyClearWithRain: [</span><br><span class="line">      <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>,</span><br><span class="line">      <span class="number">13</span>, <span class="number">14</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">29</span>, <span class="number">30</span>,</span><br><span class="line">      <span class="number">31</span>, <span class="number">32</span>, <span class="number">38</span>, <span class="number">39</span>,</span><br><span class="line">    ],</span><br><span class="line">    isSnowing: [<span class="number">23</span>, <span class="number">37</span>, <span class="number">42</span>],</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// console.log(data)</span></span><br><span class="line">  <span class="comment">// console.log(weatherTypes.isPartiallyClearWithRain)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// let s = weatherTypes.isThunderstorm.includes(weatherData);</span></span><br><span class="line">  <span class="comment">// console.log(s);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (weatherTypes.isThunderstorm.includes(weatherData)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;img class="city-icon" src="./img/thunderstorm.png" alt="weather-img"&gt;`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weatherTypes.isClear.includes(weatherData)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;img class="city-icon" src="./img/clear.png" alt="weather-img"&gt;`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weatherTypes.isCloudyFog.includes(weatherData)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;img class="city-icon" src="./img/cloudyfog.png" alt="weather-img"&gt;`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weatherTypes.isCloudy.includes(weatherData)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;img class="city-icon" src="./img/cloud-and-sun.png" alt="weather-img"&gt;`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weatherTypes.isFog.includes(weatherData)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;img class="city-icon" src="./img/fog.png" alt="weather-img"&gt;`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weatherTypes.isPartiallyClearWithRain.includes(weatherData)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;img class="city-icon" src="./img/clearwithrainy.png" alt="weather-img"&gt;`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="string">`&lt;img class="city-icon" src="./img/snow.png" alt="weather-img"&gt;`</span>; &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a href="https://ithelp.ithome.com.tw/articles/10225927" target="_blank" rel="noopener">[Day 21 - 即時天氣] 處理天氣圖示以及 useMemo 的使用</a><br><a href="https://www.oxxostudio.tw/articles/201908/js-array.html#array_includes" target="_blank" rel="noopener">JavaScript Array 陣列操作方法大全 ( 含 ES6 )</a><br>includes(weatherData):<a href="https://cythilya.github.io/2017/05/08/javascript-find-item-in-an-array/" target="_blank" rel="noopener">JavaScript 陣列處理：找東西 - indexOf、$.inArray 與 filter</a><br><a href="https://opendata.cwb.gov.tw/opendatadoc/MFC/D0047.pdf" target="_blank" rel="noopener">預報因子欄位中文說明表</a></li>
</ul>
</li>
</ul>
<hr>
<h3 id="6-取得未來一週的天氣"><a href="#6-取得未來一週的天氣" class="headerlink" title="6.取得未來一週的天氣"></a>6.取得未來一週的天氣</h3><ul>
<li>此作法與取的當日天氣有些類似，不過因為要取得未來一週6天的資料，所以須以迴圈的方式來取的並填入資料</li>
<li><code>let i = 1; i &lt; 7; i++</code>從1開始，6天</li>
<li><code>timeIndex= 2 * i</code>是為了抓取一週時間所設置的index<br><img src="https://i.imgur.com/xSanS8F.png" alt=""></li>
<li>日期、星期的取得<ul>
<li>以算出tomorrow為目標，並帶入i，就會執行出往後六天的日期<br><img src="https://i.imgur.com/ZqSmPOy.png" alt=""><ul>
<li>並從上圖，分別擷取出月份、日期、星期的資料</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">weekWeather</span>(<span class="params">data, locationIndex</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// $('.week-ul').html('');</span></span><br><span class="line">  <span class="keyword">var</span> weather = data.records.locations[<span class="number">0</span>].location[locationIndex].weatherElement;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> timeIndex = <span class="number">2</span> * i;</span><br><span class="line">    <span class="keyword">let</span> weekday = $(<span class="string">'&lt;li&gt;&lt;/li&gt;'</span>).appendTo(<span class="string">'.week-ul'</span>);</span><br><span class="line">    weekday.addClass(<span class="string">'day'</span>).attr(<span class="string">'id'</span>, <span class="string">`day-<span class="subst">$&#123;i&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> weatherDescription = weather[<span class="number">6</span>].time[timeIndex].elementValue[<span class="number">0</span>].value;</span><br><span class="line">    <span class="keyword">let</span> weatherCode = weather[<span class="number">6</span>].time[timeIndex].elementValue[<span class="number">1</span>].value;</span><br><span class="line">    <span class="keyword">let</span> minTemp = weather[<span class="number">8</span>].time[timeIndex].elementValue[<span class="number">0</span>].value;</span><br><span class="line">    <span class="keyword">let</span> maxTemp = weather[<span class="number">12</span>].time[timeIndex].elementValue[<span class="number">0</span>].value;</span><br><span class="line">    <span class="keyword">let</span> weatherImg = checkImg(weatherCode);</span><br><span class="line">    <span class="comment">//console.log(weatherDescription);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//////日期、星期的擷取//////</span></span><br><span class="line">    <span class="keyword">let</span> today = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">let</span> tomorrow = <span class="keyword">new</span> <span class="built_in">Date</span>(today);</span><br><span class="line">    tomorrow.setDate(tomorrow.getDate() + i);</span><br><span class="line">    <span class="keyword">let</span> weekDay = tomorrow.getDay();</span><br><span class="line">    <span class="keyword">let</span> weekMonth = tomorrow.getMonth()</span><br><span class="line">    <span class="keyword">let</span> date = tomorrow.getDate();</span><br><span class="line">    <span class="keyword">const</span> dayNamesEn = [<span class="string">'Sun'</span>, <span class="string">'Mon'</span>, <span class="string">'Tue'</span>, <span class="string">'Wed'</span>, <span class="string">'Thu'</span>, <span class="string">'Fri'</span>, <span class="string">'Sat'</span>];</span><br><span class="line">    <span class="keyword">const</span> monthNamesEn = [</span><br><span class="line">      <span class="string">'Jan'</span>, <span class="string">'Feb'</span>, <span class="string">'Mar'</span>, <span class="string">'Apr'</span>, <span class="string">'May'</span>, <span class="string">'Jun'</span>,</span><br><span class="line">      <span class="string">'Jul'</span>, <span class="string">'Aug'</span>, <span class="string">'Sep'</span>, <span class="string">'Oct'</span>, <span class="string">'Nov'</span>, <span class="string">'Dec'</span></span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">let</span> inweekDay = dayNamesEn[weekDay]</span><br><span class="line">    <span class="keyword">let</span> inweekMonth = monthNamesEn[weekMonth];</span><br><span class="line">    <span class="keyword">let</span> indate = date;</span><br><span class="line">    <span class="comment">///////////</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    weekday.html(<span class="string">`&lt;li class="day"&gt;</span></span><br><span class="line"><span class="string">          &lt;h2 class="whichDay" data-name=""&gt;</span></span><br><span class="line"><span class="string">            &lt;span&gt;<span class="subst">$&#123;indate&#125;</span> <span class="subst">$&#123;inweekMonth&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;sup&gt;<span class="subst">$&#123;inweekDay&#125;</span>&lt;/sup&gt;</span></span><br><span class="line"><span class="string">          &lt;/h2&gt;</span></span><br><span class="line"><span class="string">          &lt;div class="week-temp"&gt;<span class="subst">$&#123;minTemp&#125;</span>&lt;sup&gt;°C&lt;/sup&gt; ~ <span class="subst">$&#123;maxTemp&#125;</span>&lt;sup&gt;°C&lt;/sup&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;figure class='weather-icon'&gt;</span></span><br><span class="line"><span class="string">            <span class="subst">$&#123;weatherImg&#125;</span></span></span><br><span class="line"><span class="string">            &lt;figcaption&gt;<span class="subst">$&#123;weatherDescription&#125;</span>&lt;/figcaption&gt;</span></span><br><span class="line"><span class="string">          &lt;/figure&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;`</span>)</span><br><span class="line">    $(<span class="string">'.week-ul'</span>).append(weekday);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://flaviocopes.com/how-to-get-tomorrow-date-javascript/" target="_blank" rel="noopener">抓取明天日期:How to get tomorrow’s date using JavaScript</a><br><a href="https://eyesofkids.gitbooks.io/javascript-start-from-es6/content/part3/datetime.html" target="_blank" rel="noopener">日期與時間</a></p>
<h3 id="7-當文件準備好"><a href="#7-當文件準備好" class="headerlink" title="7.當文件準備好"></a>7.當文件準備好</h3><ul>
<li>先執行要串接的資料</li>
<li>於選擇地區時，跳出提醒文字</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  getCity();</span><br><span class="line"></span><br><span class="line">  $(<span class="string">'#selector-list'</span>).change(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'.msg'</span>).text(<span class="string">'別忘了按下SUBMIT'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="8-清除資料"><a href="#8-清除資料" class="headerlink" title="8.清除資料"></a>8.清除資料</h3><ul>
<li>建立在點選submit後，要先執行的步驟，為清除原本頁面的資料<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clear</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">$(<span class="string">'.cities'</span>).html(<span class="string">''</span>);</span><br><span class="line">  $(<span class="string">'.sec-h2'</span>).empty(<span class="string">''</span>);</span><br><span class="line">  $(<span class="string">'.week-ul'</span>).html(<span class="string">''</span>);</span><br><span class="line">  $(<span class="string">'.msg'</span>).text(<span class="string">''</span>);</span><br></pre></td></tr></table></figure>
<a href="https://blog.csdn.net/sunpeiyumail/article/details/7665668" target="_blank" rel="noopener">JQuery中html、append、appendTo、after、insertAfter</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/02/23/API-weather/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/22/js-typingGame/"
                            aria-label=": JS實作- typingGame"
                        >
                            JS實作- typingGame
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-22T09:31:35+08:00">
	
		    Jan 22, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><a href="https://eva813.github.io/Eva_portfolio/typeGame/typeGame.html" target="_blank" rel="noopener">成品</a><br><img src="https://i.imgur.com/fC1gVUt.png" alt=""></p>
<h2 id="觀察功能需求"><a href="#觀察功能需求" class="headerlink" title="觀察功能需求"></a>觀察功能需求</h2><ul>
<li>在difficuly地方，有設置難易度，並於重新整理後，仍然儲存選擇的難易度<ul>
<li>使用到取表格中的值</li>
<li>localstorage的方式，儲存設置的難易度</li>
</ul>
</li>
<li>創造出隨機的單字，並呈現於畫面<ul>
<li>輸入的值與隨機出現的值要核對</li>
</ul>
</li>
<li>左上方有倒數計時;右上方有分數的計算<ul>
<li><code>setInterval</code>設定倒數</li>
</ul>
</li>
<li>設置reload的按鈕<ul>
<li>在要加入文字內容的容器中，添加<code>location.reload()</code></li>
</ul>
</li>
</ul>
<h2 id="HTML-部分"><a href="#HTML-部分" class="headerlink" title="HTML 部分"></a>HTML 部分</h2><p>1.icon來源<br><a href="https://www.codegrepper.com/code-examples/c/font-awesome+-+cdnjs.com+-+The+best+FOSS+CDN+for+web" target="_blank" rel="noopener">font-awesome - cdnjs</a></p>
<ul>
<li>fa-cog<br><img src="https://i.imgur.com/uN4HVq7.png" alt=""></li>
</ul>
<p>1.設置難易度選單</p>
<ul>
<li><p>difficulty為<code>label</code></p>
</li>
<li><p>下拉選單使用<code>option</code></p>
<p><img src="https://i.imgur.com/99JhtOs.png" alt=""></p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"settings"</span> <span class="attr">class</span>=<span class="string">"settings"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"settings-form"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"difficulty"</span>&gt;</span>Difficulty<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"difficulty"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"easy"</span>&gt;</span>Easy<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"medium"</span>&gt;</span>Medium<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"hard"</span>&gt;</span>Hard<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="JS-部分"><a href="#JS-部分" class="headerlink" title="JS 部分"></a>JS 部分</h2><h3 id="1-如何隨機取到已製作好的單字"><a href="#1-如何隨機取到已製作好的單字" class="headerlink" title="1.如何隨機取到已製作好的單字"></a>1.如何隨機取到已製作好的單字</h3><p><code>words[Math.floor(Math.random() * words.length)]</code></p>
<ul>
<li><code>$(&#39;#word&#39;).text(randomItem);</code>讓文字呈現於畫面中</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> words = [</span><br><span class="line">  <span class="string">'sigh'</span>,</span><br><span class="line">  <span class="string">'tense'</span>,</span><br><span class="line">  <span class="string">'airplane'</span>,</span><br><span class="line">  <span class="string">'ball'</span>,</span><br><span class="line">  <span class="string">'pies'</span>,</span><br><span class="line">  <span class="string">'juice'</span>,</span><br><span class="line">  <span class="string">'warlike'</span>,</span><br><span class="line">  <span class="string">'bad'</span>,</span><br><span class="line">  <span class="string">'north'</span>,</span><br><span class="line">  <span class="string">'dependent'</span>,</span><br><span class="line">  <span class="string">'steer'</span>,</span><br><span class="line">  <span class="string">'silver'</span>,</span><br><span class="line">  <span class="string">'highfalutin'</span>,</span><br><span class="line">  <span class="string">'superficial'</span>,</span><br><span class="line">  <span class="string">'quince'</span>,</span><br><span class="line">  <span class="string">'eight'</span>,</span><br><span class="line">  <span class="string">'feeble'</span>,</span><br><span class="line">  <span class="string">'admit'</span>,</span><br><span class="line">  <span class="string">'drag'</span>,</span><br><span class="line">  <span class="string">'loving'</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandomword</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//https://www.codegrepper.com/code-examples/javascript/get+random+word+from+array+javascript</span></span><br><span class="line">  randomItem = words[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * words.length)];</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  $(<span class="string">'#word'</span>).text(randomItem);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">getRandomword()</span><br></pre></td></tr></table></figure>


<h3 id="2-單字的核對"><a href="#2-單字的核對" class="headerlink" title="2.單字的核對"></a>2.單字的核對</h3><ul>
<li>要確認抓到的單字是否一樣</li>
<li><code>let text = $(&#39;#text&#39;).val(); let Item = randomItem;</code></li>
<li><code>console.log(Item);</code>查看抓取到的單字</li>
<li>設定文字核對一樣，就執行分數加一，以及創造另一組新單字  </li>
<li>每次輸入完，並呈現新單字的同時，要清空輸入框的內容<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//輸入單字核對</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkWord</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> text = $(<span class="string">'#text'</span>).val();</span><br><span class="line">  <span class="keyword">let</span> Item = randomItem;</span><br><span class="line">  <span class="comment">//console.log(Item);</span></span><br><span class="line">  <span class="keyword">if</span> (text === Item) &#123;</span><br><span class="line">    getRandomword();</span><br><span class="line">    updateScore();</span><br><span class="line">    $(<span class="string">'#text'</span>).val(<span class="string">""</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="3-倒數計時"><a href="#3-倒數計時" class="headerlink" title="3.倒數計時"></a>3.倒數計時</h3><ul>
<li>設置起始時間為10</li>
<li><code>setInterval()</code>「不斷循環」地固定延遲了某段時間之後，才去執行對應的程式碼，使用 <code>clearInterval()</code>来終止</li>
<li>在秒數倒計完之後，終止循環，並呈現結束畫面</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Init time</span></span><br><span class="line"><span class="keyword">let</span> time = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// 倒數計時</span></span><br><span class="line"><span class="comment">//https://jsfiddle.net/satyasrinivaschekuri/y03m54Le/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countTime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  time--;</span><br><span class="line">  $(<span class="string">'#time'</span>).text(<span class="string">`<span class="subst">$&#123;time&#125;</span>s`</span>)</span><br><span class="line">  <span class="keyword">if</span> (time &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    clearInterval(downloadTimer);</span><br><span class="line">    gameOver();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//   &#125; else &#123;</span></span><br><span class="line">  <span class="comment">//     time--;</span></span><br><span class="line">  <span class="comment">//     $('#time').text(`$&#123;time&#125;s`)</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> downloadTimer = setInterval(countTime, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>


<h4 id="4-倒數計時結束，終止畫面"><a href="#4-倒數計時結束，終止畫面" class="headerlink" title="4.倒數計時結束，終止畫面"></a>4.倒數計時結束，終止畫面</h4><p><img src="https://i.imgur.com/r9oXFmc.png" alt=""></p>
<ul>
<li>在該div容器中，插入要顯示的標籤與內容</li>
<li>利用<code>display:flex</code>呈現該內容</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//遊戲結束</span></span><br><span class="line"><span class="comment">//location.reload()</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gameOver</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'#end-game-container'</span>).html(<span class="string">`&lt;h1&gt;Time ran out&lt;/h1&gt;</span></span><br><span class="line"><span class="string">  &lt;p&gt;Your final score is <span class="subst">$&#123;score&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">  &lt;button onclick="location.reload()"&gt;Reload&lt;/button&gt;</span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">  <span class="comment">// 顯示指定的flex容器</span></span><br><span class="line">  $(<span class="string">"#end-game-container"</span>).css(<span class="string">'display'</span>, <span class="string">'flex'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="5-設置難易度"><a href="#5-設置難易度" class="headerlink" title="5.設置難易度"></a>5.設置難易度</h3><ul>
<li>設定在表格變動選項後的綁定事件</li>
<li>抓取難易度選項的值，並以其值作為儲存local storage的內容</li>
<li>接著將儲存的難易度，呈現於畫面<code>$(&#39;#difficulty&#39;).val()</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果儲存端不是空值(已有選擇)，就以此為主，否則的話就是medium</span></span><br><span class="line"><span class="keyword">let</span> difficulty = localStorage.getItem(<span class="string">'difficulty'</span>) !== <span class="literal">null</span></span><br><span class="line">  ? localStorage.getItem(<span class="string">'difficulty'</span>)</span><br><span class="line">  : <span class="string">'medium'</span>;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"> <span class="comment">//設置select的選擇</span></span><br><span class="line">  $(<span class="string">'form'</span>).change(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    difficulty = $(<span class="string">'#difficulty'</span>).val();</span><br><span class="line">    localStorage.setItem(<span class="string">'difficulty'</span>, difficulty);</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//使畫面的難易度選擇，呈現儲存的選項</span></span><br><span class="line">  $(<span class="string">'#difficulty'</span>).val(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> a = $(<span class="string">'#difficulty'</span>).val()</span><br><span class="line">    <span class="keyword">if</span> (localStorage.getItem(<span class="string">'difficulty'</span>) !== <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> a = localStorage.getItem(<span class="string">'difficulty'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> a = <span class="string">'medium'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>


<h3 id="6-調整難易度，每次打對題目可以增加秒數"><a href="#6-調整難易度，每次打對題目可以增加秒數" class="headerlink" title="6.調整難易度，每次打對題目可以增加秒數"></a>6.調整難易度，每次打對題目可以增加秒數</h3><ul>
<li>在<code>checkWord()</code>函式中，如過答對題目的條件下設置</li>
<li>判斷如果難易度為高、中、低時，可以添加的秒數分別為多少</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//time += 5;</span></span><br><span class="line">    <span class="keyword">if</span> (difficulty === <span class="string">'hard'</span>) &#123;</span><br><span class="line">      time += <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (difficulty === <span class="string">'medium'</span>) &#123;</span><br><span class="line">      time += <span class="number">3</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      time += <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判斷完之後，隨之繼續倒數時間</span></span><br><span class="line">    countTime();</span><br></pre></td></tr></table></figure>
<h3 id="7-設定結束時，分數-gt-5-，會出現good-job圖示"><a href="#7-設定結束時，分數-gt-5-，會出現good-job圖示" class="headerlink" title="7.設定結束時，分數(&gt;=5)，會出現good job圖示"></a>7.設定結束時，分數(&gt;=5)，會出現good job圖示</h3><p><img src="https://i.imgur.com/2YKGGsw.png" alt=""></p>
<ul>
<li>在css檔案加入show的class，並插入該圖示的顯現方式</li>
<li>於js部分，將判斷式，加入<code>gameOver()</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增加判斷，分數達到一標準，會出現圖示</span></span><br><span class="line">  <span class="keyword">let</span> s = score</span><br><span class="line">  <span class="built_in">console</span>.log(s)</span><br><span class="line">  <span class="keyword">if</span> (s &gt; = <span class="number">5</span>) &#123;</span><br><span class="line">    $(<span class="string">"#end-game-container"</span>).find(<span class="string">'img'</span>).addClass(<span class="string">'show'</span>);</span><br><span class="line"></span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/22/js-typingGame/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/22/js-guessNumber/"
                            aria-label=": JS實作- 猜數字遊戲"
                        >
                            JS實作- 猜數字遊戲
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-22T09:28:14+08:00">
	
		    Jan 22, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><a href="https://eva813.github.io/Eva_portfolio/guessNumber/guessNumber.html" target="_blank" rel="noopener">成品</a></p>
<h2 id="觀察功能需求"><a href="#觀察功能需求" class="headerlink" title="觀察功能需求"></a>觀察功能需求</h2><ul>
<li>練習語音辨識的使用： speech recognition API<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition" target="_blank" rel="noopener">SpeechRecognition-MDN</a></li>
</ul>
</li>
<li>根據不同情形，有不一樣的回覆<ul>
<li>依據猜測數字的情形給予：go higher,go lower</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/IjVZV5d.png" alt=""></p>
<ul>
<li>數字猜中後，會出現恭喜答對等敘述，並呈現<code>Play Again</code>的按鈕</li>
</ul>
<p><img src="https://i.imgur.com/MhtrTrR.png" alt=""></p>
<h2 id="js部分"><a href="#js部分" class="headerlink" title="js部分"></a>js部分</h2><h3 id="1-設定隨機數字"><a href="#1-設定隨機數字" class="headerlink" title="1.設定隨機數字"></a>1.設定隨機數字</h3><ul>
<li><code>Math.floor(Math.random() * 100) + 1</code>取得1-100</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 取得隨1-100隨機數字</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">theRandomNum</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">100</span>) + <span class="number">1</span>;</span><br><span class="line">  <span class="comment">//沒有加1，數字會是0-99</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> randomNum = theRandomNum();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'randomNum:'</span>, randomNum);</span><br></pre></td></tr></table></figure>

<h3 id="2-SpeechRecognition"><a href="#2-SpeechRecognition" class="headerlink" title="2.SpeechRecognition"></a>2.SpeechRecognition</h3><ul>
<li>第一步要先將SpeechRecognition設為全域變數<ul>
<li>檢查瀏覽器是否有支援不需要 prefix 的 speechRecognition 介面，若沒有則將 webkit 標頭的 webkitSpeechRecognition 指定給該全域變數，</li>
</ul>
</li>
<li>要使用 speechRecognition ，必須透過 SpeechRecognition 建構式建立一個物件實例。</li>
<li><code>recognition.onresult</code> 設定取得語音辨識的結果</li>
<li>執行<code>writeMessage(myWord);checkNumber(myWord);</code>兩個函式<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> SpeechRecognition = <span class="built_in">window</span>.SpeechRecognition || <span class="built_in">window</span>.webkitSpeechRecognition;</span><br><span class="line">  <span class="keyword">var</span> recognition = <span class="keyword">new</span> SpeechRecognition();</span><br><span class="line">  <span class="comment">//設定辨識語言。</span></span><br><span class="line">  recognition.lang = <span class="string">'zh-tw'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(e);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 開始語音辨識</span></span><br><span class="line">recognition.start();</span><br><span class="line"><span class="comment">//取得語音辨識的結果</span></span><br><span class="line">recognition.onresult = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//console.log(event);</span></span><br><span class="line">  <span class="keyword">let</span> myWord = event.results[<span class="number">0</span>][<span class="number">0</span>].transcript</span><br><span class="line">  <span class="comment">//console.log('You said: ', myWord);</span></span><br><span class="line">  writeMessage(myWord);</span><br><span class="line">  checkNumber(myWord);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li>簡易測試，取得得語音辨識 :point_down: <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//取得語音辨識的結果</span></span><br><span class="line">recognition.onresult = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'You said: '</span>, event.results[<span class="number">0</span>][<span class="number">0</span>].transcript);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/QLWaJB0.png" alt=""></li>
</ul>
<p><img src="https://i.imgur.com/FfF5Aqv.png" alt=""></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API/Using_the_Web_Speech_API" target="_blank" rel="noopener">Using the Web Speech API</a><br><a href="https://www.freecodecamp.org/news/how-to-build-a-simple-speech-recognition-app-a65860da6108/" target="_blank" rel="noopener">How to build a simple speech recognition app</a></p>
<h3 id="3-記錄下使用者所說的話"><a href="#3-記錄下使用者所說的話" class="headerlink" title="3.記錄下使用者所說的話"></a>3.記錄下使用者所說的話</h3><ul>
<li>在<code>msg</code>的div插入辨識語言的結果文字<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">writeMessage</span>(<span class="params">myWord</span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'#msg'</span>).html(<span class="string">`</span></span><br><span class="line"><span class="string">  &lt;div&gt;You said:&lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;span class="box"&gt;<span class="subst">$&#123;myWord&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">  `</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-核對隨機數字與猜的數字是否一致"><a href="#4-核對隨機數字與猜的數字是否一致" class="headerlink" title="4.核對隨機數字與猜的數字是否一致"></a>4.核對隨機數字與猜的數字是否一致</h3></li>
<li>設定當辨識到的不是數字：This is not a valid number</li>
<li>當範圍不在1-100之間：Number must be between 1 and 100</li>
<li>猜中數字的結果：Congrats! You have guessed the number!</li>
<li>數字猜測GO LOWER,GO HIGHER<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkNumber</span>(<span class="params">myWord</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> number = +myWord; <span class="comment">//轉為數字</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Number</span>.isNaN(number)) &#123;</span><br><span class="line">    $(<span class="string">'#msg'</span>).append(<span class="string">`&lt;div&gt;This is not a valid number&lt;/div&gt;`</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//設定語句</span></span><br><span class="line">  <span class="keyword">if</span> (number &gt; <span class="number">100</span> || number &lt; <span class="number">1</span>) &#123;</span><br><span class="line">    $(<span class="string">'#msg'</span>).append(<span class="string">`&lt;div&gt;Number must be between 1 and 100&lt;/div&gt;`</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (number === randomNum) &#123;</span><br><span class="line">    $(<span class="string">'body'</span>).html(<span class="string">`</span></span><br><span class="line"><span class="string">    &lt;h2&gt;Congrats! You have guessed the number! &lt;br&gt;&lt;br&gt; </span></span><br><span class="line"><span class="string">    It was <span class="subst">$&#123;number&#125;</span>&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;button class="play-again" id="play-again" &gt; Play Again &lt;/button&gt;</span></span><br><span class="line"><span class="string">    `</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (number &gt; randomNum) &#123;</span><br><span class="line">    $(<span class="string">'#msg'</span>).append(<span class="string">`&lt;div&gt;GO LOWER&lt;/div&gt;`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $(<span class="string">'#msg'</span>).append(<span class="string">`&lt;div&gt;GO HIGHER&lt;/div&gt;`</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li>透過 Number.isNaN() 語法可以判斷，若回傳 true，則表示值為 NaN，否則為 false</li>
</ul>
<p><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN" target="_blank" rel="noopener">Number.isNaN()</a></p>
<h3 id="5-使猜數字可以持續猜，直到答對為止"><a href="#5-使猜數字可以持續猜，直到答對為止" class="headerlink" title="5.使猜數字可以持續猜，直到答對為止"></a>5.使猜數字可以持續猜，直到答對為止</h3><ul>
<li><code>recognition.onend</code>使用於控制語音識別的服務，並應用在結束語音識別時的情境。</li>
<li><code>recognition.start();</code>每次數字猜完後，都會重新開始語音識別，直到猜中。</li>
<li>在數字猜中後，會出現<code>play again</code>按鈕，所以要設定此按鈕，按下後能夠重新開始遊戲 =&gt;<code>window.location.reload()</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//https://stackoverflow.com/questions/51080738/how-to-make-speech-recognition-continous-for-a-fix-time-period</span></span><br><span class="line">recognition.onend = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  recognition.start();</span><br><span class="line">  <span class="comment">//點擊按鈕，重啟遊戲畫面</span></span><br><span class="line">  $(<span class="string">'body'</span>).find(<span class="string">'#play-again'</span>).click(</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">window</span>.location.reload();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://ithelp.ithome.com.tw/articles/10187827" target="_blank" rel="noopener">實戰智慧插座 14 - 我說開燈就開燈 ( 語音辨識 )</a></p>
<hr>
<p>其他參考資料:<br><a href="https://tutorialzine.com/2017/08/converting-from-speech-to-text-with-javascript" target="_blank" rel="noopener">Converting from Speech to Text with JavaScript</a><br><a href="https://davidwalsh.name/speech-recognition" target="_blank" rel="noopener">JavaScript Speech Recognition</a><br><a href="https://ithelp.ithome.com.tw/articles/10248999" target="_blank" rel="noopener">Day21 – Speech Recognition (lukechu)</a><br><a href="https://ithelp.ithome.com.tw/articles/10196577" target="_blank" rel="noopener">Day 21 - Speech Detection (Arel)</a><br><a href="https://ithelp.ithome.com.tw/articles/10224891?sc=rss.qu" target="_blank" rel="noopener">DAY20 : Speech Detection (BROWN)</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/22/js-guessNumber/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/16/js-countDown/"
                            aria-label=": JS實作- 新年倒數"
                        >
                            JS實作- 新年倒數
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-16T09:17:11+08:00">
	
		    Jan 16, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><a href="https://eva813.github.io/Eva_portfolio/countDown/countDown.html" target="_blank" rel="noopener">成品</a></p>
<p><img src="https://i.imgur.com/et0bQ96.png" alt=""></p>
<h2 id="觀察功能需求"><a href="#觀察功能需求" class="headerlink" title="觀察功能需求"></a>觀察功能需求</h2><ul>
<li>計算天、小時、分鐘、秒數的倒數</li>
<li>最下面顯示倒數年份</li>
<li>page load的圖示(會旋轉1秒鐘)之後顯示倒數</li>
</ul>
<h2 id="CSS部分"><a href="#CSS部分" class="headerlink" title="CSS部分"></a>CSS部分</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*增加讓螢幕寬度變化時，字的大小隨之改變</span></span><br><span class="line"><span class="comment">如果螢幕寬度為 500px 以下*/</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">500px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">45px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.time</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.time</span> <span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.time</span> <span class="selector-tag">small</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://ithelp.ithome.com.tw/articles/10196578" target="_blank" rel="noopener">Day22：小事之 Media Query
</a><a href="https://malagege.github.io/blog/2019/05/05/CSS%E8%A8%AD%E5%AE%9A%E9%9F%BF%E6%87%89%E5%BC%8F-RWD-%E6%9C%89%E5%B9%BE%E7%A8%AE%E6%96%B9%E6%B3%95/" target="_blank" rel="noopener">CSS設定響應式(RWD)有幾種方法</a></p>
<h2 id="JS部分"><a href="#JS部分" class="headerlink" title="JS部分"></a>JS部分</h2><h3 id="1-宣告最終日期-新的一年1-1的日期"><a href="#1-宣告最終日期-新的一年1-1的日期" class="headerlink" title="1. 宣告最終日期(新的一年1/1的日期)"></a>1. 宣告最終日期(新的一年1/1的日期)</h3><ul>
<li>要先宣告取得目前的年份</li>
<li>再利用此變數帶入，要倒數的最終日期</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//getFullYear(),用來取得日期物件當中本地時間的年份</span></span><br><span class="line"><span class="keyword">const</span> currentYear = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line"><span class="keyword">const</span> newYearTime = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">`January 01 <span class="subst">$&#123;currentYear + <span class="number">1</span>&#125;</span> 00:00:00`</span>);</span><br></pre></td></tr></table></figure>

<p>時間日期<br><a href="https://www.fooish.com/javascript/date" target="_blank" rel="noopener">JavaScript Date 時間和日期</a><br><a href="https://www.w3schools.com/jsref/jsref_getfullyear.asp" target="_blank" rel="noopener">getFullYear() Method</a></p>
<h3 id="2-倒數計時的日、時、分、秒"><a href="#2-倒數計時的日、時、分、秒" class="headerlink" title="2. 倒數計時的日、時、分、秒"></a>2. 倒數計時的日、時、分、秒</h3><ul>
<li><p><code>currentTime</code> 取得目前時間<br><img src="https://i.imgur.com/b3sgw3L.png" alt=""></p>
</li>
<li><p><code>diff = newYearTime - currentTime;</code>:計算出目前與未來最終日期的時間差異(此相減得出的是毫秒)<br><img src="https://i.imgur.com/ly5elua.png" alt=""></p>
</li>
<li><p>計算天數、小時、秒數</p>
<ul>
<li><code>const d</code>1天等於24小時，1小時等於60分鐘，1分鐘等於60秒，1秒等於1000毫秒。所以，msec / 1000 / 60 / 60 / 24 保留整數就是天數。</li>
<li><code>h = Math.floor(diff / 1000 / 60 / 60) % 24</code>:計算小時，並以除以24之後的餘數，來得到剩餘的小時。</li>
<li>分鐘、以及秒數也是用同樣方式計算取得。</li>
</ul>
</li>
<li><p>將取得的日期帶入畫面</p>
<ul>
<li>使用<code>.html()</code>：<code>$(&#39;#days&#39;).html(d);</code></li>
<li>在小時、分鐘、秒，是以兩位數呈現，需要當數字少於10，要呈現01,02…，所以使用三元運算子<code>$(&#39;#hours&#39;).html(h &lt; 10 ? &#39;0&#39; + h : h);</code>，當數字小於10，要0+h;反之就只要呈現h。</li>
</ul>
</li>
<li><p>最後要設定<code>setInterval(updateCountdown, 1000);</code> ，使其每秒倒數。</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateCountdown</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> currentTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="comment">//console.log(currentTime);</span></span><br><span class="line">  <span class="keyword">const</span> diff = newYearTime - currentTime;</span><br><span class="line">  <span class="comment">//diff計算出來是毫秒</span></span><br><span class="line">  <span class="comment">//days</span></span><br><span class="line">  <span class="keyword">const</span> d = <span class="built_in">Math</span>.floor(diff / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>);</span><br><span class="line">  <span class="comment">//取得除以24之後的餘數</span></span><br><span class="line">  <span class="keyword">const</span> h = <span class="built_in">Math</span>.floor(diff / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span>) % <span class="number">24</span>;</span><br><span class="line">  <span class="keyword">const</span> m = <span class="built_in">Math</span>.floor(diff / <span class="number">1000</span> / <span class="number">60</span>) % <span class="number">60</span>;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="built_in">Math</span>.floor(diff / <span class="number">1000</span>) % <span class="number">60</span>;</span><br><span class="line">  $(<span class="string">'#days'</span>).html(d);</span><br><span class="line">  <span class="comment">//當數字少於10，要呈現01,02...</span></span><br><span class="line">  $(<span class="string">'#hours'</span>).html(h &lt; <span class="number">10</span> ? <span class="string">'0'</span> + h : h);</span><br><span class="line">  $(<span class="string">'#minutes'</span>).html(m &lt; <span class="number">10</span> ? <span class="string">'0'</span> + m : m);</span><br><span class="line">  $(<span class="string">'#seconds'</span>).html(s &lt; <span class="number">10</span> ? <span class="string">'0'</span> + s : s);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//設定每一秒都會循環倒數</span></span><br><span class="line">setInterval(updateCountdown, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<p>參考資料：<br><a href="http://zhi-yuan-chenge.blogspot.com/2015/10/jsjavascript_16.html" target="_blank" rel="noopener">【JS】javascript時間Date()介紹與補零應用的技巧!!!</a><br><a href="https://kknews.cc/zh-tw/code/8g4vo3e.html" target="_blank" rel="noopener">js和vue實現時分秒倒計時的方法</a><br>三元運算子：<br><a href="https://ithelp.ithome.com.tw/articles/10218274" target="_blank" rel="noopener">Day19【ES6 小筆記】三元運算子-以哥哥的擇偶條件為例
</a></p>
<h3 id="3-載入圖示"><a href="#3-載入圖示" class="headerlink" title="3.載入圖示"></a>3.載入圖示</h3><ul>
<li>設定在載入之後，要隔多久執行功能</li>
<li>在此設定載入1秒之後，要移除loading畫面，呈現出倒數的時間</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'#loading'</span>).remove();</span><br><span class="line">  <span class="comment">//要在css檔案的countdown，先設置display：none</span></span><br><span class="line">  $(<span class="string">'#countdown'</span>).css(<span class="string">'display'</span>, <span class="string">'flex'</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<h3 id="4-放入要倒數的年份"><a href="#4-放入要倒數的年份" class="headerlink" title="4.放入要倒數的年份"></a>4.放入要倒數的年份</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#year'</span>).html(currentYear + <span class="number">1</span>)</span><br></pre></td></tr></table></figure>








<hr>
<p><a href="https://ithelp.ithome.com.tw/articles/10238189" target="_blank" rel="noopener">網頁練習 -倒數計時器實作(上)</a><br><a href="https://www.cssscript.com/best-countdown-timer/" target="_blank" rel="noopener">5 Best Countdown Timer JavaScript Libraries (2020 Update)</a><br><a href="https://ithelp.ithome.com.tw/articles/10238547" target="_blank" rel="noopener">網頁練習 -倒數計時器實作(下)</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/16/js-countDown/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/16/js-scrollBlog/"
                            aria-label=": JS實作- scrollBlog"
                        >
                            JS實作- scrollBlog
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-16T09:03:51+08:00">
	
		    Jan 16, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><a href="https://eva813.github.io/Eva_portfolio/scrollBlog/scrollBlog.html" target="_blank" rel="noopener">成品</a></p>
<h2 id="觀察功能需求"><a href="#觀察功能需求" class="headerlink" title="觀察功能需求"></a>觀察功能需求</h2><p>1.隨著頁面的往下捲動，會載入新的資料</p>
<ul>
<li>一開始頁面載入，會呈現5筆資料，捲動往下，會再載入5筆</li>
<li>使用<a href="https://jsonplaceholder.typicode.com/" target="_blank" rel="noopener">{JSON} Placeholder</a>的資料來串接(運用ajax)</li>
<li>設定捲動位置，並於該位置時，會呈現載入的圖示</li>
<li>setTimeout來呈現載入的時間與畫面</li>
</ul>
<p>2.網頁的各資料是有順序，資料左上會有編碼</p>
<ul>
<li>利用資料本身的id作為序號</li>
<li>於js時，帶入該變數取值</li>
</ul>
<h2 id="css部分"><a href="#css部分" class="headerlink" title="css部分"></a>css部分</h2><h3 id="1-製作左上方，數字"><a href="#1-製作左上方，數字" class="headerlink" title="1.製作左上方，數字"></a>1.製作左上方，數字</h3><ul>
<li>利用<code>position: absolute;</code>定位位置，並利用並利用<code>top</code>、<code>left</code>調整位置</li>
<li>使用<code>display: flex;</code>調整數字的位置，<code>align-items: center;
justify-content: center;</code>使水平、垂直置中<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post</span> <span class="selector-class">.number</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#296ca8</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">7px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/FkIcque.png" alt=""></li>
</ul>
<h3 id="2-載入畫面的原點圖示"><a href="#2-載入畫面的原點圖示" class="headerlink" title="2.載入畫面的原點圖示"></a>2.載入畫面的原點圖示</h3><ul>
<li>先製作load的基本設定，如flex的排列、位置固定於下方，以及透明度的顯示</li>
<li>針對原點訂定背景、原點大小。新增動畫效果，<code>animation: bounce 0.5s ease-in infinite;</code></li>
<li>動畫名稱<code>@keyframes bounce</code>，設定在某時間點，<code>translateY</code>，的位置。</li>
<li>為了讓圓點的跳動時間不同，針對2、3的原點，設定延遲時間<code>animation-delay: 0.2s;</code><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loader</span> &#123;</span><br><span class="line">  <span class="comment">/* opacity: 0; */</span></span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">position</span>: fixed; <span class="comment">/*位置固定於最下面*/</span></span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">0.3s</span> ease-in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.loader</span><span class="selector-class">.show</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*製作圓點*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.circle</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">animation</span>: bounce <span class="number">0.5s</span> ease-in infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.circle</span><span class="selector-pseudo">:nth-of-type(2)</span> &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0.1s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.circle</span><span class="selector-pseudo">:nth-of-type(3)</span> &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">0.2s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> bounce &#123;</span><br><span class="line">  0%,</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  50% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">10px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="https://i.imgur.com/RuhdRt7.gif" alt=""></p>
<h2 id="js部分"><a href="#js部分" class="headerlink" title="js部分"></a>js部分</h2><h3 id="1-jsonplaceholder"><a href="#1-jsonplaceholder" class="headerlink" title="1.jsonplaceholder:"></a>1.jsonplaceholder:</h3><ul>
<li>為取得資料的位置</li>
<li>抓取5筆的方式，後面參數的設定而來<br><a href="https://jsonplaceholder.typicode.com/posts?_limit5" target="_blank" rel="noopener">https://jsonplaceholder.typicode.com/posts?_limit5</a></li>
</ul>
<h3 id="2-使用ajax串接API"><a href="#2-使用ajax串接API" class="headerlink" title="2.使用ajax串接API"></a>2.使用ajax串接API</h3><ul>
<li><a href="https://hackmd.io/Ciayzu-vQcyrh-WeVNeOPQ?view" target="_blank" rel="noopener">Async/Await 非同步流程控制-筆記</a></li>
<li>參考<a href="https://petetasker.com/using-async-await-jquerys-ajax" target="_blank" rel="noopener">Using async await with jQuery’s $.ajax</a>、<a href="https://stackoverflow.com/questions/27612372/how-to-await-the-ajax-request" target="_blank" rel="noopener">How to await the ajax request?</a>，使用jQuery’s<code>$.ajax</code>執行async</li>
<li>在try裡面，放入一般<code>$.ajax</code>抓取API資料的方式，如url、type、dataType</li>
<li>首先，在連結的部分，我們希望每次抓取5筆資料，呈現1頁，所以在外面設置<code>let limit = 5;let page = 1</code>於url中加入該變數</li>
<li>在抓取資料成功時，放入function，並用<code>$.each</code>來執行<ul>
<li>在<code>$.each</code>先傳入該資料(data)陣列，其<code>function (index, value)</code>放入索引以及值的內容。</li>
<li>宣告<code>postEl</code>變數，創造名為<code>post</code>的<code>div</code>=&gt; <code>$(&#39;\&lt;div /&gt;&#39;)</code></li>
<li>加入<code>post</code>class</li>
<li>加入html</li>
<li>最後將此變數，放置呈現文章的容器<code>postEl.appendTo(&#39;#posts-container&#39;);</code></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> limit = <span class="number">5</span></span><br><span class="line"><span class="keyword">let</span> page = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">doAjax</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    result = <span class="keyword">await</span> $.ajax(&#123;</span><br><span class="line">      url: <span class="string">`https://jsonplaceholder.typicode.com/posts?_limit=<span class="subst">$&#123;limit&#125;</span>&amp;_page=<span class="subst">$&#123;page&#125;</span>`</span>,</span><br><span class="line">      type: <span class="string">'get'</span>,</span><br><span class="line">      dataType: <span class="string">'json'</span>,</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      </span><br><span class="line">      $.each(data, <span class="function"><span class="keyword">function</span> (<span class="params">index, value</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">const</span> postEl = $(<span class="string">'&lt;div /&gt;'</span>).addClass(<span class="string">'post'</span>).html(<span class="string">`&lt;div class="number"&gt;<span class="subst">$&#123;value.id&#125;</span>&lt;/div&gt; &lt;div class="post-info"&gt;&lt;h2 class="post-title"&gt;<span class="subst">$&#123;value.title&#125;</span>&lt;/h2&gt;&lt;p class="post-body"&gt;<span class="subst">$&#123;value.body&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;`</span>)</span><br><span class="line">          <span class="comment">//console.log(postEl)</span></span><br><span class="line">          postEl.appendTo(<span class="string">'#posts-container'</span>);</span><br><span class="line">          <span class="comment">//$('#posts-container').append(postEl)</span></span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">       </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(error);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">doAjax();</span><br></pre></td></tr></table></figure>

<p>查看是否有成功取得資料：<code>console.log(data);</code><br><img src="https://i.imgur.com/wJPpdfh.png" alt=""></p>
<h3 id="使用jQuery創造div"><a href="#使用jQuery創造div" class="headerlink" title="使用jQuery創造div"></a>使用jQuery創造div</h3><p><a href="https://stackoverflow.com/questions/10402567/jquery-div-vs-div" target="_blank" rel="noopener">https://stackoverflow.com/questions/10402567/jquery-div-vs-div</a></p>
<h4 id="each"><a href="#each" class="headerlink" title="each()"></a><code>each()</code></h4><p><a href="https://api.jquery.com/jquery.each/" target="_blank" rel="noopener">jQuery.each()</a></p>
<h3 id="3-Infinite-Scroll無限捲動-瀑布流"><a href="#3-Infinite-Scroll無限捲動-瀑布流" class="headerlink" title="3.Infinite Scroll無限捲動(瀑布流)"></a>3.Infinite Scroll無限捲動(瀑布流)</h3><ul>
<li><code>scrollTop</code>網頁右邊的卷軸到最上端網頁的距離有多少</li>
<li><code>scrollHeight</code> 取得整個沒被擋住的高、<code>clientHeight</code> 取得元素的高度（含padding 不含 border）</li>
<li>完整內容高度 (scrollHeight) = 內容頂端與捲軸頂端的距離 (scrollTop) + 捲軸本身高度 (clientHeight) + 內容底端與捲軸底端的距離。</li>
</ul>
<p>例子:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> scrollVal = $(<span class="keyword">this</span>).scrollTop();</span><br><span class="line">    $(<span class="string">"span.qScrollTop"</span>).text(scrollVal);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(scrollVal &gt; <span class="number">500</span>)&#123;</span><br><span class="line">  <span class="comment">/* 如果滾動的物件捲動 &gt; 500 則觸發指定的動作。*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="注意：window本身沒有scrollTop-Left這個屬性，所以window-scrollTop是undefined的"><a href="#注意：window本身沒有scrollTop-Left這個屬性，所以window-scrollTop是undefined的" class="headerlink" title="注意：window本身沒有scrollTop/Left這個屬性，所以window.scrollTop是undefined的"></a>注意：window本身沒有scrollTop/Left這個屬性，所以window.scrollTop是undefined的</h4><p>所以可能要從body、document來取得</p>
<h4 id="本段落語法："><a href="#本段落語法：" class="headerlink" title="本段落語法："></a>本段落語法：</h4><ul>
<li>上述說明各視窗高度得解釋，在此if判斷式中<code>scrollTop + clientHeight &gt;= scrollHeight - 5</code>來計算，當捲軸捲到該位置時，要呈現載入畫面</li>
<li>接著根據載入畫面函式，來放入載入以及呈現接續畫面得設定<ul>
<li>使用<code>setTimeout()</code>，在1秒後消除載入圖示，接著在300毫秒後，馬上換頁執行載入新資料</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scrollTop = $(<span class="keyword">this</span>).scrollTop();</span><br><span class="line">  <span class="keyword">var</span> scrollHeight = $(<span class="string">'body'</span>).prop(<span class="string">"scrollHeight"</span>);</span><br><span class="line">  <span class="comment">//一樣 var scrollHeight2 = document.documentElement.scrollHeight;</span></span><br><span class="line">  <span class="keyword">var</span> clientHeight = <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line">  <span class="comment">//https://stackoverflow.com/questions/10423759/plain-javascript-to-jquery-clientheight</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// console.log('scrollTop:', scrollTop);</span></span><br><span class="line">  <span class="comment">// console.log('scrollHeight:', scrollHeight);</span></span><br><span class="line">  <span class="comment">// console.log('clientHeight:', clientHeight);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (scrollTop + clientHeight &gt;= scrollHeight - <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="comment">//console.log('show up 123')</span></span><br><span class="line">    showLoading();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//顯示載入圖示，並取得更多串接資料</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showLoading</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'.loader'</span>).addClass(<span class="string">'show'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    $(<span class="string">'.loader'</span>).removeClass(<span class="string">'show'</span>);</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      page++;</span><br><span class="line">      doAjax();</span><br><span class="line">    &#125;, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">  &#125;, <span class="number">1000</span>);  <span class="comment">//1秒之後消失</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>參考資料：<br><a href="https://pjchender.blogspot.com/2015/04/jquery.html" target="_blank" rel="noopener">[筆記] 計算網頁底部位置，當網頁達到底部時才產生效果─jQuery</a><br><a href="https://shubo.io/element-size-scrolling/#%E7%84%A1%E9%99%90%E6%8D%B2%E5%8B%95-infinite-scroll" target="_blank" rel="noopener">一次搞懂 clientHeight/scrollHeight/scrollTop的區別</a><br><a href="https://kuro.tw/posts/2019/02/23/%E8%AB%87%E8%AB%87-JavaScript-%E7%9A%84-setTimeout-%E8%88%87-setInterval/" target="_blank" rel="noopener">談談 JavaScript 的 setTimeout 與 setInterval</a></p>
<h3 id="4-篩選輸入框資料"><a href="#4-篩選輸入框資料" class="headerlink" title="4.篩選輸入框資料"></a>4.篩選輸入框資料</h3><ul>
<li>綁定事件為<code>.keyup</code>指放開鍵盤的那個剎那，觸發該事件</li>
<li>執行的函式內容為：<ul>
<li><code>var text</code>取得輸入值並轉為小寫</li>
<li>利用迴圈，去搜尋關鍵字，判斷，值轉為小寫文字的內容是否符合條件</li>
<li>-1 ：意指條件不符合</li>
<li><code>indexOf()</code> 方法用來判斷字串字串變數中是否包含某字串。</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//輸入框搜尋//https://makitweb.com/jquery-search-text-in-the-element-with-contains-selector/  (=&gt;Loop all .content )</span></span><br><span class="line">  $(<span class="string">'#filter'</span>).keyup(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Search text</span></span><br><span class="line">    <span class="keyword">var</span> text = $(<span class="string">'#filter'</span>).val().toLowerCase();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Hide all content class element</span></span><br><span class="line">    $(<span class="string">'.post'</span>).hide();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Search </span></span><br><span class="line">    $(<span class="string">'.post'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> ($(<span class="keyword">this</span>).text().toLowerCase().indexOf(<span class="string">""</span> + text + <span class="string">""</span>) != <span class="number">-1</span>) &#123;</span><br><span class="line">        $(<span class="keyword">this</span>).closest(<span class="string">'.post'</span>).show();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>參考資料：<br><a href="https://medium.com/@yitailin/%E6%AF%94%E8%BC%83-keydown-keypress-keyup-%E7%9A%84%E5%B7%AE%E7%95%B0-4e873ba17e81" target="_blank" rel="noopener">比較 keydown, keypress, keyup 的差異</a><br><a href="https://makitweb.com/jquery-search-text-in-the-element-with-contains-selector/" target="_blank" rel="noopener">jQuery – Search text in the Element with :contains() Selector</a><br><a href="https://www.fooish.com/javascript/string/indexOf.html" target="_blank" rel="noopener">JavaScript String indexOf()</a></p>
<hr>
<p>補充參考：<br><a href="https://whien.medium.com/js20min-day-20-ajax-%E9%9D%9E%E5%90%8C%E6%AD%A5%E8%99%95%E7%90%86-asynchronous-javascript-and-xml-e74a059ab639" target="_blank" rel="noopener">JS20min Day — 20 AJAX 非同步處理 (Asynchronous JavaScript and XML)</a><br><a href="https://www.youtube.com/watch?v=NOprCnnjHm0" target="_blank" rel="noopener">回呼函式 Callbacks、Promises 物件、Async/Await 非同步流程控制 - 彭彭直播 at 2019/04/07</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/16/js-scrollBlog/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/15/js-DOMArrayMethods/"
                            aria-label=": JS實作- DOM Array Methods"
                        >
                            JS實作- DOM Array Methods
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-15T22:19:25+08:00">
	
		    Jan 15, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><a href="https://eva813.github.io/Eva_portfolio/ArrayMethods/arrayMethod.html" target="_blank" rel="noopener">成品</a><br><img src="https://i.imgur.com/gtaxVol.png" alt=""></p>
<h1 id="需求觀察"><a href="#需求觀察" class="headerlink" title="需求觀察"></a>需求觀察</h1><ul>
<li>使用fetch來串接API</li>
<li>透過左側按鈕，使用陣列的方法來實現不同事件<ul>
<li>運用<code>forEach()</code>來將陣列資料呈現到畫面</li>
<li>運用<code>map()</code>計算金額的倍數</li>
<li><code>filter()</code>篩選出符合條件的資料</li>
<li><code>sort()</code>用來排序資料</li>
<li><code>reduce()</code>計算陣列中資料的累加結果</li>
</ul>
</li>
</ul>
<h1 id="使用fetch來串接資料"><a href="#使用fetch來串接資料" class="headerlink" title="使用fetch來串接資料"></a>使用fetch來串接資料</h1><ul>
<li>實作專案的資料來源<code>https://randomuser.me/api</code></li>
</ul>
<p>1.原本使用<code>fetch</code></p>
<ul>
<li>送出 Request，如果得到回應就會回傳帶有 Response 的 Promise 物件，使用 then 將回傳值傳遞下去。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandomUser</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">fetch(<span class="string">'https://randomuser.me/api'</span>).then(<span class="function"><span class="params">response</span> =&gt;</span>    response.json()).then(<span class="function"><span class="params">data</span> =&gt;</span> data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a href="https://www.oxxostudio.tw/articles/201908/js-fetch.html" target="_blank" rel="noopener">JavaScript Fetch API 使用教學</a></li>
</ul>
<p>2.Fetch 搭配 async、await</p>
<ul>
<li>使用async很容易：在定義function時，開頭加上 async</li>
<li>用fetch取得資料</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getRandomUser</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> fetch(<span class="string">'https://randomuser.me/api'</span>);  <span class="comment">//執行完後發出promise</span></span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> res.json();</span><br><span class="line">  <span class="comment">//查看取得的資料，並從中選擇要用的部分</span></span><br><span class="line">  <span class="comment">//console.log(data);</span></span><br><span class="line">  <span class="keyword">const</span> user = data.results[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//創造新的使用者，並建立新的物件</span></span><br><span class="line">  <span class="keyword">const</span> newUser = &#123;</span><br><span class="line">    name: <span class="string">`<span class="subst">$&#123;user.name.first&#125;</span> <span class="subst">$&#123;user.name.last&#125;</span>`</span>,</span><br><span class="line">    money: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">1000000</span>)</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">console</span>.log(newUser);</span><br><span class="line">  addData(newUser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.函式中的撰寫</p>
<ul>
<li>查看取得的<code>data</code><br><img src="https://i.imgur.com/TjYFhjC.png" alt=""></li>
<li>變數宣告要取用資料的哪個部分，並用以建立新物件的內容<ul>
<li><code>const user = data.results[0];</code></li>
<li><code>user.name.first</code><br><img src="https://i.imgur.com/NAmWK88.png" alt=""></li>
</ul>
</li>
</ul>
<h2 id="將物件傳入陣列"><a href="#將物件傳入陣列" class="headerlink" title="將物件傳入陣列"></a>將物件傳入陣列</h2><ul>
<li><p>data 為前面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//將新建立的物件(newUser)放入陣列中</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addData</span>(<span class="params">newObj</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//這裡的data是在最前面所宣告的 初始陣列</span></span><br><span class="line">  data.push(newObj);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//不放入參數，使用預設data</span></span><br><span class="line">  updateDOM();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="將傳入新物件的陣列，顯示於畫面"><a href="#將傳入新物件的陣列，顯示於畫面" class="headerlink" title="將傳入新物件的陣列，顯示於畫面"></a>將傳入新物件的陣列，顯示於畫面</h2></li>
<li><p>使用<code>forEach()</code>來呈現畫面的資料</p>
<ul>
<li>傳入參數為item，為新創的物件資料，內有：name,money</li>
<li>創造新的<code>div</code>並增加class給他</li>
<li>用<code>innerHTML</code>插入內容</li>
<li>用 appendChild() 把上面新增的內容放入，新增的內容會依序排列在後面，不會被洗掉</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//將新創立的物件輸出呈現到畫面上(dom)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateDOM</span>(<span class="params">provideData = data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(provideData);</span><br><span class="line">  <span class="comment">//清除main區域的div</span></span><br><span class="line">  main.innerHTML = <span class="string">`&lt;h2&gt;&lt;strong&gt;Person&lt;/strong&gt;  Wealth&lt;/h2&gt;`</span>;</span><br><span class="line">  provideData.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> element = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    <span class="comment">//在新div增加class</span></span><br><span class="line">    element.classList.add(<span class="string">'person'</span>);</span><br><span class="line">    element.innerHTML = <span class="string">`&lt;strong&gt;<span class="subst">$&#123;item.name&#125;</span>&lt;/strong&gt; <span class="subst">$&#123;item.money&#125;</span>`</span>;</span><br><span class="line">    main.appendChild(element);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：如果本來 HTML 某元素有既有的內容，但是又用 innerHTML 在同樣的元素上加上內容的時候，innerHTML 會把原本寫的東西覆蓋掉。</p>
<p><img src="https://i.imgur.com/xjxIGr7.png" alt=""></p>
<ul>
<li>注意參數的回傳<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateDOM</span>(<span class="params">provideData</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(provideData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/0O0629Q.png" alt=""><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateDOM</span>(<span class="params">provideData = data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(provideData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="https://i.imgur.com/qW5Vqq9.png" alt=""></p>
<p><a href="https://ithelp.ithome.com.tw/articles/10218607" target="_blank" rel="noopener">JavaScript 初心者筆記: DOM - 如何用 JS 新增 HTML 內容</a></p>
<h2 id="數字轉金錢格式"><a href="#數字轉金錢格式" class="headerlink" title="數字轉金錢格式"></a>數字轉金錢格式</h2><p><img src="https://i.imgur.com/JKQrEyd.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//將回傳的隨機數字，轉換為金錢格式 -https://stackoverflow.com/questions/149055/how-to-format-numbers-as-currency-strings</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatMoney</span>(<span class="params">Money</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'$'</span> + Money.toFixed(<span class="number">2</span>).replace(<span class="regexp">/\d(?=(\d&#123;3&#125;)+\.)/g</span>, <span class="string">'$&amp;,'</span>);;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>formatMoney()</code>要放入剛剛forEach所傳入的金額，從這邊去調整數字的格式<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.innerHTML = <span class="string">`&lt;strong&gt;<span class="subst">$&#123;item.name&#125;</span>&lt;/strong&gt;  <span class="subst">$&#123;formatMoney(item.money)&#125;</span>`</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="https://i.imgur.com/8DLGtgC.png" alt=""></p>
<h2 id="增加人員事件"><a href="#增加人員事件" class="headerlink" title="增加人員事件"></a>增加人員事件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//設置點擊事件，按下add user，增加人</span></span><br><span class="line">addUserBtn.addEventListener(<span class="string">'click'</span>, getRandomUser);</span><br></pre></td></tr></table></figure>

<h2 id="運用map-來，建立-double-money事件"><a href="#運用map-來，建立-double-money事件" class="headerlink" title="運用map()來，建立 double money事件"></a>運用<code>map()</code>來，建立 double money事件</h2><ul>
<li>loop through array 就像forEach，但不同的是他會回傳東西<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//double money </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleMoney</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  data = data.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...item &#125;</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/PpZ5v7v.png" alt=""></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//double money </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleMoney</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  data = data.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...item, <span class="attr">money</span>: item.money * <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/joXfDXT.png" alt=""></p>
<p>呈現於畫面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//double money </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleMoney</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  data = data.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...item, <span class="attr">money</span>: item.money * <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">   updateDOM();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/M0R5KV4.png" alt=""></p>
<div class="alert info no-icon"><p><code>forEach()</code>: 针对每一个元素执行提供的函数(executes a provided function once for each array element)。<br><code>map()</code>: 创建一个新的数组，其中每一个元素由调用数组中的每一个元素执行提供的函数得来(creates a new array with the results of calling a provided function on every element in the calling array)。<br><a href="https://blog.fundebug.com/2018/02/05/map_vs_foreach/" target="_blank" rel="noopener">JavaScript中Map和ForEach的区别</a></p>
</div>

<h2 id="運用sort來建立排名"><a href="#運用sort來建立排名" class="headerlink" title="運用sort來建立排名"></a>運用<code>sort</code>來建立排名</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//sortEvent</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortEvent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  data = data.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> b.money - a.money;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//console.log(data);</span></span><br><span class="line">  updateDOM();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div class="alert info no-icon"><p><code>sort</code>依據字串的 Unicode 編碼進行排序，會改變原本的陣列。</p>
<ul>
<li>排序進行方式：<code>sort()</code>會將所有元素轉成字串後，且以第一個字元為對象，再進行排序。</li>
<li>比較好的方式：一般會建議，還是以函式傳入參數來當排序條件會比較穩定。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">5</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">6</span>];</span><br><span class="line"><span class="comment">// 以匿名函式回參數做「升序」排序</span></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b; <span class="comment">// a - b &gt; 0</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [1, 2, 3, 5, 6, 9]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果要反過來做「降序」排序</span></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> b - a;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [9, 6, 5, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>

</div>
<p>參考資料：<a href="https://ithelp.ithome.com.tw/articles/10225733" target="_blank" rel="noopener">JS 將陣列 Array 重新排列的 sort()</a>、<a href="https://medium.com/@leokao0726/%E6%B7%BA%E8%AB%87-js-sort-%E5%88%B0%E8%83%8C%E5%BE%8C%E6%8E%92%E5%BA%8F%E6%96%B9%E6%B3%95-1035f5b8cde8" target="_blank" rel="noopener">淺談 JS sort() 到背後排序方法</a></p>
<h2 id="filter篩選百萬以上的人員"><a href="#filter篩選百萬以上的人員" class="headerlink" title="filter篩選百萬以上的人員"></a><code>filter</code>篩選百萬以上的人員</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterMillionaires</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  data = data.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.money &gt; <span class="number">1000000</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  updateDOM();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>PS:<code>filter()</code>的使用是回傳新陣列，原陣列不改變</p>
<h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h2><p>拆解內部參數<br>accumulator<br>用來累積回呼函式回傳值的累加器（accumulator）或 initialValue（若有提供的話，詳如下敘）。累加器是上一次呼叫後，所回傳的累加數值。<br>currentValue<br>原陣列目前所迭代處理中的元素。</p>
<ul>
<li><code>console.log(accumulator);</code></li>
</ul>
<p><img src="https://i.imgur.com/dGpG42b.png" alt=""></p>
<ul>
<li><code>console.log(currentValue);</code></li>
</ul>
<p><img src="https://i.imgur.com/P0yQK34.png" alt=""></p>
<ul>
<li>console.log(currentValue.money);</li>
</ul>
<p><img src="https://i.imgur.com/vNfFozL.png" alt=""></p>
<p><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="noopener">MDN</a><br><a href="https://w3c.hexschool.com/blog/a2cb755f" target="_blank" rel="noopener">JavaScript reduce 在做什麼？</a></p>
<h3 id="理解完reduce-所回傳的參數資料後…"><a href="#理解完reduce-所回傳的參數資料後…" class="headerlink" title="理解完reduce()所回傳的參數資料後…"></a>理解完<code>reduce()</code>所回傳的參數資料後…</h3><ul>
<li>讓金額加總計算<code>accumulator += currentValue.money</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//calculateMoney</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculateMoney</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reduceArr = data.reduce(<span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//console.log(accumulator);</span></span><br><span class="line">   <span class="comment">// console.log(currentValue.money);</span></span><br><span class="line">    <span class="keyword">return</span> accumulator += currentValue.money;</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> totalEl = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  totalEl.innerHTML = <span class="string">`&lt;h3&gt;Total Wealth: &lt;strong&gt; <span class="subst">$&#123;formatMoney(reduceArr)&#125;</span> &lt;/strong&gt; &lt;/h3&gt; `</span>;</span><br><span class="line">  main.appendChild(totalEl);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/15/js-DOMArrayMethods/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/15/js-SortableList/"
                            aria-label=": JS實作- SortableList"
                        >
                            JS實作- SortableList
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-15T22:10:22+08:00">
	
		    Jan 15, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p><a href="https://eva813.github.io/Eva_portfolio/sortableList/sortableList.html" target="_blank" rel="noopener">成品</a></p>
<h2 id="觀察功能需求"><a href="#觀察功能需求" class="headerlink" title="觀察功能需求"></a>觀察功能需求</h2><ul>
<li><p>Drag &amp; Drop API</p>
<ul>
<li>使元素可以拖放，在 HTML5，只要為它加上 draggable=”true” 屬性，它就能「被拖曳」了</li>
</ul>
</li>
<li><p>拖曳該項目時，會使下方的格子顏色變成灰色</p>
</li>
</ul>
<p><img src="https://i.imgur.com/sZVXh9r.png" alt=""></p>
<ul>
<li>拖曳項目到目標位置，會使了者交換</li>
<li>排序最後會有一個檢查順序正確與否的按鈕</li>
</ul>
<h2 id="JS部分"><a href="#JS部分" class="headerlink" title="JS部分"></a>JS部分</h2><h3 id="1-排行榜的設置"><a href="#1-排行榜的設置" class="headerlink" title="1.排行榜的設置"></a>1.排行榜的設置</h3><ul>
<li>設定熱門旅遊縣市排行榜的陣列</li>
<li>並宣告一個空陣列，以利後面使用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bestPlace = [</span><br><span class="line">  <span class="string">'台南'</span>,</span><br><span class="line">  <span class="string">'台中'</span>,</span><br><span class="line">  <span class="string">'高雄'</span>,</span><br><span class="line">  <span class="string">'台東'</span>,</span><br><span class="line">  <span class="string">'屏東'</span>,</span><br><span class="line">  <span class="string">'新北'</span>,</span><br><span class="line">  <span class="string">'宜蘭'</span>,</span><br><span class="line">  <span class="string">'花蓮'</span>,</span><br><span class="line">  <span class="string">'澎湖'</span>,</span><br><span class="line">  <span class="string">'桃園'</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> listItems = [];</span><br></pre></td></tr></table></figure>
<h3 id="2-創建排行列表，並將其呈現於頁面上"><a href="#2-創建排行列表，並將其呈現於頁面上" class="headerlink" title="2.創建排行列表，並將其呈現於頁面上"></a>2.創建排行列表，並將其呈現於頁面上</h3><ul>
<li>宣告新的變數，並利用Fisher-Yates，創造隨機的效果<ul>
<li>注意新變數，是帶入展開運算元(把陣列中的元素取出)</li>
</ul>
</li>
<li>利用<code>each</code>跑陣列，創造變數填入<code>&lt;li&gt;</code>，並於其中填入html標籤，使畫面呈現列表。</li>
<li>jquery稱增加屬性<code>listItem.setAttribute(&#39;data-index&#39;, index);</code>,<a href="https://api.jquery.com/attr/" target="_blank" rel="noopener">.attr()</a></li>
</ul>
<p><img src="https://i.imgur.com/OqjHMda.png" alt=""></p>
<ul>
<li><code>listItems.push(listItem);</code>將列表項目，放入空陣列中</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Fisher-Yates洗牌演算法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fisherYatesShuffle</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = arr.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">var</span> j = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (i + <span class="number">1</span>)); <span class="comment">//random index</span></span><br><span class="line">    [arr[i], arr[j]] = [arr[j], arr[i]]; <span class="comment">// swap</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/製作實際可以看到的list</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">creatList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> placeArr = [...bestPlace];</span><br><span class="line">  fisherYatesShuffle(placeArr);</span><br><span class="line">  $.each(placeArr, <span class="function"><span class="keyword">function</span> (<span class="params">index, place</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> listItem = $(<span class="string">'&lt;li&gt;&lt;/li&gt;'</span>).appendTo(<span class="string">'#draggable-list'</span>);</span><br><span class="line">    <span class="comment">// console.log(listItem);</span></span><br><span class="line">    listItem.attr(<span class="string">"data-index"</span>, index);</span><br><span class="line">    <span class="comment">//listItem.addClass('wrong')</span></span><br><span class="line">    listItem.html(<span class="string">`&lt;span class="number"&gt;<span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="draggable" draggable="true"&gt;</span></span><br><span class="line"><span class="string">          &lt;p class="place-name"&gt;<span class="subst">$&#123;place&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">          &lt;i class="fas fa-grip-lines"&gt;&lt;/i&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;`</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    listItems.push(listItem);</span><br><span class="line">    <span class="comment">//insert into dom</span></span><br><span class="line">    $(<span class="string">'#draggable-list'</span>).append(listItem);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  addEventListeners()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>參考資料：<br>push：<br><a href="https://ithelp.ithome.com.tw/articles/10222922" target="_blank" rel="noopener">JS 從陣列 Array 尾端新增元素的 push()</a><br><a href="https://www.oxxostudio.tw/articles/201908/js-array.html" target="_blank" rel="noopener">JavaScript Array 陣列操作方法大全 ( 含 ES6 )</a></p>
<h3 id="3-拖曳的監聽事件"><a href="#3-拖曳的監聽事件" class="headerlink" title="3.拖曳的監聽事件"></a>3.拖曳的監聽事件</h3><ul>
<li>拖曳開始的監聽，元素是抓取<code>draggables</code>，後續的drop、dragenter、dragover等事件，元素是<code>.draggable-list li</code></li>
<li>針對要被拖曳的元素（dragSource）監聽事件</li>
<li>利用forEach方式，允許多個可拖曳的物件</li>
</ul>
<ul>
<li>抓取的元素：<br><img src="https://i.imgur.com/5G60Pmr.png" alt=""><br><img src="https://i.imgur.com/zXR4YWT.png" alt=""></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//監聽事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEventListeners</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> draggables = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.draggable'</span>);</span><br><span class="line">  <span class="keyword">const</span> dragListItems = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.draggable-list li'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//Dragable dot 增加監聽事件</span></span><br><span class="line"></span><br><span class="line">  draggables.forEach(<span class="function"><span class="params">draggable</span> =&gt;</span> &#123;</span><br><span class="line">    draggable.addEventListener(<span class="string">'dragstart'</span>, dragStart);</span><br><span class="line">  &#125;);</span><br><span class="line">  dragListItems.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    item.addEventListener(<span class="string">'dragover'</span>, dragOver);</span><br><span class="line">    item.addEventListener(<span class="string">'drop'</span>, dragDrop);</span><br><span class="line">    item.addEventListener(<span class="string">'dragenter'</span>, dragEnter);</span><br><span class="line">    item.addEventListener(<span class="string">'dragleave'</span>, dragLeave);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://pjchender.blogspot.com/2017/08/html5-drag-and-drop-api.html" target="_blank" rel="noopener">[筆記] 製作可拖曳的元素（HTML5 Drag and Drop API）</a></p>
<h3 id="4-針對監聽事件，設置各執行的函式"><a href="#4-針對監聽事件，設置各執行的函式" class="headerlink" title="4.針對監聽事件，設置各執行的函式"></a>4.針對監聽事件，設置各執行的函式</h3><ul>
<li>為了能夠追蹤抓取項目，所以一開始先宣告一個索引變數。</li>
<li><code>dragStart()</code>:宣告<code>dragStartIndex</code>變數為抓取到的<code>li</code>-&gt;<code>data-index</code></li>
</ul>
<p><img src="https://i.imgur.com/6tMHuYr.png" alt=""></p>
<ul>
<li>有拖曳的開始，就會有結束，也就是放置(<code>dragDrop()</code>)：<code>dragEndIndex</code>同樣也是以索引來作為依據，並在設置一個交換的函式</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//要能夠持續追蹤每個項目的index，所以要有個初始變數</span></span><br><span class="line"><span class="keyword">let</span> dragStartIndex;</span><br><span class="line"><span class="comment">//拖拉的各函式</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragStart</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//console.log('Event: ', 'dragstart');</span></span><br><span class="line">  dragStartIndex = +$(<span class="keyword">this</span>).closest(<span class="string">'li'</span>).attr(<span class="string">'data-index'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(dragStartIndex);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragOver</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log('Event: ', 'dragover');</span></span><br><span class="line">  e.preventDefault();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//設定開始的index,以及結束的index是為了交換</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragDrop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log('Event: ', 'dragdrop');</span></span><br><span class="line">  <span class="keyword">const</span> dragEndIndex = +$(<span class="keyword">this</span>).attr(<span class="string">'data-index'</span>);</span><br><span class="line">  swapItems(dragStartIndex, dragEndIndex);</span><br><span class="line">  $(<span class="keyword">this</span>).removeClass(<span class="string">'over'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-交換索引，使物件交換位置swapItems"><a href="#5-交換索引，使物件交換位置swapItems" class="headerlink" title="5.交換索引，使物件交換位置swapItems"></a>5.交換索引，使物件交換位置<code>swapItems</code></h3><ul>
<li>透過抓取到的開始與結束的索引，來填入要交換的變數</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swapItems</span>(<span class="params">fromIndex, toIndex</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//要設定交換之前，要先到dragover去設定e.preventDefault();（因為dragover會擋到交換的執行）</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> itemOne = listItems[fromIndex].find(<span class="string">'.draggable'</span>);</span><br><span class="line">  <span class="keyword">const</span> itemTwo = listItems[toIndex].find(<span class="string">'.draggable'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//console.log(itemOne, itemTwo)</span></span><br><span class="line">  listItems[fromIndex].append(itemTwo);</span><br><span class="line">  listItems[toIndex].append(itemOne);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-延續拖曳監聽事件，所要執行的其他函式"><a href="#6-延續拖曳監聽事件，所要執行的其他函式" class="headerlink" title="6.延續拖曳監聽事件，所要執行的其他函式"></a>6.延續拖曳監聽事件，所要執行的其他函式</h3><ul>
<li><p><code>dragEnter()</code>拖曳元素進入要放置的目標位置，所觸發的事件。在此是設定要放入目標位置時，增加一個<code>class</code>的效果</p>
</li>
<li><p>進入目標位置，其相互搭配的事件就是離開<code>dragLeave()</code>，當拖曳元素離開放置位置時，所發生的事件。在此為設定，去除於原本<code>class</code>的效果。</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragEnter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log('Event: ', 'dragenter');</span></span><br><span class="line">  $(<span class="keyword">this</span>).addClass(<span class="string">'over'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragLeave</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log('Event: ', 'dragleave');</span></span><br><span class="line">  $(<span class="keyword">this</span>).removeClass(<span class="string">'over'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-核對順序"><a href="#7-核對順序" class="headerlink" title="7.核對順序"></a>7.核對順序</h3><ul>
<li>抓取listItems，來跑forEach，其要參照的參數是，項目、索引。</li>
<li>宣告<code>placeName</code>為參數<code>listItem</code>，draggable的文字字串。<ul>
<li>trim()用來去除字串前後的空白</li>
</ul>
</li>
<li>判斷句<code>placeName !== bestPlace[index]</code></li>
<li><code>console.log(bestPlace[index])</code>會印出，正確的順序。</li>
</ul>
<p><img src="https://i.imgur.com/xIR3X98.png" alt=""></p>
<ul>
<li>核對結果：就是分別加入<code>wrong</code>、<code>&#39;right&#39;</code>。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//核對排名順序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkOrder</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  listItems.forEach(<span class="function">(<span class="params">listItem, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> placeName = listItem.find(<span class="string">'.draggable'</span>).text().trim();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (placeName !== bestPlace[index]) &#123;</span><br><span class="line">      listItem.addClass(<span class="string">'wrong'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      listItem.removeClass(<span class="string">'wrong'</span>);</span><br><span class="line">      listItem.addClass(<span class="string">'right'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<hr>
<h2 id="以下為補充資料："><a href="#以下為補充資料：" class="headerlink" title="以下為補充資料："></a>以下為補充資料：</h2><h3 id="拖曳補充資料："><a href="#拖曳補充資料：" class="headerlink" title="拖曳補充資料："></a>拖曳補充資料：</h3><p><a href="https://ourcodeworld.com/articles/read/664/top-5-best-sortable-and-draggable-list-javascript-and-jquery-plugins" target="_blank" rel="noopener">Top 5: Best Sortable &amp; Draggable List JavaScript and jQuery Plugins</a><br><a href="https://ithelp.ithome.com.tw/articles/10120587" target="_blank" rel="noopener">實用網頁工具庫 - jQuery UI (上) 元件篇
</a></p>
<h3 id="使陣列隨機排序"><a href="#使陣列隨機排序" class="headerlink" title="使陣列隨機排序"></a>使陣列隨機排序</h3><ul>
<li>使用<code>map</code>將陣列轉換為新陣列，創造vale、以及加上sort排序值(利用<code>Math.random()</code>來產生亂數)</li>
<li>使用sort隨機排序，剛剛的sort值是隨機產生，再一次使用sort，來使排的順序也隨機。</li>
<li>最後，因為排序後陣列中的物件是<code>{ value: , sort:  }</code>，而我們要讓畫面只顯示<code>value:</code>，所以再使用<code>map</code>將新陣列轉回只有該資料的陣列。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  [...richestPeople]</span><br><span class="line">    .map(<span class="function"><span class="params">a</span> =&gt;</span> (&#123; <span class="attr">value</span>: a, <span class="attr">sort</span>: <span class="built_in">Math</span>.random() &#125;))</span><br><span class="line">    .sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.sort - b.sort)</span><br><span class="line">    .map(<span class="function"><span class="params">a</span> =&gt;</span> a.value)</span><br><span class="line">    .forEach(<span class="function">(<span class="params">person, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> listItem = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>);</span><br><span class="line"></span><br><span class="line">      listItem.setAttribute(<span class="string">'data-index'</span>, index);</span><br><span class="line"></span><br><span class="line">      listItem.innerHTML = <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;span class="number"&gt;<span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="draggable" draggable="true"&gt;</span></span><br><span class="line"><span class="string">          &lt;p class="person-name"&gt;<span class="subst">$&#123;person&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">          &lt;i class="fas fa-grip-lines"&gt;&lt;/i&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line"></span><br><span class="line">      listItems.push(listItem);</span><br><span class="line"></span><br><span class="line">      draggable_list.appendChild(listItem);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  addEventListeners();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a href="https://shubo.io/javascript-random-shuffle/" target="_blank" rel="noopener">[筆記] 如何正確實作 JavaScript Array Random Shuffle 亂數排序演算法</a><br><a href="https://www.delftstack.com/zh-tw/howto/javascript/shuffle-array-javascript/" target="_blank" rel="noopener">在 JavaScript 中對一個陣列進行隨機化或洗牌
</a></li>
</ul>
<hr>
<h3 id="jquery-ui"><a href="#jquery-ui" class="headerlink" title="jquery ui"></a>jquery ui</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//https://stackoverflow.com/questions/6426795/what-is-disableselection-used-for-in-jquery-ui</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragdrop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">"#draggable-list"</span>).sortable(&#123;</span><br><span class="line">    <span class="comment">//connectWith: "ul",</span></span><br><span class="line">    delay: <span class="number">300</span>,</span><br><span class="line">    distance: <span class="number">15</span>,</span><br><span class="line">    <span class="comment">//number: "span:not(.number)",</span></span><br><span class="line">    iframeFix: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  &#125;).disableSelection();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="顏色"><a href="#顏色" class="headerlink" title="顏色"></a>顏色</h3><p><a href="https://www.0to255.com/f2e8cf" target="_blank" rel="noopener">0-255</a><br><a href="https://webgradients.com/" target="_blank" rel="noopener">漸層顏色</a><br><a href="https://coolors.co/palettes/trending" target="_blank" rel="noopener">colors</a><br><a href="https://stackoverflow.com/questions/34494873/why-is-my-jquery-selector-returning-a-n-fn-init0-and-what-is-it" target="_blank" rel="noopener">Why is my JQuery selector returning a n.fn.init[0], and what is it?</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/15/js-SortableList/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/15/js-musicPlayer/"
                            aria-label=": JS實作- musicPlayer"
                        >
                            JS實作- musicPlayer
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-15T21:51:43+08:00">
	
		    Jan 15, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="觀察須製作的功能"><a href="#觀察須製作的功能" class="headerlink" title="觀察須製作的功能"></a>觀察須製作的功能</h2><p><a href="https://eva813.github.io/Eva_portfolio/musicPlayer/musicPlayer.html" target="_blank" rel="noopener">成品</a></p>
<ol>
<li>播放器API的樣式</li>
</ol>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio" target="_blank" rel="noopener">&lt;audio&gt;: The Embed Audio element</a></p>
<ol start="2">
<li>播放時，左方的圓型圖示會旋轉。</li>
</ol>
<ul>
<li>先於css檔案製作符合動畫的class</li>
<li>在js時，依照符合的情況加入該class</li>
</ul>
<p><img src="https://i.imgur.com/3LBdMiU.png" alt=""></p>
<ol start="3">
<li>播放時，上方會跳出播放歌曲的名稱。</li>
</ol>
<ul>
<li>先於css檔案製作符合動畫的class，設定<code>opacity</code>1或0，<code>translateY</code>位置的移動</li>
<li>在js時，依照符合的情況加入該class</li>
</ul>
<p><img src="https://i.imgur.com/U3dx7yG.png" alt=""></p>
<ol start="4">
<li>左右按鍵可以更換曲目，同時圖片會更換</li>
</ol>
<ul>
<li>設定陣列，使歌曲與圖片相符</li>
<li>並讓前後的跳轉鍵，依照順序或條件來變化</li>
</ul>
<p><img src="https://i.imgur.com/NuxfsOb.png" alt=""></p>
<hr>
<h2 id="html部分"><a href="#html部分" class="headerlink" title="html部分"></a>html部分</h2><h3 id="跳轉按鍵"><a href="#跳轉按鍵" class="headerlink" title="跳轉按鍵"></a>跳轉按鍵</h3><ul>
<li>播放鍵、前/後跳轉的按鈕 </li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"prev"</span> <span class="attr">class</span>=<span class="string">"action-btn"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fas fa-backward"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"play"</span> <span class="attr">class</span>=<span class="string">"action-btn  action-btn-big"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fas fa-play"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"next"</span> <span class="attr">class</span>=<span class="string">"action-btn"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fas fa-forward"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/w1bpDjr.png" alt=""></p>
<h2 id="css部分"><a href="#css部分" class="headerlink" title="css部分"></a>css部分</h2><h3 id="背景顏色"><a href="#背景顏色" class="headerlink" title="背景顏色"></a>背景顏色</h3><p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient()" target="_blank" rel="noopener">linear-gradient()</a></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 傾斜度\顏色、從哪個位置開始 */</span></span><br><span class="line">  <span class="selector-tag">background-image</span><span class="selector-pseudo">:linear-gradient(0deg</span></span><br><span class="line">  ,<span class="selector-tag">rgb</span>(247, 247, 247,1) 23<span class="selector-class">.8</span>%,</span><br><span class="line">  <span class="selector-tag">rgba</span>(252,221,221,1) 92% );</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/Xb5PpmY.png" alt=""></p>
<h2 id="圖片圓形以及旋轉"><a href="#圖片圓形以及旋轉" class="headerlink" title="圖片圓形以及旋轉"></a>圖片圓形以及旋轉</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img-container</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">110px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*圖片圓形*/</span></span><br><span class="line"><span class="selector-class">.img-container</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line"><span class="comment">/*填滿元素的寬度及高度(維持原比例)，通常會剪掉部分的物件*/</span></span><br><span class="line"> <span class="attribute">height</span>: <span class="number">110px</span>;</span><br><span class="line"> <span class="attribute">width</span>: inherit; <span class="comment">/*繼承自父層的寬度屬性值。*/</span></span><br><span class="line"> <span class="attribute">position</span>:absolute;</span><br><span class="line"> <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"> <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"> <span class="attribute">animation</span>: rotate <span class="number">3s</span> linear infinite;</span><br><span class="line"> <span class="attribute">animation-play-state</span>: paused;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 播放class的製作 */</span></span><br><span class="line"><span class="selector-class">.music-container</span><span class="selector-class">.play</span> <span class="selector-class">.img-container</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line"> <span class="attribute">animation-play-state</span>:running;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> rotate&#123;</span><br><span class="line">  <span class="selector-tag">from</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用animation@keyframe<br><a href="https://wcc723.github.io/development/2020/10/11/img-cover/" target="_blank" rel="noopener">新手前端也不該犯的錯：圖片變形</a></li>
</ul>
<p><img src="https://i.imgur.com/RfUz8Pk.png" alt=""></p>
<ul>
<li>在圖片中間加入圓形點，以看起來像光碟樣式</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img-container</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>,<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/HlnWKJb.png" alt=""></p>
<h3 id="播放進度條的製作"><a href="#播放進度條的製作" class="headerlink" title="播放進度條的製作"></a>播放進度條的製作</h3><ol>
<li>標題<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.music-info</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,.<span class="number">5</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">15px</span> <span class="number">15px</span> <span class="number">0</span> <span class="number">0</span> ;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0%</span>);</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease-in,opacity <span class="number">0.3s</span> ease-in;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.music-container</span><span class="selector-class">.play</span> <span class="selector-class">.music-info</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">   <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>將曲目標題設置背景、圓角</li>
<li>利用 transfor、opacity來呈現位置的變化</li>
</ul>
<p><img src="https://i.imgur.com/icBK0qt.png" alt=""></p>
<ul>
<li>修改標題位置</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*放入.music-info之中*/</span></span><br><span class="line"><span class="selector-tag">width</span>: <span class="selector-tag">calc</span>(100% <span class="selector-tag">-</span> 40<span class="selector-tag">px</span>);</span><br><span class="line"> <span class="selector-tag">padding</span>: 10<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> 150<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<h4 id="calc"><a href="#calc" class="headerlink" title="calc()"></a><code>calc()</code></h4><p>calc() 的運算式一樣是按照先乘除後加減進行計算<br> width: calc(100% - 40px);<br>/* 意思是 100% 的寬度 - 去 40px */<br><a href="https://5xruby.tw/posts/css-calc/" target="_blank" rel="noopener">CSS： calc() 數值運算</a></p>
<p><img src="https://i.imgur.com/er3G6Wd.png" alt=""></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.music-info</span> <span class="selector-tag">h4</span>&#123;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/qiWmxmu.png" alt=""></p>
<p>2.進度條（progress）</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.progress-container</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.progress</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fe8daa</span>;</span><br><span class="line"> <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: width .<span class="number">1s</span> linear ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/uPUHWcM.png" alt=""></p>
<h2 id="js部分"><a href="#js部分" class="headerlink" title="js部分"></a>js部分</h2><h3 id="1-音樂播放鍵-播放與停止"><a href="#1-音樂播放鍵-播放與停止" class="headerlink" title="1.音樂播放鍵(播放與停止)"></a>1.音樂播放鍵(播放與停止)</h3><ul>
<li>分別有兩個函式：<code>playMusic()</code> 、<code>pauseMusic()</code></li>
<li>在css設定<code>.play</code>的css，並於js綁定事件，加入css的效果(使圖片如同轉盤，會旋轉)</li>
<li>在icon的部分：在播放時：為暫停鍵圖示;在暫停時：為播放鍵的圖示</li>
<li>透過play()、pause()，讓音源播放與暫停</li>
</ul>
<h3 id="play-、pause"><a href="#play-、pause" class="headerlink" title="play()、pause()"></a><code>play()</code>、<code>pause()</code></h3><p>因為play()、pause()是DOM元素，不是jQuery的function，而要用jQuery取得DOM元素<br><code>$(&#39;#audio&#39;).get(0).play()</code> =&gt;<code>$(&#39;#audio&#39;)[0].play()</code><br><code>$(&#39;#audio&#39;).get(0).pause()</code> =&gt;<code>$(&#39;#audio&#39;)[0].pause()</code></p>
<p>參考資料：<br><a href="https://learn.jquery.com/using-jquery-core/faq/how-do-i-pull-a-native-dom-element-from-a-jquery-object/" target="_blank" rel="noopener">How do I pull a native DOM element from a jQuery object?</a><br><a href="https://stackoverflow.com/questions/4646998/play-pause-html-5-video-using-jquery" target="_blank" rel="noopener">Play/pause HTML 5 video using JQuery</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//播放音樂</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">playMusic</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  $(<span class="string">'.music-container'</span>).addClass(<span class="string">'play'</span>);</span><br><span class="line">  $(<span class="string">'#play'</span>).find(<span class="string">'i'</span>).removeClass(<span class="string">'fa-play'</span>);</span><br><span class="line">  $(<span class="string">'#play'</span>).find(<span class="string">'i'</span>).addClass(<span class="string">'fa-pause'</span>);</span><br><span class="line">  $(<span class="string">'#audio'</span>).get(<span class="number">0</span>).play();</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//停止音樂</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pauseMusic</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'.music-container'</span>).removeClass(<span class="string">'play'</span>);</span><br><span class="line">  $(<span class="string">'#play'</span>).find(<span class="string">'i'</span>).addClass(<span class="string">'fa-play'</span>);</span><br><span class="line">  $(<span class="string">'#play'</span>).find(<span class="string">'i'</span>).removeClass(<span class="string">'fa-pause'</span>);</span><br><span class="line">  $(<span class="string">'#audio'</span>).get(<span class="number">0</span>).pause();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><h4 id="綁定事件："><a href="#綁定事件：" class="headerlink" title="綁定事件："></a>綁定事件：</h4>如果音樂是播放狀態的話，就執行<code>pauseMusic()</code>，反之，音樂不處於波方時，執行<code>playMusic()</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#play'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> hasPlay = $(<span class="string">'#music-container'</span>).hasClass(<span class="string">'play'</span>);</span><br><span class="line">   <span class="comment">//var a = $('#audio').paused;</span></span><br><span class="line">   <span class="keyword">if</span> (hasPlay) &#123;</span><br><span class="line">     pauseMusic();</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     playMusic();</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>




</li>
</ul>
<h3 id="2-載入音樂"><a href="#2-載入音樂" class="headerlink" title="2.載入音樂"></a>2.載入音樂</h3><ul>
<li>將歌曲名稱建立陣列，並將此回傳到建立的函式中</li>
<li>設定預設的索引<code>let songIndex = 1</code></li>
<li>使用 attr( 屬性名, 屬性值 )，獲取屬性的值，在這部分，透過歌曲名稱來取得歌曲與照片</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> songs_name = [<span class="string">'hey'</span>, <span class="string">'summer'</span>, <span class="string">'ukulele'</span>];</span><br><span class="line"><span class="keyword">let</span> songIndex = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadSongs</span>(<span class="params">song</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//console.log(song);</span></span><br><span class="line">  $(<span class="string">'#title'</span>).text(song);</span><br><span class="line">  </span><br><span class="line">  $(<span class="string">'#audio'</span>).attr(<span class="string">'src'</span>, <span class="string">`music/<span class="subst">$&#123;song&#125;</span>.mp3`</span>);</span><br><span class="line">  $(<span class="string">'#cover'</span>).attr(<span class="string">'src'</span>, <span class="string">`img/<span class="subst">$&#123;song&#125;</span>.jpg`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Initially load song details into DOM</span></span><br><span class="line">loadSongs(songs_name[songIndex]);</span><br></pre></td></tr></table></figure>
<h4 id="綁定於下一首、前一首的圖示被點擊時"><a href="#綁定於下一首、前一首的圖示被點擊時" class="headerlink" title="綁定於下一首、前一首的圖示被點擊時"></a>綁定於下一首、前一首的圖示被點擊時</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#next'</span>).click(nextSong)</span><br><span class="line">  $(<span class="string">'#prev'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; prevSong();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>


<ul>
<li><p>查看函式回傳</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loadSongs(songs_name);</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/je9hXJY.png" alt=""></p>
</li>
<li><p>要抓取到該索引</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loadSongs(songs_name[songIndex]);</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/5not1Ji.png" alt=""><br>此段落執行時，出現問題：<br><img src="https://i.imgur.com/dj4H5hb.png" alt=""></p>
</li>
<li><p>搜尋到的處理方式：在html的<code>head</code><link rel="shortcut icon" href="#"><br><a href="https://stackoverflow.com/questions/31075893/im-getting-favicon-ico-error/31329574" target="_blank" rel="noopener">I’m getting favicon.ico error
</a></p>
</li>
</ul>
<p>參考資料：<br><a href="https://iter01.com/470327.html" target="_blank" rel="noopener">jquery prop和attr的區別</a><br><a href="https://cythilya.github.io/2017/09/10/jquery-attr-vs-prop/" target="_blank" rel="noopener">jQuery .attr() vs .prop()</a></p>
<h3 id="3-左右鍵的跳轉"><a href="#3-左右鍵的跳轉" class="headerlink" title="3.左右鍵的跳轉"></a>3.左右鍵的跳轉</h3><ul>
<li>下一首歌曲，與跳至前一首歌曲，兩個函式的撰寫有異曲同工之妙，只有在設條條件上的差異。</li>
<li><code>nextSong()</code>:設定條件為歌曲索引<code>songIndex</code>比 歌曲陣列長度-1<code>songs_name.length - 1</code>還要小，我們就要將索引+1。<ul>
<li>例如這裏預設的索引為1，所以在點擊當下，判斷&lt;<code>songs_name.length - 1</code>，所以需加1，索引變成2，跳至下一首 ‘ukulele’</li>
</ul>
</li>
<li>prevSong()：設定條件為歌曲索引<code>songIndex</code>比0大，就要索引-1，跳轉至上一首歌曲。若沒符合的話，索引就等於<code>songs_name.length - 1</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//歌曲的索引，如果比歌曲總數-1還小，就將索引加1，跳轉下一首</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nextSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (songIndex &lt; songs_name.length - <span class="number">1</span>) &#123; songIndex += <span class="number">1</span>; &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    songIndex = <span class="number">0</span></span><br><span class="line">  &#125;;</span><br><span class="line">  loadSongs(songs_name[songIndex]);</span><br><span class="line">  playMusic();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//跳轉前一首</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">prevSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//如果索引沒有大於0。就會播索引[2]</span></span><br><span class="line">  <span class="keyword">if</span> (songIndex &gt; <span class="number">0</span>) &#123; songIndex -= <span class="number">1</span>; &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    songIndex = songs_name.length - <span class="number">1</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  loadSongs(songs_name[songIndex]);</span><br><span class="line">  playMusic();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>參考資料：<br><a href="https://www.geeksforgeeks.org/create-a-music-player-using-javascript/" target="_blank" rel="noopener">Create a Music Player using JavaScript</a></p>
<h3 id="4-點擊進度條，可以跳轉音樂位置"><a href="#4-點擊進度條，可以跳轉音樂位置" class="headerlink" title="4.點擊進度條，可以跳轉音樂位置"></a>4.點擊進度條，可以跳轉音樂位置</h3><h4 id="1-顯示粉色進度條"><a href="#1-顯示粉色進度條" class="headerlink" title="(1).顯示粉色進度條"></a>(1).顯示粉色進度條</h4><ul>
<li>duration：音源的時間(一樣是使用get方式取得)</li>
<li>currentTime：音樂播放的當前位置（以秒計）</li>
<li>progressBar：進度條</li>
<li>計算百分比：<code>(currentTime / duration) * 100</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//顯示進度條</span></span><br><span class="line"><span class="comment">//為何取[0]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleProgress</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> duration = $(<span class="string">'#audio'</span>).get(<span class="number">0</span>).duration;</span><br><span class="line">  <span class="comment">//console.log(duration)</span></span><br><span class="line">  <span class="keyword">var</span> currentTime = $(<span class="string">'#audio'</span>)[<span class="number">0</span>].currentTime;</span><br><span class="line">  <span class="comment">//console.log(currentTime)</span></span><br><span class="line">  <span class="keyword">const</span> progressBar = $(<span class="string">'#progress'</span>);</span><br><span class="line">  <span class="keyword">const</span> progressPercent = (currentTime / duration) * <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//currentTime目前播放時間去與影片長度duration轉換成百分比，即可得到目前播放時間的百分比</span></span><br><span class="line"></span><br><span class="line">  progressBar.css(<span class="string">'width'</span>, <span class="string">`<span class="subst">$&#123;progressPercent&#125;</span>%`</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2-點擊進度條，會跳轉到該位置播放"><a href="#2-點擊進度條，會跳轉到該位置播放" class="headerlink" title="(2).點擊進度條，會跳轉到該位置播放"></a>(2).點擊進度條，會跳轉到該位置播放</h4><ul>
<li>width:獲取該進度條容器的寬度</li>
<li>抓取點擊位置：<ul>
<li>e.pageX:取得滑鼠在頁面裡的位置</li>
<li>elm.offset().left:絕對座標X軸</li>
</ul>
</li>
<li>將（點擊位置除以進度條的總長）乘以 音樂的時間長度，就可以取得點擊的時間位置<code>theTime = ((xPos / width))* duration;</code></li>
<li>最後現在時間設為，計算好的點擊時間</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//點擊進度條</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//https://ithelp.ithome.com.tw/articles/10194871</span></span><br><span class="line"><span class="comment">//https://tools.wingzero.tw/article/sn/102</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$(<span class="string">'#progress-container'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> width = $(<span class="string">'#progress-container'</span>).width(); <span class="comment">//216.25</span></span><br><span class="line">  <span class="comment">//console.log(width);</span></span><br><span class="line">  <span class="comment">//取得點擊位置</span></span><br><span class="line">  <span class="keyword">var</span> elm = $(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">var</span> xPos = e.pageX - elm.offset().left;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//console.log(xPos);</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> duration = $(<span class="string">'#audio'</span>)[<span class="number">0</span>].duration;</span><br><span class="line">  <span class="keyword">var</span> theTime = ((xPos / width))</span><br><span class="line">    * duration;</span><br><span class="line">  <span class="comment">//console.log(theTime);</span></span><br><span class="line">  $(<span class="string">'#audio'</span>)[<span class="number">0</span>].currentTime = theTime;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>執行過程，利用console來查看</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(e.pageX);</span><br><span class="line"><span class="built_in">console</span>.log(elm.offset().left);</span><br><span class="line"><span class="built_in">console</span>.log(xPos)</span><br></pre></td></tr></table></figure>
<p>參考資料：<br><a href="https://tools.wingzero.tw/article/sn/102" target="_blank" rel="noopener">取得滑鼠位置、元素位置與區塊內的相對位置</a></p>
<h3 id="5-歌曲播完後，換下一首"><a href="#5-歌曲播完後，換下一首" class="headerlink" title="5.歌曲播完後，換下一首"></a>5.歌曲播完後，換下一首</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#audio'</span>).on(<span class="string">'ended'</span>,nextSong);</span><br></pre></td></tr></table></figure>
<p>參考資料：<br><a href="https://stackoverflow.com/questions/39325637/audio-auto-play-next-song-when-previous-is-finished/52228798" target="_blank" rel="noopener">audio auto play next song when previous is finished</a></p>
<h2 id="6-增加隨機的變換背景色彩"><a href="#6-增加隨機的變換背景色彩" class="headerlink" title="6.增加隨機的變換背景色彩"></a>6.增加隨機的變換背景色彩</h2><ul>
<li>色彩為0-256;而因為想取的較亮的色系，所以取64-256<ul>
<li><code>Math.random()</code> 會回傳一個偽隨機小數 (pseudo-random) 介於0到1之間(包含 0，不包含1) </li>
<li><code>Math.floor()</code>會將所有的小數無條件捨去到比自身小的最大整數</li>
<li><code>Math.floor(Math.random() * 255) + 64</code>就會取得64 to 256</li>
</ul>
</li>
<li>宣告變數<code>bgColor</code>為rdba(red,green,blue,a)</li>
<li>最後將此函式，放入<code>loadSongs()</code>函式當中，每次播放、跳轉歌曲，同時背景顏色也會改變<br><img src="https://i.imgur.com/piYCbc5.png" alt=""></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">random_bg_color</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Get a random number between 64 to 256 </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// (for getting lighter colors) </span></span><br><span class="line">  <span class="keyword">let</span> red = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">255</span>) + <span class="number">64</span>;</span><br><span class="line">  <span class="keyword">let</span> green = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">255</span>) + <span class="number">64</span>;</span><br><span class="line">  <span class="keyword">let</span> blue = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">255</span>) + <span class="number">64</span>;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Construct a color withe the given values </span></span><br><span class="line">  <span class="keyword">let</span> bgColor = <span class="string">"rgba("</span> + red + <span class="string">", "</span> + green + <span class="string">", "</span> + blue + <span class="string">", "</span> + a + <span class="string">")"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> bg = $(<span class="built_in">document</span>.body).css(<span class="string">'background'</span>, <span class="string">`<span class="subst">$&#123;bgColor&#125;</span>`</span>);</span><br><span class="line">  <span class="comment">// Set the background to the new color </span></span><br><span class="line">  bg = bgColor;</span><br><span class="line">  <span class="built_in">console</span>.log(bg)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>參考資料：<br><a href="https://www.geeksforgeeks.org/create-a-music-player-using-javascript/" target="_blank" rel="noopener">Create a Music Player using JavaScript</a><br><a href="https://stackoverflow.com/questions/20790579/wont-math-floormath-random-255-generate-uneven-probabilities" target="_blank" rel="noopener">Won’t Math.floor(Math.random() * 255) generate uneven probabilities?
</a><a href="https://ithelp.ithome.com.tw/articles/10197904" target="_blank" rel="noopener">[筆記][JavaScript]用Math.random()取得亂數的技巧</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/15/js-musicPlayer/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/10/localstorage/"
                            aria-label=": 認識什麼是LocalStorage"
                        >
                            認識什麼是LocalStorage
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-10T10:36:26+08:00">
	
		    Jan 10, 2021
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="認識-Web-Storage："><a href="#認識-Web-Storage：" class="headerlink" title="認識 Web Storage："></a>認識 Web Storage：</h2><p>HTML5 的 Web Storage 是一種可讓網頁將資料儲存於本地端的技術，其作用如同 cookie。</p>
<p>Cookie 儲存空間很小，最多僅能儲存4KB的資料。<br>HTML5 Web Storage 的儲存空間則大得多(儲存資料容量至少5MB以上)。</p>
<p><img src="https://i.imgur.com/tq8wugy.png" alt=""></p>
<h2 id="localStorage-與-sessionStorage"><a href="#localStorage-與-sessionStorage" class="headerlink" title="localStorage 與  sessionStorage"></a>localStorage 與  sessionStorage</h2><p>Web Storage 提供兩個物件可以將資料存在 client 端，一種是 localStorage，另一種是 sessionStorage</p>
<ul>
<li>localStorage:可以跨瀏覽器分頁（tab）存取，且資料存取沒有期限，除非手動從本地端清除。</li>
<li>sessionStorage:生命週期較短，每次分頁或瀏覽器關掉後就會清除。</li>
</ul>
<p>基本操作：</p>
<ul>
<li>設置資料：<code>localStorage.setItem(key, value)</code></li>
<li>取得資料：<code>let storageValue = localStorage.getItem(key, value)</code></li>
<li>清除資料：<code>localStorage.removeItem(key)</code></li>
<li>清除全部資料：<code>localStorage.clear()</code><blockquote>
<p>只要將localStorage替換sessionStorage即可</p>
</blockquote>
</li>
</ul>
<h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><p>儲存在本地端的資料，格式為 key : value，需注意的是「value 的型態只有 String」!</p>
<h2 id="找到儲存的資料"><a href="#找到儲存的資料" class="headerlink" title="找到儲存的資料"></a>找到儲存的資料</h2><ul>
<li>在 DevTools console </li>
</ul>
<p><img src="https://i.imgur.com/jZNIas5.png" alt=""></p>
<p><img src="https://i.imgur.com/7SkvJ8q.png" alt=""></p>
<p><img src="https://i.imgur.com/ZoLQ4yV.png" alt=""></p>
<h2 id="JSON-字串轉換"><a href="#JSON-字串轉換" class="headerlink" title="JSON 字串轉換"></a>JSON 字串轉換</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( arr + <span class="string">" is "</span> + <span class="keyword">typeof</span>(arr));</span><br><span class="line"><span class="comment">// 1,2,c is object</span></span><br></pre></td></tr></table></figure>

<h4 id="1-轉換成字串-JSON-stringify"><a href="#1-轉換成字串-JSON-stringify" class="headerlink" title="1.轉換成字串 JSON.stringify"></a>1.轉換成字串 JSON.stringify</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrToStr = <span class="built_in">JSON</span>.stringify(arr);</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/0lfiqLV.png" alt=""></p>
<h4 id="2-轉換回原本格式-JSON-parse"><a href="#2-轉換回原本格式-JSON-parse" class="headerlink" title="2.轉換回原本格式 JSON.parse"></a>2.轉換回原本格式 JSON.parse</h4><ul>
<li>會把一個JSON字串轉換成 JavaScript的數值或是物件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> parse = <span class="built_in">JSON</span>.parse(arrToStr);</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/3chwLJF.png" alt=""></p>
<p>參考資料：<br><a href="https://medium.com/%E9%BA%A5%E5%85%8B%E7%9A%84%E5%8D%8A%E8%B7%AF%E5%87%BA%E5%AE%B6%E7%AD%86%E8%A8%98/javascript-localstorage-%E7%9A%84%E4%BD%BF%E7%94%A8-e0da6f402453" target="_blank" rel="noopener">[JavaScript] localStorage 的使用</a><br><a href="https://yakimhsu.com/project/project_w7_storage.html" target="_blank" rel="noopener">[第七週] 瀏覽器資料儲存 - Cookie、LocalStorage、SessionStorage</a><br><a href="https://ithelp.ithome.com.tw/articles/10223253" target="_blank" rel="noopener">[Day16] JavaScript - 前端資料存</a><br><a href="https://tools.wingzero.tw/article/sn/28" target="_blank" rel="noopener">HTML5 的 Web Storage- local storage 與 session storage</a><br><a href="https://ithelp.ithome.com.tw/articles/10203525" target="_blank" rel="noopener">Day20 localStorage、sessionStorage</a><br><a href="https://medium.com/itsems-frontend/javascript-json-stringify-and-json-parse-7a1251d3824c" target="_blank" rel="noopener">[JavaScript] JSON.stringify() and JSON.parse()：變 JSON 和變物件</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/10/localstorage/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a
                class="btn btn--default btn--small"
                href="/archives/2021/"
                aria-label="NEWER POSTS"
            >
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>NEWER POSTS</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/archives/2021/page/3/"
                aria-label="OLDER POSTS"
            >
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 2 of 3</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 Eva Chan. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/eva-round.png" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Eva Chan</h4>
        
            <div id="about-card-bio"><p>Front-End Engineer</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover-v1.2.0.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-0ugzcshry6fwt459bsvhpkhas3lu3b1dzaepr6am1jchcl9ilsd8xf09sigu.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
