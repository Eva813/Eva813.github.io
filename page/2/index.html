<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content=#58b77a>
  <title>Let&#39;s Coding</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Eva Chan">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <script id="hexo-configurations">
  var CONFIG = {
    root: '/',
    theme: 'lx',
    version: '0.3.9',
    localsearch:{
      "enable": false,
      "trigger": "auto",
      "top_n_per_article": 1,
      "unescape": false,
      "preload": false
      },
    path: 'null'
  };
</script>

  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/css/main.min.css">
  <style type="text/css">
    pre,
    code {
      font-family: 'Fira Code', monospace;
    }
    html {
      font-family: sans-serif;
    }
    body {
      font-family: sans-serif;
    }
    h1, h2, h3, h4, h5, figure {
      font-family: sans-serif;
    }
    .menu-container{
      font-family: sans-serif;
    }
  </style>

  <script src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.jside.menu.js"></script>
	<script>
	$(document).ready(function(){
	$(".menu-container").jSideMenu({
	    jSidePosition: "position-right",
	    jSideSticky: true,
	    jSideSkin: "greenish",
	     });
	}); 
	</script>
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fira Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">
<meta name="generator" content="Hexo 4.2.0"></head>
<body>
<div id="page">

<div id="lx-aside" style="background-image: url(/images/blake-wheeler.jpg)">
  <div class="overlay">
  <div class="featured">
    <div class="avatar"><a href="/"><img src="/images/avatar.jpeg"></a></div>
    <span>Eva Chan</span>
    <h1>Let's Coding</h1>
    
    
  </div>
  </div>
</div>

<div id="lx-main-content">
  <div class="lx-post">

  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/01/15/js-DOMArrayMethods/">JS實作- DOM Array Methods</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-01-15</span>
      <p><p><a href="https://eva813.github.io/Eva_portfolio/ArrayMethods/arrayMethod.html" target="_blank" rel="noopener">成品</a><br><img src="https://i.imgur.com/gtaxVol.png" alt=""></p>
<h1 id="需求觀察"><a href="#需求觀察" class="headerlink" title="需求觀察"></a>需求觀察</h1><ul>
<li>使用fetch來串接API</li>
<li>透過左側按鈕，使用陣列的方法來實現不同事件<ul>
<li>運用<code>forEach()</code>來將陣列資料呈現到畫面</li>
<li>運用<code>map()</code>計算金額的倍數</li>
<li><code>filter()</code>篩選出符合條件的資料</li>
<li><code>sort()</code>用來排序資料</li>
<li><code>reduce()</code>計算陣列中資料的累加結果</li>
</ul>
</li>
</ul>
<h1 id="使用fetch來串接資料"><a href="#使用fetch來串接資料" class="headerlink" title="使用fetch來串接資料"></a>使用fetch來串接資料</h1><ul>
<li>實作專案的資料來源<code>https://randomuser.me/api</code></li>
</ul>
<p>1.原本使用<code>fetch</code></p>
<ul>
<li>送出 Request，如果得到回應就會回傳帶有 Response 的 Promise 物件，使用 then 將回傳值傳遞下去。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandomUser</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">fetch(<span class="string">'https://randomuser.me/api'</span>).then(<span class="function"><span class="params">response</span> =&gt;</span>    response.json()).then(<span class="function"><span class="params">data</span> =&gt;</span> data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a href="https://www.oxxostudio.tw/articles/201908/js-fetch.html" target="_blank" rel="noopener">JavaScript Fetch API 使用教學</a></li>
</ul>
<p>2.Fetch 搭配 async、await</p>
<ul>
<li>使用async很容易：在定義function時，開頭加上 async</li>
<li>用fetch取得資料</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getRandomUser</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> fetch(<span class="string">'https://randomuser.me/api'</span>);  <span class="comment">//執行完後發出promise</span></span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> res.json();</span><br><span class="line">  <span class="comment">//查看取得的資料，並從中選擇要用的部分</span></span><br><span class="line">  <span class="comment">//console.log(data);</span></span><br><span class="line">  <span class="keyword">const</span> user = data.results[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//創造新的使用者，並建立新的物件</span></span><br><span class="line">  <span class="keyword">const</span> newUser = &#123;</span><br><span class="line">    name: <span class="string">`<span class="subst">$&#123;user.name.first&#125;</span> <span class="subst">$&#123;user.name.last&#125;</span>`</span>,</span><br><span class="line">    money: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">1000000</span>)</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">console</span>.log(newUser);</span><br><span class="line">  addData(newUser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.函式中的撰寫</p>
<ul>
<li>查看取得的<code>data</code><br><img src="https://i.imgur.com/TjYFhjC.png" alt=""></li>
<li>變數宣告要取用資料的哪個部分，並用以建立新物件的內容<ul>
<li><code>const user = data.results[0];</code></li>
<li><code>user.name.first</code><br><img src="https://i.imgur.com/NAmWK88.png" alt=""></li>
</ul>
</li>
</ul>
<h2 id="將物件傳入陣列"><a href="#將物件傳入陣列" class="headerlink" title="將物件傳入陣列"></a>將物件傳入陣列</h2><ul>
<li><p>data 為前面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//將新建立的物件(newUser)放入陣列中</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addData</span>(<span class="params">newObj</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//這裡的data是在最前面所宣告的 初始陣列</span></span><br><span class="line">  data.push(newObj);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//不放入參數，使用預設data</span></span><br><span class="line">  updateDOM();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="將傳入新物件的陣列，顯示於畫面"><a href="#將傳入新物件的陣列，顯示於畫面" class="headerlink" title="將傳入新物件的陣列，顯示於畫面"></a>將傳入新物件的陣列，顯示於畫面</h2></li>
<li><p>使用<code>forEach()</code>來呈現畫面的資料</p>
<ul>
<li>傳入參數為item，為新創的物件資料，內有：name,money</li>
<li>創造新的<code>div</code>並增加class給他</li>
<li>用<code>innerHTML</code>插入內容</li>
<li>用 appendChild() 把上面新增的內容放入，新增的內容會依序排列在後面，不會被洗掉</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//將新創立的物件輸出呈現到畫面上(dom)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateDOM</span>(<span class="params">provideData = data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(provideData);</span><br><span class="line">  <span class="comment">//清除main區域的div</span></span><br><span class="line">  main.innerHTML = <span class="string">`&lt;h2&gt;&lt;strong&gt;Person&lt;/strong&gt;  Wealth&lt;/h2&gt;`</span>;</span><br><span class="line">  provideData.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> element = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    <span class="comment">//在新div增加class</span></span><br><span class="line">    element.classList.add(<span class="string">'person'</span>);</span><br><span class="line">    element.innerHTML = <span class="string">`&lt;strong&gt;<span class="subst">$&#123;item.name&#125;</span>&lt;/strong&gt; <span class="subst">$&#123;item.money&#125;</span>`</span>;</span><br><span class="line">    main.appendChild(element);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note info">
            <p>注意：如果本來 HTML 某元素有既有的內容，但是又用 innerHTML 在同樣的元素上加上內容的時候，innerHTML 會把原本寫的東西覆蓋掉。</p>
          </div>

<p><img src="https://i.imgur.com/xjxIGr7.png" alt=""></p>
<ul>
<li>注意參數的回傳<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateDOM</span>(<span class="params">provideData</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(provideData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/0O0629Q.png" alt=""><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateDOM</span>(<span class="params">provideData = data</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(provideData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="https://i.imgur.com/qW5Vqq9.png" alt=""></p>
<p><a href="https://ithelp.ithome.com.tw/articles/10218607" target="_blank" rel="noopener">JavaScript 初心者筆記: DOM - 如何用 JS 新增 HTML 內容</a></p>
<h2 id="數字轉金錢格式"><a href="#數字轉金錢格式" class="headerlink" title="數字轉金錢格式"></a>數字轉金錢格式</h2><p><img src="https://i.imgur.com/JKQrEyd.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//將回傳的隨機數字，轉換為金錢格式 -https://stackoverflow.com/questions/149055/how-to-format-numbers-as-currency-strings</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatMoney</span>(<span class="params">Money</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'$'</span> + Money.toFixed(<span class="number">2</span>).replace(<span class="regexp">/\d(?=(\d&#123;3&#125;)+\.)/g</span>, <span class="string">'$&amp;,'</span>);;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>formatMoney()</code>要放入剛剛forEach所傳入的金額，從這邊去調整數字的格式<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.innerHTML = <span class="string">`&lt;strong&gt;<span class="subst">$&#123;item.name&#125;</span>&lt;/strong&gt;  <span class="subst">$&#123;formatMoney(item.money)&#125;</span>`</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="https://i.imgur.com/8DLGtgC.png" alt=""></p>
<h2 id="增加人員事件"><a href="#增加人員事件" class="headerlink" title="增加人員事件"></a>增加人員事件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//設置點擊事件，按下add user，增加人</span></span><br><span class="line">addUserBtn.addEventListener(<span class="string">'click'</span>, getRandomUser);</span><br></pre></td></tr></table></figure>

<h2 id="運用map-來，建立-double-money事件"><a href="#運用map-來，建立-double-money事件" class="headerlink" title="運用map()來，建立 double money事件"></a>運用<code>map()</code>來，建立 double money事件</h2><ul>
<li>loop through array 就像forEach，但不同的是他會回傳東西<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//double money </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleMoney</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  data = data.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...item &#125;</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/PpZ5v7v.png" alt=""></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//double money </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleMoney</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  data = data.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...item, <span class="attr">money</span>: item.money * <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/joXfDXT.png" alt=""></p>
<p>呈現於畫面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//double money </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doubleMoney</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  data = data.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...item, <span class="attr">money</span>: item.money * <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">   updateDOM();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/M0R5KV4.png" alt=""></p>
<div class="note info">
            <p><code>forEach()</code>: 针对每一个元素执行提供的函数(executes a provided function once for each array element)。<br><code>map()</code>: 创建一个新的数组，其中每一个元素由调用数组中的每一个元素执行提供的函数得来(creates a new array with the results of calling a provided function on every element in the calling array)。<br><a href="https://blog.fundebug.com/2018/02/05/map_vs_foreach/" target="_blank" rel="noopener">JavaScript中Map和ForEach的区别</a></p>
          </div>

<h2 id="運用sort來建立排名"><a href="#運用sort來建立排名" class="headerlink" title="運用sort來建立排名"></a>運用<code>sort</code>來建立排名</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//sortEvent</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortEvent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  data = data.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> b.money - a.money;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//console.log(data);</span></span><br><span class="line">  updateDOM();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div class="note info">
            <p><code>sort</code>依據字串的 Unicode 編碼進行排序，會改變原本的陣列。</p><ul><li>排序進行方式：<code>sort()</code>會將所有元素轉成字串後，且以第一個字元為對象，再進行排序。</li><li>比較好的方式：一般會建議，還是以函式傳入參數來當排序條件會比較穩定。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">5</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">6</span>];</span><br><span class="line"><span class="comment">// 以匿名函式回參數做「升序」排序</span></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b; <span class="comment">// a - b &gt; 0</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [1, 2, 3, 5, 6, 9]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果要反過來做「降序」排序</span></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> b - a;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// [9, 6, 5, 3, 2, 1]</span></span><br></pre></td></tr></table></figure>
          </div>
<p>參考資料：<a href="https://ithelp.ithome.com.tw/articles/10225733" target="_blank" rel="noopener">JS 將陣列 Array 重新排列的 sort()</a>、<a href="https://medium.com/@leokao0726/%E6%B7%BA%E8%AB%87-js-sort-%E5%88%B0%E8%83%8C%E5%BE%8C%E6%8E%92%E5%BA%8F%E6%96%B9%E6%B3%95-1035f5b8cde8" target="_blank" rel="noopener">淺談 JS sort() 到背後排序方法</a></p>
<h2 id="filter篩選百萬以上的人員"><a href="#filter篩選百萬以上的人員" class="headerlink" title="filter篩選百萬以上的人員"></a><code>filter</code>篩選百萬以上的人員</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterMillionaires</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  data = data.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> item.money &gt; <span class="number">1000000</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  updateDOM();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div class="note info">
            <p><code>filter()</code>的使用是回傳新陣列，原陣列不改變</p>
          </div>


<h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h2><p>拆解內部參數<br>accumulator<br>用來累積回呼函式回傳值的累加器（accumulator）或 initialValue（若有提供的話，詳如下敘）。累加器是上一次呼叫後，所回傳的累加數值。<br>currentValue<br>原陣列目前所迭代處理中的元素。</p>
<ul>
<li><code>console.log(accumulator);</code></li>
</ul>
<p><img src="https://i.imgur.com/dGpG42b.png" alt=""></p>
<ul>
<li><code>console.log(currentValue);</code></li>
</ul>
<p><img src="https://i.imgur.com/P0yQK34.png" alt=""></p>
<ul>
<li>console.log(currentValue.money);</li>
</ul>
<p><img src="https://i.imgur.com/vNfFozL.png" alt=""></p>
<p><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="noopener">MDN</a><br><a href="https://w3c.hexschool.com/blog/a2cb755f" target="_blank" rel="noopener">JavaScript reduce 在做什麼？</a></p>
<h3 id="理解完reduce-所回傳的參數資料後…"><a href="#理解完reduce-所回傳的參數資料後…" class="headerlink" title="理解完reduce()所回傳的參數資料後…"></a>理解完<code>reduce()</code>所回傳的參數資料後…</h3><ul>
<li>讓金額加總計算<code>accumulator += currentValue.money</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//calculateMoney</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculateMoney</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reduceArr = data.reduce(<span class="function">(<span class="params">accumulator, currentValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//console.log(accumulator);</span></span><br><span class="line">   <span class="comment">// console.log(currentValue.money);</span></span><br><span class="line">    <span class="keyword">return</span> accumulator += currentValue.money;</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> totalEl = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  totalEl.innerHTML = <span class="string">`&lt;h3&gt;Total Wealth: &lt;strong&gt; <span class="subst">$&#123;formatMoney(reduceArr)&#125;</span> &lt;/strong&gt; &lt;/h3&gt; `</span>;</span><br><span class="line">  main.appendChild(totalEl);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</p>
      <div class="post-button"><a class="btn" href="/2021/01/15/js-DOMArrayMethods/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/01/15/js-SortableList/">JS實作- SortableList</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-01-15</span>
      <p><p><a href="https://eva813.github.io/Eva_portfolio/sortableList/sortableList.html" target="_blank" rel="noopener">成品</a></p>
<h2 id="觀察功能需求"><a href="#觀察功能需求" class="headerlink" title="觀察功能需求"></a>觀察功能需求</h2><ul>
<li><p>Drag &amp; Drop API</p>
<ul>
<li>使元素可以拖放，在 HTML5，只要為它加上 draggable=”true” 屬性，它就能「被拖曳」了</li>
</ul>
</li>
<li><p>拖曳該項目時，會使下方的格子顏色變成灰色</p>
</li>
</ul>
<p><img src="https://i.imgur.com/sZVXh9r.png" alt=""></p>
<ul>
<li>拖曳項目到目標位置，會使了者交換</li>
<li>排序最後會有一個檢查順序正確與否的按鈕</li>
</ul>
<h2 id="JS部分"><a href="#JS部分" class="headerlink" title="JS部分"></a>JS部分</h2><h3 id="1-排行榜的設置"><a href="#1-排行榜的設置" class="headerlink" title="1.排行榜的設置"></a>1.排行榜的設置</h3><ul>
<li>設定熱門旅遊縣市排行榜的陣列</li>
<li>並宣告一個空陣列，以利後面使用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bestPlace = [</span><br><span class="line">  <span class="string">'台南'</span>,</span><br><span class="line">  <span class="string">'台中'</span>,</span><br><span class="line">  <span class="string">'高雄'</span>,</span><br><span class="line">  <span class="string">'台東'</span>,</span><br><span class="line">  <span class="string">'屏東'</span>,</span><br><span class="line">  <span class="string">'新北'</span>,</span><br><span class="line">  <span class="string">'宜蘭'</span>,</span><br><span class="line">  <span class="string">'花蓮'</span>,</span><br><span class="line">  <span class="string">'澎湖'</span>,</span><br><span class="line">  <span class="string">'桃園'</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> listItems = [];</span><br></pre></td></tr></table></figure>
<h3 id="2-創建排行列表，並將其呈現於頁面上"><a href="#2-創建排行列表，並將其呈現於頁面上" class="headerlink" title="2.創建排行列表，並將其呈現於頁面上"></a>2.創建排行列表，並將其呈現於頁面上</h3><ul>
<li>宣告新的變數，並利用Fisher-Yates，創造隨機的效果<ul>
<li>注意新變數，是帶入展開運算元(把陣列中的元素取出)</li>
</ul>
</li>
<li>利用<code>each</code>跑陣列，創造變數填入<code>&lt;li&gt;</code>，並於其中填入html標籤，使畫面呈現列表。</li>
<li>jquery稱增加屬性<code>listItem.setAttribute(&#39;data-index&#39;, index);</code>,<a href="https://api.jquery.com/attr/" target="_blank" rel="noopener">.attr()</a></li>
</ul>
<p><img src="https://i.imgur.com/OqjHMda.png" alt=""></p>
<ul>
<li><code>listItems.push(listItem);</code>將列表項目，放入空陣列中</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Fisher-Yates洗牌演算法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fisherYatesShuffle</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = arr.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">var</span> j = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (i + <span class="number">1</span>)); <span class="comment">//random index</span></span><br><span class="line">    [arr[i], arr[j]] = [arr[j], arr[i]]; <span class="comment">// swap</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/製作實際可以看到的list</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">creatList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> placeArr = [...bestPlace];</span><br><span class="line">  fisherYatesShuffle(placeArr);</span><br><span class="line">  $.each(placeArr, <span class="function"><span class="keyword">function</span> (<span class="params">index, place</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> listItem = $(<span class="string">'&lt;li&gt;&lt;/li&gt;'</span>).appendTo(<span class="string">'#draggable-list'</span>);</span><br><span class="line">    <span class="comment">// console.log(listItem);</span></span><br><span class="line">    listItem.attr(<span class="string">"data-index"</span>, index);</span><br><span class="line">    <span class="comment">//listItem.addClass('wrong')</span></span><br><span class="line">    listItem.html(<span class="string">`&lt;span class="number"&gt;<span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="draggable" draggable="true"&gt;</span></span><br><span class="line"><span class="string">          &lt;p class="place-name"&gt;<span class="subst">$&#123;place&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">          &lt;i class="fas fa-grip-lines"&gt;&lt;/i&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;`</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    listItems.push(listItem);</span><br><span class="line">    <span class="comment">//insert into dom</span></span><br><span class="line">    $(<span class="string">'#draggable-list'</span>).append(listItem);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  addEventListeners()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note info">
            <p>參考資料：<br>push：<br><a href="https://ithelp.ithome.com.tw/articles/10222922" target="_blank" rel="noopener">JS 從陣列 Array 尾端新增元素的 push()</a><br><a href="https://www.oxxostudio.tw/articles/201908/js-array.html" target="_blank" rel="noopener">JavaScript Array 陣列操作方法大全 ( 含 ES6 )</a></p>
          </div>
<h3 id="3-拖曳的監聽事件"><a href="#3-拖曳的監聽事件" class="headerlink" title="3.拖曳的監聽事件"></a>3.拖曳的監聽事件</h3><ul>
<li>拖曳開始的監聽，元素是抓取<code>draggables</code>，後續的drop、dragenter、dragover等事件，元素是<code>.draggable-list li</code></li>
<li>針對要被拖曳的元素（dragSource）監聽事件</li>
<li>利用forEach方式，允許多個可拖曳的物件</li>
</ul>
<ul>
<li>抓取的元素：<br><img src="https://i.imgur.com/5G60Pmr.png" alt=""><br><img src="https://i.imgur.com/zXR4YWT.png" alt=""></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//監聽事件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEventListeners</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> draggables = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.draggable'</span>);</span><br><span class="line">  <span class="keyword">const</span> dragListItems = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.draggable-list li'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//Dragable dot 增加監聽事件</span></span><br><span class="line"></span><br><span class="line">  draggables.forEach(<span class="function"><span class="params">draggable</span> =&gt;</span> &#123;</span><br><span class="line">    draggable.addEventListener(<span class="string">'dragstart'</span>, dragStart);</span><br><span class="line">  &#125;);</span><br><span class="line">  dragListItems.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    item.addEventListener(<span class="string">'dragover'</span>, dragOver);</span><br><span class="line">    item.addEventListener(<span class="string">'drop'</span>, dragDrop);</span><br><span class="line">    item.addEventListener(<span class="string">'dragenter'</span>, dragEnter);</span><br><span class="line">    item.addEventListener(<span class="string">'dragleave'</span>, dragLeave);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://pjchender.blogspot.com/2017/08/html5-drag-and-drop-api.html" target="_blank" rel="noopener">[筆記] 製作可拖曳的元素（HTML5 Drag and Drop API）</a></p>
<h3 id="4-針對監聽事件，設置各執行的函式"><a href="#4-針對監聽事件，設置各執行的函式" class="headerlink" title="4.針對監聽事件，設置各執行的函式"></a>4.針對監聽事件，設置各執行的函式</h3><ul>
<li>為了能夠追蹤抓取項目，所以一開始先宣告一個索引變數。</li>
<li><code>dragStart()</code>:宣告<code>dragStartIndex</code>變數為抓取到的<code>li</code>-&gt;<code>data-index</code></li>
</ul>
<p><img src="https://i.imgur.com/6tMHuYr.png" alt=""></p>
<ul>
<li>有拖曳的開始，就會有結束，也就是放置(<code>dragDrop()</code>)：<code>dragEndIndex</code>同樣也是以索引來作為依據，並在設置一個交換的函式</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//要能夠持續追蹤每個項目的index，所以要有個初始變數</span></span><br><span class="line"><span class="keyword">let</span> dragStartIndex;</span><br><span class="line"><span class="comment">//拖拉的各函式</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragStart</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//console.log('Event: ', 'dragstart');</span></span><br><span class="line">  dragStartIndex = +$(<span class="keyword">this</span>).closest(<span class="string">'li'</span>).attr(<span class="string">'data-index'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(dragStartIndex);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragOver</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log('Event: ', 'dragover');</span></span><br><span class="line">  e.preventDefault();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//設定開始的index,以及結束的index是為了交換</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragDrop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log('Event: ', 'dragdrop');</span></span><br><span class="line">  <span class="keyword">const</span> dragEndIndex = +$(<span class="keyword">this</span>).attr(<span class="string">'data-index'</span>);</span><br><span class="line">  swapItems(dragStartIndex, dragEndIndex);</span><br><span class="line">  $(<span class="keyword">this</span>).removeClass(<span class="string">'over'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-交換索引，使物件交換位置swapItems"><a href="#5-交換索引，使物件交換位置swapItems" class="headerlink" title="5.交換索引，使物件交換位置swapItems"></a>5.交換索引，使物件交換位置<code>swapItems</code></h3><ul>
<li>透過抓取到的開始與結束的索引，來填入要交換的變數</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swapItems</span>(<span class="params">fromIndex, toIndex</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//要設定交換之前，要先到dragover去設定e.preventDefault();（因為dragover會擋到交換的執行）</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> itemOne = listItems[fromIndex].find(<span class="string">'.draggable'</span>);</span><br><span class="line">  <span class="keyword">const</span> itemTwo = listItems[toIndex].find(<span class="string">'.draggable'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//console.log(itemOne, itemTwo)</span></span><br><span class="line">  listItems[fromIndex].append(itemTwo);</span><br><span class="line">  listItems[toIndex].append(itemOne);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-延續拖曳監聽事件，所要執行的其他函式"><a href="#6-延續拖曳監聽事件，所要執行的其他函式" class="headerlink" title="6.延續拖曳監聽事件，所要執行的其他函式"></a>6.延續拖曳監聽事件，所要執行的其他函式</h3><ul>
<li><p><code>dragEnter()</code>拖曳元素進入要放置的目標位置，所觸發的事件。在此是設定要放入目標位置時，增加一個<code>class</code>的效果</p>
</li>
<li><p>進入目標位置，其相互搭配的事件就是離開<code>dragLeave()</code>，當拖曳元素離開放置位置時，所發生的事件。在此為設定，去除於原本<code>class</code>的效果。</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragEnter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log('Event: ', 'dragenter');</span></span><br><span class="line">  $(<span class="keyword">this</span>).addClass(<span class="string">'over'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragLeave</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// console.log('Event: ', 'dragleave');</span></span><br><span class="line">  $(<span class="keyword">this</span>).removeClass(<span class="string">'over'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-核對順序"><a href="#7-核對順序" class="headerlink" title="7.核對順序"></a>7.核對順序</h3><ul>
<li>抓取listItems，來跑forEach，其要參照的參數是，項目、索引。</li>
<li>宣告<code>placeName</code>為參數<code>listItem</code>，draggable的文字字串。<ul>
<li>trim()用來去除字串前後的空白</li>
</ul>
</li>
<li>判斷句<code>placeName !== bestPlace[index]</code></li>
<li><code>console.log(bestPlace[index])</code>會印出，正確的順序。</li>
</ul>
<p><img src="https://i.imgur.com/xIR3X98.png" alt=""></p>
<ul>
<li>核對結果：就是分別加入<code>wrong</code>、<code>&#39;right&#39;</code>。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//核對排名順序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkOrder</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  listItems.forEach(<span class="function">(<span class="params">listItem, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> placeName = listItem.find(<span class="string">'.draggable'</span>).text().trim();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (placeName !== bestPlace[index]) &#123;</span><br><span class="line">      listItem.addClass(<span class="string">'wrong'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      listItem.removeClass(<span class="string">'wrong'</span>);</span><br><span class="line">      listItem.addClass(<span class="string">'right'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<hr>
<h2 id="以下為補充資料："><a href="#以下為補充資料：" class="headerlink" title="以下為補充資料："></a>以下為補充資料：</h2><h3 id="拖曳補充資料："><a href="#拖曳補充資料：" class="headerlink" title="拖曳補充資料："></a>拖曳補充資料：</h3><p><a href="https://ourcodeworld.com/articles/read/664/top-5-best-sortable-and-draggable-list-javascript-and-jquery-plugins" target="_blank" rel="noopener">Top 5: Best Sortable &amp; Draggable List JavaScript and jQuery Plugins</a><br><a href="https://ithelp.ithome.com.tw/articles/10120587" target="_blank" rel="noopener">實用網頁工具庫 - jQuery UI (上) 元件篇
</a></p>
<h3 id="使陣列隨機排序"><a href="#使陣列隨機排序" class="headerlink" title="使陣列隨機排序"></a>使陣列隨機排序</h3><ul>
<li>使用<code>map</code>將陣列轉換為新陣列，創造vale、以及加上sort排序值(利用<code>Math.random()</code>來產生亂數)</li>
<li>使用sort隨機排序，剛剛的sort值是隨機產生，再一次使用sort，來使排的順序也隨機。</li>
<li>最後，因為排序後陣列中的物件是<code>{ value: , sort:  }</code>，而我們要讓畫面只顯示<code>value:</code>，所以再使用<code>map</code>將新陣列轉回只有該資料的陣列。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  [...richestPeople]</span><br><span class="line">    .map(<span class="function"><span class="params">a</span> =&gt;</span> (&#123; <span class="attr">value</span>: a, <span class="attr">sort</span>: <span class="built_in">Math</span>.random() &#125;))</span><br><span class="line">    .sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.sort - b.sort)</span><br><span class="line">    .map(<span class="function"><span class="params">a</span> =&gt;</span> a.value)</span><br><span class="line">    .forEach(<span class="function">(<span class="params">person, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> listItem = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>);</span><br><span class="line"></span><br><span class="line">      listItem.setAttribute(<span class="string">'data-index'</span>, index);</span><br><span class="line"></span><br><span class="line">      listItem.innerHTML = <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;span class="number"&gt;<span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>&lt;/span&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="draggable" draggable="true"&gt;</span></span><br><span class="line"><span class="string">          &lt;p class="person-name"&gt;<span class="subst">$&#123;person&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">          &lt;i class="fas fa-grip-lines"&gt;&lt;/i&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line"></span><br><span class="line">      listItems.push(listItem);</span><br><span class="line"></span><br><span class="line">      draggable_list.appendChild(listItem);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  addEventListeners();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a href="https://shubo.io/javascript-random-shuffle/" target="_blank" rel="noopener">[筆記] 如何正確實作 JavaScript Array Random Shuffle 亂數排序演算法</a><br><a href="https://www.delftstack.com/zh-tw/howto/javascript/shuffle-array-javascript/" target="_blank" rel="noopener">在 JavaScript 中對一個陣列進行隨機化或洗牌
</a></li>
</ul>
<hr>
<h3 id="jquery-ui"><a href="#jquery-ui" class="headerlink" title="jquery ui"></a>jquery ui</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//https://stackoverflow.com/questions/6426795/what-is-disableselection-used-for-in-jquery-ui</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragdrop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">"#draggable-list"</span>).sortable(&#123;</span><br><span class="line">    <span class="comment">//connectWith: "ul",</span></span><br><span class="line">    delay: <span class="number">300</span>,</span><br><span class="line">    distance: <span class="number">15</span>,</span><br><span class="line">    <span class="comment">//number: "span:not(.number)",</span></span><br><span class="line">    iframeFix: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  &#125;).disableSelection();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<hr>
<h3 id="顏色"><a href="#顏色" class="headerlink" title="顏色"></a>顏色</h3><p><a href="https://www.0to255.com/f2e8cf" target="_blank" rel="noopener">0-255</a><br><a href="https://webgradients.com/" target="_blank" rel="noopener">漸層顏色</a><br><a href="https://coolors.co/palettes/trending" target="_blank" rel="noopener">colors</a><br><a href="https://stackoverflow.com/questions/34494873/why-is-my-jquery-selector-returning-a-n-fn-init0-and-what-is-it" target="_blank" rel="noopener">Why is my JQuery selector returning a n.fn.init[0], and what is it?</a></p>
</p>
      <div class="post-button"><a class="btn" href="/2021/01/15/js-SortableList/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/01/15/js-musicPlayer/">JS實作- musicPlayer</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-01-15</span>
      <p><h2 id="觀察須製作的功能"><a href="#觀察須製作的功能" class="headerlink" title="觀察須製作的功能"></a>觀察須製作的功能</h2><p><a href="https://eva813.github.io/Eva_portfolio/musicPlayer/musicPlayer.html" target="_blank" rel="noopener">成品</a></p>
<ol>
<li>播放器API的樣式</li>
</ol>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio" target="_blank" rel="noopener">&lt;audio&gt;: The Embed Audio element</a></p>
<ol start="2">
<li>播放時，左方的圓型圖示會旋轉。</li>
</ol>
<ul>
<li>先於css檔案製作符合動畫的class</li>
<li>在js時，依照符合的情況加入該class</li>
</ul>
<p><img src="https://i.imgur.com/3LBdMiU.png" alt=""></p>
<ol start="3">
<li>播放時，上方會跳出播放歌曲的名稱。</li>
</ol>
<ul>
<li>先於css檔案製作符合動畫的class，設定<code>opacity</code>1或0，<code>translateY</code>位置的移動</li>
<li>在js時，依照符合的情況加入該class</li>
</ul>
<p><img src="https://i.imgur.com/U3dx7yG.png" alt=""></p>
<ol start="4">
<li>左右按鍵可以更換曲目，同時圖片會更換</li>
</ol>
<ul>
<li>設定陣列，使歌曲與圖片相符</li>
<li>並讓前後的跳轉鍵，依照順序或條件來變化</li>
</ul>
<p><img src="https://i.imgur.com/NuxfsOb.png" alt=""></p>
<hr>
<h2 id="html部分"><a href="#html部分" class="headerlink" title="html部分"></a>html部分</h2><h3 id="跳轉按鍵"><a href="#跳轉按鍵" class="headerlink" title="跳轉按鍵"></a>跳轉按鍵</h3><ul>
<li>播放鍵、前/後跳轉的按鈕 </li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"prev"</span> <span class="attr">class</span>=<span class="string">"action-btn"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fas fa-backward"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"play"</span> <span class="attr">class</span>=<span class="string">"action-btn  action-btn-big"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fas fa-play"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"next"</span> <span class="attr">class</span>=<span class="string">"action-btn"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fas fa-forward"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/w1bpDjr.png" alt=""></p>
<h2 id="css部分"><a href="#css部分" class="headerlink" title="css部分"></a>css部分</h2><h3 id="背景顏色"><a href="#背景顏色" class="headerlink" title="背景顏色"></a>背景顏色</h3><p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient()" target="_blank" rel="noopener">linear-gradient()</a></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 傾斜度\顏色、從哪個位置開始 */</span></span><br><span class="line">  <span class="selector-tag">background-image</span><span class="selector-pseudo">:linear-gradient(0deg</span></span><br><span class="line">  ,<span class="selector-tag">rgb</span>(247, 247, 247,1) 23<span class="selector-class">.8</span>%,</span><br><span class="line">  <span class="selector-tag">rgba</span>(252,221,221,1) 92% );</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/Xb5PpmY.png" alt=""></p>
<h2 id="圖片圓形以及旋轉"><a href="#圖片圓形以及旋轉" class="headerlink" title="圖片圓形以及旋轉"></a>圖片圓形以及旋轉</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img-container</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">110px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*圖片圓形*/</span></span><br><span class="line"><span class="selector-class">.img-container</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">object-fit</span>: cover;</span><br><span class="line"><span class="comment">/*填滿元素的寬度及高度(維持原比例)，通常會剪掉部分的物件*/</span></span><br><span class="line"> <span class="attribute">height</span>: <span class="number">110px</span>;</span><br><span class="line"> <span class="attribute">width</span>: inherit; <span class="comment">/*繼承自父層的寬度屬性值。*/</span></span><br><span class="line"> <span class="attribute">position</span>:absolute;</span><br><span class="line"> <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line"> <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"> <span class="attribute">animation</span>: rotate <span class="number">3s</span> linear infinite;</span><br><span class="line"> <span class="attribute">animation-play-state</span>: paused;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 播放class的製作 */</span></span><br><span class="line"><span class="selector-class">.music-container</span><span class="selector-class">.play</span> <span class="selector-class">.img-container</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line"> <span class="attribute">animation-play-state</span>:running;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> rotate&#123;</span><br><span class="line">  <span class="selector-tag">from</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用animation@keyframe<br><a href="https://wcc723.github.io/development/2020/10/11/img-cover/" target="_blank" rel="noopener">新手前端也不該犯的錯：圖片變形</a></li>
</ul>
<p><img src="https://i.imgur.com/RfUz8Pk.png" alt=""></p>
<ul>
<li>在圖片中間加入圓形點，以看起來像光碟樣式</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img-container</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>,<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/HlnWKJb.png" alt=""></p>
<h3 id="播放進度條的製作"><a href="#播放進度條的製作" class="headerlink" title="播放進度條的製作"></a>播放進度條的製作</h3><ol>
<li>標題<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.music-info</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,.<span class="number">5</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">15px</span> <span class="number">15px</span> <span class="number">0</span> <span class="number">0</span> ;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0%</span>);</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">0.3s</span> ease-in,opacity <span class="number">0.3s</span> ease-in;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.music-container</span><span class="selector-class">.play</span> <span class="selector-class">.music-info</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">   <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">100%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>將曲目標題設置背景、圓角</li>
<li>利用 transfor、opacity來呈現位置的變化</li>
</ul>
<p><img src="https://i.imgur.com/icBK0qt.png" alt=""></p>
<ul>
<li>修改標題位置</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*放入.music-info之中*/</span></span><br><span class="line"><span class="selector-tag">width</span>: <span class="selector-tag">calc</span>(100% <span class="selector-tag">-</span> 40<span class="selector-tag">px</span>);</span><br><span class="line"> <span class="selector-tag">padding</span>: 10<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> 10<span class="selector-tag">px</span> 150<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<div class="note info">
            <p>calc() 的運算式一樣是按照先乘除後加減進行計算<br> width: calc(100% - 40px);<br>/* 意思是 100% 的寬度 - 去 40px */<br><a href="https://5xruby.tw/posts/css-calc/" target="_blank" rel="noopener">CSS： calc() 數值運算</a></p>
          </div>


<p><img src="https://i.imgur.com/er3G6Wd.png" alt=""></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.music-info</span> <span class="selector-tag">h4</span>&#123;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/qiWmxmu.png" alt=""></p>
<p>2.進度條（progress）</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.progress-container</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.progress</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fe8daa</span>;</span><br><span class="line"> <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: width .<span class="number">1s</span> linear ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/uPUHWcM.png" alt=""></p>
<h2 id="js部分"><a href="#js部分" class="headerlink" title="js部分"></a>js部分</h2><h3 id="1-音樂播放鍵-播放與停止"><a href="#1-音樂播放鍵-播放與停止" class="headerlink" title="1.音樂播放鍵(播放與停止)"></a>1.音樂播放鍵(播放與停止)</h3><ul>
<li>分別有兩個函式：<code>playMusic()</code> 、<code>pauseMusic()</code></li>
<li>在css設定<code>.play</code>的css，並於js綁定事件，加入css的效果(使圖片如同轉盤，會旋轉)</li>
<li>在icon的部分：在播放時：為暫停鍵圖示;在暫停時：為播放鍵的圖示</li>
<li>透過play()、pause()，讓音源播放與暫停</li>
</ul>
<div class="note info">
            <p>因為play()、pause()是DOM元素，不是jQuery的function，而要用jQuery取得DOM元素<br><code>$(&#39;#audio&#39;).get(0).play()</code> =&gt;<code>$(&#39;#audio&#39;)[0].play()</code><br><code>$(&#39;#audio&#39;).get(0).pause()</code> =&gt;<code>$(&#39;#audio&#39;)[0].pause()</code></p>
          </div>

<p>參考資料：<br><a href="https://learn.jquery.com/using-jquery-core/faq/how-do-i-pull-a-native-dom-element-from-a-jquery-object/" target="_blank" rel="noopener">How do I pull a native DOM element from a jQuery object?</a><br><a href="https://stackoverflow.com/questions/4646998/play-pause-html-5-video-using-jquery" target="_blank" rel="noopener">Play/pause HTML 5 video using JQuery</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//播放音樂</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">playMusic</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  $(<span class="string">'.music-container'</span>).addClass(<span class="string">'play'</span>);</span><br><span class="line">  $(<span class="string">'#play'</span>).find(<span class="string">'i'</span>).removeClass(<span class="string">'fa-play'</span>);</span><br><span class="line">  $(<span class="string">'#play'</span>).find(<span class="string">'i'</span>).addClass(<span class="string">'fa-pause'</span>);</span><br><span class="line">  $(<span class="string">'#audio'</span>).get(<span class="number">0</span>).play();</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//停止音樂</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pauseMusic</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'.music-container'</span>).removeClass(<span class="string">'play'</span>);</span><br><span class="line">  $(<span class="string">'#play'</span>).find(<span class="string">'i'</span>).addClass(<span class="string">'fa-play'</span>);</span><br><span class="line">  $(<span class="string">'#play'</span>).find(<span class="string">'i'</span>).removeClass(<span class="string">'fa-pause'</span>);</span><br><span class="line">  $(<span class="string">'#audio'</span>).get(<span class="number">0</span>).pause();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><h4 id="綁定事件："><a href="#綁定事件：" class="headerlink" title="綁定事件："></a>綁定事件：</h4>如果音樂是播放狀態的話，就執行<code>pauseMusic()</code>，反之，音樂不處於波方時，執行<code>playMusic()</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#play'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> hasPlay = $(<span class="string">'#music-container'</span>).hasClass(<span class="string">'play'</span>);</span><br><span class="line">   <span class="comment">//var a = $('#audio').paused;</span></span><br><span class="line">   <span class="keyword">if</span> (hasPlay) &#123;</span><br><span class="line">     pauseMusic();</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     playMusic();</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>




</li>
</ul>
<h3 id="2-載入音樂"><a href="#2-載入音樂" class="headerlink" title="2.載入音樂"></a>2.載入音樂</h3><ul>
<li>將歌曲名稱建立陣列，並將此回傳到建立的函式中</li>
<li>設定預設的索引<code>let songIndex = 1</code></li>
<li>使用 attr( 屬性名, 屬性值 )，獲取屬性的值，在這部分，透過歌曲名稱來取得歌曲與照片</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> songs_name = [<span class="string">'hey'</span>, <span class="string">'summer'</span>, <span class="string">'ukulele'</span>];</span><br><span class="line"><span class="keyword">let</span> songIndex = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadSongs</span>(<span class="params">song</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//console.log(song);</span></span><br><span class="line">  $(<span class="string">'#title'</span>).text(song);</span><br><span class="line">  </span><br><span class="line">  $(<span class="string">'#audio'</span>).attr(<span class="string">'src'</span>, <span class="string">`music/<span class="subst">$&#123;song&#125;</span>.mp3`</span>);</span><br><span class="line">  $(<span class="string">'#cover'</span>).attr(<span class="string">'src'</span>, <span class="string">`img/<span class="subst">$&#123;song&#125;</span>.jpg`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Initially load song details into DOM</span></span><br><span class="line">loadSongs(songs_name[songIndex]);</span><br></pre></td></tr></table></figure>
<h4 id="綁定於下一首、前一首的圖示被點擊時"><a href="#綁定於下一首、前一首的圖示被點擊時" class="headerlink" title="綁定於下一首、前一首的圖示被點擊時"></a>綁定於下一首、前一首的圖示被點擊時</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#next'</span>).click(nextSong)</span><br><span class="line">  $(<span class="string">'#prev'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; prevSong();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>


<ul>
<li><p>查看函式回傳</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loadSongs(songs_name);</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/je9hXJY.png" alt=""></p>
</li>
<li><p>要抓取到該索引</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loadSongs(songs_name[songIndex]);</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/5not1Ji.png" alt=""><br>此段落執行時，出現問題：<br><img src="https://i.imgur.com/dj4H5hb.png" alt=""></p>
</li>
<li><p>搜尋到的處理方式：在html的<code>head</code><link rel="shortcut icon" href="#"><br><a href="https://stackoverflow.com/questions/31075893/im-getting-favicon-ico-error/31329574" target="_blank" rel="noopener">I’m getting favicon.ico error
</a></p>
</li>
</ul>
<p>參考資料：<br><a href="https://iter01.com/470327.html" target="_blank" rel="noopener">jquery prop和attr的區別</a><br><a href="https://cythilya.github.io/2017/09/10/jquery-attr-vs-prop/" target="_blank" rel="noopener">jQuery .attr() vs .prop()</a></p>
<h3 id="3-左右鍵的跳轉"><a href="#3-左右鍵的跳轉" class="headerlink" title="3.左右鍵的跳轉"></a>3.左右鍵的跳轉</h3><ul>
<li>下一首歌曲，與跳至前一首歌曲，兩個函式的撰寫有異曲同工之妙，只有在設條條件上的差異。</li>
<li><code>nextSong()</code>:設定條件為歌曲索引<code>songIndex</code>比 歌曲陣列長度-1<code>songs_name.length - 1</code>還要小，我們就要將索引+1。<ul>
<li>例如這裏預設的索引為1，所以在點擊當下，判斷&lt;<code>songs_name.length - 1</code>，所以需加1，索引變成2，跳至下一首 ‘ukulele’</li>
</ul>
</li>
<li>prevSong()：設定條件為歌曲索引<code>songIndex</code>比0大，就要索引-1，跳轉至上一首歌曲。若沒符合的話，索引就等於<code>songs_name.length - 1</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//歌曲的索引，如果比歌曲總數-1還小，就將索引加1，跳轉下一首</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nextSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (songIndex &lt; songs_name.length - <span class="number">1</span>) &#123; songIndex += <span class="number">1</span>; &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    songIndex = <span class="number">0</span></span><br><span class="line">  &#125;;</span><br><span class="line">  loadSongs(songs_name[songIndex]);</span><br><span class="line">  playMusic();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//跳轉前一首</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">prevSong</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//如果索引沒有大於0。就會播索引[2]</span></span><br><span class="line">  <span class="keyword">if</span> (songIndex &gt; <span class="number">0</span>) &#123; songIndex -= <span class="number">1</span>; &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    songIndex = songs_name.length - <span class="number">1</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  loadSongs(songs_name[songIndex]);</span><br><span class="line">  playMusic();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>參考資料：<br><a href="https://www.geeksforgeeks.org/create-a-music-player-using-javascript/" target="_blank" rel="noopener">Create a Music Player using JavaScript</a></p>
<h3 id="4-點擊進度條，可以跳轉音樂位置"><a href="#4-點擊進度條，可以跳轉音樂位置" class="headerlink" title="4.點擊進度條，可以跳轉音樂位置"></a>4.點擊進度條，可以跳轉音樂位置</h3><h4 id="1-顯示粉色進度條"><a href="#1-顯示粉色進度條" class="headerlink" title="(1).顯示粉色進度條"></a>(1).顯示粉色進度條</h4><ul>
<li>duration：音源的時間(一樣是使用get方式取得)</li>
<li>currentTime：音樂播放的當前位置（以秒計）</li>
<li>progressBar：進度條</li>
<li>計算百分比：<code>(currentTime / duration) * 100</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//顯示進度條</span></span><br><span class="line"><span class="comment">//為何取[0]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleProgress</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> duration = $(<span class="string">'#audio'</span>).get(<span class="number">0</span>).duration;</span><br><span class="line">  <span class="comment">//console.log(duration)</span></span><br><span class="line">  <span class="keyword">var</span> currentTime = $(<span class="string">'#audio'</span>)[<span class="number">0</span>].currentTime;</span><br><span class="line">  <span class="comment">//console.log(currentTime)</span></span><br><span class="line">  <span class="keyword">const</span> progressBar = $(<span class="string">'#progress'</span>);</span><br><span class="line">  <span class="keyword">const</span> progressPercent = (currentTime / duration) * <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//currentTime目前播放時間去與影片長度duration轉換成百分比，即可得到目前播放時間的百分比</span></span><br><span class="line"></span><br><span class="line">  progressBar.css(<span class="string">'width'</span>, <span class="string">`<span class="subst">$&#123;progressPercent&#125;</span>%`</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2-點擊進度條，會跳轉到該位置播放"><a href="#2-點擊進度條，會跳轉到該位置播放" class="headerlink" title="(2).點擊進度條，會跳轉到該位置播放"></a>(2).點擊進度條，會跳轉到該位置播放</h4><ul>
<li>width:獲取該進度條容器的寬度</li>
<li>抓取點擊位置：<ul>
<li>e.pageX:取得滑鼠在頁面裡的位置</li>
<li>elm.offset().left:絕對座標X軸</li>
</ul>
</li>
<li>將（點擊位置除以進度條的總長）乘以 音樂的時間長度，就可以取得點擊的時間位置<code>theTime = ((xPos / width))* duration;</code></li>
<li>最後現在時間設為，計算好的點擊時間</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//點擊進度條</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//https://ithelp.ithome.com.tw/articles/10194871</span></span><br><span class="line"><span class="comment">//https://tools.wingzero.tw/article/sn/102</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$(<span class="string">'#progress-container'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> width = $(<span class="string">'#progress-container'</span>).width(); <span class="comment">//216.25</span></span><br><span class="line">  <span class="comment">//console.log(width);</span></span><br><span class="line">  <span class="comment">//取得點擊位置</span></span><br><span class="line">  <span class="keyword">var</span> elm = $(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">var</span> xPos = e.pageX - elm.offset().left;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//console.log(xPos);</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> duration = $(<span class="string">'#audio'</span>)[<span class="number">0</span>].duration;</span><br><span class="line">  <span class="keyword">var</span> theTime = ((xPos / width))</span><br><span class="line">    * duration;</span><br><span class="line">  <span class="comment">//console.log(theTime);</span></span><br><span class="line">  $(<span class="string">'#audio'</span>)[<span class="number">0</span>].currentTime = theTime;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>執行過程，利用console來查看</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(e.pageX);</span><br><span class="line"><span class="built_in">console</span>.log(elm.offset().left);</span><br><span class="line"><span class="built_in">console</span>.log(xPos)</span><br></pre></td></tr></table></figure>
<p>參考資料：<br><a href="https://tools.wingzero.tw/article/sn/102" target="_blank" rel="noopener">取得滑鼠位置、元素位置與區塊內的相對位置</a></p>
<h3 id="5-歌曲播完後，換下一首"><a href="#5-歌曲播完後，換下一首" class="headerlink" title="5.歌曲播完後，換下一首"></a>5.歌曲播完後，換下一首</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#audio'</span>).on(<span class="string">'ended'</span>,nextSong);</span><br></pre></td></tr></table></figure>
<p>參考資料：<br><a href="https://stackoverflow.com/questions/39325637/audio-auto-play-next-song-when-previous-is-finished/52228798" target="_blank" rel="noopener">audio auto play next song when previous is finished</a></p>
<h2 id="6-增加隨機的變換背景色彩"><a href="#6-增加隨機的變換背景色彩" class="headerlink" title="6.增加隨機的變換背景色彩"></a>6.增加隨機的變換背景色彩</h2><ul>
<li>色彩為0-256;而因為想取的較亮的色系，所以取64-256<ul>
<li><code>Math.random()</code> 會回傳一個偽隨機小數 (pseudo-random) 介於0到1之間(包含 0，不包含1) </li>
<li><code>Math.floor()</code>會將所有的小數無條件捨去到比自身小的最大整數</li>
<li><code>Math.floor(Math.random() * 255) + 64</code>就會取得64 to 256</li>
</ul>
</li>
<li>宣告變數<code>bgColor</code>為rdba(red,green,blue,a)</li>
<li>最後將此函式，放入<code>loadSongs()</code>函式當中，每次播放、跳轉歌曲，同時背景顏色也會改變<br><img src="https://i.imgur.com/piYCbc5.png" alt=""></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">random_bg_color</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Get a random number between 64 to 256 </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// (for getting lighter colors) </span></span><br><span class="line">  <span class="keyword">let</span> red = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">255</span>) + <span class="number">64</span>;</span><br><span class="line">  <span class="keyword">let</span> green = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">255</span>) + <span class="number">64</span>;</span><br><span class="line">  <span class="keyword">let</span> blue = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">255</span>) + <span class="number">64</span>;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Construct a color withe the given values </span></span><br><span class="line">  <span class="keyword">let</span> bgColor = <span class="string">"rgba("</span> + red + <span class="string">", "</span> + green + <span class="string">", "</span> + blue + <span class="string">", "</span> + a + <span class="string">")"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> bg = $(<span class="built_in">document</span>.body).css(<span class="string">'background'</span>, <span class="string">`<span class="subst">$&#123;bgColor&#125;</span>`</span>);</span><br><span class="line">  <span class="comment">// Set the background to the new color </span></span><br><span class="line">  bg = bgColor;</span><br><span class="line">  <span class="built_in">console</span>.log(bg)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>參考資料：<br><a href="https://www.geeksforgeeks.org/create-a-music-player-using-javascript/" target="_blank" rel="noopener">Create a Music Player using JavaScript</a><br><a href="https://stackoverflow.com/questions/20790579/wont-math-floormath-random-255-generate-uneven-probabilities" target="_blank" rel="noopener">Won’t Math.floor(Math.random() * 255) generate uneven probabilities?
</a><a href="https://ithelp.ithome.com.tw/articles/10197904" target="_blank" rel="noopener">[筆記][JavaScript]用Math.random()取得亂數的技巧</a></p>
</p>
      <div class="post-button"><a class="btn" href="/2021/01/15/js-musicPlayer/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/01/10/localstorage/">認識什麼是LocalStorage</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-01-10</span>
      <p><h2 id="認識-Web-Storage："><a href="#認識-Web-Storage：" class="headerlink" title="認識 Web Storage："></a>認識 Web Storage：</h2><p>HTML5 的 Web Storage 是一種可讓網頁將資料儲存於本地端的技術，其作用如同 cookie。</p>
<p>Cookie 儲存空間很小，最多僅能儲存4KB的資料。<br>HTML5 Web Storage 的儲存空間則大得多(儲存資料容量至少5MB以上)。</p>
<p><img src="https://i.imgur.com/tq8wugy.png" alt=""></p>
<h2 id="localStorage-與-sessionStorage"><a href="#localStorage-與-sessionStorage" class="headerlink" title="localStorage 與  sessionStorage"></a>localStorage 與  sessionStorage</h2><p>Web Storage 提供兩個物件可以將資料存在 client 端，一種是 localStorage，另一種是 sessionStorage</p>
<ul>
<li>localStorage:可以跨瀏覽器分頁（tab）存取，且資料存取沒有期限，除非手動從本地端清除。</li>
<li>sessionStorage:生命週期較短，每次分頁或瀏覽器關掉後就會清除。</li>
</ul>
<p>基本操作：</p>
<ul>
<li>設置資料：<code>localStorage.setItem(key, value)</code></li>
<li>取得資料：<code>let storageValue = localStorage.getItem(key, value)</code></li>
<li>清除資料：<code>localStorage.removeItem(key)</code></li>
<li>清除全部資料：<code>localStorage.clear()</code><blockquote>
<p>只要將localStorage替換sessionStorage即可</p>
</blockquote>
</li>
</ul>
<div class="note warning">
            <p>儲存在本地端的資料，格式為 key : value，需注意的是「value 的型態只有 String」!</p>
          </div>

<h2 id="找到儲存的資料"><a href="#找到儲存的資料" class="headerlink" title="找到儲存的資料"></a>找到儲存的資料</h2><ul>
<li>在 DevTools console </li>
</ul>
<p><img src="https://i.imgur.com/jZNIas5.png" alt=""></p>
<p><img src="https://i.imgur.com/7SkvJ8q.png" alt=""></p>
<p><img src="https://i.imgur.com/ZoLQ4yV.png" alt=""></p>
<h2 id="JSON-字串轉換"><a href="#JSON-字串轉換" class="headerlink" title="JSON 字串轉換"></a>JSON 字串轉換</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'1'</span>,<span class="string">'2'</span>,<span class="string">'c'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( arr + <span class="string">" is "</span> + <span class="keyword">typeof</span>(arr));</span><br><span class="line"><span class="comment">// 1,2,c is object</span></span><br></pre></td></tr></table></figure>

<h4 id="1-轉換成字串-JSON-stringify"><a href="#1-轉換成字串-JSON-stringify" class="headerlink" title="1.轉換成字串 JSON.stringify"></a>1.轉換成字串 JSON.stringify</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arrToStr = <span class="built_in">JSON</span>.stringify(arr);</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/0lfiqLV.png" alt=""></p>
<h4 id="2-轉換回原本格式-JSON-parse"><a href="#2-轉換回原本格式-JSON-parse" class="headerlink" title="2.轉換回原本格式 JSON.parse"></a>2.轉換回原本格式 JSON.parse</h4><ul>
<li>會把一個JSON字串轉換成 JavaScript的數值或是物件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> parse = <span class="built_in">JSON</span>.parse(arrToStr);</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/3chwLJF.png" alt=""></p>
<p>參考資料：<br><a href="https://medium.com/%E9%BA%A5%E5%85%8B%E7%9A%84%E5%8D%8A%E8%B7%AF%E5%87%BA%E5%AE%B6%E7%AD%86%E8%A8%98/javascript-localstorage-%E7%9A%84%E4%BD%BF%E7%94%A8-e0da6f402453" target="_blank" rel="noopener">[JavaScript] localStorage 的使用</a><br><a href="https://yakimhsu.com/project/project_w7_storage.html" target="_blank" rel="noopener">[第七週] 瀏覽器資料儲存 - Cookie、LocalStorage、SessionStorage</a><br><a href="https://ithelp.ithome.com.tw/articles/10223253" target="_blank" rel="noopener">[Day16] JavaScript - 前端資料存</a><br><a href="https://tools.wingzero.tw/article/sn/28" target="_blank" rel="noopener">HTML5 的 Web Storage- local storage 與 session storage</a><br><a href="https://ithelp.ithome.com.tw/articles/10203525" target="_blank" rel="noopener">Day20 localStorage、sessionStorage</a><br><a href="https://medium.com/itsems-frontend/javascript-json-stringify-and-json-parse-7a1251d3824c" target="_blank" rel="noopener">[JavaScript] JSON.stringify() and JSON.parse()：變 JSON 和變物件</a></p>
</p>
      <div class="post-button"><a class="btn" href="/2021/01/10/localstorage/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/01/10/js-expenseTracker/">JS實作- expense tracker 記帳簿</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-01-10</span>
      <p><p>完成後的<a href="https://eva813.github.io/Eva_portfolio/expenseTracker/expenseTracker.html" target="_blank" rel="noopener">成品</a><br><img src="https://i.imgur.com/VSjpRSa.png" alt=""></p>
<h1 id="觀察須製作的功能"><a href="#觀察須製作的功能" class="headerlink" title="觀察須製作的功能"></a>觀察須製作的功能</h1><ol>
<li>重新整理網頁後，保有過去執行的狀態：localstorage<ul>
<li>實作內有使用:</li>
<li>localstorage:setItem,getItem</li>
<li>jason.stringfy/jason.parse</li>
</ul>
</li>
</ol>
<p><img src="https://i.imgur.com/abUVHGM.png" alt=""></p>
<p><img src="https://i.imgur.com/c53IDMj.png" alt=""></p>
<ol start="2">
<li>在new transation輸入資料後，會將資料傳入history中<ul>
<li>add transation之後，頁面不會刷新(spa)(e.preventdefault)</li>
</ul>
</li>
<li>摸到history中的項目，會出現刪除符號，點擊後刪除</li>
</ol>
<p><img src="https://i.imgur.com/X06EsA4.png" alt=""></p>
<ol start="4">
<li>輸入的金額，會顯示於上方income、expense，並且計算總額<ul>
<li>有正負值</li>
<li>計算收入、花費<br><img src="https://i.imgur.com/uofQVuf.png" alt=""></li>
</ul>
</li>
</ol>
<hr>
<h1 id="呈現完整語法"><a href="#呈現完整語法" class="headerlink" title="呈現完整語法"></a>呈現完整語法</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//預設值的設置，取得存在本地的資料或是空陣列</span></span><br><span class="line">  <span class="keyword">var</span> transactions = <span class="built_in">JSON</span>.parse(localStorage.getItem(<span class="string">'Transactions'</span>)) || [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//陣列初始</span></span><br><span class="line">  <span class="keyword">if</span> (transactions.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    initHistory(transactions);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//點擊按鈕的事件</span></span><br><span class="line">  $(<span class="string">'.btn'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="comment">//console.log('click');</span></span><br><span class="line">    <span class="comment">//取得表格中的值</span></span><br><span class="line">    <span class="keyword">const</span> text_val = $(<span class="string">'#text'</span>).val();</span><br><span class="line">    <span class="keyword">const</span> amount_val = $(<span class="string">'#amount'</span>).val();</span><br><span class="line">    <span class="keyword">let</span> id = generateID();</span><br><span class="line"></span><br><span class="line">    addTransactions(id, text_val, amount_val, transactions);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//推入陣列</span></span><br><span class="line">    transactions.push(&#123;</span><br><span class="line">      id: id,</span><br><span class="line">      name: text_val,</span><br><span class="line">      amount: amount_val</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    localStorage.setItem(<span class="string">'Transactions'</span>, <span class="built_in">JSON</span>.stringify(transactions));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">  updateValue(transactions);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//在list中插入</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTransactions</span>(<span class="params">id, name, amount, transactions</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'amount:'</span>, amount);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> Transaction_str = $(<span class="string">'&lt;li&gt;&lt;/li&gt;'</span>).appendTo(<span class="string">'#list'</span>);</span><br><span class="line"></span><br><span class="line">  Transaction_str.addClass(amount &lt; <span class="number">0</span> ? <span class="string">'minus'</span> : <span class="string">'plus'</span>);</span><br><span class="line">  Transaction_str.html(<span class="string">`<span class="subst">$&#123;name&#125;</span>&lt;span&gt; <span class="subst">$&#123;amount&#125;</span>&lt;/span&gt;&lt;button class="delete-btn"  data-id="<span class="subst">$&#123;id&#125;</span>"&gt;x&lt;/button&gt;`</span>);</span><br><span class="line">  $(<span class="string">'#list'</span>).append(Transaction_str);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  $(<span class="string">'#text'</span>).val(<span class="string">''</span>);</span><br><span class="line">  $(<span class="string">'#amount'</span>).val(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//刪除鈕 要交易交出後再綁事件</span></span><br><span class="line">  $(<span class="string">'.delete-btn'</span>).last().click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).parent().remove();</span><br><span class="line">    <span class="keyword">let</span> id = $(<span class="keyword">this</span>).data(<span class="string">'id'</span>);</span><br><span class="line">    <span class="comment">//console.log(id);</span></span><br><span class="line">    deleteFromLocalstorage(transactions, id); <span class="comment">//要記得傳入id</span></span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//從localstorage刪除</span></span><br><span class="line"><span class="comment">//要記得在參數放入id</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteFromLocalstorage</span>(<span class="params">transactions, id</span>) </span>&#123;</span><br><span class="line">  transactions.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item, index, arr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//console.log('item', item);</span></span><br><span class="line">    <span class="comment">//console.log('index', index);</span></span><br><span class="line">    <span class="comment">//console.log('arr', arr);</span></span><br><span class="line">    <span class="keyword">if</span> (item.id === id) &#123;</span><br><span class="line">      arr.splice(index, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//迴圈刪除後，要儲存到localStorage才有確實刪去</span></span><br><span class="line">  localStorage.setItem(<span class="string">'Transactions'</span>, <span class="built_in">JSON</span>.stringify(transactions));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate random ID</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateID</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">100000000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//數值更新計算</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateValue</span>(<span class="params">transactions</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> amounts_arr = transactions.map(<span class="function"><span class="keyword">function</span> (<span class="params">transaction</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> transaction.amount</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(amounts_arr);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//計算加總 </span></span><br><span class="line">  <span class="keyword">var</span> total = <span class="number">0</span>;</span><br><span class="line">  $.each(amounts_arr, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; total += <span class="built_in">parseFloat</span>((<span class="keyword">this</span>)) || <span class="number">0</span>; &#125;);</span><br><span class="line">  <span class="comment">//傳回YOUR BALANCE</span></span><br><span class="line">  $(<span class="string">'#balance'</span>).text(<span class="string">`$<span class="subst">$&#123;total&#125;</span>`</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(total);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//*************************** */</span></span><br><span class="line">  <span class="comment">//從陣列找出&gt;0的值，放置income</span></span><br><span class="line">  <span class="comment">//console.log(amounts)</span></span><br><span class="line">  <span class="keyword">var</span> income = amounts_arr.filter(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item &gt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="built_in">console</span>.log(income);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> totalIncome = <span class="number">0</span>;</span><br><span class="line">  $.each(income, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; totalIncome += <span class="built_in">parseFloat</span>((<span class="keyword">this</span>)) || <span class="number">0</span>; &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(totalIncome); <span class="comment">//回傳220</span></span><br><span class="line">  <span class="comment">//傳回到income</span></span><br><span class="line">  $(<span class="string">'#money-plus'</span>).text(<span class="string">`$<span class="subst">$&#123;totalIncome&#125;</span>`</span>);</span><br><span class="line">  <span class="comment">//***************************** */</span></span><br><span class="line">  <span class="comment">//從陣列找出&lt;0的值，放置income</span></span><br><span class="line">  <span class="keyword">var</span> expense = amounts_arr.filter(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item &lt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="built_in">console</span>.log(expense);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> totalExpense = <span class="number">0</span>;</span><br><span class="line">  $.each(expense, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; totalExpense += <span class="built_in">parseFloat</span>((<span class="keyword">this</span>)) || <span class="number">0</span>; &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(totalExpense);</span><br><span class="line">  <span class="comment">//傳回到expense</span></span><br><span class="line">  $(<span class="string">'#money-minus'</span>).text(<span class="string">`$<span class="subst">$&#123;totalExpense&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//init</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initHistory</span>(<span class="params">transactions</span>) </span>&#123;</span><br><span class="line">  transactions.forEach(<span class="function"><span class="params">transaction</span> =&gt;</span> &#123;</span><br><span class="line">    addTransactions(transaction.id, transaction.name, transaction.amount, transactions);</span><br><span class="line">  &#125;);</span><br><span class="line">  updateValue(transactions);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="各項目拆解："><a href="#各項目拆解：" class="headerlink" title="各項目拆解："></a>各項目拆解：</h1><h2 id="add-transations按下去之後，頁面不刷新，直接將資料傳入紀錄中"><a href="#add-transations按下去之後，頁面不刷新，直接將資料傳入紀錄中" class="headerlink" title="add transations按下去之後，頁面不刷新，直接將資料傳入紀錄中"></a><code>add transations</code>按下去之後，頁面不刷新，直接將資料傳入紀錄中</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'.btn'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'click'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//點擊後，有印出click，但很快的刷新頁面</span></span><br></pre></td></tr></table></figure>
<ul>
<li>加入<code>e.preventDefault();</code> 用來阻止預設動作的發生</li>
</ul>
<p><img src="https://i.imgur.com/4y0J1vA.png" alt=""></p>
<h2 id="讓transation輸入後顯示"><a href="#讓transation輸入後顯示" class="headerlink" title="讓transation輸入後顯示"></a>讓transation輸入後顯示</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'.btn'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'click'</span>);</span><br><span class="line">    addTransactions(<span class="string">'cash'</span>, <span class="string">'200'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTransactions</span>(<span class="params">name, amount</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> Transaction_str = <span class="string">`&lt;li class='plus' &gt;<span class="subst">$&#123;name&#125;</span>&lt;span&gt; <span class="subst">$&#123;amount&#125;</span>&lt;/span&gt;&lt;button class="delete-btn"&gt;x&lt;/button&gt;&lt;/li&gt;`</span></span><br><span class="line">  $(<span class="string">'#list'</span>).append(Transaction_str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/Vh9uPvJ.png" alt=""></p>
<ul>
<li>提交之後清空<ul>
<li>選擇該輸入框，並利用<code>val()</code>，使內部的值清空</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#text'</span>).val(<span class="string">''</span>);</span><br><span class="line"> $(<span class="string">'#amount'</span>).val(<span class="string">''</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/uKnX7fd.png" alt=""></p>
<h2 id="從表格中取得值"><a href="#從表格中取得值" class="headerlink" title="從表格中取得值"></a>從表格中取得值</h2><ul>
<li>製作按鈕的點擊事件，取得表格中的值</li>
<li>將值傳入函式的參數<code>addTransactions(text_val, amount_val);</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'.btn'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'click'</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//取得表格中的值</span></span><br><span class="line">    <span class="keyword">const</span> text_val = $(<span class="string">'#text'</span>).val();</span><br><span class="line">    <span class="keyword">const</span> amount_val = $(<span class="string">'#amount'</span>).val();</span><br><span class="line">    addTransactions(text_val, amount_val);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="製作刪除紐"><a href="#製作刪除紐" class="headerlink" title="製作刪除紐"></a>製作刪除紐</h2><ul>
<li>原本的撰寫方式，為選到最後一個刪除鈕，並點擊加以刪除</li>
<li>此方式造成，無法確實刪除資料</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.delete-btn'</span>).last().click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'del'</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/v7n8t3L.png" alt=""></p>
<ul>
<li><p>修改方式，只能綁定一筆transatin或是綁定最後一筆<br><img src="https://i.imgur.com/lhqdwYA.png" alt=""></p>
</li>
<li><p>查看若實現點擊後刪除，是會刪除什麼？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> $(<span class="string">'.delete-btn'</span>).last().click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/9dYre8g.png" alt=""></p>
</li>
<li><p>要刪除的是整筆資料，所以要去尋找他鄰近的元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.delete-btn'</span>).last().click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).parent().remove();</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="localstorage-執行"><a href="#localstorage-執行" class="headerlink" title="localstorage 執行"></a>localstorage 執行</h2><p>筆記補充：<a href="https://eva813.github.io/2021/01/10/localstorage/" target="_blank" rel="noopener">LocalStorage介紹</a></p>
<p>從此實作，可以看到它是一個陣列，裡面是物件</p>
<ul>
<li>設置一個空陣列</li>
<li>並將物件push進去</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//預設值的設置，取得存在本地的資料或是空陣列</span></span><br><span class="line">  <span class="keyword">var</span> transactions = <span class="built_in">JSON</span>.parse(localStorage.getItem(<span class="string">'Transactions'</span>)) || [];</span><br><span class="line">  </span><br><span class="line">   <span class="comment">//推入陣列</span></span><br><span class="line">    transactions.push(&#123;</span><br><span class="line">      name: text_val,</span><br><span class="line">      amount: amount_val</span><br><span class="line">    &#125;)</span><br><span class="line">    localStorage.setItem(<span class="string">'Transactions'</span>, <span class="built_in">JSON</span>.stringify(transactions));</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/HC2XCpT.png" alt=""></p>
<p><img src="https://i.imgur.com/0b4mWW6.png" alt=""></p>
<ul>
<li>增加初始function<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//init</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initHistory</span>(<span class="params">transactions</span>) </span>&#123;</span><br><span class="line">  transactions.forEach(<span class="function"><span class="params">transaction</span> =&gt;</span> &#123;</span><br><span class="line">    addTransactions(transaction.name, transaction.amount);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//將此函式放於 $(document).ready()之中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//陣列初始</span></span><br><span class="line">  <span class="keyword">if</span> (transactions.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    initHistory(transactions);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="https://i.imgur.com/dH3nJ6K.png" alt=""></p>
<h2 id="將transation刪除後，並沒有完全從localstorage刪除"><a href="#將transation刪除後，並沒有完全從localstorage刪除" class="headerlink" title="將transation刪除後，並沒有完全從localstorage刪除"></a>將transation刪除後，並沒有完全從localstorage刪除</h2><p>運用id來刪除</p>
<ul>
<li><p>從此段落：<a href="#localstorage-執行">localstorage 執行</a>，圖片中的存取陣列可以看到，沒有設置id</p>
</li>
<li><p>id是在addTransactions使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Generate random ID</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateID</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">100000000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//floor：無條件捨去</span></span><br><span class="line"><span class="comment">//ceil：無條件進位</span></span><br></pre></td></tr></table></figure></li>
<li><p>在創造的陣列中\物件，都加入id</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> id = generateID();</span><br><span class="line"> addTransactions(id, text_val, amount_val);</span><br><span class="line"></span><br><span class="line"> <span class="comment">//推入陣列</span></span><br><span class="line"> transactions.push(&#123;</span><br><span class="line">   id: id,</span><br><span class="line">   name: text_val,</span><br><span class="line">   amount: amount_val</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>在addTransactions的函式中也要加入id</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTransactions</span>(<span class="params">id, name, amount</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(id, name, amount);&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<p><img src="https://i.imgur.com/sMtoogJ.png" alt=""></p>
<ul>
<li>在button加入data-id</li>
</ul>
<p>和資料有關的時候：data-原來欄位名稱</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Transaction_str = <span class="string">`&lt;li class='plus' &gt;<span class="subst">$&#123;name&#125;</span>&lt;span&gt; <span class="subst">$&#123;amount&#125;</span>&lt;/span&gt;&lt;button class="delete-btn"  data-id="<span class="subst">$&#123;id&#125;</span>"&gt;x&lt;/button&gt;&lt;/li&gt;`</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/cmamimU.png" alt=""></p>
<p><img src="https://i.imgur.com/v8TQspA.png" alt=""></p>
<ul>
<li>確定點擊刪除鈕的時後，是有抓到該id<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$(<span class="string">'.delete-btn'</span>).last().click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="keyword">this</span>).parent().remove();</span><br><span class="line">  <span class="keyword">let</span> id = $(<span class="keyword">this</span>).data(<span class="string">'id'</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(id);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><code>let id = $(this).data(); 查看id時</code> 取得的是物件<br><img src="https://i.imgur.com/BeBkXAN.png" alt=""></li>
<li>應改為<br><img src="https://i.imgur.com/snvF7AX.png" alt=""></li>
</ul>
<div class="note warning">
            <p>此時還沒有真正刪除id，只是確定有抓到id :point_up_2: </p>
          </div>

<div class="note info">
            <p>jquery <code>data()</code>： 自定義屬性 (data attributes)，讓我們可以任意讀寫資料在元素上，而且不會影響頁面的 layout<br><a href="https://www.fooish.com/jquery/data.html" target="_blank" rel="noopener">jQuery Data</a></p>
          </div>

<ul>
<li><h4 id="利用forEach、splice-刪除陣列內的資料"><a href="#利用forEach、splice-刪除陣列內的資料" class="headerlink" title="利用forEach、splice()刪除陣列內的資料"></a>利用forEach、splice()刪除陣列內的資料</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteFromLocalstorage</span>(<span class="params">transactions, id</span>) </span>&#123;</span><br><span class="line">  transactions.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item, index, arr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//console.log('item', item);</span></span><br><span class="line">    <span class="comment">//console.log('index', index);</span></span><br><span class="line">    <span class="comment">//console.log('arr', arr);</span></span><br><span class="line">    <span class="keyword">if</span> (item.id === id) &#123;</span><br><span class="line">      arr.splice(index, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//迴圈刪除後，要儲存到localStorage才有確實刪去</span></span><br><span class="line">  localStorage.setItem(<span class="string">'Transactions'</span>, <span class="built_in">JSON</span>.stringify(transactions));</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li>查看迴圈的資料<br><img src="https://i.imgur.com/FexS5lt.png" alt=""></li>
</ul>
<ul>
<li>確實刪除存在localstorage的資料<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localStorage.setItem(<span class="string">'Transactions'</span>, <span class="built_in">JSON</span>.stringify(transactions));</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="判斷輸入的數字大小，並給予class"><a href="#判斷輸入的數字大小，並給予class" class="headerlink" title="判斷輸入的數字大小，並給予class"></a>判斷輸入的數字大小，並給予class</h3><ul>
<li>放在addTransactions()函式之中</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Transaction_str = $(<span class="string">'&lt;li&gt;&lt;/li&gt;'</span>).appendTo(<span class="string">'#list'</span>);</span><br><span class="line"></span><br><span class="line">  Transaction_str.addClass(amount &lt; <span class="number">0</span> ? <span class="string">'minus'</span> : <span class="string">'plus'</span>);</span><br><span class="line">  Transaction_str.html(<span class="string">`<span class="subst">$&#123;name&#125;</span>&lt;span&gt; <span class="subst">$&#123;amount&#125;</span>&lt;/span&gt;&lt;button class="delete-btn"  data-id="<span class="subst">$&#123;id&#125;</span>"&gt;x&lt;/button&gt;`</span>);</span><br><span class="line">  $(<span class="string">'#list'</span>).append(Transaction_str);</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/NYXCDtS.png" alt=""></p>
<h3 id="數值的更新"><a href="#數值的更新" class="headerlink" title="數值的更新"></a>數值的更新</h3><p><img src="https://i.imgur.com/EdCN1cd.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateValue</span>(<span class="params">transactions</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> amounts_arr = transactions.map(<span class="function"><span class="keyword">function</span> (<span class="params">transaction</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> transaction.amount</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(amounts_arr);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//計算加總 </span></span><br><span class="line">  <span class="keyword">var</span> total = <span class="number">0</span>;</span><br><span class="line">  $.each(amounts_arr, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; total += <span class="built_in">parseFloat</span>((<span class="keyword">this</span>)) || <span class="number">0</span>; &#125;);</span><br><span class="line">  <span class="comment">//傳回YOUR BALANCE</span></span><br><span class="line">  $(<span class="string">'#balance'</span>).text(<span class="string">`$<span class="subst">$&#123;total&#125;</span>`</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(total);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//*************************** */</span></span><br><span class="line">  <span class="comment">//從陣列找出&gt;0的值，放置income</span></span><br><span class="line">  <span class="comment">//console.log(amounts)</span></span><br><span class="line">  <span class="keyword">var</span> income = amounts_arr.filter(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item &gt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="built_in">console</span>.log(income);</span><br><span class="line">  <span class="keyword">var</span> totalIncome = <span class="number">0</span>;</span><br><span class="line">  $.each(income, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; totalIncome += <span class="built_in">parseFloat</span>((<span class="keyword">this</span>)) || <span class="number">0</span>; &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//console.log(totalIncome); //回傳220</span></span><br><span class="line">  <span class="comment">//傳回到income</span></span><br><span class="line">  $(<span class="string">'#money-plus'</span>).text(<span class="string">`$<span class="subst">$&#123;totalIncome&#125;</span>`</span>);</span><br><span class="line">  <span class="comment">//***************************** */</span></span><br><span class="line">  <span class="comment">//從陣列找出&lt;0的值，放置income</span></span><br><span class="line">  <span class="keyword">var</span> expense = amounts_arr.filter(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item &lt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="built_in">console</span>.log(expense);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> totalExpense = <span class="number">0</span>;</span><br><span class="line">  $.each(expense, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; totalExpense += <span class="built_in">parseFloat</span>((<span class="keyword">this</span>)) || <span class="number">0</span>; &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(totalExpense);</span><br><span class="line">  <span class="comment">//傳回到expense</span></span><br><span class="line">  $(<span class="string">'#money-minus'</span>).text(<span class="string">`$<span class="subst">$&#123;totalExpense&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>創造一個amount的陣列</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> amounts_arr = transactions.map(<span class="function"><span class="keyword">function</span> (<span class="params">transaction</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> transaction.amount</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(amounts_arr);</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/sG0YS9J.png" alt=""></p>
<ul>
<li>計算加總數值<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> total = <span class="number">0</span>;</span><br><span class="line">  $.each(amounts_arr, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; total += <span class="built_in">parseFloat</span>((<span class="keyword">this</span>)) || <span class="number">0</span>; &#125;);</span><br><span class="line">  <span class="comment">//傳回YOUR BALANCE</span></span><br><span class="line">  $(<span class="string">'#balance'</span>).text(<span class="string">`$<span class="subst">$&#123;total&#125;</span>`</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(total);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="https://i.imgur.com/7c2MqFo.png" alt=""></p>
<p><img src="https://i.imgur.com/CCXAirK.png" alt=""></p>
<ul>
<li>income 收入加總計算</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//從陣列找出&gt;0的值，放置income</span></span><br><span class="line">  <span class="comment">//console.log(amounts)</span></span><br><span class="line">  <span class="keyword">var</span> income = amounts_arr.filter(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item &gt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="built_in">console</span>.log(income);</span><br><span class="line">  <span class="keyword">var</span> totalIncome = <span class="number">0</span>;</span><br><span class="line">  $.each(income, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; totalIncome += <span class="built_in">parseFloat</span>((<span class="keyword">this</span>)) || <span class="number">0</span>; &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//console.log(totalIncome); //回傳220</span></span><br><span class="line">  <span class="comment">//傳回到income</span></span><br><span class="line">  $(<span class="string">'#money-plus'</span>).text(<span class="string">`$<span class="subst">$&#123;totalIncome&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/9d8Hx3Y.png" alt=""></p>
<p><img src="https://i.imgur.com/KXRi18A.png" alt=""></p>
<ul>
<li>expense支出加總</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//從陣列找出&lt;0的值，放置expense</span></span><br><span class="line">  <span class="keyword">var</span> expense = amounts_arr.filter(</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> item &lt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="built_in">console</span>.log(expense);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> totalExpense = <span class="number">0</span>;</span><br><span class="line">  $.each(expense, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; totalExpense += <span class="built_in">parseFloat</span>((<span class="keyword">this</span>)) || <span class="number">0</span>; &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(totalExpense);</span><br><span class="line">  <span class="comment">//傳回到expense</span></span><br><span class="line">  $(<span class="string">'#money-minus'</span>).text(<span class="string">`$<span class="subst">$&#123;totalExpense&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/AaIZORC.png" alt=""></p>
<p><img src="https://i.imgur.com/TM4EQrH.png" alt=""></p>
<hr>
<p>錯誤修正：</p>
<ul>
<li>調換推入陣列以及<code>addTransactions</code>的順序<br><img src="https://i.imgur.com/7jdJ7kO.png" alt=""></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//點擊按鈕的事件</span></span><br><span class="line">  $(<span class="string">'.btn'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="comment">//console.log('click');</span></span><br><span class="line">    <span class="comment">//取得表格中的值</span></span><br><span class="line">    <span class="keyword">const</span> text_val = $(<span class="string">'#text'</span>).val();</span><br><span class="line">    <span class="keyword">const</span> amount_val = $(<span class="string">'#amount'</span>).val();</span><br><span class="line">    <span class="keyword">let</span> id = generateID();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//推入陣列</span></span><br><span class="line">    transactions.push(&#123;</span><br><span class="line">      id: id,</span><br><span class="line">      name: text_val,</span><br><span class="line">      amount: amount_val</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    addTransactions(id, text_val, amount_val, transactions);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    localStorage.setItem(<span class="string">'Transactions'</span>, <span class="built_in">JSON</span>.stringify(transactions));</span><br><span class="line"></span><br><span class="line">    updateValue(transactions);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>將updateValue()放入事件中</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//刪除鈕 要交易交出後再綁事件</span></span><br><span class="line">  $(<span class="string">'.delete-btn'</span>).last().click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="keyword">this</span>).parent().remove();</span><br><span class="line">    <span class="keyword">let</span> id = $(<span class="keyword">this</span>).data(<span class="string">'id'</span>);</span><br><span class="line">    <span class="comment">//console.log(id);</span></span><br><span class="line">    deleteFromLocalstorage(transactions, id); <span class="comment">//要記得傳入id</span></span><br><span class="line">    updateValue(transactions);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
</p>
      <div class="post-button"><a class="btn" href="/2021/01/10/js-expenseTracker/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2021/01/10/js-exchangeRate/">JS實作- exchangeRate匯率轉換器</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2021-01-10</span>
      <p><h2 id="實作需求分析"><a href="#實作需求分析" class="headerlink" title="實作需求分析"></a>實作需求分析</h2><p><img src="https://i.imgur.com/cu80NjP.png" alt=""></p>
<ul>
<li>抓取api提供的匯率資料：使用jQuery,ajax</li>
<li>選擇不同幣別，進行匯率換算</li>
<li>swap按鈕，使幣別交換</li>
</ul>
<h4 id="完成後的成品"><a href="#完成後的成品" class="headerlink" title="完成後的成品"></a>完成後的<a href="https://eva813.github.io/Eva_portfolio/exchangeRate/exchangeRate.html" target="_blank" rel="noopener">成品</a></h4><h2 id="jQuery-ajax-使用"><a href="#jQuery-ajax-使用" class="headerlink" title="jQuery.ajax 使用"></a>jQuery.ajax 使用</h2><ul>
<li>參考資料：<a href="https://api.jquery.com/jquery.ajax/" target="_blank" rel="noopener">jQuery.ajax()
</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">  method: <span class="string">"get"</span>,</span><br><span class="line">  url: <span class="string">"https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/USD"</span>,</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br><span class="line">  .done(<span class="function"><span class="keyword">function</span>(<span class="params"> some_data </span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    <span class="comment">//成功抓到值的話，就會印出抓取到的資料</span></span><br><span class="line">  &#125;).fail(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  </span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/S1kOYmH.png" alt=""></p>
<ul>
<li>應用於exchangeRate:<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">`https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/<span class="subst">$&#123;currency_one&#125;</span>`</span>,  <span class="comment">//注意符號</span></span><br><span class="line">    method: <span class="string">'get'</span>,<span class="comment">//get,post,put</span></span><br><span class="line">    dataType: <span class="string">'json'</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="comment">//console.log(data);</span></span><br><span class="line">      <span class="keyword">const</span> rate = data.conversion_rates[currency_two];</span><br><span class="line">      <span class="comment">//console.log(rate);</span></span><br><span class="line">      $(<span class="string">'#rate'</span>).text(<span class="string">`1 <span class="subst">$&#123;currency_one&#125;</span> = <span class="subst">$&#123;rate&#125;</span> <span class="subst">$&#123;currency_two&#125;</span>`</span>);</span><br><span class="line">      $(<span class="string">'#amount-two'</span>).val((amountOne * rate).toFixed(<span class="number">2</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></li>
<li><h4 id="詳細說明可以參照內文：計算匯率calculate函式"><a href="#詳細說明可以參照內文：計算匯率calculate函式" class="headerlink" title="詳細說明可以參照內文：計算匯率calculate函式"></a>詳細說明可以參照內文：<a href="#計算匯率calculate-函式">計算匯率calculate函式</a></h4></li>
</ul>
<h4 id="其他參考資料："><a href="#其他參考資料：" class="headerlink" title="其他參考資料："></a>其他參考資料：</h4><p><a href="https://www.youtube.com/watch?v=z-hN7GY5K7g" target="_blank" rel="noopener">[ Alex 宅開發 ] 👨‍💻從 jQuery 入門到認識 JavaScript #5 Ajax 與非同步功能操作與原始碼探索</a></p>
<div class="note warning">
            <ul><li><code>url</code>:來源，api的位置在哪裏</li><li><code>type</code>:api的呼叫方式</li><li><code>dataType</code>:它回給你的資料類型</li><li><code>data</code>:你要傳給它什麼</li></ul>
          </div>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  url: data.json,</span><br><span class="line">  type: <span class="string">'get'</span>,<span class="comment">//get,post,put,path,delete</span></span><br><span class="line">  dataType: <span class="string">'json'</span>, <span class="comment">//html,xml,text,jsonp</span></span><br><span class="line">  data: &#123;&#125;</span><br><span class="line"></span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//response &lt;-&gt; request</span></span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">  <span class="keyword">return</span> def.resolve();</span><br><span class="line">&#125;), <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err);</span><br><span class="line">  <span class="keyword">return</span> def.reject();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="計算匯率calculate-函式"><a href="#計算匯率calculate-函式" class="headerlink" title="計算匯率calculate 函式"></a>計算匯率calculate 函式</h2><ul>
<li>此函式為抓取匯率api的資料並帶入計算匯率</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> currency_one = $(<span class="string">"#currency-one"</span>).val();</span><br><span class="line">  <span class="keyword">var</span> currency_two = $(<span class="string">'#currency-two'</span>).val();</span><br><span class="line">  <span class="keyword">var</span> amountOne = $(<span class="string">'#amount-one'</span>).val();</span><br><span class="line">  <span class="keyword">var</span> amountTwo = $(<span class="string">'#amount-two'</span>).val();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//https://app.exchangerate-api.com/dashboard/confirmed</span></span><br><span class="line"></span><br><span class="line">  $.ajax(&#123;</span><br><span class="line">    url: <span class="string">`https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/<span class="subst">$&#123;currency_one&#125;</span>`</span>,<span class="comment">//注意符號</span></span><br><span class="line">    method: <span class="string">'get'</span>,<span class="comment">//抓取值</span></span><br><span class="line">    dataType: <span class="string">'json'</span>,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="comment">//console.log(data);  //查看抓到的物件</span></span><br><span class="line">      </span><br><span class="line">      <span class="keyword">const</span> rate = data.conversion_rates[currency_two];</span><br><span class="line">      <span class="comment">//console.log(rate);</span></span><br><span class="line">      </span><br><span class="line">      $(<span class="string">'#rate'</span>).text(<span class="string">`1 <span class="subst">$&#123;currency_one&#125;</span> = <span class="subst">$&#123;rate&#125;</span> <span class="subst">$&#123;currency_two&#125;</span>`</span>);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//將值帶入</span></span><br><span class="line">      $(<span class="string">'#amount-two'</span>).val((amountOne * rate).toFixed(<span class="number">2</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函式說明"><a href="#函式說明" class="headerlink" title="函式說明:"></a>函式說明:</h3><h4 id="1-先將要抓取的值，宣告變數-分別有選擇的國家幣別、兌換的數量"><a href="#1-先將要抓取的值，宣告變數-分別有選擇的國家幣別、兌換的數量" class="headerlink" title="1.先將要抓取的值，宣告變數;分別有選擇的國家幣別、兌換的數量"></a>1.先將要抓取的值，宣告變數;分別有選擇的國家幣別、兌換的數量</h4><h4 id="2-串接資料"><a href="#2-串接資料" class="headerlink" title="2.串接資料"></a>2.串接資料</h4><p> (1). 抓取資料的位置<br><code>url: https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/${currency_one}</code></p>
<div class="note warning">
            <p><code>&quot;https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/USD&quot;</code><br>注意網址後面有修改，要抓取會變動的變數： ${currency_one}</p>
          </div>

<p> (2) 檢查是否有抓到要的資料：</p>
<ul>
<li>宣告：<code>const rate = data.conversion_rates[currency_two];</code></li>
<li>console.log(rate); </li>
</ul>
<p><img src="https://i.imgur.com/LKGiCmN.png" alt=""></p>
<ul>
<li>確定抓取的值是否正確：<code>console.log($(&#39;#amount-two&#39;).val());</code></li>
</ul>
<p><img src="https://i.imgur.com/r9Nx25o.png" alt=""></p>
<ul>
<li>將計算匯率帶入<br><code>$(&#39;#amount-two&#39;).val((amountOne * rate).toFixed(2));</code></li>
</ul>
<p><img src="https://i.imgur.com/oMBuNFV.png" alt=""></p>
<h2 id="其他輸入值的抓取與連動"><a href="#其他輸入值的抓取與連動" class="headerlink" title="其他輸入值的抓取與連動"></a>其他輸入值的抓取與連動</h2><ul>
<li><h4 id="currency-one的改變，會連動上面的函式計算結果"><a href="#currency-one的改變，會連動上面的函式計算結果" class="headerlink" title="#currency-one的改變，會連動上面的函式計算結果"></a><code>#currency-one的改變</code>，會連動上面的函式計算結果</h4></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#currency-one"</span>).change(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">"#rate"</span>).html(<span class="string">""</span>); </span><br><span class="line">  calculate();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//抓取amountone</span></span><br><span class="line">$(<span class="string">"#amount-one"</span>).on(<span class="string">"input"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">"#rate"</span>).html(<span class="string">""</span>);</span><br><span class="line">  calculate();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$(<span class="string">"#currency-two"</span>).change(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">"#rate"</span>).html(<span class="string">""</span>);</span><br><span class="line">  calculate();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//抓取amountTwo</span></span><br><span class="line">$(<span class="string">"#amount-two"</span>).on(<span class="string">"input"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">"#rate"</span>).html(<span class="string">""</span>);</span><br><span class="line">  calculate();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><h4 id="發現使用-append-，會出現累積div文字的問題"><a href="#發現使用-append-，會出現累積div文字的問題" class="headerlink" title="發現使用.append()，會出現累積div文字的問題"></a>發現使用<code>.append()</code>，會出現累積div文字的問題</h4></li>
<li><p>(1) 清除函式<code>.append()</code>，累積div文字呈現的問題<br><code>$(&quot;#rate&quot;).html(&quot;&quot;);</code></p>
</li>
<li><p>(2) 將原本使用<code>.append()</code>的地方，修改為<code>.text()</code>, <code>$(&#39;#rate&#39;).text(`1 ${currency_one} = ${rate} ${currency_two}`);</code></p>
<ul>
<li>位置：<a href="#計算匯率calculate-函式">計算匯率calculate函式</a></li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/GTMuXY0.png" alt=""></p>
<p><img src="https://i.imgur.com/TvspVAq.png" alt=""></p>
<h2 id="swap按鈕-（使幣別交換）"><a href="#swap按鈕-（使幣別交換）" class="headerlink" title="swap按鈕 （使幣別交換）"></a>swap按鈕 （使幣別交換）</h2><ul>
<li>宣告一個變數，紀錄交換前的幣別<code>let temp = $(&quot;#currency-one&quot;).val();</code></li>
<li>確認是否宣告正確：<code>console.log(temp);</code></li>
</ul>
<p><img src="https://i.imgur.com/gkYsHxQ.png" alt=""></p>
<p><img src="https://i.imgur.com/fAZmC0Q.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//swap按鈕</span></span><br><span class="line">$(<span class="string">'#swap'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> temp = $(<span class="string">"#currency-one"</span>).val();<span class="comment">//設一個變數來存放currency-one</span></span><br><span class="line">  $(<span class="string">"#currency-one"</span>).val($(<span class="string">"#currency-two"</span>).val());</span><br><span class="line">  $(<span class="string">"#currency-two"</span>).val(temp);</span><br><span class="line">  calculate();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">calculate(); <span class="comment">//放於最後</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>console.log($(&quot;#currency-one&quot;).val());</code></li>
<li><code>console.log($(&quot;#currency-two&quot;).val());</code></li>
</ul>
<p><img src="https://i.imgur.com/o4JLcIF.png" alt=""></p>
<hr>
<p>參考資料：<br><a href="https://ithelp.ithome.com.tw/articles/10192175" target="_blank" rel="noopener">重新認識 JavaScript: Day 16 那些你知道與不知道的事件們</a></p>
</p>
      <div class="post-button"><a class="btn" href="/2021/01/10/js-exchangeRate/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/12/28/js-browser/">JS-browser</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-12-28</span>
      <p><h2 id="1-DOM-與樹狀結構"><a href="#1-DOM-與樹狀結構" class="headerlink" title="1. DOM 與樹狀結構"></a>1. DOM 與樹狀結構</h2><p><img src="https://i.imgur.com/uZDTql8.png" alt=""></p>
<ul>
<li>DOM: document:網頁內部<blockquote>
<p>KURO 老師:<br>DOM 是一個將 HTML 文件以樹狀的結構來表示的模型，而組合起來的樹狀圖，我們稱之為「DOM Tree」。</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>Huli 老師:瀏覽器提供該橋樑，讓我們用js去改面畫面的東西<br> <img src="https://i.imgur.com/tPHGSL4.png" alt=""></p>
</blockquote>
<h3 id="API-Application-Programming-Interface"><a href="#API-Application-Programming-Interface" class="headerlink" title="API (Application Programming Interface)"></a>API (Application Programming Interface)</h3><ul>
<li>應用程式 編程 介面<h2 id="document-物件-API-文件"><a href="#document-物件-API-文件" class="headerlink" title="document 物件 API 文件"></a>document 物件 API 文件</h2></li>
<li><h4 id="getElementsByTagName-抓取html中某tag的元素"><a href="#getElementsByTagName-抓取html中某tag的元素" class="headerlink" title="getElementsByTagName : 抓取html中某tag的元素"></a><code>getElementsByTagName</code> : 抓取html中某tag的元素</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    hello~</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    yo!</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> elements = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(elements);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/hSmfZ9u.png" alt=""></li>
</ul>
<p><img src="https://i.imgur.com/yNOOK2m.png" alt=""></p>
<ul>
<li><h4 id="getElementsByClassName-抓取html中某class元素-有好幾個相同名稱的class，會一並抓取"><a href="#getElementsByClassName-抓取html中某class元素-有好幾個相同名稱的class，會一並抓取" class="headerlink" title="getElementsByClassName: 抓取html中某class元素(有好幾個相同名稱的class，會一並抓取)"></a><code>getElementsByClassName</code>: 抓取html中某class元素(有好幾個相同名稱的class，會一並抓取)</h4></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>DOM</span><br><span class="line">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"block1"</span>&gt;</span></span><br><span class="line">    hello~</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    yo!</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> elements = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'block1'</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(elements);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/d7ZlZnr.png" alt=""></p>
<ul>
<li><h4 id="getElementById-注意：getElement-沒有加s！這是用來抓取指定ID"><a href="#getElementById-注意：getElement-沒有加s！這是用來抓取指定ID" class="headerlink" title="getElementById : 注意：getElement 沒有加s！這是用來抓取指定ID"></a><code>getElementById</code> : 注意：getElement 沒有加s！這是用來抓取指定ID</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>DOM</span><br><span class="line">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"block1"</span>&gt;</span></span><br><span class="line">    hello~</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myyo"</span>&gt;</span></span><br><span class="line">    yo!</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> elements = <span class="built_in">document</span>.getElementById(<span class="string">'myyo'</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(elements);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/1ouq4WA.png" alt=""></p>
</li>
<li><h4 id="querySelector-後面接的是css選擇器"><a href="#querySelector-後面接的是css選擇器" class="headerlink" title="querySelector: 後面接的是css選擇器"></a><code>querySelector</code>: 後面接的是css選擇器</h4></li>
<li><p>只會針對元素的第一筆資料，其他並不會被選入這時候可以使用</p>
<ul>
<li>選擇tag標籤：(‘div’)：注意：使用此方式當html有多個div，他只會選擇到第一個符合的</li>
<li>選擇cass : (‘.calssName’)</li>
<li>選擇id : (‘#idName’)</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/QzoOo6r.png" alt=""></p>
<p><img src="https://i.imgur.com/pSMPFCJ.png" alt=""></p>
<ul>
<li><p>也可以選區某一tag下的tag</p>
<ul>
<li><code>querySelector(&#39;div &gt; a&#39;)</code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>DOM</span><br><span class="line">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"block1"</span>&gt;</span></span><br><span class="line">    hello~</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myyo"</span>&gt;</span></span><br><span class="line">    yo!</span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> elements = <span class="built_in">document</span>.querySelector(<span class="string">'div &gt; a'</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(elements);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/I9qr8LD.png" alt=""></li>
</ul>
</li>
<li><h4 id="querySelectorAll-可以選取多個元素"><a href="#querySelectorAll-可以選取多個元素" class="headerlink" title="querySelectorAll: 可以選取多個元素"></a><code>querySelectorAll</code>: 可以選取多個元素</h4></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>DOM</span><br><span class="line">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"block1"</span>&gt;</span></span><br><span class="line">    hello~</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"myyo"</span>&gt;</span></span><br><span class="line">    yo!</span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> elements = <span class="built_in">document</span>.querySelectorAll(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(elements);</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/jFPYIO0.png" alt="Eloquent JavaScript, 3rd Edition"></p>
<h3 id="順利選則元素之後，嘗試做些改變"><a href="#順利選則元素之後，嘗試做些改變" class="headerlink" title="順利選則元素之後，嘗試做些改變"></a>順利選則元素之後，嘗試做些改變</h3><p>可以看看，js如何與瀏覽器互動 -&gt;<a href="https://hackmd.io/yGiTI8qVRLWmDCpD1w7HcA?view" target="_blank" rel="noopener">JavaScript 與瀏覽器的溝通</a></p>
<h3 id="BOM-與-window-物件"><a href="#BOM-與-window-物件" class="headerlink" title="BOM 與 window 物件"></a>BOM 與 window 物件</h3><ul>
<li>BOM (Browser Object Model，瀏覽器物件模型)，是瀏覽器所有功能的核心，與網頁的內容無關。<ul>
<li>window是瀏覽器的根物件，也是BOM的瀏覽器模型</li>
</ul>
</li>
<li>window.location.hrrf =&gt; 可以知道現在網址<br><img src="https://i.imgur.com/8EeLLGQ.png" alt=""></li>
<li>window.history.back(); =&gt; 回到網頁瀏覽的上一頁<br><img src="https://i.imgur.com/kBtDslP.png" alt=""></li>
</ul>
<p><img src="https://i.imgur.com/jyPOjvH.png" alt=""></p>
<h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><p><a href="https://ithelp.ithome.com.tw/articles/10202689" target="_blank" rel="noopener">Day03-深入理解網頁架構：DOM</a><br><a href="https://hsuchihting.github.io/javascript/20200615/1316819935/" target="_blank" rel="noopener">JS 筆記 - 認識 DOM 文件物件模型</a><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/API/Document" target="_blank" rel="noopener">MDN-Document</a><br><a href="https://www.w3schools.com/jsref/dom_obj_document.asp" target="_blank" rel="noopener">The HTML DOM Document Object</a><br><a href="https://ithelp.ithome.com.tw/articles/10211614" target="_blank" rel="noopener">JavaScript 基礎知識-querySelectorAll</a><br><a href="https://eloquentjavascript.net/14_dom.html" target="_blank" rel="noopener">The Document Object Model</a><br><a href="https://www.happycoding.today/posts/43" target="_blank" rel="noopener">JavaScript入門系列：BOM和DOM筆記</a></p>
</p>
      <div class="post-button"><a class="btn" href="/2020/12/28/js-browser/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/12/27/js-array/">JS基本功- 物件與陣列</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-12-27</span>
      <p><blockquote>
<p>程式柴<br><img src="https://i.imgur.com/44kqCRM.png" alt=""></p>
<h3 id="Function、array都屬於物件"><a href="#Function、array都屬於物件" class="headerlink" title="Function、array都屬於物件"></a>Function、array都屬於物件</h3><p><img src="https://i.imgur.com/1bYo7eM.png" alt=""></p>
</blockquote>
<h2 id="物件的例子"><a href="#物件的例子" class="headerlink" title="物件的例子"></a>物件的例子</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">      name: [<span class="string">'Bob'</span>, <span class="string">'Smith'</span>],</span><br><span class="line">      age: <span class="number">32</span>,</span><br><span class="line">      gender: <span class="string">'male'</span>,</span><br><span class="line">      interest: [<span class="string">'music'</span>, <span class="string">'movie'</span>],</span><br><span class="line">      greeting: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'hi I\'m'</span> + <span class="keyword">this</span>.name[<span class="number">0</span>] + <span class="string">'.'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="物件的創建"><a href="#物件的創建" class="headerlink" title="物件的創建"></a>物件的創建</h2><p><code>var x={}</code></p>
<ul>
<li>有一隻狗,其名字、年齡，函式<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dog = &#123;</span><br><span class="line">      name: <span class="string">'tracy'</span>,</span><br><span class="line">      age: <span class="number">20</span>,</span><br><span class="line"></span><br><span class="line">      bow: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'bow!bow!'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li>用.呼叫屬性，或是dog[‘key’] :point_down:<br><img src="https://i.imgur.com/OgrYwjF.png" alt=""></li>
<li>物件內的函式<br><img src="https://i.imgur.com/jOWuwxQ.png" alt=""></li>
</ul>
<h2 id="添加屬性至物件上"><a href="#添加屬性至物件上" class="headerlink" title="添加屬性至物件上"></a>添加屬性至物件上</h2><ul>
<li><h4 id="增加值的方式"><a href="#增加值的方式" class="headerlink" title="增加值的方式"></a>增加值的方式</h4><ul>
<li><code>dog.color = &#39;white&#39;;</code></li>
<li><code>dog[&#39;size&#39;] = &#39;small&#39;;</code> =&gt;較常用</li>
</ul>
</li>
<li><h4 id="增加函式-gt-一樣用-的方式"><a href="#增加函式-gt-一樣用-的方式" class="headerlink" title="增加函式 =&gt; 一樣用.的方式"></a>增加函式 =&gt; 一樣用.的方式</h4><ul>
<li><code>dog.bowbow = function () {
console.log(&#39;bow!bow!～～&#39;) }</code></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dog = &#123;</span><br><span class="line">     name: <span class="string">'tracy'</span>,</span><br><span class="line">     age: <span class="number">7</span>,</span><br><span class="line">     bow: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'bow!'</span>);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//增加值的方式</span></span><br><span class="line">   <span class="comment">//1</span></span><br><span class="line">   dog.color = <span class="string">'white'</span>;</span><br><span class="line">   dog.eyes = <span class="string">'big'</span>;</span><br><span class="line">   <span class="comment">//2</span></span><br><span class="line">   dog[<span class="string">'size'</span>] = <span class="string">'small'</span>;</span><br><span class="line">   <span class="comment">//增加函式</span></span><br><span class="line">   dog.bowbow = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'bow!bow!～～'</span>)</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/4qqgZRy.png" alt=""></p>
<h2 id="陣列"><a href="#陣列" class="headerlink" title="陣列"></a>陣列</h2><blockquote>
<p>程式柴<br><img src="https://i.imgur.com/FdH3fty.png" alt=""></p>
</blockquote>
<ul>
<li><p>陣列用 中括號<code>[ ]</code></p>
</li>
<li><p>陣列的計算是從零開始（取陣列的索引）</p>
<ul>
<li>呼應for 迴圈，從0開始，從索引第一個<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr = [<span class="number">111</span>, <span class="number">222</span>, <span class="number">333</span>]</span><br><span class="line">    <span class="built_in">console</span>.log(arr);</span><br><span class="line">    <span class="built_in">console</span>.log(arr[<span class="number">1</span>]); <span class="comment">//222</span></span><br><span class="line">    <span class="comment">//呼應for 迴圈，從0開始，從索引第一個</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>陣列中的東西都是相同屬性，比較好操作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr2 = [<span class="string">'dog'</span>, <span class="string">'cat'</span>, <span class="string">'sth'</span>]</span><br><span class="line">    <span class="built_in">console</span>.log(arr.length); <span class="comment">//3</span></span><br><span class="line">  arr3 = [<span class="number">111</span>, <span class="string">'cat'</span>, <span class="string">'sth'</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/2WztSsO.png" alt=""></p>
</li>
<li><p>練習：要紀錄10位學生的分數，並加總</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> score = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">100</span>];</span><br><span class="line">    <span class="built_in">console</span>.log(score);</span><br></pre></td></tr></table></figure>
<h3 id="陣列基本操作-gt-pop-與push-較常用"><a href="#陣列基本操作-gt-pop-與push-較常用" class="headerlink" title="陣列基本操作 -&gt; pop 與push 較常用"></a>陣列基本操作 -&gt; <code>pop</code> 與<code>push</code> 較常用</h3></li>
<li><p><code>score.push(1000)</code> -&gt; 新增元素到現有陣列中，加入尾端</p>
</li>
<li><p><code>score.unshift(888)</code> -&gt; 加入陣列最前面</p>
</li>
<li><p>pop:從最末端抽走元素<br><img src="https://i.imgur.com/e55Oxbz.png" alt=""></p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myHeros=[<span class="string">'孫悟空'</span>, <span class="string">'佐助'</span>, <span class="string">'女超人'</span>, <span class="string">'美國隊長'</span>];</span><br><span class="line"><span class="comment">//從最末端抽走元素</span></span><br><span class="line">myHeros.pop();</span><br><span class="line"></span><br><span class="line"><span class="comment">//從頭抽走元素</span></span><br><span class="line">myHeros.shift();</span><br><span class="line"><span class="built_in">console</span>.log(myHeros);</span><br></pre></td></tr></table></figure>


<h3 id="陣列替換元素"><a href="#陣列替換元素" class="headerlink" title="陣列替換元素"></a>陣列替換元素</h3><ul>
<li>在原本陣列中，選取要取代的該元素，後面加=，並輸入內容</li>
</ul>
<p><img src="https://i.imgur.com/gnVybmt.png" alt=""></p>
<h2 id="陣列取得最後一個元素"><a href="#陣列取得最後一個元素" class="headerlink" title="陣列取得最後一個元素"></a>陣列取得最後一個元素</h2><ul>
<li>該陣列長度-1，就可以取得最後一個元素<ul>
<li>長度為七，最後一個的索引是6 :point_down:<br><img src="https://i.imgur.com/Ytlzihy.png" alt=""></li>
</ul>
</li>
</ul>
<h2 id="用-indexOf-取得元素的索引"><a href="#用-indexOf-取得元素的索引" class="headerlink" title="用 indexOf 取得元素的索引"></a>用 indexOf 取得元素的索引</h2><ul>
<li>Of的o要大寫</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myHeros=[<span class="string">'孫悟空'</span>, <span class="string">'佐助'</span>, <span class="string">'女超人'</span>, <span class="string">'美國隊長'</span>];</span><br><span class="line"><span class="comment">//檢查誰誰誰有在陣列中嗎</span></span><br><span class="line"><span class="built_in">console</span>.log(myHeros.indexOf(<span class="string">'達爾'</span>)); <span class="comment">//印出-1，意指此元素不存在陣列中</span></span><br><span class="line"><span class="built_in">console</span>.log(myHeros.indexOf(<span class="string">'美國隊長'</span>)); <span class="comment">//印出3（在陣列中第幾個索引</span></span><br></pre></td></tr></table></figure>

<h3 id="切片-slice-與方法"><a href="#切片-slice-與方法" class="headerlink" title="切片 slice 與方法"></a>切片 slice 與方法</h3><p><img src="https://i.imgur.com/h3ltQ3Q.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>];</span><br><span class="line">   <span class="comment">//用索引</span></span><br><span class="line">   <span class="built_in">console</span>.log(arr.slice(<span class="number">2</span>, <span class="number">4</span>));<span class="comment">//不包含最後一個</span></span><br><span class="line">   <span class="built_in">console</span>.log(arr.slice(<span class="number">2</span>, <span class="number">5</span>));</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/bzKmwQi.png" alt=""></p>
<ul>
<li>複製陣列<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> shallowCopy = fruits.slice(); <span class="comment">// 這就是複製陣列的方式</span></span><br><span class="line"><span class="comment">// ["Strawberry", "Mango"]</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice" target="_blank" rel="noopener">MDN slice</a><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener">MDN array</a><br><a href="https://www.oxxostudio.tw/articles/201908/js-array.html" target="_blank" rel="noopener">JavaScript Array 陣列操作方法大全 ( 含 ES6 )</a></p>
<h2 id="陣列與物件"><a href="#陣列與物件" class="headerlink" title="陣列與物件"></a>陣列與物件</h2><ul>
<li><p>例子：被老師要求要記錄，學生的名字,分數,地址…</p>
</li>
<li><p>以陣列的想法，會將各類別分類，放入同屬性的結果</p>
<ul>
<li>學生的分數,名字個一個陣列<br><img src="https://i.imgur.com/6DP47iL.png" alt=""></li>
<li>要取得同一位學生的所有資料，要個別從矩陣中拿取<br><img src="https://i.imgur.com/5q4VitE.png" alt=""></li>
</ul>
</li>
<li><p>一個資料集合，就能代表一個學生 –&gt;物件</p>
<ul>
<li>以下面的資料結構來代表學生的一些屬性<br><img src="https://i.imgur.com/Gk5T01w.png" alt=""></li>
</ul>
</li>
</ul>
<hr>
<h3 id="補充"><a href="#補充" class="headerlink" title="補充"></a>補充</h3><ul>
<li>物件與陣列，與等號的關係,理解<ul>
<li>下方的結果都是false<br><img src="https://i.imgur.com/6L0AI2n.png" alt=""></li>
</ul>
</li>
</ul>
<p>因為：</p>
<ul>
<li><code>var obj=[a:1]</code>，會將它放在某一個記憶體位置</li>
<li><code>var obj2=[a:1]</code>，會將它放在另一個記憶體位置<div class="note info">
            <p>即便內容,數值一樣，但js判斷的是記憶體位置不一樣</p>
          </div>
</li>
</ul>
</p>
      <div class="post-button"><a class="btn" href="/2020/12/27/js-array/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/12/27/js-function/">JS基本功- function函式</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-12-27</span>
      <p><h3 id="使用函式可以讓我們執行效率提升，不用重複撰寫，只需幾行語法便可以達到快速的運算、或是功能的執行。以下範例為數羊計數，透過函式以及迴圈，以幫助設定計數的起始以及終點，並快速的執行範圍內的計數。"><a href="#使用函式可以讓我們執行效率提升，不用重複撰寫，只需幾行語法便可以達到快速的運算、或是功能的執行。以下範例為數羊計數，透過函式以及迴圈，以幫助設定計數的起始以及終點，並快速的執行範圍內的計數。" class="headerlink" title="使用函式可以讓我們執行效率提升，不用重複撰寫，只需幾行語法便可以達到快速的運算、或是功能的執行。以下範例為數羊計數，透過函式以及迴圈，以幫助設定計數的起始以及終點，並快速的執行範圍內的計數。"></a>使用函式可以讓我們執行效率提升，不用重複撰寫，只需幾行語法便可以達到快速的運算、或是功能的執行。以下範例為數羊計數，透過函式以及迴圈，以幫助設定計數的起始以及終點，並快速的執行範圍內的計數。</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//為什麼我們需要function</span></span><br><span class="line">    <span class="comment">//DRY -&gt; Don't repeat yourself</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">echoSheep</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'第'</span> + i + <span class="string">'隻綿羊'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="number">11</span>; i++) &#123;</span><br><span class="line">      echoSheep(i)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><h4 id="與過去所學結合"><a href="#與過去所學結合" class="headerlink" title="與過去所學結合"></a>與過去所學結合</h4></li>
</ul>
<p><img src="https://i.imgur.com/O6BuNU9.png" alt=""></p>
<ul>
<li>也可以return後面接物件 <ul>
<li>回傳結果為20<br><img src="https://i.imgur.com/ln90sd9.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="簡單練習題"><a href="#簡單練習題" class="headerlink" title="簡單練習題"></a>簡單練習題</h3><ul>
<li>創建空陣列，並於陣列中放數1,2,3,…10</li>
</ul>
<p><img src="https://i.imgur.com/9tTJ3uL.png" alt=""><br>要放入return，否則會出現undefined<br><img src="https://i.imgur.com/TGCWt71.png" alt=""><br><img src="https://i.imgur.com/lRysWNO.png" alt=""></p>
<ul>
<li>也可以將參數改成兩個數</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateArray</span>(<span class="params">a, b</span>) </span>&#123;  <span class="comment">//a,b 可以改為 from,to</span></span><br><span class="line">      <span class="keyword">var</span> result = [];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = a; i &lt;= b; i++) &#123;</span><br><span class="line">        result.push(i);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(generateArray(<span class="number">3</span>, <span class="number">10</span>))</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/12sURMh.png" alt=""></p>
<h3 id="return"><a href="#return" class="headerlink" title="return"></a>return</h3><ul>
<li><p>函式中一放進return，在函式，return後面的部分就不會運行了</p>
</li>
<li><p>不需要知道結果<br><img src="https://i.imgur.com/4oPINY3.png" alt=""></p>
</li>
<li><p>需要回傳值<br><img src="https://i.imgur.com/yb0arjk.png" alt=""></p>
</li>
</ul>
<ul>
<li>參數：函式後面要傳入的值</li>
<li>引數：真正傳進去的東西</li>
</ul>
<p><img src="https://i.imgur.com/n66mD1K.png" alt=""></p>
<ul>
<li>Arguments:為類陣列，屬於物件</li>
</ul>
<h2 id="表達式-Expression-與陳述句-Statement-的差異"><a href="#表達式-Expression-與陳述句-Statement-的差異" class="headerlink" title="表達式(Expression)與陳述句(Statement)的差異"></a>表達式(Expression)與陳述句(Statement)的差異</h2><ul>
<li>表達式：會回傳值</li>
<li>陳述句：不會回傳值 (if…else,switch，等控制流程)</li>
</ul>
<h2 id="使用函式陳述式-Function-Statement-與函式表達式-Function-Expression"><a href="#使用函式陳述式-Function-Statement-與函式表達式-Function-Expression" class="headerlink" title="使用函式陳述式(Function Statement)與函式表達式(Function Expression)"></a>使用函式陳述式(Function Statement)與函式表達式(Function Expression)</h2><ul>
<li>函式陳述式(Function Statement):在使用函式之前，放入helloFunctionStatement();是可以執行</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//helloFunctionStatement();  放在前面沒關係</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">helloFunctionStatement</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'this is Function Statement '</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    helloFunctionStatement();</span><br></pre></td></tr></table></figure>
<ul>
<li>函式表達式(Function Expression):反之，要放在宣告之後<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//helloFunctionExpression(); 放前面，會出現錯誤</span></span><br><span class="line"><span class="keyword">var</span> helloFunctionExpression = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'this is Function Expression '</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    helloFunctionExpression();</span><br></pre></td></tr></table></figure>
:::warning<br>因為hoisting(變數提升)的關係<br>:::</li>
</ul>
<p><a href="https://ithelp.ithome.com.tw/articles/10218937" target="_blank" rel="noopener">JS 原力覺醒 Day07 - 陳述式 表達式</a></p>
<h2 id="變數能夠影響的範圍作用域-Scope-作用域：變數可以影響的範圍"><a href="#變數能夠影響的範圍作用域-Scope-作用域：變數可以影響的範圍" class="headerlink" title="變數能夠影響的範圍作用域( Scope 作用域：變數可以影響的範圍 )"></a>變數能夠影響的範圍作用域( Scope 作用域：變數可以影響的範圍 )</h2><ul>
<li>在function中，所宣告的 var a = 50;，範圍就只有涵蓋在函式中，不會影響到外面</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">helloWorld</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> a = <span class="number">50</span>;</span><br><span class="line">     <span class="built_in">console</span>.log(a);</span><br><span class="line">   &#125;</span><br><span class="line">   helloWorld();</span><br><span class="line">   <span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/16xE1No.png" alt=""></p>
<ul>
<li>如果函式中，宣吿某變數，沒有加var/let，該變數就會影響外部<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">helloWorld</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     a = <span class="number">50</span>;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'function:'</span>, a);</span><br><span class="line">   &#125;</span><br><span class="line">   helloWorld();</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'外部:'</span>, a);</span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/tJTnR9W.png" alt=""></li>
</ul>
<h3 id="全域變數與區域變數"><a href="#全域變數與區域變數" class="headerlink" title="全域變數與區域變數"></a>全域變數與區域變數</h3><ul>
<li><h4 id="使用var-let-const，來宣告"><a href="#使用var-let-const，來宣告" class="headerlink" title="使用var,let,const，來宣告"></a>使用var,let,const，來宣告</h4></li>
<li><h4 id="全域變數：在瀏覽器中，沒有在fuction裡，直接進行宣告"><a href="#全域變數：在瀏覽器中，沒有在fuction裡，直接進行宣告" class="headerlink" title="全域變數：在瀏覽器中，沒有在fuction裡，直接進行宣告"></a>全域變數：在瀏覽器中，沒有在fuction裡，直接進行宣告</h4><ul>
<li>也可以用window來存取</li>
<li>window，是瀏覽器上的根物件<br><img src="https://i.imgur.com/TNAMSWA.png" alt=""></li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> y = <span class="number">1</span>;  <span class="comment">//在外面宣告為 全域變數</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">abc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="comment">//var,let,const</span></span><br><span class="line">     <span class="keyword">var</span> x = <span class="number">1</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><h4 id="區域變數：在function中進行宣告"><a href="#區域變數：在function中進行宣告" class="headerlink" title="區域變數：在function中進行宣告"></a>區域變數：在function中進行宣告</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">//var,let,const</span></span><br><span class="line">      <span class="keyword">var</span> x = <span class="number">1</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li><h4 id="不是變數-gt-全域的屬性"><a href="#不是變數-gt-全域的屬性" class="headerlink" title="不是變數 =&gt; 全域的屬性"></a>不是變數 =&gt; 全域的屬性</h4><ul>
<li>z=1;</li>
<li>也可以用window來存取</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/eMBkGKy.png" alt=""></p>
<h2 id="回呼函數-Callback-Function"><a href="#回呼函數-Callback-Function" class="headerlink" title="回呼函數 Callback Function"></a>回呼函數 Callback Function</h2><ul>
<li>把函數做為參數傳遞</li>
<li>當檔案讀取完畢時，請來執行這個 function，並且把結果傳進來</li>
<li>heyFunc(console.log)-&gt;console.log 可以替換別的</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">heyFunc</span>(<span class="params">myFunction</span>) </span>&#123;</span><br><span class="line">     myFunction(<span class="string">'hi'</span>);</span><br><span class="line">     myFunction(<span class="string">'hi'</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   heyFunc(<span class="built_in">console</span>.log);</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/imMi0vS.png" alt=""></p>
<ul>
<li>非同步（Asynchronous）:回呼常用來延續非同步行動完成後的程式執行</li>
</ul>
<h3 id="其他介紹-超入門-JavaScript-教學-13-回呼函式-callback"><a href="#其他介紹-超入門-JavaScript-教學-13-回呼函式-callback" class="headerlink" title="其他介紹 超入門 JavaScript 教學 13 - 回呼函式 callback"></a>其他介紹 <a href="https://www.youtube.com/watch?v=U0YbyCaG93k" target="_blank" rel="noopener">超入門 JavaScript 教學 13 - 回呼函式 callback</a></h3><ul>
<li>以下範例：讓cb接到shout這個函式<br><img src="https://i.imgur.com/zMT2p0j.png" alt=""><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shout</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'hello,i am done'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">countToSeven</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">7</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> cb === <span class="string">'fuction'</span>)</span><br><span class="line">        cb(); <span class="comment">//啟動shout函式</span></span><br><span class="line">    &#125;</span><br><span class="line">    countToSeven(); <span class="comment">//會數1-7</span></span><br><span class="line">    <span class="comment">//要數完七之後，說'hello,i am done</span></span><br><span class="line">    countToSeven(shout);</span><br><span class="line">    countToSeven(<span class="number">1</span>);<span class="comment">//1不是函式，所以在if判斷句終止</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//每隔一段時間，幫我做一次</span></span><br><span class="line">    setInterval(shout, <span class="number">2</span> * <span class="number">1000</span>);<span class="comment">//每隔兩秒執行sout</span></span><br><span class="line">    <span class="comment">//在多少時間之後，幫我執行</span></span><br><span class="line">    setTimeout(shout, <span class="number">1</span> * <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
<h3 id="js內建函式"><a href="#js內建函式" class="headerlink" title="js內建函式"></a>js內建函式</h3><ul>
<li>每隔一段時間，幫我做一次<br><code>setInterval(shout, 2 * 1000);</code>//每隔兩秒執行sout</li>
<li>在多少時間之後，幫我執行<br><code>setTimeout(shout, 1 * 1000)</code></li>
</ul>
</li>
</ul>
<h3 id="參考資料："><a href="#參考資料：" class="headerlink" title="參考資料："></a>參考資料：</h3><p><a href="https://ithelp.ithome.com.tw/articles/10192739" target="_blank" rel="noopener">重新認識 JavaScript: Day 18 Callback Function 與 IIFE</a><br><a href="https://blog.techbridge.cc/2019/10/05/javascript-async-sync-and-callback/" target="_blank" rel="noopener">JavaScript 中的同步與非同步（上）：先成為 callback 大師吧！</a><br><a href="https://whien.medium.com/js20min-day-18-%E9%97%9C%E6%96%BC%E5%9B%9E%E5%91%BC%E7%94%9F%E6%B4%BB%E5%8C%96-callback-1a112db1a788" target="_blank" rel="noopener">JS20min Day — 18 關於回呼生活化 (Callback)</a></p>
<h2 id="匿名函式"><a href="#匿名函式" class="headerlink" title="匿名函式"></a>匿名函式</h2><ul>
<li>heyFunc裡面的function沒有名稱<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">heyFunc</span>(<span class="params">myFunction</span>) </span>&#123;</span><br><span class="line">      myFunction(<span class="string">'hi'</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    heyFunc(<span class="function"><span class="keyword">function</span> (<span class="params">message</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'message is:'</span>, message);</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="comment">//message is:hi</span></span><br><span class="line">  &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="立即函式-IIFE"><a href="#立即函式-IIFE" class="headerlink" title="立即函式(IIFE)"></a>立即函式(IIFE)</h2><blockquote>
<p>Luka<br><img src="https://i.imgur.com/sriaR2r.png" alt=""></p>
</blockquote>
<ul>
<li>它是沒有名字的函式，要立即調用<ul>
<li>不讓函式內的變數污染到外面的東係</li>
<li>讓jquery的＄＄變成是jquery使用<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> str = <span class="string">'Hi '</span> + name + <span class="string">'!'</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(str);</span><br><span class="line">      &#125;)(<span class="string">'Sam'</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>一般常見寫法<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sayHi = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str = <span class="string">'Hi '</span> + name + <span class="string">'!'</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(str);</span><br><span class="line">&#125;(<span class="string">'Peter'</span>)<span class="comment">//在後面立即執行</span></span><br><span class="line">  <span class="comment">// sayHi("Peter");</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><a href="https://pjchender.blogspot.com/2016/05/javascriptiifesimmediately-invoked.html" target="_blank" rel="noopener">[筆記] 談談JavaScript中的IIFEs(Immediately Invoked Functions Expressions)</a><br><a href="https://pjchender.blogspot.com/2016/05/iifesimmediately-invoked-functions.html" target="_blank" rel="noopener">[筆記] 為什麼我們要用IIFEs(Immediately Invoked Functions Expressions)
</a></p>
<h2 id="hoisting-變數提升淺談"><a href="#hoisting-變數提升淺談" class="headerlink" title="hoisting 變數提升淺談"></a>hoisting 變數提升淺談</h2><ul>
<li><p>js的變數與函式的宣告提升</p>
</li>
<li><p>不管在哪一行使用了變數，都視為第一行宣告</p>
<blockquote>
<p>比較好的流程 By 彭彭<br><img src="https://i.imgur.com/DcnsGsL.png" alt=""></p>
</blockquote>
</li>
</ul>
<p>但在js有hoisting 變數提升</p>
<ul>
<li>就算把變數宣告放在後面，依然可以運作(會將<code>var x</code>提升到最前面)<blockquote>
<p><img src="https://i.imgur.com/VmUcFV3.png" alt=""></p>
</blockquote>
</li>
</ul>
<p>進一步細節…</p>
<blockquote>
<p><img src="https://i.imgur.com/vBfQGUk.png" alt=""><br>電腦解讀如下 </p>
</blockquote>
<ul>
<li><code>var x</code>會提升<blockquote>
<p><img src="https://i.imgur.com/0qjf9j8.png" alt=""><br>結果會印出undefined</p>
</blockquote>
</li>
</ul>
<h3 id="在函示fuction的變數提升"><a href="#在函示fuction的變數提升" class="headerlink" title="在函示fuction的變數提升"></a>在函示fuction的變數提升</h3><ul>
<li>先宣告函式，在能呼叫函式執行<blockquote>
<p><img src="https://i.imgur.com/jSAAaWN.png" alt=""></p>
</blockquote>
</li>
<li>在js先呼叫，依然可以運作<blockquote>
<p><img src="https://i.imgur.com/vKZ9eXh.png" alt=""></p>
</blockquote>
</li>
</ul>
<p>其他狀況…(把函式裝到變數中當作資料)</p>
<ul>
<li>在此情形，它會出現錯誤，回報test不是一個函式<blockquote>
<p><img src="https://i.imgur.com/k2ANLPn.png" alt=""></p>
</blockquote>
</li>
<li>程式的解讀 :point_down: </li>
<li>只有var test被提升<blockquote>
<p><img src="https://i.imgur.com/ZOasHkk.png" alt=""></p>
</blockquote>
</li>
</ul>
<blockquote>
<p>程式柴<br><img src="https://i.imgur.com/WuqIKWR.png" alt=""></p>
</blockquote>
<blockquote>
<ul>
<li>沒有宣告</li>
<li><img src="https://i.imgur.com/tlctwnQ.png" alt=""></li>
</ul>
</blockquote>
<h2 id="常用的內建函式"><a href="#常用的內建函式" class="headerlink" title="常用的內建函式"></a>常用的內建函式</h2><h3 id="Number類型"><a href="#Number類型" class="headerlink" title="Number類型"></a>Number類型</h3><ul>
<li><h4 id="字串轉數字"><a href="#字串轉數字" class="headerlink" title="字串轉數字"></a>字串轉數字</h4></li>
</ul>
<p><img src="https://i.imgur.com/SKn9IWm.png" alt=""></p>
<ul>
<li>parseInt 是取整數，若遇到如20.35，就只會取到20</li>
</ul>
<p><img src="https://i.imgur.com/MwOQLxK.png" alt=""></p>
<ul>
<li>遇到小數點且要保留的時候，使用parseFloat<ul>
<li>結果為30.35</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/fVqNBhR.png" alt=""></p>
<p><img src="https://i.imgur.com/xct9oPf.png" alt=""></p>
<ul>
<li><code>Math.ceil()</code>=&gt; 無條件進位</li>
<li><code>Math.floor()</code>=&gt; 無條件捨去</li>
<li><code>Math.round()</code> =&gt; 四捨五入</li>
<li><code>Math.sqrt()</code> =&gt; 開根號</li>
<li><code>Math.pow()</code> =&gt; 次方</li>
<li><code>Math.radom()</code> =&gt; 產生隨機數(0-1，不包含1)</li>
<li><code>toString()</code> =&gt; 數字轉字串<ul>
<li>或是加空字串</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/3TGrI7J.png" alt=""></p>
<p><img src="https://i.imgur.com/u9axhKX.png" alt=""></p>
<h3 id="String類型"><a href="#String類型" class="headerlink" title="String類型"></a>String類型</h3><ul>
<li><p><code>toUpperCase</code>=&gt; 轉大寫</p>
</li>
<li><p><code>toLowerCase</code> =&gt; 轉小寫</p>
</li>
<li><p><code>indexOf</code> =&gt; 找出字串中，單字的索引（用於檢查某字是否存在字串中）<br><img src="https://i.imgur.com/u51AqqO.png" alt=""></p>
</li>
<li><p><code>replace()</code> =&gt; 取代</p>
<ul>
<li>用正規表達式來選擇 某些字<br><img src="https://i.imgur.com/AboC56u.png" alt=""><br><img src="https://i.imgur.com/JQ5KHBI.png" alt=""></li>
</ul>
</li>
<li><p><code>split()</code> =&gt; 切字串</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//split較常使用的情形</span></span><br><span class="line">  <span class="comment">//當資料為一連串字串，利用逗號切割 變成陣列，比較好運用</span></span><br><span class="line">  <span class="keyword">var</span> str = <span class="string">'data1,data2,data3,data4'</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(str.split(<span class="string">','</span>));</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/XA193Oc.png" alt=""></p>
</li>
<li><p><code>trim()</code> =&gt;從一個字符串的两端刪除空白字符</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> greeting = <span class="string">'   Hello world!   '</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(greeting);</span><br><span class="line"><span class="comment">// expected output: "   Hello world!   ";</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(greeting.trim());</span><br><span class="line"><span class="comment">// expected output: "Hello world!";</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Array-類型"><a href="#Array-類型" class="headerlink" title="Array 類型"></a>Array 類型</h3><ul>
<li><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/join" target="_blank" rel="noopener">Array.prototype.join()</a> </li>
<li>方法會將陣列（或一個類陣列（array-like）物件）中所有的元素連接、合併成一個 ‘字串’，並回傳此字串(在陣列中每個元素間插入設定的東西)<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> elements = [<span class="string">'Fire'</span>, <span class="string">'Air'</span>, <span class="string">'Water'</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join());</span><br><span class="line"><span class="comment">// expected output: "Fire,Air,Water" //會變成字串</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join(<span class="string">''</span>));</span><br><span class="line"><span class="comment">// expected output: "FireAirWater"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(elements.join(<span class="string">'-'</span>));</span><br><span class="line"><span class="comment">// expected output: "Fire-Air-Water"</span></span><br></pre></td></tr></table></figure></li>
<li><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="noopener">Array.prototype.map()</a></li>
<li>建立一個新的陣列，其內容為原陣列的每一個元素經由回呼函式運算後所回傳的結果之集合。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">   <span class="built_in">console</span>.log(</span><br><span class="line">     arr.map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> x * <span class="number">-1</span></span><br><span class="line">     &#125;)</span><br><span class="line">   )</span><br></pre></td></tr></table></figure>
<img src="https://i.imgur.com/0FKeOro.png" alt=""></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//也可以接著寫下去</span></span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">    <span class="built_in">console</span>.log(</span><br><span class="line">      arr</span><br><span class="line">        .map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> x * <span class="number">-1</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> x * <span class="number">2</span></span><br><span class="line">        &#125;)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/FrkeTMZ.png" alt=""></p>
<ul>
<li><p><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="noopener">Array.prototype.filter()</a></p>
</li>
<li><p>過濾</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">-5</span>, <span class="number">3</span>, <span class="number">-2</span>];</span><br><span class="line">    <span class="built_in">console</span>.log(</span><br><span class="line">      arr</span><br><span class="line">        .map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> x * <span class="number">2</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .filter(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">return</span> x &gt; <span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//把負數過濾掉，留下正數</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/G8TKP1k.png" alt=""></p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/slice" target="_blank" rel="noopener">Array.prototype.slice()</a></p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/splice" target="_blank" rel="noopener">Array.prototype.splice()</a></p>
<ul>
<li>splice 1.插入元素<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> months = [<span class="string">'Jan'</span>, <span class="string">'March'</span>, <span class="string">'April'</span>, <span class="string">'June'</span>];</span><br><span class="line">months.splice(<span class="number">1</span>, <span class="number">0</span>, <span class="string">'Feb'</span>);</span><br><span class="line"><span class="comment">// inserts at index 1</span></span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// expected output: Array ["Jan", "Feb", "March", "April", "June"]</span></span><br><span class="line"></span><br><span class="line">months.splice(<span class="number">4</span>, <span class="number">1</span>, <span class="string">'May'</span>);</span><br><span class="line"><span class="comment">// replaces 1 element at index 4</span></span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// expected output: Array ["Jan", "Feb", "March", "April", "May"]</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>splice 2.刪除元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myFish = [<span class="string">'angel'</span>, <span class="string">'clown'</span>, <span class="string">'drum'</span>, <span class="string">'mandarin'</span>, <span class="string">'sturgeon'</span>];</span><br><span class="line"><span class="keyword">var</span> removed = myFish.splice(<span class="number">3</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// removed 為 ["mandarin"]</span></span><br><span class="line"><span class="comment">// myFish 為 ["angel", "clown", "drum", "sturgeon"]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Array/sort" target="_blank" rel="noopener">Array.prototype.sort()</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> months = [<span class="string">'March'</span>, <span class="string">'Jan'</span>, <span class="string">'Feb'</span>, <span class="string">'Dec'</span>];</span><br><span class="line">months.sort();</span><br><span class="line"><span class="built_in">console</span>.log(months);</span><br><span class="line"><span class="comment">// expected output: Array ["Dec", "Feb", "Jan", "March"] //按照第一個字母順序排列</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">30</span>, <span class="number">4</span>, <span class="number">21</span>, <span class="number">100000</span>];</span><br><span class="line">array1.sort();</span><br><span class="line"><span class="built_in">console</span>.log(array1);</span><br><span class="line"><span class="comment">// expected output: Array [1, 100000, 21, 30, 4] //是一字串，以第一個數字來排列</span></span><br></pre></td></tr></table></figure></li>
<li><p>依照數字大小排列</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">30</span>, <span class="number">4</span>, <span class="number">2</span>];</span><br><span class="line"> arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (a === b) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">if</span> (b &gt; a) <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">//不換</span></span><br><span class="line">   <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">//正數，換位置</span></span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="built_in">console</span>.log(arr);</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/dMAXe66.png" alt=""></p>
</li>
</ul>
<h4 id="「回傳」與「印出」的差異"><a href="#「回傳」與「印出」的差異" class="headerlink" title="「回傳」與「印出」的差異"></a>「回傳」與「印出」的差異</h4><ul>
<li>函式可以透過 return 回傳函式運算完的結果<blockquote>
<p> 述程式碼的執行：</p>
</blockquote>
</li>
</ul>
<p>1.<code>console.log(add(1, 2))</code> =&gt; 帶入functoin，<code>console.log(a, b);</code> =&gt; 印出1,2<br>2.往下，到return undefined; 然後進入add(1, 2)的回傳值，就會是undefined</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(a, b);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">undefined</span>;  <span class="comment">//不加return，預設會是undefined</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li>以為 <code>add(1, 2)</code> 的回傳值是 3，但不是，那是因為它在裡面 console.log() 所以把結果印出來了。  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(a + b)</span><br><span class="line"> &#125;</span><br><span class="line"> add(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></li>
<li>如果真的要有回傳值的話要這樣寫：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> a + b</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>參考資料： <a href="https://ithelp.ithome.com.tw/articles/10214256" target="_blank" rel="noopener">JavaScript 初心者筆記: 函式實際運作 - 回傳值與函式間互相傳遞</a><br>,<a href="https://ithelp.ithome.com.tw/articles/10214364" target="_blank" rel="noopener">後設鐵人 Day4：請幫我簽個名好嗎？</a></p>
<h3 id="Immutable-觀念-不可變"><a href="#Immutable-觀念-不可變" class="headerlink" title="Immutable 觀念 (不可變)"></a>Immutable 觀念 (不可變)</h3><ul>
<li>除了物件、陣列以外，其他都是不可變的</li>
<li>沒辦法改它，就只能回傳新的<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'hello'</span>;</span><br><span class="line">   a.toUpperCase;</span><br><span class="line">   <span class="built_in">console</span>.log(a);</span><br><span class="line">   <span class="comment">//印出：hello，沒有改變原本變數的內容</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'hello'</span>;</span><br><span class="line"> a = a.toUpperCase(); <span class="comment">//要回傳給a，把原本的a值蓋掉</span></span><br><span class="line"> <span class="built_in">console</span>.log(a);</span><br><span class="line"> </span><br><span class="line"> <span class="comment">//或是增設一個新變數</span></span><br><span class="line"> <span class="keyword">var</span> a = <span class="string">'hello'</span>;</span><br><span class="line"> <span class="keyword">var</span> b = a.toUpperCase(); </span><br><span class="line"> <span class="built_in">console</span>.log(b);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</p>
      <div class="post-button"><a class="btn" href="/2020/12/27/js-function/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>
  <div class="lx-entry padding">
    <div>
      <h2 class="title"><a href="/2020/12/26/js-Control-Flow/">JS基本功- 控制流程 Control Flow</a></h2>
      <span class="lx-post-detail"><i class="fa fa-calendar-o"></i> 2020-12-26</span>
      <p><h2 id="簡易控制流程的撰寫"><a href="#簡易控制流程的撰寫" class="headerlink" title="簡易控制流程的撰寫"></a>簡易控制流程的撰寫</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">'只被當一科'</span>;</span><br><span class="line">    <span class="keyword">if</span> (str === <span class="string">'all pass'</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'帶你去歐洲玩'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (str === <span class="string">'只被當一科'</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'帶你去宜蘭玩'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'禁足'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//帶你去宜蘭玩</span></span><br></pre></td></tr></table></figure>

<h2 id="使用switch來撰寫-太多如果的話可以改用switch"><a href="#使用switch來撰寫-太多如果的話可以改用switch" class="headerlink" title="使用switch來撰寫(太多如果的話可以改用switch)"></a>使用switch來撰寫(太多如果的話可以改用switch)</h2><ul>
<li>使用break，是用來跳出swich迴圈（換句話說，沒有寫break的話會使程式一直往下跑）<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用switch 改寫 if else</span></span><br><span class="line">   <span class="keyword">var</span> key = <span class="string">'all pass'</span>;</span><br><span class="line">   <span class="keyword">switch</span> (key) &#123;</span><br><span class="line">     <span class="keyword">case</span> <span class="string">'all pass'</span>:</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'帶你去歐洲玩'</span>);</span><br><span class="line">       <span class="keyword">break</span>;</span><br><span class="line">     <span class="keyword">case</span> <span class="string">'只被當一科'</span>:</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'帶你去宜蘭玩'</span>);</span><br><span class="line">       <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">default</span>:</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'禁足'</span>);</span><br><span class="line">       <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="comment">// 帶你去歐洲玩</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="迴圈基本介紹"><a href="#迴圈基本介紹" class="headerlink" title="迴圈基本介紹"></a>迴圈基本介紹</h2><p>loop：一直做一樣的事情<br>無窮迴圈，發生的情形：沒有設終止條件，或是終止條件設錯 （<code>control+c</code> 終止它）</p>
<ul>
<li>可在程式最前面，加入debugger<br><img src="https://i.imgur.com/kpTOWx4.png" alt=""></li>
</ul>
<h2 id="1-迴圈for"><a href="#1-迴圈for" class="headerlink" title="1.迴圈for"></a>1.迴圈for</h2><blockquote>
<p>彭彭的課程<br><img src="https://i.imgur.com/JYayJeg.png" alt=""></p>
</blockquote>
<h3 id="用-for-迴圈數綿羊數到一百隻，直到睡著"><a href="#用-for-迴圈數綿羊數到一百隻，直到睡著" class="headerlink" title="用 for 迴圈數綿羊數到一百隻，直到睡著"></a>用 for 迴圈數綿羊數到一百隻，直到睡著</h3><ul>
<li><code>var</code>後面宣告的變數，可以替換不同字母<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for(初始值;終止條件;每次執行的語句)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"第"</span> + (i + <span class="number">1</span>) + <span class="string">"隻綿羊"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//會印出1~9</span></span><br><span class="line">    <span class="comment">//i++ 意思指 i+=1 ，也是i=i+1</span></span><br></pre></td></tr></table></figure>
<h3 id="用-for-迴圈倒著數綿羊"><a href="#用-for-迴圈倒著數綿羊" class="headerlink" title="用 for 迴圈倒著數綿羊"></a>用 for 迴圈倒著數綿羊</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">100</span>; k &gt; <span class="number">0</span>; k--) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"第"</span> + k + <span class="string">"隻綿羊"</span>);</span><br><span class="line">      <span class="keyword">if</span> (k === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'睡著了!'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="用-for-迴圈-數到第-31-隻綿羊就睡著了！-break"><a href="#用-for-迴圈-數到第-31-隻綿羊就睡著了！-break" class="headerlink" title="用 for 迴圈 數到第 31 隻綿羊就睡著了！ (break)"></a>用 for 迴圈 數到第 31 隻綿羊就睡著了！ (break)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"第"</span> + i + <span class="string">"隻綿羊"</span>);</span><br><span class="line">      <span class="keyword">if</span> (i === <span class="number">31</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'睡著了！'</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">       <span class="keyword">if</span> (i === <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'覺得想睡了！'</span>); <span class="comment">//到10不會停止</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="用-for-迴圈-跳著數"><a href="#用-for-迴圈-跳著數" class="headerlink" title="用 for 迴圈 跳著數"></a>用 for 迴圈 跳著數</h3></li>
<li><h4 id="奇數-gt-對2取於數為1者"><a href="#奇數-gt-對2取於數為1者" class="headerlink" title="奇數 -&gt; 對2取於數為1者"></a>奇數 -&gt; 對2取於數為1者</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i % <span class="number">2</span> === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"第"</span> + i + <span class="string">"隻綿羊"</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li><h4 id="印出1-4-7-10"><a href="#印出1-4-7-10" class="headerlink" title="印出1,4,7,10"></a>印出1,4,7,10</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i % <span class="number">3</span> === <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"第"</span> + i + <span class="string">"隻綿羊"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="用-for-迴圈-我只想跳過第四隻綿羊"><a href="#用-for-迴圈-我只想跳過第四隻綿羊" class="headerlink" title="用 for 迴圈 我只想跳過第四隻綿羊"></a>用 for 迴圈 我只想跳過第四隻綿羊</h3><ul>
<li>使用<code>continue</code>:會跳過一次(跳過設定的條件)，然後繼續下一次迴圈</li>
<li>注意語法的順序，如果console.log()在if..continue之前，會變成先讀取所有的i，不會跳過指定位置</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i === <span class="number">4</span>) &#123;</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"第"</span> + i + <span class="string">"隻綿羊"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/1lzSCxs.png" alt=""></p>
<h3 id="for與陣列的搭配"><a href="#for與陣列的搭配" class="headerlink" title="for與陣列的搭配"></a>for與陣列的搭配</h3><ul>
<li>i是依照索引來計算，故應該是要0,1,2,3,4 =&gt; &lt;5<ul>
<li>最後一個索引值是4(第5個沒有值)</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/HgTnl9r.png" alt=""></p>
<p><img src="https://i.imgur.com/UHUvq5n.png" alt=""></p>
<h2 id="2-迴圈while"><a href="#2-迴圈while" class="headerlink" title="2.迴圈while"></a>2.迴圈while</h2><h4 id="透過彭彭的課程來認識迴圈while"><a href="#透過彭彭的課程來認識迴圈while" class="headerlink" title="透過彭彭的課程來認識迴圈while"></a>透過彭彭的課程來認識迴圈while</h4><p><img src="https://i.imgur.com/pJbuHEp.png" alt=""></p>
<h3 id="迴圈思考方式："><a href="#迴圈思考方式：" class="headerlink" title="迴圈思考方式："></a>迴圈思考方式：</h3><blockquote>
<p>彭彭的課程</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1+2+...+50 的運算流程 </span></span><br><span class="line"><span class="keyword">var</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> n=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (n&lt;=<span class="number">50</span>)&#123;</span><br><span class="line">sum=sum+n;</span><br><span class="line"> n++</span><br><span class="line">&#125;</span><br><span class="line">alert(sum);</span><br></pre></td></tr></table></figure>
</blockquote>
<div class="note info">
            <p>和迴圈相關的變數追蹤(sum,n)</p><p>第0次迴圈:先判斷n是否&lt;=50<br>   sum:0 ,n:1<br>第1次迴圈：<br>   sum:1,n:2<br>第2次迴圈：先判斷n是否&lt;=50 (根據上一個n是2)<br>   sum:(1+2)=3,n:3<br>第3次迴圈：<br>   sum:(3+3)=6,n:4<br>…<br>…</p><p>第50次迴圈：<br>   sum:1275,n:51<br>第51次迴圈：因大於50，故跳離回圈結束</p>
          </div>


<h3 id="延續上面的思考，加入continue"><a href="#延續上面的思考，加入continue" class="headerlink" title="延續上面的思考，加入continue"></a>延續上面的思考，加入continue</h3><pre><code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x=<span class="number">0</span>;</span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)&#123;</span><br><span class="line"> <span class="keyword">if</span>(<span class="number">1</span>%<span class="number">2</span>= = =<span class="number">0</span>)&#123;<span class="keyword">continue</span>&#125;</span><br><span class="line"> x++</span><br><span class="line">&#125;</span><br><span class="line">alert(x)</span><br></pre></td></tr></table></figure></code></pre><div class="note info">
            <p>變數追蹤(x,i)<br>0:<br>  x:0,i:0<br>1:<br>  x:0 (i為0，對2取餘數為0，進入continue，然後重新開始回圈，沒有進入x++), i:1<br>2:<br>  x:1(i為1，對2取餘數不為0，所以沒有執行continue，直接進入x++),i:2</p><p>3:<br>  x:1,i:3<br>4:<br>  x:2,i:4<br>…<br>100:<br>  x:50,i:100</p>
          </div>

<h3 id="用-while-也可以達到相同的屬羊效果"><a href="#用-while-也可以達到相同的屬羊效果" class="headerlink" title="用 while 也可以達到相同的屬羊效果"></a>用 while 也可以達到相同的屬羊效果</h3><ul>
<li>印出0~10</li>
<li>相對for囉唆一點</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (x &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">    x++;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/dl0l82W.png" alt=""></p>
<ul>
<li><h4 id="利用console來debug"><a href="#利用console來debug" class="headerlink" title="利用console來debug"></a>利用console來debug</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x &lt; <span class="number">10</span>) &#123;</span><br><span class="line">      <span class="comment">//利用console來debug</span></span><br><span class="line">      <span class="built_in">console</span>.log(x)</span><br><span class="line">      x++;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"第"</span> + x + <span class="string">"隻綿羊"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/f347W4t.png" alt=""></p>
</li>
<li><h4 id="搭配continue"><a href="#搭配continue" class="headerlink" title="搭配continue"></a>搭配continue</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x &lt; <span class="number">10</span>) &#123;</span><br><span class="line">      <span class="comment">//利用console來debug</span></span><br><span class="line">      <span class="built_in">console</span>.log(x)</span><br><span class="line">      x++;</span><br><span class="line">      <span class="keyword">if</span> (x == <span class="number">4</span>)</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"第"</span> + x + <span class="string">"隻綿羊"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="搭配break"><a href="#搭配break" class="headerlink" title="搭配break"></a>搭配break</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (k &lt; <span class="number">10</span>) &#123;</span><br><span class="line"></span><br><span class="line">      k++;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"第"</span> + k + <span class="string">"隻綿羊"</span>);</span><br><span class="line">      <span class="keyword">if</span> (k == <span class="number">5</span>)</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="3-迴圈-do-while"><a href="#3-迴圈-do-while" class="headerlink" title="3.迴圈 do..while"></a>3.迴圈 do..while</h2><ul>
<li><code>()</code>放條件，<code>{}</code>放區塊<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">      i++</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'第'</span> + i + <span class="string">'隻綿羊'</span>)</span><br><span class="line">    &#125; <span class="keyword">while</span> (i &lt; <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<h3 id="與while的不同"><a href="#與while的不同" class="headerlink" title="與while的不同"></a>與while的不同</h3></li>
<li>因為<code>i&lt;10</code>的條件在最後面，所以他會先跑完do，再到while終止<ul>
<li>i++完之後，跑到<code>while(11&gt;10)</code>，跳出迴圈，執行console.log<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">10</span>;</span><br><span class="line">   <span class="keyword">do</span> &#123;</span><br><span class="line">     i++</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'第'</span> + i + <span class="string">'隻綿羊'</span>)</span><br><span class="line">   &#125; <span class="keyword">while</span> (i &lt; = <span class="number">10</span>);</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'i='</span>,i); <span class="comment">//i=11</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>另一種寫法<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">      i++</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'第'</span> + i + <span class="string">'隻綿羊'</span>)</span><br><span class="line">      <span class="keyword">if</span> (i&gt;<span class="number">10</span>)&#123;</span><br><span class="line">         <span class="keyword">break</span>    <span class="comment">//同等於終止條件</span></span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">    &#125; <span class="keyword">while</span> (<span class="literal">true</span>);  <span class="comment">//如果沒有if條件，這裡又設true，此狀況下會形成無限迴圈</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'i='</span>,i); <span class="comment">//11</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><img src="https://i.imgur.com/31WqBwO.png" alt=""></p>
<ul>
<li>同樣放入while回圈，結果就不會顯示，因為一開始k=10，進入比較，就不符合條件<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> k = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">while</span> (k &lt; <span class="number">10</span>) &#123;</span><br><span class="line">      k++;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'第'</span> + k + <span class="string">'隻綿羊'</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="雙層回圈"><a href="#雙層回圈" class="headerlink" title="雙層回圈"></a>雙層回圈</h2><h3 id="用-99-乘法表學雙層迴圈"><a href="#用-99-乘法表學雙層迴圈" class="headerlink" title="用 99 乘法表學雙層迴圈"></a>用 99 乘法表學雙層迴圈</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//有兩層，需數2次</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (k = <span class="number">1</span>; k &lt; <span class="number">10</span>; k++) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"i:"</span> + i, <span class="string">"k:"</span> + k);</span><br><span class="line">        <span class="comment">// console.log(i + '*' + k + '=' + (i * k));</span></span><br><span class="line">        <span class="keyword">let</span> result = i * k;</span><br><span class="line">        <span class="keyword">let</span> str = i + <span class="string">"x"</span> + k + <span class="string">"="</span> + result;</span><br><span class="line">        <span class="built_in">console</span>.log(str);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>參考資料：<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/continue" target="_blank" rel="noopener">MDN continue</a><br><a href="https://ithelp.ithome.com.tw/articles/10191453" target="_blank" rel="noopener">重新認識 JavaScript: Day 09 流程判斷與迴圈</a><br><a href="https://blog.csdn.net/XXJ19950917/article/details/78310346" target="_blank" rel="noopener">JS跳出循环的三种方法(break, return, continue)
</a></p>
</p>
      <div class="post-button"><a class="btn" href="/2020/12/26/js-Control-Flow/" rel="noopener"><i class="fa fa-angle-double-right fa-fw"></i>Read More</a></div>
    </div>
  </div>


<div id="pagination">
  <a class="extend prev" rel="prev" href="/"></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"></a>
</div>

<footer>
  <div>
  Copyright &copy; 2021.<a href="/">Let's Coding</a><br>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme <a href="https://lx.js.org" target="_blank">Lx</a><br>
  </div>
</footer>

  </div>
</div>
</div>

<button class="hamburger hamburger--arrow-r" type="button">
    <div class="hamburger-box">
      <div class="hamburger-inner"></div>
    </div>
</button> 
<div class="menu visibility">
  <div class="menu-head">
    <span class="layer">
      <div class="col">
        <div class="row for-pic">
          <div class="profile-pic">
            <a href="/"><img src="/images/avatar.jpeg" alt="Eva Chan"/></a>
          </div>
        </div>
        <div class="row for-name">
          <p>Eva Chan</p>
          <span class="tagline">Hello, World!</span>
        </div>
      </div>
    </span>
  </div>
  <nav class="menu-container">
  <ul class="menu-items">
    <li><a href="/"><i class="fa fa-home fa-fw"></i>Home</a></li>
    <li><a href="/archives/"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
    
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-bookmark fa-fw"></i>Pages</span>
        <ul>
          <li><a href="/guestbook/">Guestbook</a></li>
        <li><a href="/about/">About</a></li>
        </ul>
    </li>
    <li class="has-sub"><span class="dropdown-heading">
      <i class="fa fa-link fa-fw"></i>Friends</span>
        <ul>
          <li> <a href="https://lx.js.org" target="_blank">Theme-Lx</a></li>
        </ul>
    </li>
  </ul>
  </nav>
</div>

<div class="gototop js-top">
  <a href="#" class="js-gotop"><i class="fa fa-arrow-up"></i></a>
</div>
<script src="//cdn.jsdelivr.net/npm/theme-lx@0.3.9/source/js/jquery.easing.min.js"></script>
<script>
(function () {
	"use strict";
	var goToTop = function() {
		$(".js-gotop").on("click", function(event){
			event.preventDefault();
			$("html, body").animate({
				scrollTop: $("html").offset().top
			}, 500, "easeInOutExpo");
			return false;
		});
		$(window).scroll(function(){
			var $win = $(window);
			if ($win.scrollTop() > 200) {
				$(".js-top").addClass("active");
			} else {
				$(".js-top").removeClass("active");
			}
		});
	};
	$(function(){
		goToTop();
	});
}());
</script>


</body>
</html>
