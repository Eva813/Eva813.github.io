<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Let&#39;s Coding</title>
  
  
  <link href="https://eva813.github.io/atom.xml" rel="self"/>
  
  <link href="https://eva813.github.io/"/>
  <updated>2025-12-24T05:13:16.826Z</updated>
  <id>https://eva813.github.io/</id>
  
  <author>
    <name>Eva Chan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å»ºç«‹åç‰‡è‡ªå‹•å»ºæª”ç³»çµ±ï¼ˆGoogle Drive + Sheets + Geminiï¼‰</title>
    <link href="https://eva813.github.io/2025/12/24/nameCard-nauto/"/>
    <id>https://eva813.github.io/2025/12/24/nameCard-nauto/</id>
    <published>2025-12-24T04:50:09.000Z</published>
    <updated>2025-12-24T05:13:16.826Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å¯¦éš›å·¥ä½œä¸­ï¼Œæˆ‘ç™¼ç¾åŒäº‹åœ¨æ‹¿åˆ°åç‰‡å¾Œï¼Œä»ç„¶éœ€è¦ç¶“éä¸€é€£ä¸²äººå·¥æµç¨‹ï¼š</p><ul><li>æ‰‹æ©Ÿæ‹ç…§ã€æˆ–æ˜¯æƒæåç‰‡</li><li>å‚³åˆ°é›»è…¦</li><li>æ‰‹å‹•è¼¸å…¥å…¬å¸ã€å§“åã€é›»è©±</li><li>é‚„å¾ˆå®¹æ˜“æ¼è³‡æ–™æˆ–è¼¸éŒ¯</li></ul><p>å› æ­¤æˆ‘é–‹å§‹æ€è€ƒï¼š<br>èƒ½ä¸èƒ½åœ¨ä¸æ¶è¨­ä¼ºæœå™¨ã€ä¸å°å…¥è¤‡é›œç³»çµ±çš„æƒ…æ³ä¸‹ï¼ŒæŠŠé€™ä»¶äº‹è‡ªå‹•åŒ–ï¼Ÿ</p><p>é€™ç¯‡æ–‡ç« è¨˜éŒ„æˆ‘å¯¦ä½œçš„ä¸€å¥— åç‰‡è‡ªå‹•å»ºæª”ç³»çµ±ï¼Œæ ¸å¿ƒå®Œå…¨å»ºç«‹åœ¨ Google ç”Ÿæ…‹ç³»ä¸Šã€‚</p><h2 id="ç³»çµ±ç›®æ¨™èˆ‡æ•´é«”æ¦‚å¿µ"><a href="#ç³»çµ±ç›®æ¨™èˆ‡æ•´é«”æ¦‚å¿µ" class="headerlink" title="ç³»çµ±ç›®æ¨™èˆ‡æ•´é«”æ¦‚å¿µ"></a>ç³»çµ±ç›®æ¨™èˆ‡æ•´é«”æ¦‚å¿µ</h2><p>æˆ‘çš„ç›®æ¨™å¾ˆå–®ç´”ï¼š</p><blockquote><p>åªè¦ç”¨æ‰‹æ©Ÿæ‹ç…§ä¸Šå‚³åç‰‡ï¼Œå°±èƒ½è‡ªå‹•è§£æå…§å®¹ï¼Œä¸¦å¯«å…¥ Google Spreadsheetã€‚</p></blockquote><p>æ•´é«”æµç¨‹å¦‚ä¸‹ï¼š</p><p>1.æ‰‹æ©Ÿç›´æ¥æ‹ç…§ï¼Œä¸Šå‚³åˆ°æŒ‡å®šçš„ Google Drive è³‡æ–™å¤¾</p><p>2.ç”± Google Apps Script å®šæœŸæƒææ–°åœ–ç‰‡</p><p>3.ä½¿ç”¨ Gemini AI API è¾¨è­˜åç‰‡å…§å®¹ï¼ˆéå–®ç´” OCRï¼‰ï¼Œå°‡çµæ§‹åŒ–è³‡æ–™å¯«å…¥ Google Spreadsheet</p><p>4.å°‡è™•ç†å®Œæˆçš„åç‰‡ç§»å‹•åˆ°å°å­˜è³‡æ–™å¤¾ï¼Œé¿å…é‡è¤‡è™•ç†</p><h3 id="ä½¿ç”¨åˆ°çš„å·¥å…·èˆ‡æŠ€è¡“"><a href="#ä½¿ç”¨åˆ°çš„å·¥å…·èˆ‡æŠ€è¡“" class="headerlink" title="ä½¿ç”¨åˆ°çš„å·¥å…·èˆ‡æŠ€è¡“"></a>ä½¿ç”¨åˆ°çš„å·¥å…·èˆ‡æŠ€è¡“</h3><ul><li>Google Driveï¼šåç‰‡åœ–ç‰‡çš„å„²å­˜èˆ‡ç‹€æ…‹ç®¡ç†</li><li>Google Sheetsï¼šçµæ§‹åŒ–è³‡æ–™è¡¨ï¼ˆè¼•é‡è³‡æ–™åº«ï¼‰</li><li>Google Apps Scriptï¼šè‡ªå‹•åŒ–ä¸­æ¨</li><li>Google Gemini Vision APIï¼šå½±åƒ + èªæ„ç†è§£</li></ul><blockquote><p>é€™å€‹çµ„åˆçš„å„ªé»æ˜¯ï¼š<br>ä¸éœ€è¦é¡å¤–ä¸»æ©Ÿ<br>æˆæœ¬ä½<br>åœ˜éšŠæˆå“¡å¹¾ä¹éƒ½èƒ½ä¸Šæ‰‹<br>ç¶­è­·æˆæœ¬éå¸¸å°</p></blockquote><h2 id="è³‡æ–™æ¬„ä½è¨­è¨ˆ"><a href="#è³‡æ–™æ¬„ä½è¨­è¨ˆ" class="headerlink" title="è³‡æ–™æ¬„ä½è¨­è¨ˆ"></a>è³‡æ–™æ¬„ä½è¨­è¨ˆ</h2><p>å¯¦éš›ä½¿ç”¨æ™‚ï¼Œåç‰‡è³‡è¨Šå¾€å¾€æ¯”æƒ³åƒä¸­è¤‡é›œï¼ˆå¤šæ”¯é›»è©±ã€åˆ†æ©Ÿã€åœ–ç¤ºæ¨™è¨»ï¼‰ï¼Œ<br>å› æ­¤æˆ‘æœ€å¾Œæ¡ç”¨ä»¥ä¸‹æ¬„ä½çµæ§‹ï¼š</p><ul><li>ç‹€æ…‹</li><li>å…¬å¸</li><li>å§“å</li><li>è·ç¨±  </li><li>Email</li><li>Mobileï¼ˆæ‰‹æ©Ÿï¼‰</li><li>Office Phoneï¼ˆå…¬å¸é›»è©± / åˆ†æ©Ÿï¼‰</li><li>åœ°å€</li><li>å»ºæª”æ—¥æœŸ</li><li>åŸå§‹æª”æ¡ˆç¶²å€</li></ul><p>é€™äº›æ¬„ä½æœƒåœ¨ Google Spreadsheet çš„ç¬¬ä¸€åˆ—å…ˆè¨­å®šå¥½ï¼Œå¾ŒçºŒ Apps Script æœƒä¾ç…§å›ºå®šé †åºå¯«å…¥ã€‚</p><h2 id="ç¬¬ä¸€æ­¥ï¼šGoogle-Drive-ç’°å¢ƒæº–å‚™"><a href="#ç¬¬ä¸€æ­¥ï¼šGoogle-Drive-ç’°å¢ƒæº–å‚™" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šGoogle Drive ç’°å¢ƒæº–å‚™"></a>ç¬¬ä¸€æ­¥ï¼šGoogle Drive ç’°å¢ƒæº–å‚™</h2><p>å…ˆåœ¨ Google Drive å»ºç«‹ä¸€å€‹ä¸»è³‡æ–™å¤¾ï¼Œä¾‹å¦‚ï¼šåç‰‡ç®¡ç†ç³»çµ±</p><p>ä¸¦åœ¨è£¡é¢å»ºç«‹å…©å€‹å­è³‡æ–™å¤¾ï¼š</p><ul><li><p>Inboxï¼ˆå¾…è™•ç†ï¼‰ï¼š<br>æ‰‹æ©Ÿæ‹ç…§å¾Œï¼Œåç‰‡åœ–ç‰‡ä¸€å¾‹ä¸Šå‚³åˆ°é€™è£¡</p></li><li><p>Archivedï¼ˆå·²å»ºæª”ï¼‰ï¼š<br>åç‰‡è™•ç†å®Œæˆå¾Œæœƒè‡ªå‹•ç§»å‹•åˆ°é€™å€‹è³‡æ–™å¤¾</p></li></ul><h3 id="é‡è¦"><a href="#é‡è¦" class="headerlink" title="é‡è¦"></a>é‡è¦</h3><p>è«‹è¨˜ä¸‹é€™å…©å€‹è³‡æ–™å¤¾ç¶²å€åˆ—ä¸­ folders/ å¾Œé¢çš„ IDï¼Œå¾ŒçºŒ Apps Script éœ€è¦ä½¿ç”¨ã€‚</p><span id="more"></span><h2 id="ç¬¬äºŒæ­¥ï¼šGoogle-Spreadsheet-è¨­å®š"><a href="#ç¬¬äºŒæ­¥ï¼šGoogle-Spreadsheet-è¨­å®š" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šGoogle Spreadsheet è¨­å®š"></a>ç¬¬äºŒæ­¥ï¼šGoogle Spreadsheet è¨­å®š</h2><p>å»ºç«‹ä¸€å€‹æ–°çš„ Google Spreadsheetï¼ˆè©¦ç®—è¡¨ï¼‰ï¼Œä¸¦åœ¨ç¬¬ä¸€åˆ—è¨­å®šå¥½æ‰€æœ‰æ¬„ä½åç¨±ï¼ˆé †åºéœ€èˆ‡ç¨‹å¼ç¢¼ä¸€è‡´ï¼‰ã€‚</p><p>é€™å€‹ Sheet å°‡æ‰®æ¼”ã€Œåç‰‡è³‡æ–™åº«ã€çš„è§’è‰²ã€‚</p><p>Apps Script:<br><img src="https://hackmd.io/_uploads/ryIhRJYX-e.png" alt="image"></p><h3 id="API-Key-èˆ‡å®‰å…¨æ€§è¨­å®š"><a href="#API-Key-èˆ‡å®‰å…¨æ€§è¨­å®š" class="headerlink" title="API Key èˆ‡å®‰å…¨æ€§è¨­å®š"></a>API Key èˆ‡å®‰å…¨æ€§è¨­å®š</h3><p>æœ¬ç³»çµ±ä½¿ç”¨ Google Gemini APIï¼Œéœ€è¦è¨­å®š API Keyã€‚</p><p>ä¸å»ºè­°ç›´æ¥æŠŠ Key å¯«åœ¨ç¨‹å¼ç¢¼ä¸­ï¼Œæ­£ç¢ºåšæ³•æ˜¯ä½¿ç”¨ Apps Script çš„ Script Propertiesï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PropertiesService</span><br><span class="line">  .getScriptProperties()</span><br><span class="line">  .getProperty(&#x27;GEMINI_API_KEY&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ sidebar çš„è¨­å®šï¼š<br><img src="https://hackmd.io/_uploads/BkHIkgt7Wg.png" alt="image"></p><h2 id="ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²-Google-Apps-Script"><a href="#ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²-Google-Apps-Script" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½² Google Apps Script"></a>ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½² Google Apps Script</h2><p>1.æ‰“é–‹ Google Spreadsheet</p><p>2.é»æ“Šã€Œæ“´å……åŠŸèƒ½ã€â†’ã€ŒApps Scriptã€</p><p>3.åˆªé™¤åŸæœ‰ç¨‹å¼ç¢¼</p><p>4.è²¼ä¸Šæ•´æ®µ Apps Script ç¨‹å¼</p><p>æ­¤ Script çš„ä¸»è¦å·¥ä½œåŒ…å«ï¼š</p><ul><li>æƒæ Inbox è³‡æ–™å¤¾ä¸­çš„åœ–ç‰‡</li><li>å‘¼å« Gemini Vision API è¾¨è­˜åç‰‡</li><li>å°‡è³‡æ–™å¯«å…¥ Google Sheet</li><li>ç§»å‹•æª”æ¡ˆè‡³ Archived</li></ul><p>ç¨‹å¼ç¢¼ï¼Œè«‹åƒé–±ï¼š<a href="https://gist.github.com/Eva813/7de5cd72e97ff410a38322bb0b3c4d2f">https://gist.github.com/Eva813/7de5cd72e97ff410a38322bb0b3c4d2f</a></p><p>1.ä¸»ç¨‹å¼å…¥å£</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function processBusinessCards() &#123;</span><br><span class="line">  // ä¸»æµç¨‹ï¼šæƒæ Inbox â†’ å‘¼å« AI â†’ å¯«å…¥ Sheet â†’ ç§»å‹•æª”æ¡ˆ</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.é˜²æ­¢é›»è©±è™Ÿç¢¼è¢«èª¤åˆ¤ç‚ºå…¬å¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">escapeFormula</span> = (<span class="params">text</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!text) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> str = text.<span class="title function_">toString</span>().<span class="title function_">trim</span>();</span><br><span class="line">  <span class="keyword">if</span> (str.<span class="title function_">startsWith</span>(<span class="string">&#x27;+&#x27;</span>) || str.<span class="title function_">startsWith</span>(<span class="string">&#x27;=&#x27;</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&#x27;&quot;</span> + str;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3.å‘¼å« Gemini AI API</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">callGeminiVision</span>(<span class="params">file</span>) &#123;</span><br><span class="line">  <span class="comment">// Base64 encode</span></span><br><span class="line">  <span class="comment">// å‘¼å« Gemini Vision API</span></span><br><span class="line">  <span class="comment">// åš´æ ¼è¦æ±‚ JSON å›å‚³</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è¨­å®šè‡ªå‹•è§¸ç™¼æ¢ä»¶"><a href="#è¨­å®šè‡ªå‹•è§¸ç™¼æ¢ä»¶" class="headerlink" title="è¨­å®šè‡ªå‹•è§¸ç™¼æ¢ä»¶"></a>è¨­å®šè‡ªå‹•è§¸ç™¼æ¢ä»¶</h2><p>æœ€å¾Œï¼Œåœ¨ Apps Script ä¸­è¨­å®š æ™‚é–“é©…å‹• Triggerï¼š</p><p>æ¯å°æ™‚åŸ·è¡Œä¸€æ¬¡ã€æˆ–æ¯æ—¥æ‰¹æ¬¡è™•ç†</p><p>é€™æ¨£åªè¦æœ‰æ–°åç‰‡ä¸Šå‚³ï¼Œå°±æœƒè‡ªå‹•å»ºæª”ï¼Œä¸éœ€è¦äººå·¥ä»‹å…¥ã€‚</p><h2 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h2><p>é€éé€™å¥—ç³»çµ±ï¼Œæˆ‘æˆåŠŸå°‡åç‰‡å»ºæª”æµç¨‹è‡ªå‹•åŒ–ï¼Œå¤§å¹…æ¸›å°‘åŒäº‹çš„å·¥ä½œé‡èˆ‡éŒ¯èª¤ç‡ã€‚<br>å¦‚æœä½ ä¹Ÿæœ‰é¡ä¼¼éœ€æ±‚ï¼Œæ­¡è¿åƒè€ƒé€™ç¯‡æ–‡ç« ï¼Œä¸¦æ ¹æ“šè‡ªå·±çš„æƒ…æ³é€²è¡Œèª¿æ•´èˆ‡æ“´å±•ï¼</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨å¯¦éš›å·¥ä½œä¸­ï¼Œæˆ‘ç™¼ç¾åŒäº‹åœ¨æ‹¿åˆ°åç‰‡å¾Œï¼Œä»ç„¶éœ€è¦ç¶“éä¸€é€£ä¸²äººå·¥æµç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰‹æ©Ÿæ‹ç…§ã€æˆ–æ˜¯æƒæåç‰‡&lt;/li&gt;
&lt;li&gt;å‚³åˆ°é›»è…¦&lt;/li&gt;
&lt;li&gt;æ‰‹å‹•è¼¸å…¥å…¬å¸ã€å§“åã€é›»è©±&lt;/li&gt;
&lt;li&gt;é‚„å¾ˆå®¹æ˜“æ¼è³‡æ–™æˆ–è¼¸éŒ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤æˆ‘é–‹å§‹æ€è€ƒï¼š&lt;br&gt;èƒ½ä¸èƒ½åœ¨ä¸æ¶è¨­ä¼ºæœå™¨ã€ä¸å°å…¥è¤‡é›œç³»çµ±çš„æƒ…æ³ä¸‹ï¼ŒæŠŠé€™ä»¶äº‹è‡ªå‹•åŒ–ï¼Ÿ&lt;/p&gt;
&lt;p&gt;é€™ç¯‡æ–‡ç« è¨˜éŒ„æˆ‘å¯¦ä½œçš„ä¸€å¥— åç‰‡è‡ªå‹•å»ºæª”ç³»çµ±ï¼Œæ ¸å¿ƒå®Œå…¨å»ºç«‹åœ¨ Google ç”Ÿæ…‹ç³»ä¸Šã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç³»çµ±ç›®æ¨™èˆ‡æ•´é«”æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#ç³»çµ±ç›®æ¨™èˆ‡æ•´é«”æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;ç³»çµ±ç›®æ¨™èˆ‡æ•´é«”æ¦‚å¿µ&quot;&gt;&lt;/a&gt;ç³»çµ±ç›®æ¨™èˆ‡æ•´é«”æ¦‚å¿µ&lt;/h2&gt;&lt;p&gt;æˆ‘çš„ç›®æ¨™å¾ˆå–®ç´”ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åªè¦ç”¨æ‰‹æ©Ÿæ‹ç…§ä¸Šå‚³åç‰‡ï¼Œå°±èƒ½è‡ªå‹•è§£æå…§å®¹ï¼Œä¸¦å¯«å…¥ Google Spreadsheetã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ•´é«”æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;1.æ‰‹æ©Ÿç›´æ¥æ‹ç…§ï¼Œä¸Šå‚³åˆ°æŒ‡å®šçš„ Google Drive è³‡æ–™å¤¾&lt;/p&gt;
&lt;p&gt;2.ç”± Google Apps Script å®šæœŸæƒææ–°åœ–ç‰‡&lt;/p&gt;
&lt;p&gt;3.ä½¿ç”¨ Gemini AI API è¾¨è­˜åç‰‡å…§å®¹ï¼ˆéå–®ç´” OCRï¼‰ï¼Œå°‡çµæ§‹åŒ–è³‡æ–™å¯«å…¥ Google Spreadsheet&lt;/p&gt;
&lt;p&gt;4.å°‡è™•ç†å®Œæˆçš„åç‰‡ç§»å‹•åˆ°å°å­˜è³‡æ–™å¤¾ï¼Œé¿å…é‡è¤‡è™•ç†&lt;/p&gt;
&lt;h3 id=&quot;ä½¿ç”¨åˆ°çš„å·¥å…·èˆ‡æŠ€è¡“&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨åˆ°çš„å·¥å…·èˆ‡æŠ€è¡“&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨åˆ°çš„å·¥å…·èˆ‡æŠ€è¡“&quot;&gt;&lt;/a&gt;ä½¿ç”¨åˆ°çš„å·¥å…·èˆ‡æŠ€è¡“&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Google Driveï¼šåç‰‡åœ–ç‰‡çš„å„²å­˜èˆ‡ç‹€æ…‹ç®¡ç†&lt;/li&gt;
&lt;li&gt;Google Sheetsï¼šçµæ§‹åŒ–è³‡æ–™è¡¨ï¼ˆè¼•é‡è³‡æ–™åº«ï¼‰&lt;/li&gt;
&lt;li&gt;Google Apps Scriptï¼šè‡ªå‹•åŒ–ä¸­æ¨&lt;/li&gt;
&lt;li&gt;Google Gemini Vision APIï¼šå½±åƒ + èªæ„ç†è§£&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;é€™å€‹çµ„åˆçš„å„ªé»æ˜¯ï¼š&lt;br&gt;ä¸éœ€è¦é¡å¤–ä¸»æ©Ÿ&lt;br&gt;æˆæœ¬ä½&lt;br&gt;åœ˜éšŠæˆå“¡å¹¾ä¹éƒ½èƒ½ä¸Šæ‰‹&lt;br&gt;ç¶­è­·æˆæœ¬éå¸¸å°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;è³‡æ–™æ¬„ä½è¨­è¨ˆ&quot;&gt;&lt;a href=&quot;#è³‡æ–™æ¬„ä½è¨­è¨ˆ&quot; class=&quot;headerlink&quot; title=&quot;è³‡æ–™æ¬„ä½è¨­è¨ˆ&quot;&gt;&lt;/a&gt;è³‡æ–™æ¬„ä½è¨­è¨ˆ&lt;/h2&gt;&lt;p&gt;å¯¦éš›ä½¿ç”¨æ™‚ï¼Œåç‰‡è³‡è¨Šå¾€å¾€æ¯”æƒ³åƒä¸­è¤‡é›œï¼ˆå¤šæ”¯é›»è©±ã€åˆ†æ©Ÿã€åœ–ç¤ºæ¨™è¨»ï¼‰ï¼Œ&lt;br&gt;å› æ­¤æˆ‘æœ€å¾Œæ¡ç”¨ä»¥ä¸‹æ¬„ä½çµæ§‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‹€æ…‹&lt;/li&gt;
&lt;li&gt;å…¬å¸&lt;/li&gt;
&lt;li&gt;å§“å&lt;/li&gt;
&lt;li&gt;è·ç¨±  &lt;/li&gt;
&lt;li&gt;Email&lt;/li&gt;
&lt;li&gt;Mobileï¼ˆæ‰‹æ©Ÿï¼‰&lt;/li&gt;
&lt;li&gt;Office Phoneï¼ˆå…¬å¸é›»è©± / åˆ†æ©Ÿï¼‰&lt;/li&gt;
&lt;li&gt;åœ°å€&lt;/li&gt;
&lt;li&gt;å»ºæª”æ—¥æœŸ&lt;/li&gt;
&lt;li&gt;åŸå§‹æª”æ¡ˆç¶²å€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€™äº›æ¬„ä½æœƒåœ¨ Google Spreadsheet çš„ç¬¬ä¸€åˆ—å…ˆè¨­å®šå¥½ï¼Œå¾ŒçºŒ Apps Script æœƒä¾ç…§å›ºå®šé †åºå¯«å…¥ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬ä¸€æ­¥ï¼šGoogle-Drive-ç’°å¢ƒæº–å‚™&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€æ­¥ï¼šGoogle-Drive-ç’°å¢ƒæº–å‚™&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€æ­¥ï¼šGoogle Drive ç’°å¢ƒæº–å‚™&quot;&gt;&lt;/a&gt;ç¬¬ä¸€æ­¥ï¼šGoogle Drive ç’°å¢ƒæº–å‚™&lt;/h2&gt;&lt;p&gt;å…ˆåœ¨ Google Drive å»ºç«‹ä¸€å€‹ä¸»è³‡æ–™å¤¾ï¼Œä¾‹å¦‚ï¼šåç‰‡ç®¡ç†ç³»çµ±&lt;/p&gt;
&lt;p&gt;ä¸¦åœ¨è£¡é¢å»ºç«‹å…©å€‹å­è³‡æ–™å¤¾ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Inboxï¼ˆå¾…è™•ç†ï¼‰ï¼š&lt;br&gt;æ‰‹æ©Ÿæ‹ç…§å¾Œï¼Œåç‰‡åœ–ç‰‡ä¸€å¾‹ä¸Šå‚³åˆ°é€™è£¡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Archivedï¼ˆå·²å»ºæª”ï¼‰ï¼š&lt;br&gt;åç‰‡è™•ç†å®Œæˆå¾Œæœƒè‡ªå‹•ç§»å‹•åˆ°é€™å€‹è³‡æ–™å¤¾&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;é‡è¦&quot;&gt;&lt;a href=&quot;#é‡è¦&quot; class=&quot;headerlink&quot; title=&quot;é‡è¦&quot;&gt;&lt;/a&gt;é‡è¦&lt;/h3&gt;&lt;p&gt;è«‹è¨˜ä¸‹é€™å…©å€‹è³‡æ–™å¤¾ç¶²å€åˆ—ä¸­ folders/ å¾Œé¢çš„ IDï¼Œå¾ŒçºŒ Apps Script éœ€è¦ä½¿ç”¨ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="è‡ªå‹•åŒ–" scheme="https://eva813.github.io/categories/%E8%87%AA%E5%8B%95%E5%8C%96/"/>
    
    
    <category term="è‡ªå‹•åŒ–" scheme="https://eva813.github.io/tags/%E8%87%AA%E5%8B%95%E5%8C%96/"/>
    
    <category term="Google Apps Script" scheme="https://eva813.github.io/tags/Google-Apps-Script/"/>
    
    <category term="Gemini AI" scheme="https://eva813.github.io/tags/Gemini-AI/"/>
    
  </entry>
  
  <entry>
    <title>åˆ·é¡Œç·´ç¿’ - Merge-Sorted-Array</title>
    <link href="https://eva813.github.io/2025/10/04/Merge-Sorted-Array/"/>
    <id>https://eva813.github.io/2025/10/04/Merge-Sorted-Array/</id>
    <published>2025-10-04T13:32:53.000Z</published>
    <updated>2025-12-24T05:13:27.705Z</updated>
    
    <content type="html"><![CDATA[<p>You are given two integer arrays <code>nums1</code> and <code>nums2</code>, sorted in <strong>non-decreasing order</strong>, and two integers <code>m</code> and <code>n</code>, representing the number of elements in <code>nums1</code> and <code>nums2</code> respectively.</p><p><strong>Merge</strong> <code>nums1</code> and <code>nums2</code> into a single array sorted in <strong>non-decreasing order</strong>.</p><p>The final sorted array should not be returned by the function, but instead be <em>stored inside the array</em> <code>nums1</code>. To accommodate this, <code>nums1</code> has a length of <code>m + n</code>, where the first <code>m</code> elements denote the elements that should be merged, and the last <code>n</code> elements are set to <code>0</code> and should be ignored. <code>nums2</code> has a length of <code>n</code>.</p><p>çµ¦å®šå…©å€‹æ•´æ•¸é™£åˆ— <code>nums1</code> å’Œ <code>nums2</code>ï¼Œéƒ½æŒ‰ç…§<strong>ééæ¸›é †åº</strong>æ’åˆ—ï¼Œä»¥åŠå…©å€‹æ•´æ•¸ <code>m</code> å’Œ <code>n</code>ï¼Œåˆ†åˆ¥ä»£è¡¨ <code>nums1</code> å’Œ <code>nums2</code> ä¸­å…ƒç´ çš„å€‹æ•¸ã€‚<br>è«‹å°‡ <code>nums1</code> å’Œ <code>nums2</code> <strong>åˆä½µ</strong>ç‚ºä¸€å€‹æŒ‰<strong>ééæ¸›é †åº</strong>æ’åˆ—çš„é™£åˆ—ã€‚<br>æœ€çµ‚çš„æ’åºé™£åˆ—<strong>ä¸æ‡‰è©²ç”±å‡½æ•¸è¿”å›</strong>ï¼Œè€Œæ˜¯è¦<strong>å„²å­˜åœ¨é™£åˆ— <code>nums1</code> å…§éƒ¨</strong>ã€‚ç‚ºäº†å¯¦ç¾é€™ä¸€é»ï¼Œ<code>nums1</code> çš„é•·åº¦ç‚º <code>m + n</code>ï¼Œå…¶ä¸­å‰ <code>m</code> å€‹å…ƒç´ è¡¨ç¤ºæ‡‰è©²åˆä½µçš„å…ƒç´ ï¼Œå¾Œ <code>n</code> å€‹å…ƒç´ è¨­ç‚º <code>0</code> ä¸¦ä¸”æ‡‰è©²è¢«å¿½ç•¥ã€‚<code>nums2</code> çš„é•·åº¦ç‚º <code>n</code>ã€‚</p><p>ç›®æ¨™ï¼šå°‡ nums2 åˆä½µæ–¼ nums1</p><ul><li>å¿…é ˆåœ¨ <code>nums1</code> å…§éƒ¨å®Œæˆåˆä½µï¼Œä¸èƒ½ä½¿ç”¨é¡å¤–çš„é™£åˆ—ç©ºé–“</li><li><strong>ä¸è¿”å›å€¼</strong>ï¼šå‡½æ•¸ä¸éœ€è¦ returnï¼Œç›´æ¥ä¿®æ”¹ <code>nums1</code></li></ul><span id="more"></span><h2 id="è§£é¡Œæ€è·¯"><a href="#è§£é¡Œæ€è·¯" class="headerlink" title="è§£é¡Œæ€è·¯"></a>è§£é¡Œæ€è·¯</h2><p>ç›´è¦ºåšæ³•</p><p>ä½†é€™æ¨£åšæœƒå‰µé€ æ–°é™£åˆ—ï¼Œä¹Ÿå¿½ç•¥åŸæœ¬å·²ç¶“ sort éå¾—ç‰¹æ€§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> merge = <span class="keyword">function</span>(<span class="params">nums1, m, nums2, n</span>) &#123;</span><br><span class="line">    <span class="comment">// 1. å–å‡º nums1 çš„æœ‰æ•ˆå…ƒç´ </span></span><br><span class="line">    <span class="keyword">let</span> combined = nums1.<span class="title function_">slice</span>(<span class="number">0</span>, m).<span class="title function_">concat</span>(nums2);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. æ’åº</span></span><br><span class="line">    combined.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. æ”¾å› nums1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; combined.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        nums1[i] = combined[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å„ªåŒ–åšæ³•"><a href="#å„ªåŒ–åšæ³•" class="headerlink" title="å„ªåŒ–åšæ³•"></a>å„ªåŒ–åšæ³•</h3><p>æ—¢ç„¶é¡Œç›®å·²æä¾› m å’Œ nï¼Œæˆ‘å€‘å¯ä»¥åˆ©ç”¨å®ƒå€‘ä½œç‚ºæŒ‡é‡ä¾†è¿½è¹¤æœ‰æ•ˆå…ƒç´ ä½ç½®ã€‚<br>æ ¸å¿ƒæ¦‚å¿µæ˜¯ï¼š<br>nums1 çš„å°¾éƒ¨æœ‰è¶³å¤ ç©ºé–“æ”¾å…¥åˆä½µçµæœã€‚<br>å¾é™£åˆ—å°¾ç«¯é–‹å§‹æ¯”è¼ƒï¼Œæ¯æ¬¡æŠŠè¼ƒå¤§çš„æ•¸å­—æ”¾åˆ°æœ€å¾Œã€‚<br>æŒ‡é‡é€æ­¥å‘å‰ç§»å‹•ï¼Œç›´åˆ°å…¶ä¸­ä¸€æ–¹é™£åˆ—å…ƒç´ ç”¨å®Œã€‚</p><h3 id="ç¯„ä¾‹ç¨‹å¼ç¢¼"><a href="#ç¯„ä¾‹ç¨‹å¼ç¢¼" class="headerlink" title="ç¯„ä¾‹ç¨‹å¼ç¢¼"></a>ç¯„ä¾‹ç¨‹å¼ç¢¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums1</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">m</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums2</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">n</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">void</span>&#125; Do not return anything, modify nums1 in-place instead.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> merge = <span class="keyword">function</span>(<span class="params">nums1, m, nums2, n</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(n === <span class="number">0</span>  &amp;&amp; nums1.<span class="property">length</span> === m) <span class="keyword">return</span> nums1</span><br><span class="line">    <span class="comment">// nums è¦è¢«æ›¿æ›ï¼Œä¸¦ä¸”è¦èˆ‡ nums2 æ¯”è¼ƒï¼Œè®“ 2 æ”¾å…¥è©²ä½ç½® </span></span><br><span class="line">    <span class="comment">// æˆ‘å¯ä»¥æ ¹æ“š m , n ä¾†å¾—åˆ°æœ‰æ•ˆçš„ä½ç½®ï¼ˆindexï¼‰</span></span><br><span class="line">    <span class="keyword">let</span> p1 = m - <span class="number">1</span> </span><br><span class="line">    <span class="keyword">let</span> p2 = n - <span class="number">1</span> </span><br><span class="line">    <span class="keyword">let</span> finalP= m + n -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">// å¾å¾Œå¾€å‰ï¼Œé¸å¤§çš„</span></span><br><span class="line">     <span class="keyword">while</span>( p1 &gt;= <span class="number">0</span> &amp;&amp; p2 &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>( nums1[p1] &gt; nums2[p2])&#123;</span><br><span class="line">            <span class="comment">// æ›¿æ›æœ€å¾Œä¸€</span></span><br><span class="line">            nums1[finalP]  = nums1[p1]</span><br><span class="line">            p1--</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            nums1[finalP]  = nums2[p2]</span><br><span class="line">            p2--</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å› ç‚ºä»–æ˜¯ä»–å€‘çš„æœ€å¾Œï¼Œæ‰€ä»¥å·²ç¶“å°‡æœ€å¤§å€¼æ”¾åˆ°é™£åˆ—æœ€å¾Œ</span></span><br><span class="line">        finalP--</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">while</span>(p2 &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">        nums1[finalP] = nums2[p2]</span><br><span class="line">        p2--</span><br><span class="line">        finalP--</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><h3 id="ç‚ºä»€éº¼ç”¨-while-p1-gt-0-amp-amp-p2-gt-0-ï¼Ÿ"><a href="#ç‚ºä»€éº¼ç”¨-while-p1-gt-0-amp-amp-p2-gt-0-ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼ç”¨ while (p1 &gt;= 0 &amp;&amp; p2 &gt;= 0)ï¼Ÿ"></a>ç‚ºä»€éº¼ç”¨ while (p1 &gt;= 0 &amp;&amp; p2 &gt;= 0)ï¼Ÿ</h3><p>å› ç‚ºåªè¦ä»»ä¸€é™£åˆ—å·²è¢«å–å®Œï¼Œå°±ä¸å†éœ€è¦æ¯”è¼ƒï¼Œé¿å…è¶Šç•Œã€‚</p><h3 id="ç‚ºä»€éº¼å¾å¾Œå¾€å‰ï¼Ÿ"><a href="#ç‚ºä»€éº¼å¾å¾Œå¾€å‰ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼å¾å¾Œå¾€å‰ï¼Ÿ"></a>ç‚ºä»€éº¼å¾å¾Œå¾€å‰ï¼Ÿ</h3><p>å› ç‚ºé€™æ¨£å¯ä»¥é¿å…è¦†è“‹åˆ°å°šæœªè™•ç†çš„å…ƒç´ ï¼Œç¢ºä¿æ¯æ¬¡éƒ½å°‡æœ€å¤§çš„å…ƒç´ æ”¾åˆ°æ­£ç¢ºçš„ä½ç½®ã€‚</p><h3 id="ç‚ºä»€éº¼åªéœ€è¦è™•ç†-nums2-å‰©é¤˜ï¼Ÿ"><a href="#ç‚ºä»€éº¼åªéœ€è¦è™•ç†-nums2-å‰©é¤˜ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼åªéœ€è¦è™•ç† nums2 å‰©é¤˜ï¼Ÿ"></a>ç‚ºä»€éº¼åªéœ€è¦è™•ç† nums2 å‰©é¤˜ï¼Ÿ</h3><ul><li><strong>nums2 æœ‰å‰©é¤˜</strong>ï¼šè¡¨ç¤ºé€™äº›å…ƒç´ æ¯” nums1 ä¸­å·²è™•ç†çš„å…ƒç´ éƒ½å°ï¼Œéœ€è¦è¤‡è£½åˆ° nums1 å‰æ–¹å°æ‡‰ä½ç½®</li><li><strong>nums1 æœ‰å‰©é¤˜</strong>ï¼šé€™äº›å…ƒç´ å·²ç¶“åœ¨ nums1 çš„æ­£ç¢ºä½ç½®ä¸Šï¼Œç„¡éœ€ç§»å‹•</li></ul><h3 id="æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦"><a href="#æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦" class="headerlink" title="æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦"></a>æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦</h3><p>æ™‚é–“ï¼šO(m + n)<br>ç©ºé–“ï¼šO(1)ï¼ˆåŸåœ°ä¿®æ”¹ï¼‰</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;You are given two integer arrays &lt;code&gt;nums1&lt;/code&gt; and &lt;code&gt;nums2&lt;/code&gt;, sorted in &lt;strong&gt;non-decreasing order&lt;/strong&gt;, and two integers &lt;code&gt;m&lt;/code&gt; and &lt;code&gt;n&lt;/code&gt;, representing the number of elements in &lt;code&gt;nums1&lt;/code&gt; and &lt;code&gt;nums2&lt;/code&gt; respectively.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Merge&lt;/strong&gt; &lt;code&gt;nums1&lt;/code&gt; and &lt;code&gt;nums2&lt;/code&gt; into a single array sorted in &lt;strong&gt;non-decreasing order&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The final sorted array should not be returned by the function, but instead be &lt;em&gt;stored inside the array&lt;/em&gt; &lt;code&gt;nums1&lt;/code&gt;. To accommodate this, &lt;code&gt;nums1&lt;/code&gt; has a length of &lt;code&gt;m + n&lt;/code&gt;, where the first &lt;code&gt;m&lt;/code&gt; elements denote the elements that should be merged, and the last &lt;code&gt;n&lt;/code&gt; elements are set to &lt;code&gt;0&lt;/code&gt; and should be ignored. &lt;code&gt;nums2&lt;/code&gt; has a length of &lt;code&gt;n&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;çµ¦å®šå…©å€‹æ•´æ•¸é™£åˆ— &lt;code&gt;nums1&lt;/code&gt; å’Œ &lt;code&gt;nums2&lt;/code&gt;ï¼Œéƒ½æŒ‰ç…§&lt;strong&gt;ééæ¸›é †åº&lt;/strong&gt;æ’åˆ—ï¼Œä»¥åŠå…©å€‹æ•´æ•¸ &lt;code&gt;m&lt;/code&gt; å’Œ &lt;code&gt;n&lt;/code&gt;ï¼Œåˆ†åˆ¥ä»£è¡¨ &lt;code&gt;nums1&lt;/code&gt; å’Œ &lt;code&gt;nums2&lt;/code&gt; ä¸­å…ƒç´ çš„å€‹æ•¸ã€‚&lt;br&gt;è«‹å°‡ &lt;code&gt;nums1&lt;/code&gt; å’Œ &lt;code&gt;nums2&lt;/code&gt; &lt;strong&gt;åˆä½µ&lt;/strong&gt;ç‚ºä¸€å€‹æŒ‰&lt;strong&gt;ééæ¸›é †åº&lt;/strong&gt;æ’åˆ—çš„é™£åˆ—ã€‚&lt;br&gt;æœ€çµ‚çš„æ’åºé™£åˆ—&lt;strong&gt;ä¸æ‡‰è©²ç”±å‡½æ•¸è¿”å›&lt;/strong&gt;ï¼Œè€Œæ˜¯è¦&lt;strong&gt;å„²å­˜åœ¨é™£åˆ— &lt;code&gt;nums1&lt;/code&gt; å…§éƒ¨&lt;/strong&gt;ã€‚ç‚ºäº†å¯¦ç¾é€™ä¸€é»ï¼Œ&lt;code&gt;nums1&lt;/code&gt; çš„é•·åº¦ç‚º &lt;code&gt;m + n&lt;/code&gt;ï¼Œå…¶ä¸­å‰ &lt;code&gt;m&lt;/code&gt; å€‹å…ƒç´ è¡¨ç¤ºæ‡‰è©²åˆä½µçš„å…ƒç´ ï¼Œå¾Œ &lt;code&gt;n&lt;/code&gt; å€‹å…ƒç´ è¨­ç‚º &lt;code&gt;0&lt;/code&gt; ä¸¦ä¸”æ‡‰è©²è¢«å¿½ç•¥ã€‚&lt;code&gt;nums2&lt;/code&gt; çš„é•·åº¦ç‚º &lt;code&gt;n&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç›®æ¨™ï¼šå°‡ nums2 åˆä½µæ–¼ nums1&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¿…é ˆåœ¨ &lt;code&gt;nums1&lt;/code&gt; å…§éƒ¨å®Œæˆåˆä½µï¼Œä¸èƒ½ä½¿ç”¨é¡å¤–çš„é™£åˆ—ç©ºé–“&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¿”å›å€¼&lt;/strong&gt;ï¼šå‡½æ•¸ä¸éœ€è¦ returnï¼Œç›´æ¥ä¿®æ”¹ &lt;code&gt;nums1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="LeetCode" scheme="https://eva813.github.io/categories/LeetCode/"/>
    
    
    <category term="LeetCode" scheme="https://eva813.github.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>éƒ¨ç½²è‡³ Vercel é‡åˆ°ã€ŒUnexpected token &#39;&lt;&#39;ã€éŒ¯èª¤ï¼šåŸå› èˆ‡è§£æ³•</title>
    <link href="https://eva813.github.io/2025/10/04/vercel-deploy/"/>
    <id>https://eva813.github.io/2025/10/04/vercel-deploy/</id>
    <published>2025-10-04T13:21:52.000Z</published>
    <updated>2025-10-04T12:25:15.026Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨éƒ¨ç½²å°ˆæ¡ˆåˆ° Vercel æ™‚ï¼Œé‡åˆ°äº†ä¸€å€‹è®“æˆ‘å›°æ“¾çš„éŒ¯èª¤è¨Šæ¯ï¼šã€ŒUnexpected token â€˜&lt;â€™ã€ã€‚é€™å€‹éŒ¯èª¤é€šå¸¸è¡¨ç¤ºæˆ‘å€‘é æœŸæ”¶åˆ°çš„æ˜¯ JSON æ ¼å¼çš„è³‡æ–™ï¼Œä½†å¯¦éš›ä¸Šå»æ”¶åˆ°äº† HTML é é¢ã€‚æœ¬æ–‡å°‡åˆ†äº«æˆ‘é‡åˆ°é€™å€‹å•é¡Œçš„èƒŒæ™¯ã€åŸå› ï¼Œä»¥åŠå…©ç¨®è§£æ±ºæ–¹æ¡ˆï¼Œå¹«åŠ©å¤§å®¶åœ¨ä½¿ç”¨ Vercel éƒ¨ç½²æ™‚èƒ½å¤ é †åˆ©å–å¾— API è³‡æ–™ã€‚</p><h1 id="éƒ¨ç½²è‡³-Vercel-é‡åˆ°ã€ŒUnexpected-token-â€˜-lt-â€™ã€éŒ¯èª¤ï¼šåŸå› èˆ‡è§£æ³•"><a href="#éƒ¨ç½²è‡³-Vercel-é‡åˆ°ã€ŒUnexpected-token-â€˜-lt-â€™ã€éŒ¯èª¤ï¼šåŸå› èˆ‡è§£æ³•" class="headerlink" title="éƒ¨ç½²è‡³ Vercel é‡åˆ°ã€ŒUnexpected token â€˜&lt;â€™ã€éŒ¯èª¤ï¼šåŸå› èˆ‡è§£æ³•"></a>éƒ¨ç½²è‡³ Vercel é‡åˆ°ã€ŒUnexpected token â€˜&lt;â€™ã€éŒ¯èª¤ï¼šåŸå› èˆ‡è§£æ³•</h1><p>åœ¨å°‡å°ˆæ¡ˆéƒ¨ç½²åˆ° <strong>Vercel</strong> æ™‚ï¼Œç•¶æˆ‘é€éç€è¦½å™¨æˆ– extension background fetch å‘¼å« APIï¼Œå»å‡ºç¾ä»¥ä¸‹éŒ¯èª¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å–å¾—è³‡æ–™å¤¾å¤±æ•—: Unexpected token &#x27;&lt;&#x27;, &quot;&lt;!doctype &quot;... is not valid JSON</span><br></pre></td></tr></table></figure><p>é‚£ä»£è¡¨è«‹æ±‚ä¸¦æ²’æœ‰çœŸæ­£æ‹¿åˆ° JSONï¼Œè€Œæ˜¯å¾—åˆ°äº† HTML é é¢ã€‚æœ¬æ–‡å°‡èªªæ˜é€™å€‹å•é¡Œçš„åŸå› ã€èƒŒå¾Œçš„èƒŒæ™¯ï¼Œä»¥åŠå…©ç¨®å®Œæ•´çš„è§£æ³•ã€‚</p><h2 id="å•é¡Œèªªæ˜"><a href="#å•é¡Œèªªæ˜" class="headerlink" title="å•é¡Œèªªæ˜"></a>å•é¡Œèªªæ˜</h2><p>é€™æ¬¡åœ¨ <strong>Arc ç€è¦½å™¨</strong> çš„é–‹ç™¼éç¨‹ä¸­ï¼Œæˆ‘å˜—è©¦å¾éƒ¨ç½²æ–¼ Vercel çš„ API ç«¯é»å–å¾—è³‡æ–™ï¼Œä½† Console é¡¯ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index.iife_dev.js:24922 å–å¾—è³‡æ–™å¤¾å¤±æ•—: Unexpected token &#x27;&lt;&#x27;, &quot;&lt;!doctype &quot;... is not valid JSON</span><br></pre></td></tr></table></figure><p>é€²ä¸€æ­¥åˆ° <strong>Arc çš„ Service-Worker DevTools</strong>ï¼ˆ<code>arc://inspect/#service-workers</code>ï¼‰ä¸­ï¼Œæ‰“é–‹ background worker çš„ Consoleï¼Œå¯ä»¥çœ‹åˆ°è«‹æ±‚çš„å›æ‡‰å¯¦éš›ä¸Šæ˜¯ä¸€ä»½ HTML ç™»å…¥é é¢ï¼Œè€Œé JSON è³‡æ–™ã€‚</p><hr><h2 id="èƒŒæ™¯è£œå……ï¼šVercel-çš„-Deployment-Protection"><a href="#èƒŒæ™¯è£œå……ï¼šVercel-çš„-Deployment-Protection" class="headerlink" title="èƒŒæ™¯è£œå……ï¼šVercel çš„ Deployment Protection"></a>èƒŒæ™¯è£œå……ï¼šVercel çš„ Deployment Protection</h2><p>é€™å€‹éŒ¯èª¤ä¸¦éä¾†è‡ª <strong>CORS</strong>ï¼Œè€Œæ˜¯å› ç‚º Vercel çš„ <strong>Deployment Protection</strong> æ©Ÿåˆ¶ã€‚<br>ç•¶å°ˆæ¡ˆé–‹å•Ÿã€ŒVercel Authenticationã€å¾Œï¼Œæ‰€æœ‰ <strong>Preview Deployments</strong> éƒ½éœ€è¦ç™»å…¥æ‰èƒ½è¨ªå•ã€‚</p><p>å› æ­¤ï¼Œextension background åœ¨ç™¼å‡ºè«‹æ±‚æ™‚ï¼Œè¢«å°å‘è‡³ç™»å…¥é é¢ï¼ˆHTMLï¼‰ï¼Œå°è‡´è§£æ JSON æ™‚å‡ºç¾ï¼š</p><blockquote><p><code>Unexpected token &#39;&lt;&#39;</code></p></blockquote><span id="more"></span><hr><h2 id="è§£æ±ºæ–¹æ¡ˆ"><a href="#è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="è§£æ±ºæ–¹æ¡ˆ"></a>è§£æ±ºæ–¹æ¡ˆ</h2><p>Vercel æä¾›äº†å…©ç¨®æ–¹å¼å¯ä»¥è™•ç†é€™å€‹æƒ…æ³ï¼š</p><h3 id="ä¸€ã€ï¼ˆå»ºè­°ï¼‰é—œé–‰-Preview-éƒ¨ç½²çš„-Vercel-Authentication"><a href="#ä¸€ã€ï¼ˆå»ºè­°ï¼‰é—œé–‰-Preview-éƒ¨ç½²çš„-Vercel-Authentication" class="headerlink" title="ä¸€ã€ï¼ˆå»ºè­°ï¼‰é—œé–‰ Preview éƒ¨ç½²çš„ Vercel Authentication"></a>ä¸€ã€ï¼ˆå»ºè­°ï¼‰é—œé–‰ Preview éƒ¨ç½²çš„ Vercel Authentication</h3><p>é€™æ˜¯æœ€ç°¡å–®ã€ç›´æ¥çš„æ–¹å¼ï¼Œé©åˆé–‹ç™¼éšæ®µæ¸¬è©¦ä½¿ç”¨ã€‚</p><ol><li>é€²å…¥ä½ çš„ <strong>Vercel å°ˆæ¡ˆ Dashboard</strong>ã€‚</li><li>æ‰“é–‹ <strong>Settings â†’ Deployment Protection</strong>ã€‚</li><li>åœ¨ <strong>Vercel Authentication</strong> å€å¡Šä¸­ï¼Œå°‡ <strong>Preview Deployments</strong> çš„é–‹é—œé—œé–‰ã€‚</li><li>ç­‰å¾… Vercel è‡ªå‹•é‡æ–°éƒ¨ç½²å®Œæˆã€‚</li></ol><p>å®Œæˆå¾Œï¼Œä½ çš„ Preview é€£çµå°±ä¸å†éœ€è¦ç™»å…¥ã€‚<br>æ­¤æ™‚å¾ extension background ç™¼å‡ºçš„ fetch è«‹æ±‚ï¼Œæœƒç›´æ¥æ‹¿åˆ°æ­£ç¢ºçš„ <code>200 + JSON</code> å›æ‡‰ã€‚</p><blockquote><p>ğŸ”— åƒè€ƒæ–‡ä»¶ï¼š<a href="https://vercel.com/docs/deployment-protection">Vercel Authentication ä»‹ç´¹ â€“ Vercel</a></p></blockquote><hr><h3 id="äºŒã€ç¶­æŒä¿è­·ä½†ä½¿ç”¨ã€ŒProtection-Bypass-for-Automationã€"><a href="#äºŒã€ç¶­æŒä¿è­·ä½†ä½¿ç”¨ã€ŒProtection-Bypass-for-Automationã€" class="headerlink" title="äºŒã€ç¶­æŒä¿è­·ä½†ä½¿ç”¨ã€ŒProtection Bypass for Automationã€"></a>äºŒã€ç¶­æŒä¿è­·ä½†ä½¿ç”¨ã€ŒProtection Bypass for Automationã€</h3><p>å¦‚æœä½ å¸Œæœ›ä¿ç•™é è¦½ä¿è­·æ©Ÿåˆ¶ï¼ŒåŒæ™‚åˆè®“è‡ªå‹•åŒ–æµç¨‹ï¼ˆä¾‹å¦‚ extension backgroundï¼‰èƒ½å¤ è¨ªå• APIï¼Œå¯ä»¥ä½¿ç”¨ <strong>Protection Bypass for Automation</strong>ã€‚</p><p>è¨­å®šæ­¥é©Ÿå¦‚ä¸‹ï¼š</p><ol><li><p>å‰å¾€ <strong>Deployment Protection</strong> é é¢ï¼Œå•Ÿç”¨ <strong>Protection Bypass for Automation</strong>ã€‚</p></li><li><p>ç³»çµ±æœƒç”¢ç”Ÿä¸€çµ„å¯†é‘°ï¼š<code>VERCEL_AUTOMATION_BYPASS_SECRET</code>ã€‚</p></li><li><p>åœ¨ç¨‹å¼ä¸­å‘¼å« API æ™‚ï¼ŒåŠ ä¸Šä»¥ä¸‹ Headerï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="variable constant_">API_BASE</span> + <span class="string">&#x27;/api/v1/folders&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;x-vercel-protection-bypass&#x27;</span>: <span class="string">&#x27;&lt;YOUR_BYPASS_SECRET&gt;&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>å†æ¬¡åŸ·è¡Œ fetchï¼Œå³å¯æ‹¿åˆ°æ­£ç¢ºçš„ JSON å›æ‡‰ï¼Œä¸éœ€é—œæ‰ä¿è­·ã€‚</p></li></ol><blockquote><p>ğŸ”— åƒè€ƒæ–‡ä»¶ï¼š<a href="https://vercel.com/docs/deployment-protection/methods-to-bypass-deployment-protection">Methods to bypass Deployment Protection â€“ Vercel</a></p></blockquote><hr><h2 id="é©—è­‰æµç¨‹"><a href="#é©—è­‰æµç¨‹" class="headerlink" title="é©—è­‰æµç¨‹"></a>é©—è­‰æµç¨‹</h2><p>è¨­å®šå®Œæˆå¾Œï¼Œå¯ä¾ä»¥ä¸‹æ­¥é©Ÿé©—è­‰æ˜¯å¦æˆåŠŸï¼š</p><ol><li><p>åœ¨ <strong>Arc çš„ Service-Worker DevTools â†’ Network</strong> é¢æ¿ä¸­è§¸ç™¼ä¸€æ¬¡ fetchã€‚</p></li><li><p>ç¢ºèª <strong>Status Code</strong> ç‚º <code>200</code>ï¼Œä¸” <strong>Response Body</strong> ç‚ºæœ‰æ•ˆçš„ JSONã€‚</p></li><li><p>åœ¨ Response Headers ä¸­æ‡‰è©²åŒ…å«ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin: *</span><br><span class="line">x-vercel-protection-bypass: trueï¼ˆè‹¥ä½¿ç”¨ bypass headerï¼‰</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h2><table><thead><tr><th>æ–¹å¼</th><th>é©ç”¨æƒ…å¢ƒ</th><th>èªªæ˜</th></tr></thead><tbody><tr><td>é—œé–‰ Preview Authentication</td><td>é–‹ç™¼éšæ®µ</td><td>ç›´æ¥å–æ¶ˆä¿è­·ï¼Œæ–¹ä¾¿æ¸¬è©¦</td></tr><tr><td>ä½¿ç”¨ Protection Bypass</td><td>æ­£å¼é–‹ç™¼ã€è‡ªå‹•åŒ–æµç¨‹</td><td>ç¶­æŒå®‰å…¨æ©Ÿåˆ¶ï¼ŒåŒæ™‚å…è¨± API è‡ªå‹•è¨ªå•</td></tr></tbody></table><p>æˆ‘æœ€çµ‚é¸æ“‡äº†ç¬¬äºŒç¨®æ–¹æ¡ˆâ€”â€”<strong>ç¶­æŒä¿è­·ä½†ä½¿ç”¨ã€ŒProtection Bypass for Automationã€</strong>ï¼Œé€™æ¨£æ—¢èƒ½ä¿æŒéƒ¨ç½²å®‰å…¨ï¼Œåˆèƒ½è®“ extension çš„ background æ­£å¸¸å–å¾—è³‡æ–™ã€‚</p><hr><p><strong>å»¶ä¼¸é–±è®€ï¼š</strong></p><ul><li><a href="https://vercel.com/docs/deployment-protection/methods-to-bypass-deployment-protection">Vercel: Methods to bypass Deployment Protection</a></li><li><a href="https://vercel.com/eva813s-projects/linxly-nextjs/settings/deployment-protection">å°ˆæ¡ˆè¨­å®šé  â€“ Deployment Protection</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ€è¿‘åœ¨éƒ¨ç½²å°ˆæ¡ˆåˆ° Vercel æ™‚ï¼Œé‡åˆ°äº†ä¸€å€‹è®“æˆ‘å›°æ“¾çš„éŒ¯èª¤è¨Šæ¯ï¼šã€ŒUnexpected token â€˜&amp;lt;â€™ã€ã€‚é€™å€‹éŒ¯èª¤é€šå¸¸è¡¨ç¤ºæˆ‘å€‘é æœŸæ”¶åˆ°çš„æ˜¯ JSON æ ¼å¼çš„è³‡æ–™ï¼Œä½†å¯¦éš›ä¸Šå»æ”¶åˆ°äº† HTML é é¢ã€‚æœ¬æ–‡å°‡åˆ†äº«æˆ‘é‡åˆ°é€™å€‹å•é¡Œçš„èƒŒæ™¯ã€åŸå› ï¼Œä»¥åŠå…©ç¨®è§£æ±ºæ–¹æ¡ˆï¼Œå¹«åŠ©å¤§å®¶åœ¨ä½¿ç”¨ Vercel éƒ¨ç½²æ™‚èƒ½å¤ é †åˆ©å–å¾— API è³‡æ–™ã€‚&lt;/p&gt;
&lt;h1 id=&quot;éƒ¨ç½²è‡³-Vercel-é‡åˆ°ã€ŒUnexpected-token-â€˜-lt-â€™ã€éŒ¯èª¤ï¼šåŸå› èˆ‡è§£æ³•&quot;&gt;&lt;a href=&quot;#éƒ¨ç½²è‡³-Vercel-é‡åˆ°ã€ŒUnexpected-token-â€˜-lt-â€™ã€éŒ¯èª¤ï¼šåŸå› èˆ‡è§£æ³•&quot; class=&quot;headerlink&quot; title=&quot;éƒ¨ç½²è‡³ Vercel é‡åˆ°ã€ŒUnexpected token â€˜&amp;lt;â€™ã€éŒ¯èª¤ï¼šåŸå› èˆ‡è§£æ³•&quot;&gt;&lt;/a&gt;éƒ¨ç½²è‡³ Vercel é‡åˆ°ã€ŒUnexpected token â€˜&amp;lt;â€™ã€éŒ¯èª¤ï¼šåŸå› èˆ‡è§£æ³•&lt;/h1&gt;&lt;p&gt;åœ¨å°‡å°ˆæ¡ˆéƒ¨ç½²åˆ° &lt;strong&gt;Vercel&lt;/strong&gt; æ™‚ï¼Œç•¶æˆ‘é€éç€è¦½å™¨æˆ– extension background fetch å‘¼å« APIï¼Œå»å‡ºç¾ä»¥ä¸‹éŒ¯èª¤ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;å–å¾—è³‡æ–™å¤¾å¤±æ•—: Unexpected token &amp;#x27;&amp;lt;&amp;#x27;, &amp;quot;&amp;lt;!doctype &amp;quot;... is not valid JSON&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;é‚£ä»£è¡¨è«‹æ±‚ä¸¦æ²’æœ‰çœŸæ­£æ‹¿åˆ° JSONï¼Œè€Œæ˜¯å¾—åˆ°äº† HTML é é¢ã€‚æœ¬æ–‡å°‡èªªæ˜é€™å€‹å•é¡Œçš„åŸå› ã€èƒŒå¾Œçš„èƒŒæ™¯ï¼Œä»¥åŠå…©ç¨®å®Œæ•´çš„è§£æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å•é¡Œèªªæ˜&quot;&gt;&lt;a href=&quot;#å•é¡Œèªªæ˜&quot; class=&quot;headerlink&quot; title=&quot;å•é¡Œèªªæ˜&quot;&gt;&lt;/a&gt;å•é¡Œèªªæ˜&lt;/h2&gt;&lt;p&gt;é€™æ¬¡åœ¨ &lt;strong&gt;Arc ç€è¦½å™¨&lt;/strong&gt; çš„é–‹ç™¼éç¨‹ä¸­ï¼Œæˆ‘å˜—è©¦å¾éƒ¨ç½²æ–¼ Vercel çš„ API ç«¯é»å–å¾—è³‡æ–™ï¼Œä½† Console é¡¯ç¤ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;index.iife_dev.js:24922 å–å¾—è³‡æ–™å¤¾å¤±æ•—: Unexpected token &amp;#x27;&amp;lt;&amp;#x27;, &amp;quot;&amp;lt;!doctype &amp;quot;... is not valid JSON&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;é€²ä¸€æ­¥åˆ° &lt;strong&gt;Arc çš„ Service-Worker DevTools&lt;/strong&gt;ï¼ˆ&lt;code&gt;arc://inspect/#service-workers&lt;/code&gt;ï¼‰ä¸­ï¼Œæ‰“é–‹ background worker çš„ Consoleï¼Œå¯ä»¥çœ‹åˆ°è«‹æ±‚çš„å›æ‡‰å¯¦éš›ä¸Šæ˜¯ä¸€ä»½ HTML ç™»å…¥é é¢ï¼Œè€Œé JSON è³‡æ–™ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;èƒŒæ™¯è£œå……ï¼šVercel-çš„-Deployment-Protection&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯è£œå……ï¼šVercel-çš„-Deployment-Protection&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯è£œå……ï¼šVercel çš„ Deployment Protection&quot;&gt;&lt;/a&gt;èƒŒæ™¯è£œå……ï¼šVercel çš„ Deployment Protection&lt;/h2&gt;&lt;p&gt;é€™å€‹éŒ¯èª¤ä¸¦éä¾†è‡ª &lt;strong&gt;CORS&lt;/strong&gt;ï¼Œè€Œæ˜¯å› ç‚º Vercel çš„ &lt;strong&gt;Deployment Protection&lt;/strong&gt; æ©Ÿåˆ¶ã€‚&lt;br&gt;ç•¶å°ˆæ¡ˆé–‹å•Ÿã€ŒVercel Authenticationã€å¾Œï¼Œæ‰€æœ‰ &lt;strong&gt;Preview Deployments&lt;/strong&gt; éƒ½éœ€è¦ç™»å…¥æ‰èƒ½è¨ªå•ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œextension background åœ¨ç™¼å‡ºè«‹æ±‚æ™‚ï¼Œè¢«å°å‘è‡³ç™»å…¥é é¢ï¼ˆHTMLï¼‰ï¼Œå°è‡´è§£æ JSON æ™‚å‡ºç¾ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Unexpected token &amp;#39;&amp;lt;&amp;#39;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="side-project" scheme="https://eva813.github.io/categories/side-project/"/>
    
    
    <category term="side-project" scheme="https://eva813.github.io/tags/side-project/"/>
    
    <category term="Next.js" scheme="https://eva813.github.io/tags/Next-js/"/>
    
  </entry>
  
  <entry>
    <title>åˆ·é¡Œç·´ç¿’ - Merge-Two-Sorted-Lists</title>
    <link href="https://eva813.github.io/2025/10/04/Merge-Two-Sorted-Lists/"/>
    <id>https://eva813.github.io/2025/10/04/Merge-Two-Sorted-Lists/</id>
    <published>2025-10-04T11:59:06.000Z</published>
    <updated>2025-10-04T12:11:11.552Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é¡Œç›®æè¿°"><a href="#é¡Œç›®æè¿°" class="headerlink" title="é¡Œç›®æè¿°"></a>é¡Œç›®æè¿°</h2><p>You are given the heads of two sorted linked lists list1 and list2.</p><p>Merge the two lists into one sorted list. The list should be made by splicing together the nodes of the first two lists.</p><p>Return the head of the merged linked list.</p><p>çµ¦å®šå…©å€‹å·²æ’åºéˆçµä¸²åˆ—çš„é ­ç¯€é» list1 å’Œ list2ã€‚<br>å°‡å…©å€‹ä¸²åˆ—åˆä½µç‚ºä¸€å€‹å·²æ’åºçš„ä¸²åˆ—ã€‚è©²ä¸²åˆ—æ‡‰é€éæ‹¼æ¥å‰å…©å€‹ä¸²åˆ—çš„ç¯€é»ä¾†å»ºç«‹ã€‚<br>å›å‚³åˆä½µå¾Œéˆçµä¸²åˆ—çš„é ­ç¯€é»ã€‚</p><p>Example 1:<br>Input: list1 = [1,2,4], list2 = [1,3,4]<br>Output: [1,1,2,3,4,4]</p><p>Example 2:<br>Input: list1 = [], list2 = []<br>Output: []</p><p>Example 3:<br>Input: list1 = [], list2 = [0]<br>Output: [0]</p><h2 id="è§£é¡Œæ€è·¯"><a href="#è§£é¡Œæ€è·¯" class="headerlink" title="è§£é¡Œæ€è·¯"></a>è§£é¡Œæ€è·¯</h2><p>æˆ‘ä¸€é–‹å§‹æƒ³æ³•ï¼Œæœƒéœ€è¦ 2 è¿´åœˆå»æ¯”è¼ƒï¼Œç„¶å¾Œçµ„å‡ºä¸€å€‹æ–°çš„ list nodeï¼Œæœ€å¾Œå†å°‡æ–°çš„ list node å›å‚³ã€‚<br>ä½†æ˜¯é€™æ¨£çš„è©±ï¼Œæ™‚é–“è¤‡é›œåº¦æœƒæ˜¯ O(n^2)ï¼Œå› ç‚ºæ¯æ¬¡éƒ½è¦å¾é ­é–‹å§‹æ¯”è¼ƒã€‚<br>å¾Œä¾†æƒ³èªªï¼Œå› ç‚ºå…©å€‹ list éƒ½æ˜¯å·²æ’åºå¥½çš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨é›™æŒ‡æ¨™çš„æ–¹å¼ï¼Œä¸€æ¬¡æ¯”è¼ƒå…©å€‹ list çš„é ­ç¯€é»ï¼Œå°‡è¼ƒå°çš„ç¯€é»åŠ å…¥æ–°çš„ list nodeï¼Œç„¶å¾Œå°‡è©²æŒ‡æ¨™å¾€å¾Œç§»å‹•ä¸€ä½ï¼Œé€™æ¨£æ™‚é–“è¤‡é›œåº¦å°±æœƒæ˜¯ O(n)ï¼Œå› ç‚ºæ¯å€‹ç¯€é»åªæœƒè¢«æ¯”è¼ƒä¸€æ¬¡ã€‚</p><h2 id="ç¯„ä¾‹ç¨‹å¼ç¢¼"><a href="#ç¯„ä¾‹ç¨‹å¼ç¢¼" class="headerlink" title="ç¯„ä¾‹ç¨‹å¼ç¢¼"></a>ç¯„ä¾‹ç¨‹å¼ç¢¼</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * function ListNode(val, next) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.next = (next===undefined ? null : next)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">ListNode</span>&#125; <span class="variable">list1</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">ListNode</span>&#125; <span class="variable">list2</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">ListNode</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> mergeTwoLists = <span class="keyword">function</span>(<span class="params">list1, list2</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> head = <span class="literal">null</span></span><br><span class="line">        <span class="keyword">let</span> nowNode = <span class="literal">null</span> </span><br><span class="line">        <span class="keyword">let</span> list1pointer = list1;</span><br><span class="line">        <span class="keyword">let</span> list2pointer = list2;</span><br><span class="line"><span class="comment">// å…©å…©æ¯”è¼ƒ</span></span><br><span class="line">        <span class="keyword">if</span>(list1 === <span class="literal">null</span> &amp;&amp; list2 === <span class="literal">null</span>) <span class="keyword">return</span> head</span><br><span class="line">        <span class="keyword">if</span>(list1 === <span class="literal">null</span> &amp;&amp; list2 !== <span class="literal">null</span>) <span class="keyword">return</span> list2</span><br><span class="line">        <span class="keyword">if</span>(list1 !== <span class="literal">null</span> &amp;&amp; list2 === <span class="literal">null</span>) <span class="keyword">return</span> list1</span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">        <span class="comment">// æ±ºå®š head</span></span><br><span class="line">        <span class="comment">// å› ç‚ºç•¶ä½ é¸æ“‡äº† list1pointer ä½œç‚ºé ­ç¯€é»å¾Œï¼Œä½ æ‡‰è©²ï¼š</span></span><br><span class="line">            <span class="comment">// ç§»å‹• list1pointer æŒ‡é‡ï¼šlist1pointer = list1pointer.next</span></span><br><span class="line">            <span class="comment">// è¨­å®š nowNode ç‚ºç•¶å‰çš„å°¾ç¯€é»ï¼šnowNode = head</span></span><br><span class="line">        <span class="keyword">if</span>(list1pointer.<span class="property">val</span> &lt;= list2pointer.<span class="property">val</span> )&#123;</span><br><span class="line">            head = list1pointer</span><br><span class="line">            list1pointer = list1pointer.<span class="property">next</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">             head = list2pointer</span><br><span class="line">             list2pointer = list2pointer.<span class="property">next</span></span><br><span class="line">        &#125;</span><br><span class="line">        nowNode = head</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€²å…¥è¿´åœˆæª¢æŸ¥</span></span><br><span class="line">        <span class="keyword">while</span>(list1pointer !== <span class="literal">null</span> &amp;&amp; list2pointer !== <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(list1pointer.<span class="property">val</span> &lt;= list2pointer.<span class="property">val</span>)&#123;</span><br><span class="line">                nowNode.<span class="property">next</span> =  list1pointer</span><br><span class="line">                list1pointer = list1pointer.<span class="property">next</span></span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                nowNode.<span class="property">next</span> =  list2pointer</span><br><span class="line">                <span class="comment">// ç§»å‹•æŒ‡é‡</span></span><br><span class="line">                list2pointer = list2pointer.<span class="property">next</span></span><br><span class="line">            &#125;</span><br><span class="line">            nowNode = nowNode.<span class="property">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æœ€å¾Œè¦å†æª¢æŸ¥ã€‚å…¶ä¸­ä¸€ä¸ç‚º null </span></span><br><span class="line">        <span class="keyword">if</span>(list1pointer !== <span class="literal">null</span>)&#123;</span><br><span class="line">            nowNode.<span class="property">next</span> = list1pointer</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            nowNode.<span class="property">next</span> = list2pointer</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="èªªæ˜"><a href="#èªªæ˜" class="headerlink" title="èªªæ˜"></a>èªªæ˜</h2><ol><li><p>åœ¨ã€Œ<strong>å…ˆæ±ºå®š head</strong>ã€é€™æ®µ:</p><ol><li><p>é€éåˆ¤æ–·å¤§å° é¸æ“‡ <code>list1</code> çš„ç•¶å‰ç¯€é»ä½œç‚ºåˆä½µéˆè¡¨çš„èµ·å§‹é»</p></li><li><p>list1pointer = list1pointer.next </p><ul><li>å°‡ <code>list1pointer</code> ç§»å‹•åˆ°ä¸‹ä¸€å€‹ç¯€é»</li><li><strong>åŸå› </strong>ï¼šå› ç‚ºç•¶å‰ç¯€é»å·²ç¶“è¢«ã€Œæ¶ˆè²»ã€äº†ï¼ŒåŠ å…¥åˆ°åˆä½µéˆè¡¨ä¸­</li></ul><p>æ±ºå®šå¥½ head ï¼Œè¦è¨˜å¾—  nowNode = head</p></li></ol></li><li><p>é€²å…¥ while è¿´åœˆï¼šå› ç‚ºæˆ‘å€‘ æœƒè®“ pointer ç§»å‹•ï¼Œå¯ä»¥ç”¨ list1pointer !== null  &amp;&amp; list2pointer !== null ä¾†åˆ¤æ–·</p><p> <strong><code>nowNode</code> çš„è§’è‰²</strong>ï¼šå®ƒæ˜¯åˆä½µéˆè¡¨çš„ã€Œå°¾æŒ‡é‡ã€ï¼Œå§‹çµ‚æŒ‡å‘ç•¶å‰åˆä½µéˆè¡¨çš„æœ€å¾Œä¸€å€‹ç¯€é»ã€‚</p><p> <strong><code>nowNode.next</code> çš„å«ç¾©</strong>ï¼šå®ƒæ˜¯å°¾ç¯€é»çš„ <code>next</code> æŒ‡é‡ï¼Œä¹Ÿå°±æ˜¯ã€Œä¸‹ä¸€å€‹ç¯€é»è¦æ’å…¥çš„ä½ç½®ã€ã€‚</p><ol><li>åœ¨è¿´åœˆå…§éƒ¨ï¼Œæˆ‘å€‘éœ€è¦æ¯”è¼ƒ <code>list1pointer.val</code> å’Œ <code>list2pointer.val</code></li><li>å°‡æ¯”è¼ƒçµæœçš„ç¯€é»è³¦å€¼çµ¦ <code>nowNode.next</code><strong>ï¼Œä¸¦ä¸”è¦åŒæ­¥ç§»å‹• list çš„ pointer</strong></li></ol><p> <strong>ç‚ºä»€éº¼ä½¿ç”¨ <code>nowNode.next = list1pointer</code> è€Œä¸æ˜¯ <code>nowNode = list1pointer</code>ï¼Ÿ</strong></p><ul><li><p><code>nowNode.next = list1pointer</code>ï¼š<strong>ä¿®æ”¹ç¯€é»å…§å®¹</strong>ï¼Œå°‡ <code>nowNode</code> æ‰€æŒ‡å‘ç¯€é»çš„ <code>next</code> å±¬æ€§æŒ‡å‘ <code>list1pointer</code>ï¼ŒæŠŠå‰©é¤˜çš„éˆçµä¸²æ¥åˆ°å·²å»ºæ§‹çš„éˆçµä¸²åˆ—ä¸­ï¼Œ<strong>ä¿æŒéˆçµä¸²åˆ—çš„é€£æ¥æ€§</strong>ã€‚</p></li><li><p><code>nowNode = list1pointer</code>ï¼šåªæ˜¯<strong>æ”¹è®Šè®Šæ•¸æŒ‡å‘</strong>ï¼Œä¸æœƒä¿®æ”¹ä»»ä½•ç¯€é»çš„ <code>next</code> å±¬æ€§ï¼Œä¸æœƒå°‡ç¯€é»ä¸²æ¥åˆ°çµæœéˆçµä¸²åˆ—ä¸­ã€‚</p><p>ç¯„ä¾‹èªªæ˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ç›®å‰ç‹€æ…‹ï¼š</span><br><span class="line">çµæœéˆçµä¸²åˆ—: dummyHead -&gt; 1 -&gt; 2 -&gt; (nowNode åœ¨é€™è£¡)</span><br><span class="line">list1pointer: 3 -&gt; 5 -&gt; null</span><br><span class="line">list2pointer: null</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨ nowNode.next = list1pointerï¼š</span><br><span class="line">dummyHead -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 5 -&gt; null  âœ“ æ­£ç¢ºä¸²æ¥</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨ nowNode = list1pointerï¼š</span><br><span class="line">dummyHead -&gt; 1 -&gt; 2 -&gt; null  âœ— éˆçµæ–·æ‰äº†</span><br><span class="line">nowNode è®Šæ•¸: 3 -&gt; 5 -&gt; null (ç¨ç«‹çš„ï¼Œæ²’æœ‰é€£åˆ°çµæœéˆçµä¸²åˆ—)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æœ€å¾Œï¼Œå› ç‚ºå‰›å‰›è¿´åœˆæ˜¯åˆ¤æ–· 2 å€‹ list pointer ä¸è¦æœ‰ nullï¼Œ é€™æ¨£å°±æœƒæœ‰ç•¶å…¶ä¸­ä¸€å€‹èµ°åˆ° null ä½†å¦ä¸€ list é‚„æœ‰å€¼ï¼Œå°±è¦æ¥ä¸Šå»ã€‚</p></li></ol>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;é¡Œç›®æè¿°&quot;&gt;&lt;a href=&quot;#é¡Œç›®æè¿°&quot; class=&quot;headerlink&quot; title=&quot;é¡Œç›®æè¿°&quot;&gt;&lt;/a&gt;é¡Œç›®æè¿°&lt;/h2&gt;&lt;p&gt;You are given the heads of two sorted linked lists list1 and list2.&lt;/p&gt;
&lt;p&gt;Merge the two lists into one sorted list. The list should be made by splicing together the nodes of the first two lists.&lt;/p&gt;
&lt;p&gt;Return the head of the merged linked list.&lt;/p&gt;
&lt;p&gt;çµ¦å®šå…©å€‹å·²æ’åºéˆçµä¸²åˆ—çš„é ­ç¯€é» list1 å’Œ list2ã€‚&lt;br&gt;å°‡å…©å€‹ä¸²åˆ—åˆä½µç‚ºä¸€å€‹å·²æ’åºçš„ä¸²åˆ—ã€‚è©²ä¸²åˆ—æ‡‰é€éæ‹¼æ¥å‰å…©å€‹ä¸²åˆ—çš„ç¯€é»ä¾†å»ºç«‹ã€‚&lt;br&gt;å›å‚³åˆä½µå¾Œéˆçµä¸²åˆ—çš„é ­ç¯€é»ã€‚&lt;/p&gt;
&lt;p&gt;Example 1:&lt;br&gt;Input: list1 = [1,2,4], list2 = [1,3,4]&lt;br&gt;Output: [1,1,2,3,4,4]&lt;/p&gt;
&lt;p&gt;Example 2:&lt;br&gt;Input: list1 = [], list2 = []&lt;br&gt;Output: []&lt;/p&gt;
&lt;p&gt;Example 3:&lt;br&gt;Input: list1 = [], list2 = [0]&lt;br&gt;Output: [0]&lt;/p&gt;
&lt;h2 id=&quot;è§£é¡Œæ€è·¯&quot;&gt;&lt;a href=&quot;#è§£é¡Œæ€è·¯&quot; class=&quot;headerlink&quot; title=&quot;è§£é¡Œæ€è·¯&quot;&gt;&lt;/a&gt;è§£é¡Œæ€è·¯&lt;/h2&gt;&lt;p&gt;æˆ‘ä¸€é–‹å§‹æƒ³æ³•ï¼Œæœƒéœ€è¦ 2 è¿´åœˆå»æ¯”è¼ƒï¼Œç„¶å¾Œçµ„å‡ºä¸€å€‹æ–°çš„ list nodeï¼Œæœ€å¾Œå†å°‡æ–°çš„ list node å›å‚³ã€‚&lt;br&gt;ä½†æ˜¯é€™æ¨£çš„è©±ï¼Œæ™‚é–“è¤‡é›œåº¦æœƒæ˜¯ O(n^2)ï¼Œå› ç‚ºæ¯æ¬¡éƒ½è¦å¾é ­é–‹å§‹æ¯”è¼ƒã€‚&lt;br&gt;å¾Œä¾†æƒ³èªªï¼Œå› ç‚ºå…©å€‹ list éƒ½æ˜¯å·²æ’åºå¥½çš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨é›™æŒ‡æ¨™çš„æ–¹å¼ï¼Œä¸€æ¬¡æ¯”è¼ƒå…©å€‹ list çš„é ­ç¯€é»ï¼Œå°‡è¼ƒå°çš„ç¯€é»åŠ å…¥æ–°çš„ list nodeï¼Œç„¶å¾Œå°‡è©²æŒ‡æ¨™å¾€å¾Œç§»å‹•ä¸€ä½ï¼Œé€™æ¨£æ™‚é–“è¤‡é›œåº¦å°±æœƒæ˜¯ O(n)ï¼Œå› ç‚ºæ¯å€‹ç¯€é»åªæœƒè¢«æ¯”è¼ƒä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¯„ä¾‹ç¨‹å¼ç¢¼&quot;&gt;&lt;a href=&quot;#ç¯„ä¾‹ç¨‹å¼ç¢¼&quot; class=&quot;headerlink&quot; title=&quot;ç¯„ä¾‹ç¨‹å¼ç¢¼&quot;&gt;&lt;/a&gt;ç¯„ä¾‹ç¨‹å¼ç¢¼&lt;/h2&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * Definition for singly-linked list.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * function ListNode(val, next) &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; *     this.val = (val===undefined ? 0 : val)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; *     this.next = (next===undefined ? null : next)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@param&lt;/span&gt; &amp;#123;&lt;span class=&quot;type&quot;&gt;ListNode&lt;/span&gt;&amp;#125; &lt;span class=&quot;variable&quot;&gt;list1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@param&lt;/span&gt; &amp;#123;&lt;span class=&quot;type&quot;&gt;ListNode&lt;/span&gt;&amp;#125; &lt;span class=&quot;variable&quot;&gt;list2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; * &lt;span class=&quot;doctag&quot;&gt;@return&lt;/span&gt; &amp;#123;&lt;span class=&quot;type&quot;&gt;ListNode&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; mergeTwoLists = &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;list1, list2&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; head = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; nowNode = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; list1pointer = list1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; list2pointer = list2;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;comment&quot;&gt;// å…©å…©æ¯”è¼ƒ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(list1 === &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; list2 === &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; head&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(list1 === &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; list2 !== &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; list2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(list1 !== &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; list2 === &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; list1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// æ±ºå®š head&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// å› ç‚ºç•¶ä½ é¸æ“‡äº† list1pointer ä½œç‚ºé ­ç¯€é»å¾Œï¼Œä½ æ‡‰è©²ï¼š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// ç§»å‹• list1pointer æŒ‡é‡ï¼šlist1pointer = list1pointer.next&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// è¨­å®š nowNode ç‚ºç•¶å‰çš„å°¾ç¯€é»ï¼šnowNode = head&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(list1pointer.&lt;span class=&quot;property&quot;&gt;val&lt;/span&gt; &amp;lt;= list2pointer.&lt;span class=&quot;property&quot;&gt;val&lt;/span&gt; )&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            head = list1pointer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            list1pointer = list1pointer.&lt;span class=&quot;property&quot;&gt;next&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             head = list2pointer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;             list2pointer = list2pointer.&lt;span class=&quot;property&quot;&gt;next&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nowNode = head&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//é€²å…¥è¿´åœˆæª¢æŸ¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;(list1pointer !== &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; list2pointer !== &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(list1pointer.&lt;span class=&quot;property&quot;&gt;val&lt;/span&gt; &amp;lt;= list2pointer.&lt;span class=&quot;property&quot;&gt;val&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                nowNode.&lt;span class=&quot;property&quot;&gt;next&lt;/span&gt; =  list1pointer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                list1pointer = list1pointer.&lt;span class=&quot;property&quot;&gt;next&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                nowNode.&lt;span class=&quot;property&quot;&gt;next&lt;/span&gt; =  list2pointer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// ç§»å‹•æŒ‡é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                list2pointer = list2pointer.&lt;span class=&quot;property&quot;&gt;next&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            nowNode = nowNode.&lt;span class=&quot;property&quot;&gt;next&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// æœ€å¾Œè¦å†æª¢æŸ¥ã€‚å…¶ä¸­ä¸€ä¸ç‚º null &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(list1pointer !== &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            nowNode.&lt;span class=&quot;property&quot;&gt;next&lt;/span&gt; = list1pointer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            nowNode.&lt;span class=&quot;property&quot;&gt;next&lt;/span&gt; = list2pointer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; head&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="LeetCode" scheme="https://eva813.github.io/categories/LeetCode/"/>
    
    
    <category term="LeetCode" scheme="https://eva813.github.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>åˆ·é¡Œç·´ç¿’ - Determine If a Person Could Attend All Meetings</title>
    <link href="https://eva813.github.io/2025/10/04/Meetings-1/"/>
    <id>https://eva813.github.io/2025/10/04/Meetings-1/</id>
    <published>2025-10-04T11:16:52.000Z</published>
    <updated>2025-10-04T12:11:17.732Z</updated>
    
    <content type="html"><![CDATA[<p>Given an array of meeting time <code>intervals</code> where <code>intervals[i] = [startáµ¢, endáµ¢]</code>, determine if a person could attend all meetings.</p><p>çµ¦å®šä¸€å€‹æœƒè­°æ™‚é–“ <code>intervals</code> é™£åˆ—ï¼Œå…¶ä¸­ <code>intervals[i] = [startáµ¢, endáµ¢]</code>ï¼Œåˆ¤æ–·ä¸€å€‹äººæ˜¯å¦èƒ½å¤ åƒåŠ æ‰€æœ‰æœƒè­°ã€‚</p><h3 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1:"></a>Example 1:</h3><p><strong>Input:</strong></p><p><code>intervals = [[0,30],[5,10],[15,20]]</code></p><p><strong>Output:</strong></p><p><code>false</code></p><h3 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2:"></a>Example 2:</h3><p><strong>Input:</strong></p><p><code>intervals = [[7,10],[2,4]]</code></p><p><strong>Output:</strong></p><p><code>true</code></p><h3 id="Constraints"><a href="#Constraints" class="headerlink" title="Constraints:"></a>Constraints:</h3><ul><li><code>0 &lt;= intervals.length &lt;= 10â´</code></li><li><code>intervals[i].length == 2</code></li><li><code>0 &lt;= startáµ¢ &lt; endáµ¢ &lt;= 10â¶</code></li></ul><h3 id="è§£é¡Œæ€è·¯"><a href="#è§£é¡Œæ€è·¯" class="headerlink" title="è§£é¡Œæ€è·¯"></a>è§£é¡Œæ€è·¯</h3><p>è¦åˆ¤æ–·ä¸€å€‹äººæ˜¯å¦èƒ½å¤ åƒåŠ æ‰€æœ‰æœƒè­°ï¼Œé—œéµåœ¨æ–¼æª¢æŸ¥æœƒè­°æ™‚é–“æ˜¯å¦æœ‰é‡ç–Šã€‚è‹¥æœ‰ä»»ä½•å…©å€‹æœƒè­°çš„æ™‚é–“å€é–“é‡ç–Šï¼Œå‰‡ç„¡æ³•åƒåŠ æ‰€æœ‰æœƒè­°ã€‚</p><h4 id="é‡ç–Šæƒ…æ³åˆ†æ"><a href="#é‡ç–Šæƒ…æ³åˆ†æ" class="headerlink" title="é‡ç–Šæƒ…æ³åˆ†æ"></a>é‡ç–Šæƒ…æ³åˆ†æ</h4><p>ä»¥ <code>[1,5]</code> å’Œ <code>[2,4]</code> ç‚ºç¯„ä¾‹ï¼š</p><ol><li><strong>å‡è¨­æœƒè­°æ™‚é–“æŒ‰é–‹å§‹æ™‚é–“æ’åº</strong>ï¼šå°‡æ‰€æœ‰æœƒè­°æŒ‰ç…§é–‹å§‹æ™‚é–“ç”±æ—©åˆ°æ™šæ’åˆ—</li><li><strong>æª¢æŸ¥ç›¸é„°æœƒè­°</strong>ï¼šæ’åºå¾Œï¼Œåªéœ€æª¢æŸ¥ç›¸é„°çš„æœƒè­°æ˜¯å¦é‡ç–Š</li><li><strong>é‡ç–Šæ¢ä»¶</strong>ï¼šå‰ä¸€å€‹æœƒè­°çš„çµæŸæ™‚é–“ &gt; ä¸‹ä¸€å€‹æœƒè­°çš„é–‹å§‹æ™‚é–“</li></ol><h4 id="æ­¥é©Ÿ"><a href="#æ­¥é©Ÿ" class="headerlink" title="æ­¥é©Ÿ"></a>æ­¥é©Ÿ</h4><ol><li>å°‡æ‰€æœ‰æœƒè­°æŒ‰é–‹å§‹æ™‚é–“æ’åº</li><li>éæ­·æ’åºå¾Œçš„æœƒè­°é™£åˆ—</li><li>æª¢æŸ¥æ¯å€‹æœƒè­°çš„çµæŸæ™‚é–“æ˜¯å¦æ™šæ–¼ä¸‹ä¸€å€‹æœƒè­°çš„é–‹å§‹æ™‚é–“</li><li>è‹¥ç™¼ç¾é‡ç–Šï¼Œå›å‚³ <code>false</code>ï¼›å¦å‰‡å›å‚³ <code>true</code></li></ol><p>é€™æ¨£çš„æ–¹æ³•æ™‚é–“è¤‡é›œåº¦ç‚º O(n log n)ï¼ˆä¸»è¦æ˜¯æ’åºçš„æ™‚é–“ï¼‰ï¼Œç©ºé–“è¤‡é›œåº¦ç‚º O(1)ã€‚</p><span id="more"></span><h4 id="ç¯„ä¾‹ç¨‹å¼ç¢¼"><a href="#ç¯„ä¾‹ç¨‹å¼ç¢¼" class="headerlink" title="ç¯„ä¾‹ç¨‹å¼ç¢¼"></a>ç¯„ä¾‹ç¨‹å¼ç¢¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canAttendMeetings = <span class="keyword">function</span> (<span class="params">intervals</span>) &#123;</span><br><span class="line">  <span class="comment">// æŒ‰é–‹å§‹æ™‚é–“æ’åº</span></span><br><span class="line">  intervals.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a[<span class="number">0</span>] - b[<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">const</span> lastMeetingEnd = intervals[<span class="number">0</span>][<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; intervals.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// æª¢æŸ¥ç•¶å‰æœƒè­°çš„é–‹å§‹æ™‚é–“æ˜¯å¦æ—©æ–¼ä¸Šå€‹æœƒè­°çš„çµæŸæ™‚é–“</span></span><br><span class="line">    <span class="keyword">if</span>(intervals[i][<span class="number">0</span>] &lt; lastMeetingEnd) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// æœ‰é‡ç–Šï¼Œç„¡æ³•åƒåŠ æ‰€æœ‰æœƒè­°</span></span><br><span class="line">    &#125;</span><br><span class="line">    lastMeetingEnd = intervals[i][<span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‰ç«¯æ‡‰ç”¨å ´æ™¯"><a href="#å‰ç«¯æ‡‰ç”¨å ´æ™¯" class="headerlink" title="å‰ç«¯æ‡‰ç”¨å ´æ™¯"></a>å‰ç«¯æ‡‰ç”¨å ´æ™¯</h2><p>é€™é¡å•é¡Œåœ¨å‰ç«¯æ‡‰ç”¨ä¸­æ¥µç‚ºå¸¸è¦‹ï¼Œç‰¹åˆ¥æ˜¯æ¶‰åŠæ™‚é–“ç®¡ç†çš„ç³»çµ±ï¼š</p><h3 id="1-æ—¥æ›†èˆ‡æ’ç¨‹ç³»çµ±"><a href="#1-æ—¥æ›†èˆ‡æ’ç¨‹ç³»çµ±" class="headerlink" title="1. æ—¥æ›†èˆ‡æ’ç¨‹ç³»çµ±"></a>1. æ—¥æ›†èˆ‡æ’ç¨‹ç³»çµ±</h3><ul><li>æœƒè­°æ’ç¨‹ï¼šæª¢æŸ¥æ–°æœƒè­°æ˜¯å¦èˆ‡ç¾æœ‰æœƒè­°æ™‚é–“è¡çª</li><li>é è¨‚ç³»çµ±ï¼šç¢ºä¿æ™‚é–“æ®µä¸é‡ç–Šï¼Œé¿å…é›™é‡é è¨‚</li><li>è³‡æºç®¡ç†ï¼šé˜²æ­¢åŒä¸€è³‡æºåœ¨åŒä¸€æ™‚é–“è¢«å¤šæ¬¡åˆ†é…</li></ul><h3 id="2-è¡¨å–®é©—è­‰-Form-Validation"><a href="#2-è¡¨å–®é©—è­‰-Form-Validation" class="headerlink" title="2. è¡¨å–®é©—è­‰ (Form Validation)"></a>2. è¡¨å–®é©—è­‰ (Form Validation)</h3><ul><li>ç‡Ÿæ¥­æ™‚é–“è¨­å®šï¼šé©—è­‰å¤šå€‹ç‡Ÿæ¥­æ™‚æ®µæ˜¯å¦é‡ç–Š</li><li>é…é€æ™‚é–“ç®¡ç†ï¼šç¢ºä¿é…é€æ™‚é–“å€é–“é‚è¼¯æ­£ç¢º</li><li>å®¢æˆ¶ç«¯é©—è­‰ï¼šåœ¨æäº¤å‰å³æ™‚æª¢æ¸¬è¡çªï¼Œæå‡ç”¨æˆ¶é«”é©—</li></ul><hr><h2 id="React-äº’å‹•ç¯„ä¾‹"><a href="#React-äº’å‹•ç¯„ä¾‹" class="headerlink" title="React äº’å‹•ç¯„ä¾‹"></a>React äº’å‹•ç¯„ä¾‹</h2><p>ä»¥ä¸‹ç¯„ä¾‹æ¨¡æ“¬<strong>æœƒè­°å®¤é è¨‚ç³»çµ±</strong>ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨æœ¬é¡Œæ¼”ç®—æ³•æª¢æŸ¥æ–°æœƒè­°æ˜¯å¦èˆ‡å·²é è¨‚æ™‚æ®µè¡çªï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useMemo &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Interval</span> = &#123; <span class="attr">start</span>: <span class="built_in">number</span>; <span class="attr">end</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">MeetingChecker</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// å·²é è¨‚çš„æœƒè­°ï¼ˆå¯¦éš›æ‡‰ç”¨ä¸­ä¾†è‡ª APIï¼‰</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">existingMeetings</span>: <span class="title class_">Interval</span>[] = [</span><br><span class="line">    &#123; <span class="attr">start</span>: <span class="number">9</span>, <span class="attr">end</span>: <span class="number">11</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">start</span>: <span class="number">14</span>, <span class="attr">end</span>: <span class="number">16</span> &#125;,</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”¨æˆ¶æƒ³æ–°å¢çš„æœƒè­°</span></span><br><span class="line">  <span class="keyword">const</span> [newMeeting, setNewMeeting] = <span class="title function_">useState</span>(&#123; <span class="attr">start</span>: <span class="number">10</span>, <span class="attr">end</span>: <span class="number">12</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä½¿ç”¨æœ¬é¡Œæ¼”ç®—æ³•ï¼šæ’åºå¾Œæª¢æŸ¥ç›¸é„°å€é–“</span></span><br><span class="line">  <span class="keyword">const</span> hasConflict = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> all = [...existingMeetings, newMeeting];</span><br><span class="line">    <span class="keyword">const</span> sorted = all.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.<span class="property">start</span> - b.<span class="property">start</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; sorted.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (sorted[i].<span class="property">start</span> &lt; sorted[i - <span class="number">1</span>].<span class="property">end</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;, [newMeeting]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;p-6 max-w-md mx-auto&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span> <span class="attr">className</span>=<span class="string">&quot;text-lg font-bold mb-3&quot;</span>&gt;</span>æœƒè­°å®¤é è¨‚ç³»çµ±<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* å·²é è¨‚æœƒè­° */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;mb-4 text-sm text-gray-600&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>å·²é è¨‚ï¼š09:00-11:00<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>å·²é è¨‚ï¼š14:00-16:00<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* æ–°å¢æœƒè­° */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex gap-2 items-center mb-3&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>æ–°å¢æœƒè­°ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;number&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;newMeeting.start&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setNewMeeting(&#123; ...newMeeting, start: +e.target.value &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">          className=&quot;border p-1 rounded w-16&quot;</span></span><br><span class="line"><span class="language-xml">        /&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>~<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;number&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;newMeeting.end&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setNewMeeting(&#123; ...newMeeting, end: +e.target.value &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">          className=&quot;border p-1 rounded w-16&quot;</span></span><br><span class="line"><span class="language-xml">        /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      &#123;/* çµæœé¡¯ç¤º */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">p-2</span> <span class="attr">rounded</span> <span class="attr">text-sm</span> $&#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">hasConflict</span> ? &quot;<span class="attr">bg-red-100</span> <span class="attr">text-red-700</span>&quot; <span class="attr">:</span> &quot;<span class="attr">bg-green-100</span> <span class="attr">text-green-700</span>&quot;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#125;`&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;hasConflict ? &quot;âŒ æ™‚é–“è¡çªï¼Œç„¡æ³•é è¨‚&quot; : &quot;âœ… å¯ä»¥é è¨‚&quot;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨æƒ…å¢ƒ</strong>ï¼šæ¨¡æ“¬æœƒè­°å®¤é è¨‚ç³»çµ±ï¼Œç•¶ç”¨æˆ¶å˜—è©¦æ–°å¢æœƒè­°æ™‚ï¼Œå³æ™‚æª¢æŸ¥æ˜¯å¦èˆ‡å·²é è¨‚æ™‚æ®µè¡çªã€‚è©¦è‘—èª¿æ•´æ™‚é–“ï¼ˆä¾‹å¦‚æ”¹ç‚º <code>12-13</code>ï¼‰è§€å¯Ÿçµæœè®ŠåŒ–ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Given an array of meeting time &lt;code&gt;intervals&lt;/code&gt; where &lt;code&gt;intervals[i] = [startáµ¢, endáµ¢]&lt;/code&gt;, determine if a person could attend all meetings.&lt;/p&gt;
&lt;p&gt;çµ¦å®šä¸€å€‹æœƒè­°æ™‚é–“ &lt;code&gt;intervals&lt;/code&gt; é™£åˆ—ï¼Œå…¶ä¸­ &lt;code&gt;intervals[i] = [startáµ¢, endáµ¢]&lt;/code&gt;ï¼Œåˆ¤æ–·ä¸€å€‹äººæ˜¯å¦èƒ½å¤ åƒåŠ æ‰€æœ‰æœƒè­°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Example-1&quot;&gt;&lt;a href=&quot;#Example-1&quot; class=&quot;headerlink&quot; title=&quot;Example 1:&quot;&gt;&lt;/a&gt;Example 1:&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Input:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;intervals = [[0,30],[5,10],[15,20]]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Output:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;false&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;Example-2&quot;&gt;&lt;a href=&quot;#Example-2&quot; class=&quot;headerlink&quot; title=&quot;Example 2:&quot;&gt;&lt;/a&gt;Example 2:&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Input:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;intervals = [[7,10],[2,4]]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Output:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;true&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;Constraints&quot;&gt;&lt;a href=&quot;#Constraints&quot; class=&quot;headerlink&quot; title=&quot;Constraints:&quot;&gt;&lt;/a&gt;Constraints:&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;0 &amp;lt;= intervals.length &amp;lt;= 10â´&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;intervals[i].length == 2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0 &amp;lt;= startáµ¢ &amp;lt; endáµ¢ &amp;lt;= 10â¶&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;è§£é¡Œæ€è·¯&quot;&gt;&lt;a href=&quot;#è§£é¡Œæ€è·¯&quot; class=&quot;headerlink&quot; title=&quot;è§£é¡Œæ€è·¯&quot;&gt;&lt;/a&gt;è§£é¡Œæ€è·¯&lt;/h3&gt;&lt;p&gt;è¦åˆ¤æ–·ä¸€å€‹äººæ˜¯å¦èƒ½å¤ åƒåŠ æ‰€æœ‰æœƒè­°ï¼Œé—œéµåœ¨æ–¼æª¢æŸ¥æœƒè­°æ™‚é–“æ˜¯å¦æœ‰é‡ç–Šã€‚è‹¥æœ‰ä»»ä½•å…©å€‹æœƒè­°çš„æ™‚é–“å€é–“é‡ç–Šï¼Œå‰‡ç„¡æ³•åƒåŠ æ‰€æœ‰æœƒè­°ã€‚&lt;/p&gt;
&lt;h4 id=&quot;é‡ç–Šæƒ…æ³åˆ†æ&quot;&gt;&lt;a href=&quot;#é‡ç–Šæƒ…æ³åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;é‡ç–Šæƒ…æ³åˆ†æ&quot;&gt;&lt;/a&gt;é‡ç–Šæƒ…æ³åˆ†æ&lt;/h4&gt;&lt;p&gt;ä»¥ &lt;code&gt;[1,5]&lt;/code&gt; å’Œ &lt;code&gt;[2,4]&lt;/code&gt; ç‚ºç¯„ä¾‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡è¨­æœƒè­°æ™‚é–“æŒ‰é–‹å§‹æ™‚é–“æ’åº&lt;/strong&gt;ï¼šå°‡æ‰€æœ‰æœƒè­°æŒ‰ç…§é–‹å§‹æ™‚é–“ç”±æ—©åˆ°æ™šæ’åˆ—&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æª¢æŸ¥ç›¸é„°æœƒè­°&lt;/strong&gt;ï¼šæ’åºå¾Œï¼Œåªéœ€æª¢æŸ¥ç›¸é„°çš„æœƒè­°æ˜¯å¦é‡ç–Š&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡ç–Šæ¢ä»¶&lt;/strong&gt;ï¼šå‰ä¸€å€‹æœƒè­°çš„çµæŸæ™‚é–“ &amp;gt; ä¸‹ä¸€å€‹æœƒè­°çš„é–‹å§‹æ™‚é–“&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;æ­¥é©Ÿ&quot;&gt;&lt;a href=&quot;#æ­¥é©Ÿ&quot; class=&quot;headerlink&quot; title=&quot;æ­¥é©Ÿ&quot;&gt;&lt;/a&gt;æ­¥é©Ÿ&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;å°‡æ‰€æœ‰æœƒè­°æŒ‰é–‹å§‹æ™‚é–“æ’åº&lt;/li&gt;
&lt;li&gt;éæ­·æ’åºå¾Œçš„æœƒè­°é™£åˆ—&lt;/li&gt;
&lt;li&gt;æª¢æŸ¥æ¯å€‹æœƒè­°çš„çµæŸæ™‚é–“æ˜¯å¦æ™šæ–¼ä¸‹ä¸€å€‹æœƒè­°çš„é–‹å§‹æ™‚é–“&lt;/li&gt;
&lt;li&gt;è‹¥ç™¼ç¾é‡ç–Šï¼Œå›å‚³ &lt;code&gt;false&lt;/code&gt;ï¼›å¦å‰‡å›å‚³ &lt;code&gt;true&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€™æ¨£çš„æ–¹æ³•æ™‚é–“è¤‡é›œåº¦ç‚º O(n log n)ï¼ˆä¸»è¦æ˜¯æ’åºçš„æ™‚é–“ï¼‰ï¼Œç©ºé–“è¤‡é›œåº¦ç‚º O(1)ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="LeetCode" scheme="https://eva813.github.io/categories/LeetCode/"/>
    
    
    <category term="LeetCode" scheme="https://eva813.github.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ç”¨ SeqNo ç®¡ç†æ©Ÿåˆ¶æå‡åˆ—è¡¨æ’å…¥æ•ˆèƒ½ï¼Œè§£æ±ºæ’åºè¡çªå•é¡Œ</title>
    <link href="https://eva813.github.io/2025/09/07/firebase-seqNo/"/>
    <id>https://eva813.github.io/2025/09/07/firebase-seqNo/</id>
    <published>2025-09-07T11:02:27.000Z</published>
    <updated>2025-09-07T11:35:33.269Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ—è¡¨çš„å‹•æ…‹æ’åºå’Œæ’å…¥ç‚ºå¸¸è¦‹çš„éœ€æ±‚ã€‚ç„¶è€Œï¼Œç•¶é¢å°å¤§é‡è³‡æ–™æ™‚ï¼Œå‚³çµ±çš„ã€Œåˆªé™¤é‡å»ºã€ç­–ç•¥å®¹æ˜“æœƒæˆç‚ºæ•ˆèƒ½ç“¶é ¸ã€‚æœ¬æ–‡å°‡åˆ†äº«æˆ‘åœ¨å°ˆæ¡ˆä¸­å¦‚ä½•é€é SeqNo ç®¡ç†æ©Ÿåˆ¶ï¼Œå°‡åˆ—è¡¨æ’å…¥æ•ˆèƒ½æå‡ï¼ŒåŒæ™‚ä¿æŒè³‡æ–™ä¸€è‡´æ€§å’Œç³»çµ±ç©©å®šæ€§ã€‚</p><p>åœ¨å°ˆæ¡ˆå…§æœ‰ä¸€ä¸‹æ‹‰åˆ—è¡¨çš„åŠŸèƒ½ï¼Œç•¶ä½¿ç”¨è€…é¸æ“‡æŸå€‹é¸é …å¾Œï¼Œæœƒå°‡è©²é¸é …æ’å…¥åˆ°åˆ—è¡¨ä¸­ï¼Œä¸¦ä¸”æœƒä¾æ“šä½¿ç”¨è€…çš„æ“ä½œé †åºä¾†é€²è¡Œæ’åºã€‚æœ€åˆçš„å¯¦ä½œæ–¹å¼æ˜¯æ¯æ¬¡æ’å…¥æ–°é¸é …æ™‚ï¼Œéƒ½æœƒé‡æ–°è¨ˆç®—æ•´å€‹åˆ—è¡¨çš„æ’åºï¼Œé€™åœ¨è³‡æ–™é‡è¼ƒå¤§æ™‚ï¼Œå°è‡´æ•ˆèƒ½æ˜é¡¯ä¸‹é™ã€‚ç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œå¼•å…¥äº† SeqNo ç®¡ç†æ©Ÿåˆ¶ã€‚</p><h2 id="åŸæœ‰å•é¡Œ"><a href="#åŸæœ‰å•é¡Œ" class="headerlink" title="åŸæœ‰å•é¡Œ"></a>åŸæœ‰å•é¡Œ</h2><p>ç•¶ä½¿ç”¨è€…è¦åœ¨åˆ—è¡¨ä¸­é–“æ’å…¥æ–°çš„è³‡æ–™æ™‚ï¼Œä½¿ç³»çµ±é¢è‡¨æŒ‘æˆ°ï¼Œä¸¦ä¸”åœ¨æ²’æœ‰åŠ å…¥ seqNo ç®¡ç†æ©Ÿåˆ¶å‰ï¼Œå®¹æ˜“é‡åˆ°æ’åºè¡çªçš„å•é¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸæœ‰ç‹€æ…‹</span></span><br><span class="line">[</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;A&#x27;</span>, <span class="attr">seqNo</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;B&#x27;</span>, <span class="attr">seqNo</span>: <span class="number">2</span> &#125;,  <span class="comment">// è¦åœ¨ B å¾Œé¢æ’å…¥æ–°é …ç›®</span></span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;C&#x27;</span>, <span class="attr">seqNo</span>: <span class="number">3</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;D&#x27;</span>, <span class="attr">seqNo</span>: <span class="number">4</span> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å¦‚æœç›´æ¥å°‡æ–°é …ç›®è¨­ç‚º seqNo: 3ï¼Œæœƒèˆ‡ç¾æœ‰çš„é …ç›® C ç™¼ç”Ÿè¡çªã€‚</p><h3 id="å‚³çµ±è§£æ±ºæ–¹æ¡ˆçš„å›°å¢ƒ"><a href="#å‚³çµ±è§£æ±ºæ–¹æ¡ˆçš„å›°å¢ƒ" class="headerlink" title="å‚³çµ±è§£æ±ºæ–¹æ¡ˆçš„å›°å¢ƒ"></a>å‚³çµ±è§£æ±ºæ–¹æ¡ˆçš„å›°å¢ƒ</h3><p>ç›´è§€çš„è§£æ±ºæ–¹æ¡ˆæ˜¯é‡æ–°æ’åºæ‰€æœ‰é …ç›®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆªé™¤é‡å»º</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">insertListData</span>(<span class="params">afterId: string, </span></span><br><span class="line"><span class="params">  newListData: ListData</span>) &#123;</span><br><span class="line">    <span class="comment">// 1. åˆªé™¤æ‰€æœ‰å¾ŒçºŒé …ç›® (N-M æ¬¡åˆªé™¤)</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">deleteListDataAfter</span>(afterId);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. é‡æ–°å»ºç«‹æ‰€æœ‰é …ç›® (N-M+1 æ¬¡å»ºç«‹)</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">recreateListDataWithNewSeqNo</span>(newListData,</span><br><span class="line">  subsequentListData);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ul><li>æ“ä½œè¤‡é›œåº¦: O(2N+1) - å…¶ä¸­ N ç‚ºåˆ—è¡¨ç¸½é•·åº¦</li><li>è³‡æ–™åº«å£“åŠ›: å¤§é‡åˆªé™¤å’Œå»ºç«‹æ“ä½œ</li><li>äº¤æ˜“é¢¨éšª: æ“ä½œæ­¥é©Ÿéå¤šï¼Œå¤±æ•—æ©Ÿç‡é«˜</li><li>ä½µç™¼å•é¡Œ: é•·æ™‚é–“é–å®šï¼Œå®¹æ˜“ç”¢ç”Ÿç«¶çˆ­æ¢ä»¶</li></ul><h2 id="SeqNo-ç®¡ç†æ©Ÿåˆ¶"><a href="#SeqNo-ç®¡ç†æ©Ÿåˆ¶" class="headerlink" title="SeqNo ç®¡ç†æ©Ÿåˆ¶"></a>SeqNo ç®¡ç†æ©Ÿåˆ¶</h2><p> åªæ›´æ–°çœŸæ­£éœ€è¦è®Šå‹•çš„é …ç›®ï¼Œå°‡è¤‡é›œåº¦é€²è¡Œæ”¹å–„ï¼Œæ˜¯æ’å…¥é»ä¹‹å¾Œçš„é …ç›®æ•¸é‡ã€‚</p><ol><li>æ’åºåŸºç¤å‡½å¼<br>ç¢ºä¿æ‰€æœ‰é …ç›®èƒ½ä¾ç…§ seqNo æ­£ç¢ºæ’åºã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’åºå·¥å…·</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">sortListDataBySeqNo</span>(<span class="params">listData: ListData[]</span>): <span class="title class_">ListData</span>[] &#123;</span><br><span class="line">  <span class="keyword">return</span> [...listData].<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> aSeqNo = a.<span class="property">seqNo</span> || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> bSeqNo = b.<span class="property">seqNo</span> || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> aSeqNo - bSeqNo;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ’å…¥ç­–ç•¥è¨ˆç®—</li></ol><p>åªè¨ˆç®—ã€Œæ’å…¥é»ä¹‹å¾Œã€éœ€è¦èª¿æ•´çš„é …ç›®ï¼Œä¸¦ç”¢ç”Ÿæ›´æ–°æ“ä½œæ¸…å–®ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">calculateInsertStrategy</span>(<span class="params"></span></span><br><span class="line"><span class="params">  existingListData: ListData[],</span></span><br><span class="line"><span class="params">  afterListDataId: string</span></span><br><span class="line"><span class="params"></span>): &#123;</span><br><span class="line">  <span class="attr">insertSeqNo</span>: number;</span><br><span class="line">  <span class="attr">affectedListData</span>: <span class="title class_">ListData</span>[];</span><br><span class="line">  <span class="attr">updateOperations</span>: <span class="title class_">Array</span>&lt;&#123; <span class="attr">listDataId</span>: string; <span class="attr">newSeqNo</span>: number &#125;&gt;;</span><br><span class="line">&#125; &#123;</span><br><span class="line">  <span class="keyword">const</span> sortedListData = <span class="title function_">sortListDataBySeqNo</span>(existingListData);</span><br><span class="line">  <span class="keyword">const</span> afterIndex = sortedListData.<span class="title function_">findIndex</span>(<span class="function"><span class="params">data</span> =&gt;</span> data.<span class="property">id</span> === afterListDataId);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (afterIndex === -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;afterListDataId not found&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é—œéµï¼šæ’å…¥é»çš„ seqNo + 1</span></span><br><span class="line">  <span class="keyword">const</span> insertSeqNo = sortedListData[afterIndex].<span class="property">seqNo</span>! + <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// åªå½±éŸ¿æ’å…¥é»ä¹‹å¾Œçš„é …ç›®</span></span><br><span class="line">  <span class="keyword">const</span> affectedListData = sortedListData.<span class="title function_">slice</span>(afterIndex + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”¢ç”Ÿæ›´æ–°æ“ä½œæ¸…å–®</span></span><br><span class="line">  <span class="keyword">const</span> updateOperations = affectedListData.<span class="title function_">map</span>(<span class="function"><span class="params">data</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">listDataId</span>: data.<span class="property">id</span>,</span><br><span class="line">    <span class="attr">newSeqNo</span>: data.<span class="property">seqNo</span>! + <span class="number">1</span></span><br><span class="line">  &#125;));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; insertSeqNo, affectedListData, updateOperations &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="3"><li>äº¤æ˜“åŸ·è¡Œ<br>ç¢ºä¿æ‰€æœ‰æ›´æ–°æ“ä½œèƒ½åœ¨åŒä¸€å€‹ Transaction ä¸­å®Œæˆã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">executeSeqNoUpdates</span>(<span class="params"></span></span><br><span class="line"><span class="params">  transaction: Transaction,</span></span><br><span class="line"><span class="params">  operations: <span class="built_in">Array</span>&lt;&#123; listDataId: string; newSeqNo: number &#125;&gt;</span></span><br><span class="line"><span class="params"></span>): <span class="title class_">Promise</span>&lt;<span class="keyword">void</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> operation <span class="keyword">of</span> operations) &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°æ¯å€‹å—å½±éŸ¿çš„é …ç›®</span></span><br><span class="line">    <span class="keyword">const</span> listDataRef = adminDb.<span class="title function_">collection</span>(<span class="string">&#x27;listData&#x27;</span>).<span class="title function_">doc</span>(operation.<span class="property">listDataId</span>);</span><br><span class="line">    transaction.<span class="title function_">update</span>(listDataRef, &#123;</span><br><span class="line">      <span class="attr">seqNo</span>: operation.<span class="property">newSeqNo</span>,</span><br><span class="line">      <span class="attr">updatedAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>API å¯¦ç¾ç¯„ä¾‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// POST /api/v1/listData</span></span><br><span class="line"> <span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">POST</span>(<span class="params">req: Request</span>) &#123;</span><br><span class="line">  <span class="comment">// ... é©—è­‰é‚è¼¯</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (afterListDataId) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// æ­¥é©Ÿ1: è¨ˆç®—æœ€å°æ›´æ–°ç­–ç•¥</span></span><br><span class="line">      <span class="keyword">const</span> &#123; updateOperations, insertSeqNo &#125; =</span><br><span class="line">        <span class="title function_">calculateInsertStrategy</span>(existingListData, afterListDataId);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ­¥é©Ÿ2: Transaction åŸ·è¡Œ</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> adminDb.<span class="title function_">runTransaction</span>(<span class="keyword">async</span> (transaction) =&gt; &#123;</span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">executeSeqNoUpdates</span>(transaction, updateOperations);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ’å…¥æ–°é …ç›®</span></span><br><span class="line">        <span class="keyword">const</span> listDataRef = adminDb.<span class="title function_">collection</span>(<span class="string">&#x27;listData&#x27;</span>).<span class="title function_">doc</span>();</span><br><span class="line">        transaction.<span class="title function_">set</span>(listDataRef, &#123;</span><br><span class="line">          ...newListData,</span><br><span class="line">          <span class="attr">seqNo</span>: insertSeqNo</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">id</span>: listDataRef.<span class="property">id</span>, <span class="attr">seqNo</span>: insertSeqNo &#125;;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(result, &#123; <span class="attr">status</span>: <span class="number">201</span> &#125;);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">if</span> (error.<span class="property">message</span> === <span class="string">&#x27;afterListDataId not found&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&#x27;afterListDataId not found&#x27;</span> &#125;, &#123; <span class="attr">status</span>: <span class="number">404</span> &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">throw</span> error;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ­¤å°ˆæ¡ˆçš„æ‡‰ç”¨å›é¡§èˆ‡å¿ƒå¾—"><a href="#æ­¤å°ˆæ¡ˆçš„æ‡‰ç”¨å›é¡§èˆ‡å¿ƒå¾—" class="headerlink" title="æ­¤å°ˆæ¡ˆçš„æ‡‰ç”¨å›é¡§èˆ‡å¿ƒå¾—"></a>æ­¤å°ˆæ¡ˆçš„æ‡‰ç”¨å›é¡§èˆ‡å¿ƒå¾—</h2><p>é€™å€‹å•é¡Œæœ€åˆæ˜¯åœ¨ã€Œæ’å…¥åˆ—è¡¨ä¸­é–“ã€æ™‚è¢«ç™¼ç¾çš„ã€‚<br>ç•¶æ™‚ç¶“å¸¸å‡ºç¾æ’åºéŒ¯äº‚ï¼Œè¿½æŸ¥å¾Œæ‰ç™¼ç¾æ˜¯å› ç‚ºç¼ºä¹ SeqNo ç®¡ç†æ©Ÿåˆ¶ï¼Œå°è‡´æ’å…¥æ™‚ seqNo ç™¼ç”Ÿè¡çªã€‚</p><p>ä¸€é–‹å§‹çš„è§£æ³•æ˜¯ åˆªé™¤é‡å»ºï¼Œä½†é€™å¸¶ä¾†å…©å€‹æ˜é¡¯çš„å•é¡Œï¼š<br>1.ç•¶è³‡æ–™é‡å¤§æ™‚ï¼Œå°å¾Œç«¯è³‡æ–™åº«é€ æˆæ¥µå¤§è² æ“”ã€‚<br>2.ä½¿ç”¨è€…æ“ä½œç„¡æ³•é æ¸¬ï¼Œè‹¥é »ç¹åœ¨åˆ—è¡¨ä¸­é–“æ’å…¥æˆ–åˆªé™¤ï¼Œæ•ˆèƒ½æœƒå¿«é€Ÿä¸‹é™ã€‚</p><p>å¼•å…¥ SeqNo ç®¡ç†æ©Ÿåˆ¶ å¾Œï¼š</p><ul><li>æ’å…¥æ•ˆèƒ½æ˜é¡¯æå‡</li><li>ä¿æŒäº†è³‡æ–™ä¸€è‡´æ€§</li><li>ç³»çµ±ç©©å®šæ€§ä¹Ÿå¤§å¹…æ”¹å–„<br>é€™æ¨£çš„è¨­è¨ˆä¸åƒ…è§£æ±ºäº†æ’åºè¡çªï¼Œä¹Ÿå¤§å¹…æ¸›å°‘äº†è³‡æ–™åº«çš„æ“ä½œæ¬¡æ•¸ï¼Œè®“æ•´é«”æ•ˆèƒ½æ›´åŠ ç©©å®šå¯</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åˆ—è¡¨çš„å‹•æ…‹æ’åºå’Œæ’å…¥ç‚ºå¸¸è¦‹çš„éœ€æ±‚ã€‚ç„¶è€Œï¼Œç•¶é¢å°å¤§é‡è³‡æ–™æ™‚ï¼Œå‚³çµ±çš„ã€Œåˆªé™¤é‡å»ºã€ç­–ç•¥å®¹æ˜“æœƒæˆç‚ºæ•ˆèƒ½ç“¶é ¸ã€‚æœ¬æ–‡å°‡åˆ†äº«æˆ‘åœ¨å°ˆæ¡ˆä¸­å¦‚ä½•é€é SeqNo ç®¡ç†æ©Ÿåˆ¶ï¼Œå°‡åˆ—è¡¨æ’å…¥æ•ˆèƒ½æå‡ï¼ŒåŒæ™‚ä¿æŒè³‡æ–™ä¸€è‡´æ€§å’Œç³»çµ±ç©©å®šæ€§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å°ˆæ¡ˆå…§æœ‰ä¸€ä¸‹æ‹‰åˆ—è¡¨çš„åŠŸèƒ½ï¼Œç•¶ä½¿ç”¨è€…é¸æ“‡æŸå€‹é¸é …å¾Œï¼Œæœƒ</summary>
      
    
    
    
    <category term="side-project" scheme="https://eva813.github.io/categories/side-project/"/>
    
    
    <category term="firebase" scheme="https://eva813.github.io/tags/firebase/"/>
    
    <category term="side-project" scheme="https://eva813.github.io/tags/side-project/"/>
    
  </entry>
  
  <entry>
    <title>å¯¦ç¾å‰ç«¯è‡ªå‹•å„²å­˜ç³»çµ±ï¼šNext.js + Zustand</title>
    <link href="https://eva813.github.io/2025/06/29/frontend-auto-save/"/>
    <id>https://eva813.github.io/2025/06/29/frontend-auto-save/</id>
    <published>2025-06-29T04:44:01.000Z</published>
    <updated>2025-09-07T01:00:12.995Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ç¾ä»£ Web æ‡‰ç”¨é–‹ç™¼ä¸­ï¼Œè‡ªå‹•å„²å­˜åŠŸèƒ½å·²æˆç‚ºç”¨æˆ¶é«”é©—çš„é‡è¦çµ„æˆéƒ¨åˆ†ã€‚æƒ³åƒä¸€ä¸‹ï¼Œç”¨æˆ¶æ­£åœ¨ç·¨è¼¯é‡è¦æ–‡ä»¶æ™‚é‚„éœ€è¦æ‰‹å‹•é»æ“Šå„²å­˜æŒ‰éˆ•ï¼Œå¦‚æœæ²’æœ‰è‡ªå‹•å„²å­˜æ©Ÿåˆ¶ã€æˆ–æ˜¯éºå¿˜é»æ“Šå„²å­˜ï¼Œæ‰€æœ‰è¾›è‹¦ç·¨è¼¯çš„å…§å®¹éƒ½æœƒç¬é–“æ¶ˆå¤±ã€‚é€™ç¨®ç³Ÿç³•çš„é«”é©—ä¿ƒä½¿æˆ‘æ€è€ƒï¼šå¦‚ä½•è¨­è¨ˆä¸€å€‹æ—¢æ™ºèƒ½åˆç©©å®šçš„è‡ªå‹•å„²å­˜ç³»çµ±ï¼Ÿ</p><p>æœ¬æ–‡å°‡æä¾›æˆ‘åœ¨å°ˆæ¡ˆå…§å…§å¯¦ä½œå¦‚ä½•ä½¿ç”¨ Next.js 14 + Zustand æ¶æ§‹å¯¦ç¾ä¸€å€‹å®Œæ•´çš„è‡ªå‹•å„²å­˜ç³»çµ±ã€‚</p><h2 id="é …ç›®èƒŒæ™¯èˆ‡éœ€æ±‚åˆ†æ"><a href="#é …ç›®èƒŒæ™¯èˆ‡éœ€æ±‚åˆ†æ" class="headerlink" title="é …ç›®èƒŒæ™¯èˆ‡éœ€æ±‚åˆ†æ"></a>é …ç›®èƒŒæ™¯èˆ‡éœ€æ±‚åˆ†æ</h2><h3 id="æ‡‰ç”¨å ´æ™¯æ¦‚è¿°"><a href="#æ‡‰ç”¨å ´æ™¯æ¦‚è¿°" class="headerlink" title="æ‡‰ç”¨å ´æ™¯æ¦‚è¿°"></a>æ‡‰ç”¨å ´æ™¯æ¦‚è¿°</h3><p>æˆ‘å€‘é¢å°çš„æ˜¯ä¸€å€‹ prompt ç®¡ç†å¹³å°ï¼Œé¡ä¼¼æ–¼ä»£ç¢¼ç·¨è¼¯å™¨æˆ–ç­†è¨˜æ‡‰ç”¨ã€‚ç”¨æˆ¶å¯ä»¥ï¼š</p><ul><li>å‰µå»ºå’Œç·¨è¼¯ prompt</li><li>è¨­ç½®å¿«æ·éµé€²è¡Œå¿«é€Ÿè¨ªå•</li><li>çµ„ç¹”æç¤ºè©åˆ°ä¸åŒæ–‡ä»¶å¤¾</li><li>é€²è¡Œå¯Œæ–‡æœ¬ç·¨è¼¯</li></ul><h3 id="æ ¸å¿ƒæŠ€è¡“æŒ‘æˆ°"><a href="#æ ¸å¿ƒæŠ€è¡“æŒ‘æˆ°" class="headerlink" title="æ ¸å¿ƒæŠ€è¡“æŒ‘æˆ°"></a>æ ¸å¿ƒæŠ€è¡“æŒ‘æˆ°</h3><p>åœ¨é€™æ¨£çš„ç·¨è¼¯ç’°å¢ƒä¸­ï¼Œé¢è‡¨ä»¥ä¸‹æŒ‘æˆ°ï¼š</p><ol><li><strong>é »ç¹çš„å…§å®¹è®Šæ›´</strong>ï¼šç”¨æˆ¶æŒçºŒè¼¸å…¥å’Œä¿®æ”¹å…§å®¹</li><li><strong>å¤šå­—æ®µåŒæ­¥</strong>ï¼šæ¨™é¡Œã€å…§å®¹ã€å¿«æ·éµéœ€è¦åŒæ™‚è¿½è¹¤</li><li><strong>æ€§èƒ½è€ƒé‡</strong>ï¼šé¿å…éåº¦é »ç¹çš„ API èª¿ç”¨</li><li><strong>ç”¨æˆ¶åé¥‹</strong>ï¼šæ¸…æ™°çš„ä¿å­˜ç‹€æ…‹æŒ‡ç¤º</li></ol><h3 id="æŠ€è¡“é¸å‹ç†ç”±"><a href="#æŠ€è¡“é¸å‹ç†ç”±" class="headerlink" title="æŠ€è¡“é¸å‹ç†ç”±"></a>æŠ€è¡“é¸å‹ç†ç”±</h3><p>æˆ‘å€‘é¸æ“‡ä»¥ä¸‹æŠ€è¡“æ£§ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æŠ€è¡“æ£§æ¶æ§‹</span><br><span class="line">â”œâ”€â”€ Next.js 14 (App Router) - å‰ç«¯æ¡†æ¶</span><br><span class="line">â”œâ”€â”€ Zustand - ç‹€æ…‹ç®¡ç†</span><br><span class="line">â”œâ”€â”€ TypeScript - é¡å‹å®‰å…¨</span><br><span class="line">â”œâ”€â”€ TipTap - å¯Œæ–‡æœ¬ç·¨è¼¯å™¨</span><br><span class="line">â””â”€â”€ Firebase - å¾Œç«¯æ•¸æ“šå­˜å„²</span><br></pre></td></tr></table></figure><p><strong>ç‚ºä»€éº¼é¸æ“‡é€™å€‹çµ„åˆï¼Ÿ</strong></p><ul><li><strong>Next.js 14</strong>ï¼šæä¾›ç¾ä»£åŒ–çš„ React é–‹ç™¼é«”é©—å’Œå“è¶Šçš„æ€§èƒ½</li><li><strong>Zustand</strong>ï¼šç›¸æ¯” Redux æ›´è¼•é‡ï¼Œä½†åŠŸèƒ½å®Œæ•´çš„ç‹€æ…‹ç®¡ç†æ–¹æ¡ˆ</li><li><strong>TypeScript</strong>ï¼šåœ¨è¤‡é›œçš„ç‹€æ…‹ç®¡ç†ä¸­æä¾›é¡å‹å®‰å…¨ä¿éšœ</li><li><strong>Firebase</strong>ï¼šç°¡åŒ–å¾Œç«¯é–‹ç™¼ï¼Œè®“æˆ‘å€‘å°ˆæ³¨æ–¼å‰ç«¯é‚è¼¯</li></ul><h2 id="ç³»çµ±æ¶æ§‹è¨­è¨ˆ"><a href="#ç³»çµ±æ¶æ§‹è¨­è¨ˆ" class="headerlink" title="ç³»çµ±æ¶æ§‹è¨­è¨ˆ"></a>ç³»çµ±æ¶æ§‹è¨­è¨ˆ</h2><h3 id="æ•´é«”æ¶æ§‹æ€è·¯"><a href="#æ•´é«”æ¶æ§‹æ€è·¯" class="headerlink" title="æ•´é«”æ¶æ§‹æ€è·¯"></a>æ•´é«”æ¶æ§‹æ€è·¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">è‡ªå‹•ä¿å­˜ç³»çµ±æ¶æ§‹</span><br><span class="line"></span><br><span class="line">     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">     â”‚                    UI çµ„ä»¶å±¤                    â”‚</span><br><span class="line">     â”‚                                                â”‚</span><br><span class="line">     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</span><br><span class="line">     â”‚   â”‚  ç·¨è¼¯å™¨çµ„ä»¶       â”‚   â”‚ SaveStatusIndicatorâ”‚ â”‚</span><br><span class="line">     â”‚   â”‚  (è¡¨å–®è¼¸å…¥)       â”‚   â”‚ (ä¿å­˜ç‹€æ…‹é¡¯ç¤º)       â”‚ â”‚</span><br><span class="line">     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span><br><span class="line">     â”‚                                                â”‚</span><br><span class="line">     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                           â”‚</span><br><span class="line">                           â–¼</span><br><span class="line">     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">     â”‚                   æ¥­å‹™é‚è¼¯å±¤                     â”‚</span><br><span class="line">     â”‚                                                â”‚</span><br><span class="line">     â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚</span><br><span class="line">     â”‚      â”‚         usePromptPageLogic         â”‚    â”‚</span><br><span class="line">     â”‚      â”‚  â€¢ è¡¨å–®ç‹€æ…‹ç®¡ç†                      â”‚    â”‚</span><br><span class="line">     â”‚      â”‚  â€¢ Debounce è‡ªå‹•ä¿å­˜                â”‚    â”‚</span><br><span class="line">     â”‚      â”‚  â€¢ æ•¸æ“šé©—è­‰                         â”‚    â”‚</span><br><span class="line">     â”‚      â”‚  â€¢ éŒ¯èª¤è™•ç†                         â”‚    â”‚</span><br><span class="line">     â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚</span><br><span class="line">     â”‚                                                â”‚</span><br><span class="line">     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                           â”‚</span><br><span class="line">                           â–¼</span><br><span class="line">     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">     â”‚                   ç‹€æ…‹ç®¡ç†å±¤                     â”‚</span><br><span class="line">     â”‚                                                â”‚</span><br><span class="line">     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚</span><br><span class="line">     â”‚   â”‚  useSaveStore   â”‚   â”‚  usePromptStore    â”‚ â”‚</span><br><span class="line">     â”‚   â”‚  (ä¿å­˜ç‹€æ…‹)      â”‚   â”‚  (æ¥­å‹™æ•¸æ“š)          â”‚ â”‚</span><br><span class="line">     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚</span><br><span class="line">     â”‚                                                â”‚</span><br><span class="line">     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                           â”‚</span><br><span class="line">                           â–¼</span><br><span class="line">     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">     â”‚                     API å±¤                     â”‚</span><br><span class="line">     â”‚                                                â”‚</span><br><span class="line">     â”‚               Firebase/REST API                â”‚</span><br><span class="line">     â”‚                                                â”‚</span><br><span class="line">     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure><h3 id="æ ¸å¿ƒè¨­è¨ˆåŸå‰‡"><a href="#æ ¸å¿ƒè¨­è¨ˆåŸå‰‡" class="headerlink" title="æ ¸å¿ƒè¨­è¨ˆåŸå‰‡"></a>æ ¸å¿ƒè¨­è¨ˆåŸå‰‡</h3><ol><li><strong>é—œæ³¨é»åˆ†é›¢</strong>ï¼šUIã€æ¥­å‹™é‚è¼¯ã€ç‹€æ…‹ç®¡ç†å„å¸å…¶è·</li><li><strong>å–®ä¸€è·è²¬</strong>ï¼šæ¯å€‹ Hook å’Œçµ„ä»¶éƒ½æœ‰æ˜ç¢ºçš„è²¬ä»»ç¯„åœ  </li><li><strong>å¯çµ„åˆæ€§</strong>ï¼šå°è€Œå°ˆç²¾çš„å‡½æ•¸å¯ä»¥éˆæ´»çµ„åˆ</li><li><strong>é¡å‹å®‰å…¨</strong>ï¼šå…¨ç¨‹ TypeScript ä¿è­·ï¼Œæ¸›å°‘é‹è¡Œæ™‚éŒ¯èª¤</li></ol><h2 id="æ ¸å¿ƒå·¥å…·"><a href="#æ ¸å¿ƒå·¥å…·" class="headerlink" title="æ ¸å¿ƒå·¥å…·"></a>æ ¸å¿ƒå·¥å…·</h2><h3 id="1-Debounce-é˜²æŠ–æ©Ÿåˆ¶"><a href="#1-Debounce-é˜²æŠ–æ©Ÿåˆ¶" class="headerlink" title="1. Debounce é˜²æŠ–æ©Ÿåˆ¶"></a>1. Debounce é˜²æŠ–æ©Ÿåˆ¶</h3><p>Debounce æ˜¯è‡ªå‹•ä¿å­˜çš„æ ¸å¿ƒæŠ€è¡“ï¼Œå®ƒèƒ½å»¶é²å‡½æ•¸åŸ·è¡Œç›´åˆ°åœæ­¢è§¸ç™¼ä¸€æ®µæ™‚é–“å¾Œã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">DebouncedFunction</span>&lt;T <span class="keyword">extends</span> (...<span class="attr">args</span>: <span class="built_in">unknown</span>[]) =&gt; <span class="built_in">unknown</span>&gt; = T &amp; &#123;</span><br><span class="line">  <span class="attr">cancel</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> debounce&lt;T <span class="keyword">extends</span> (...<span class="attr">args</span>: <span class="built_in">unknown</span>[]) =&gt; <span class="built_in">void</span>&gt;(</span><br><span class="line">  <span class="attr">func</span>: T, </span><br><span class="line">  <span class="attr">delay</span>: <span class="built_in">number</span></span><br><span class="line">): <span class="title class_">DebouncedFunction</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="attr">timer</span>: <span class="title class_">ReturnType</span>&lt;<span class="keyword">typeof</span> <span class="built_in">setTimeout</span>&gt;;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> debouncedFunc = <span class="keyword">function</span> (<span class="params">...args: Parameters&lt;T&gt;</span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">func</span>(...args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125; <span class="keyword">as</span> T;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æä¾›å–æ¶ˆæ©Ÿåˆ¶</span></span><br><span class="line">  (debouncedFunc <span class="keyword">as</span> <span class="title class_">DebouncedFunction</span>&lt;T&gt;).<span class="property">cancel</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> debouncedFunc <span class="keyword">as</span> <span class="title class_">DebouncedFunction</span>&lt;T&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>æ³›å‹è¨­è¨ˆ</strong>ï¼šæ”¯æŒä»»æ„å‡½æ•¸é¡å‹ï¼Œä¿æŒé¡å‹å®‰å…¨</li><li><strong>å–æ¶ˆæ©Ÿåˆ¶</strong>ï¼šæä¾› <code>cancel</code> æ–¹æ³•ï¼Œç¢ºä¿åœ¨çµ„ä»¶å¸è¼‰æ™‚æ¸…ç†è³‡æº</li></ul><p><strong>åœ¨å°ˆæ¡ˆå…§æ‡‰ç”¨ï¼š</strong><br>ç”¨æˆ¶æ¯æ¬¡æŒ‰éµéƒ½æœƒè§¸ç™¼ï¼Œä½†åªæœ‰åœæ­¢è¼¸å…¥ 1 ç§’å¾Œæ‰çœŸæ­£åŸ·è¡Œä¿å­˜ï¼Œé€™æ¨£æ—¢ä¿è­‰äº†æ•¸æ“šä¸ä¸Ÿå¤±ï¼Œåˆé¿å…äº†éåº¦é »ç¹çš„ API èª¿ç”¨ã€‚</p><h3 id="2-æ·±åº¦æ¯”è¼ƒå·¥å…·"><a href="#2-æ·±åº¦æ¯”è¼ƒå·¥å…·" class="headerlink" title="2. æ·±åº¦æ¯”è¼ƒå·¥å…·"></a>2. æ·±åº¦æ¯”è¼ƒå·¥å…·</h3><p>ç‚ºäº†é¿å…ä¸å¿…è¦çš„ä¿å­˜è§¸ç™¼ï¼Œæœƒéœ€è¦ç²¾ç¢ºåˆ¤æ–·æ•¸æ“šæ˜¯å¦çœŸçš„æœ‰è®Šæ›´ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deepEqual = (<span class="attr">obj1</span>: <span class="built_in">unknown</span>, <span class="attr">obj2</span>: <span class="built_in">unknown</span>): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¿«é€Ÿè·¯å¾‘ï¼šç›¸åŒå¼•ç”¨æˆ–ç›¸åŒåŸå§‹å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (obj1 === obj2) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// null æˆ– undefined è™•ç†</span></span><br><span class="line">  <span class="keyword">if</span> (obj1 == <span class="literal">null</span> || obj2 == <span class="literal">null</span>) <span class="keyword">return</span> obj1 === obj2;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// é¡å‹ä¸åŒç›´æ¥è¿”å› false</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj1 !== <span class="keyword">typeof</span> obj2) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// åŸå§‹é¡å‹ç›´æ¥æ¯”è¼ƒ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj1 !== <span class="string">&#x27;object&#x27;</span>) <span class="keyword">return</span> obj1 === obj2;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å°è±¡æ·±åº¦æ¯”è¼ƒé‚è¼¯...</span></span><br><span class="line">  <span class="comment">// (çœç•¥å…·é«”å¯¦ç¾ç´°ç¯€)</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>ç‚ºä»€éº¼æœƒéœ€è¦æ­¤ä¸€æ¯”è¼ƒå·¥å…·ï¼Ÿ</strong><br>åœ¨ JavaScript ä¸­ï¼Œå°ç‰©ä»¶é€²è¡Œæ·ºå±¤æ¯”è¼ƒæ™‚ï¼Œå¦‚æœå®ƒå€‘çš„å¼•ç”¨ä¸åŒï¼Œå³ä½¿å…§å®¹å®Œå…¨ç›¸åŒï¼Œçµæœä¹Ÿæœƒæ˜¯ falseã€‚æ·±åº¦æ¯”è¼ƒå‰‡èƒ½ç¢ºä¿åªæœ‰åœ¨å…§å®¹çœŸæ­£è®ŠåŒ–æ™‚æ‰è§¸ç™¼ä¿å­˜ã€‚</p><h3 id="3-ç‹€æ…‹ç®¡ç†æ¶æ§‹"><a href="#3-ç‹€æ…‹ç®¡ç†æ¶æ§‹" class="headerlink" title="3. ç‹€æ…‹ç®¡ç†æ¶æ§‹"></a>3. ç‹€æ…‹ç®¡ç†æ¶æ§‹</h3><h4 id="ä¿å­˜ç‹€æ…‹-Store"><a href="#ä¿å­˜ç‹€æ…‹-Store" class="headerlink" title="ä¿å­˜ç‹€æ…‹ Store"></a>ä¿å­˜ç‹€æ…‹ Store</h4><p>é€™å€‹ Store å°ˆé–€ç®¡ç†ä¿å­˜ç›¸é—œçš„ç‹€æ…‹ï¼Œæ”¯æŒå¤šå€‹æ–‡ä»¶åŒæ™‚ç·¨è¼¯çš„å ´æ™¯ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SaveState</span> &#123;</span><br><span class="line">  <span class="attr">isSaving</span>: <span class="built_in">boolean</span>;  </span><br><span class="line">  <span class="attr">promptSaveStates</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, &#123; </span><br><span class="line">    <span class="attr">lastSavedAt</span>: <span class="title class_">Date</span> | <span class="literal">null</span>;     <span class="comment">// æœ€å¾Œä¿å­˜æ™‚é–“</span></span><br><span class="line">    <span class="attr">hasSaveError</span>: <span class="built_in">boolean</span>;        <span class="comment">// æ˜¯å¦æœ‰ä¿å­˜éŒ¯èª¤</span></span><br><span class="line">    <span class="attr">isActive</span>: <span class="built_in">boolean</span>;            <span class="comment">// æ˜¯å¦æœ‰æœªä¿å­˜çš„è®Šæ›´</span></span><br><span class="line">  &#125;&gt;;</span><br><span class="line">  <span class="attr">setSaving</span>: <span class="function">(<span class="params">isSaving: <span class="built_in">boolean</span>, promptId?: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">setSaved</span>: <span class="function">(<span class="params">promptId: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">setSaveError</span>: <span class="function">(<span class="params">hasError: <span class="built_in">boolean</span>, promptId?: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="comment">// ... </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¤šå¯¦ä¾‹æ”¯æŒçš„è¨­è¨ˆè€ƒé‡ï¼š</strong><br>é€™ç¨®è¨­è¨ˆå…è¨±åŒæ™‚è¿½è¹¤å¤šå€‹æª”æ¡ˆçš„ä¿å­˜ç‹€æ…‹ï¼Œæ¯å€‹æª”æ¡ˆéƒ½æœ‰ç¨ç«‹çš„ç‹€æ…‹ç®¡ç†ï¼Œäº’ä¸å¹²æ“¾ã€‚<br>åœ¨æœ¬å°ˆæ¡ˆä¸­ï¼Œé€éä¿å­˜ç‹€æ…‹ Storeï¼ˆSave State Storeï¼‰çš„è¨­è¨ˆå¯¦ç¾å¤šå¯¦ä¾‹æ”¯æŒï¼š</p><ul><li>Zustand ä½œç‚ºé›†ä¸­ç‹€æ…‹ç®¡ç†å™¨</li><li>Zustand æä¾›ä¸€å€‹å…¨åŸŸçš„ Storeï¼Œç”¨ä¾†é›†ä¸­ç®¡ç†æ‰€æœ‰æª”æ¡ˆçš„ä¿å­˜ç‹€æ…‹ã€‚<br><code>Record&lt;string, ...&gt;</code> çµæ§‹ç®¡ç†å¤šæª”æ¡ˆç‹€æ…‹<br>promptSaveStates ä¸¦éåªå„²å­˜å–®ä¸€æª”æ¡ˆç‹€æ…‹ï¼Œè€Œæ˜¯æ¡ç”¨é¡ä¼¼å­—å…¸ï¼ˆMapï¼‰çš„çµæ§‹ï¼š<ul><li>éµï¼ˆKeyï¼‰ï¼šæ¯å€‹æª”æ¡ˆçš„å”¯ä¸€æ¨™è­˜ï¼ˆå¦‚ promptIdï¼‰</li><li>å€¼ï¼ˆValueï¼‰ï¼šåŒ…å«è©²æª”æ¡ˆç¨ç«‹ä¿å­˜ç‹€æ…‹ï¼ˆå¦‚ lastSavedAtã€hasSaveError ç­‰ï¼‰çš„ç‰©ä»¶</li></ul></li></ul><p>é‹ä½œæ–¹å¼èªªæ˜ï¼š</p><ul><li><p>ç•¶ä½ éœ€è¦æ›´æ–°æˆ–æŸ¥è©¢æŸå€‹æª”æ¡ˆçš„ç‹€æ…‹æ™‚ï¼Œæœƒä»¥è©²æª”æ¡ˆçš„ promptId ä½œç‚º keyï¼Œå¾ promptSaveStates é€™å€‹å¤§å€å¡Šä¸­æ‰¾åˆ°å°æ‡‰çš„ç‹€æ…‹ç‰©ä»¶é€²è¡Œæ“ä½œã€‚</p></li><li><p>ä¾‹å¦‚ï¼Œè‹¥è¦æ¨™è¨˜ ID ç‚º â€œfile-Aâ€ çš„æª”æ¡ˆæœ‰æœªä¿å­˜è®Šæ›´ï¼Œå°±æ›´æ–° promptSaveStates[â€˜file-Aâ€™] çš„ç‹€æ…‹ï¼›è€Œæ“ä½œ ID ç‚º â€œfile-Bâ€ çš„æª”æ¡ˆæ™‚ï¼Œå‰‡è®€å¯« promptSaveStates[â€˜file-Bâ€™] çš„ç‹€æ…‹ã€‚</p></li><li><p>ç”±æ–¼æ¯å€‹æª”æ¡ˆéƒ½é€éå”¯ä¸€ ID é€²è¡Œç´¢å¼•ï¼Œå› æ­¤å®ƒå€‘çš„ç‹€æ…‹å®Œå…¨éš”é›¢ï¼Œå¯¦ç¾å¤šå¯¦ä¾‹æ”¯æŒä¸”äº’ä¸å¹²æ“¾ã€‚</p></li></ul><p>é€™ç¨®è¨­è¨ˆä¸åƒ…èƒ½é›†ä¸­ç®¡ç†ï¼Œä¹Ÿèƒ½ä¿è­‰æ¯å€‹æª”æ¡ˆçš„ç‹€æ…‹ç¨ç«‹ï¼Œé©åˆéœ€è¦åŒæ™‚è™•ç†å¤šæª”æ¡ˆç‹€æ…‹çš„æ‡‰ç”¨å ´æ™¯ã€‚</p><h3 id="4-æ¥­å‹™é‚è¼¯æ•´åˆ"><a href="#4-æ¥­å‹™é‚è¼¯æ•´åˆ" class="headerlink" title="4. æ¥­å‹™é‚è¼¯æ•´åˆ"></a>4. æ¥­å‹™é‚è¼¯æ•´åˆ</h3><p>æ ¸å¿ƒçš„ <code>usePromptPageLogic</code> Hook è² è²¬æ•´åˆè¡¨å–®ç®¡ç†ã€è®Šæ›´æª¢æ¸¬å’Œè‡ªå‹•ä¿å­˜è§¸ç™¼ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">usePromptPageLogic</span> = (<span class="params">&#123; promptId &#125;: UsePromptPageLogicProps</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// è¡¨å–®ç‹€æ…‹ç®¡ç†</span></span><br><span class="line">  <span class="keyword">const</span> [formData, setFormData] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">shortcut</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å­˜å„²åˆå§‹å€¼ç”¨æ–¼è®Šæ›´æ¯”è¼ƒ</span></span><br><span class="line">  <span class="keyword">const</span> [initialValues, setInitialValues] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">shortcut</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¸å¿ƒä¿å­˜å‡½æ•¸</span></span><br><span class="line">  <span class="keyword">const</span> savePrompt = <span class="title function_">useCallback</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="comment">// ä¿å­˜é‚è¼¯å¯¦ç¾</span></span><br><span class="line">  &#125;, [<span class="comment">/* ä¾è³´é … */</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å‰µå»º debounced çš„ä¿å­˜å‡½æ•¸</span></span><br><span class="line">  <span class="keyword">const</span> debouncedSave = <span class="title function_">useMemo</span>(</span><br><span class="line">    <span class="function">() =&gt;</span> <span class="title function_">debounce</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">savePrompt</span>();</span><br><span class="line">    &#125;, <span class="number">1000</span>), <span class="comment">// 1 ç§’å»¶é²</span></span><br><span class="line">    [savePrompt]</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ ¸å¿ƒé‚è¼¯ï¼šæª¢æŸ¥è®Šæ›´ä¸¦è§¸ç™¼è‡ªå‹•ä¿å­˜</span></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> hasChanges = !<span class="title function_">deepEqual</span>(formData, initialValues);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (hasChanges &amp;&amp; currentPrompt) &#123;</span><br><span class="line">      <span class="title function_">setActive</span>(<span class="literal">true</span>, promptId);   <span class="comment">// æ¨™è¨˜ç‚ºæ´»èºç‹€æ…‹</span></span><br><span class="line">      <span class="title function_">debouncedSave</span>();             <span class="comment">// è§¸ç™¼å»¶é²ä¿å­˜</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!hasChanges) &#123;</span><br><span class="line">      <span class="title function_">setActive</span>(<span class="literal">false</span>, promptId);  <span class="comment">// æ¨™è¨˜ç‚ºéæ´»èºç‹€æ…‹</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ¸…ç†å‡½æ•¸ï¼šå–æ¶ˆå¾…åŸ·è¡Œçš„ä¿å­˜</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      debouncedSave.<span class="title function_">cancel</span>();</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;, [formData, initialValues, currentPrompt, debouncedSave, setActive, promptId]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å›è¡¨å–®è™•ç†å™¨å’Œç‹€æ…‹</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">// è¡¨å–®æ•¸æ“šå’Œè™•ç†å‡½æ•¸</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>é€™å€‹ Hook ï¼š</strong></p><ol><li><strong>è‡ªå‹•è§¸ç™¼æ©Ÿåˆ¶</strong>ï¼šé€šé <code>useEffect</code> ç›£è½è¡¨å–®æ•¸æ“šè®Šæ›´</li><li><strong>æ™ºèƒ½å»é‡</strong>ï¼šä½¿ç”¨ <code>deepEqual</code> é¿å…éŒ¯èª¤è§¸ç™¼</li><li><strong>ç‹€æ…‹åŒæ­¥</strong>ï¼šèˆ‡ Zustand store æ•´åˆ</li><li><strong>è³‡æºæ¸…ç†</strong>ï¼šç¢ºä¿çµ„ä»¶å¸è¼‰æ™‚å–æ¶ˆå¾…åŸ·è¡Œçš„ä¿å­˜</li></ol><h2 id="ç”¨æˆ¶é«”é©—å„ªåŒ–"><a href="#ç”¨æˆ¶é«”é©—å„ªåŒ–" class="headerlink" title="ç”¨æˆ¶é«”é©—å„ªåŒ–"></a>ç”¨æˆ¶é«”é©—å„ªåŒ–</h2><h3 id="1-UI-çš„å¯¦æ™‚ç‹€æ…‹åé¥‹"><a href="#1-UI-çš„å¯¦æ™‚ç‹€æ…‹åé¥‹" class="headerlink" title="1. UI çš„å¯¦æ™‚ç‹€æ…‹åé¥‹"></a>1. UI çš„å¯¦æ™‚ç‹€æ…‹åé¥‹</h3><p><code>SaveStatusIndicator</code> çµ„ä»¶æä¾›å³æ™‚çš„ä¿å­˜ç‹€æ…‹åé¥‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">SaveStatusIndicator</span> = (<span class="params">&#123; className = <span class="string">&#x27;&#x27;</span> &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [displayState, setDisplayState] = useState&lt;<span class="string">&#x27;idle&#x27;</span> | <span class="string">&#x27;saving&#x27;</span> | <span class="string">&#x27;saved&#x27;</span> | <span class="string">&#x27;error&#x27;</span>&gt;(<span class="string">&#x27;idle&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">renderContent</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">switch</span> (displayState) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;saving&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex items-center space-x-2 text-primary&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Spinner</span> <span class="attr">className</span>=<span class="string">&quot;h-3 w-3 animate-spin&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>ä¿å­˜ä¸­...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;saved&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex items-center space-x-2 text-green-600&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">CheckIcon</span> <span class="attr">className</span>=<span class="string">&quot;h-3 w-3&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>å·²ä¿å­˜æ‰€æœ‰æ›´æ”¹<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;error&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex items-center space-x-2 text-red-600&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ErrorIcon</span> <span class="attr">className</span>=<span class="string">&quot;h-3 w-3&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>ä¿å­˜å¤±æ•—<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">transition-all</span> <span class="attr">duration-200</span> $&#123;<span class="attr">className</span>&#125;`&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;renderContent()&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="éŒ¯èª¤è™•ç†èˆ‡å®¹éŒ¯è¨­è¨ˆ"><a href="#éŒ¯èª¤è™•ç†èˆ‡å®¹éŒ¯è¨­è¨ˆ" class="headerlink" title="éŒ¯èª¤è™•ç†èˆ‡å®¹éŒ¯è¨­è¨ˆ"></a>éŒ¯èª¤è™•ç†èˆ‡å®¹éŒ¯è¨­è¨ˆ</h2><h3 id="1-ç¶²è·¯ç•°å¸¸è™•ç†"><a href="#1-ç¶²è·¯ç•°å¸¸è™•ç†" class="headerlink" title="1. ç¶²è·¯ç•°å¸¸è™•ç†"></a>1. ç¶²è·¯ç•°å¸¸è™•ç†</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> savePrompt = <span class="title function_">useCallback</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="title function_">setSaving</span>(<span class="literal">true</span>, promptId);</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">updatePrompt</span>(promptId, updatedPrompt);</span><br><span class="line">    <span class="title function_">setSaved</span>(promptId);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// å€åˆ†ä¸åŒé¡å‹çš„éŒ¯èª¤</span></span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="comment">// èªè­‰å¤±æ•ˆï¼Œé‡å®šå‘ç™»éŒ„é </span></span><br><span class="line">      router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">status</span> === <span class="number">403</span>) &#123;</span><br><span class="line">      <span class="comment">// æ¬Šé™ä¸è¶³</span></span><br><span class="line">      <span class="title function_">setSaveError</span>(<span class="literal">true</span>, promptId);</span><br><span class="line">      <span class="title function_">showNotification</span>(<span class="string">&#x27;æ‚¨æ²’æœ‰ç·¨è¼¯æ­¤å…§å®¹çš„æ¬Šé™&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">status</span> &gt;= <span class="number">500</span>) &#123;</span><br><span class="line">      <span class="comment">// æœå‹™å™¨éŒ¯èª¤</span></span><br><span class="line">      <span class="title function_">setSaveError</span>(<span class="literal">true</span>, promptId);</span><br><span class="line">      <span class="title function_">showNotification</span>(<span class="string">&#x27;æœå‹™å™¨æš«æ™‚ç„¡æ³•éŸ¿æ‡‰ï¼Œè«‹ç¨å¾Œå†è©¦&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// å…¶ä»–éŒ¯èª¤</span></span><br><span class="line">      <span class="title function_">setSaveError</span>(<span class="literal">true</span>, promptId);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;ä¿å­˜æ™‚ç™¼ç”ŸéŒ¯èª¤:&quot;</span>, error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, [<span class="comment">/* ä¾è³´é … */</span>]);</span><br></pre></td></tr></table></figure><h2 id="å°ˆæ¡ˆå¯¦ä½œå…§æ€§èƒ½å„ªåŒ–ç­–ç•¥"><a href="#å°ˆæ¡ˆå¯¦ä½œå…§æ€§èƒ½å„ªåŒ–ç­–ç•¥" class="headerlink" title="å°ˆæ¡ˆå¯¦ä½œå…§æ€§èƒ½å„ªåŒ–ç­–ç•¥"></a>å°ˆæ¡ˆå¯¦ä½œå…§æ€§èƒ½å„ªåŒ–ç­–ç•¥</h2><h3 id="1-å…§å­˜å„ªåŒ–"><a href="#1-å…§å­˜å„ªåŒ–" class="headerlink" title="1. å…§å­˜å„ªåŒ–"></a>1. å…§å­˜å„ªåŒ–</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ useCallback é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</span></span><br><span class="line"><span class="keyword">const</span> handleNameChange = <span class="title function_">useCallback</span>(<span class="function">(<span class="params">e: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">updateFormField</span>(<span class="string">&#x27;name&#x27;</span>, e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">&#125;, [updateFormField]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ useMemo ç·©å­˜è¨ˆç®—çµæœ</span></span><br><span class="line"><span class="keyword">const</span> debouncedSave = <span class="title function_">useMemo</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> <span class="title function_">debounce</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">savePrompt</span>();</span><br><span class="line">  &#125;, <span class="number">1000</span>),</span><br><span class="line">  [savePrompt]</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="3-ç‹€æ…‹æ›´æ–°å„ªåŒ–"><a href="#3-ç‹€æ…‹æ›´æ–°å„ªåŒ–" class="headerlink" title="3. ç‹€æ…‹æ›´æ–°å„ªåŒ–"></a>3. ç‹€æ…‹æ›´æ–°å„ªåŒ–</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ Zustand çš„æ·ºå±¤æ¯”è¼ƒé¿å…ä¸å¿…è¦çš„è¨‚é–±è§¸ç™¼</span></span><br><span class="line"><span class="keyword">const</span> &#123; isSaving, getSaveStateForPrompt &#125; = <span class="title function_">useSaveStore</span>(</span><br><span class="line">  <span class="title function_">useShallow</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">isSaving</span>: state.<span class="property">isSaving</span>,</span><br><span class="line">    <span class="attr">getSaveStateForPrompt</span>: state.<span class="property">getSaveStateForPrompt</span></span><br><span class="line">  &#125;))</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ¶é«”é©—æ”¹å–„"><a href="#ç”¨æˆ¶é«”é©—æ”¹å–„" class="headerlink" title="ç”¨æˆ¶é«”é©—æ”¹å–„"></a>ç”¨æˆ¶é«”é©—æ”¹å–„</h3><ol><li>ç”¨æˆ¶ç„¡éœ€æ‰‹å‹•ä¿å­˜ï¼Œå°ˆæ³¨æ–¼å…§å®¹å‰µä½œ</li><li>æ¸…æ™°çš„ä¿å­˜ç‹€æ…‹æŒ‡ç¤ºï¼Œç”¨æˆ¶å§‹çµ‚äº†è§£ç›®å‰ç·¨è¼¯ç‹€æ…‹</li></ol><h2 id="é©ç”¨å ´æ™¯èˆ‡æ“´å±•"><a href="#é©ç”¨å ´æ™¯èˆ‡æ“´å±•" class="headerlink" title="é©ç”¨å ´æ™¯èˆ‡æ“´å±•"></a>é©ç”¨å ´æ™¯èˆ‡æ“´å±•</h2><h3 id="å°çµ"><a href="#å°çµ" class="headerlink" title="å°çµ"></a>å°çµ</h3><p>é€šéé€™å€‹çœŸå¯¦é …ç›®çš„å¯¦è¸ï¼Œæˆ‘å­¸åˆ°äº†ï¼š</p><ul><li><strong>å¦‚ä½•è¨­è¨ˆå¯æ“´å±•çš„å‰ç«¯æ¶æ§‹</strong>ï¼šæ¨¡å¡ŠåŒ–è¨­è¨ˆè®“ç³»çµ±æ˜“æ–¼ç¶­è­·å’Œæ“´å±•</li><li><strong>ç‹€æ…‹ç®¡ç†çš„æœ€ä½³å¯¦è¸</strong>ï¼šZustand ä½œç‚ºè¼•é‡ç´šä½†åŠŸèƒ½å®Œå–„çš„ç‹€æ…‹ç®¡ç†å·¥å…·ï¼Œå¸¶ä¾†é«˜æ•ˆçš„è§£æ±ºæ–¹æ¡ˆ</li><li><strong>æ€§èƒ½å„ªåŒ–çš„å…·é«”æŠ€å·§</strong>ï¼šå¾ debounce åˆ°å…§å­˜ç®¡ç†ï¼Œç´°ç·»èª¿æ ¡æå‡æ•´é«”æ•ˆ</li><li><strong>ç”¨æˆ¶é«”é©—è¨­è¨ˆçš„é‡è¦æ€§</strong>ï¼šæŠ€è¡“å¯¦ç¾éœ€è¦ç‚ºç”¨æˆ¶é«”é©—æœå‹™</li></ul><p>é€™å€‹é …ç›®é«”ç¾äº†ç¾ä»£å‰ç«¯é–‹ç™¼çš„é«˜åº¦è¤‡é›œæ€§ï¼Œä¹Ÿè­‰æ˜äº†åªè¦æœ‰åˆç†çš„æ¶æ§‹è¨­è¨ˆå’Œé‚è¼¯å¯¦ç¾ï¼Œå°±èƒ½æ‰“é€ å‡ºç©©å®šä¸”é«˜æ•ˆçš„ç”¨æˆ¶é«”é©—ã€‚è‡ªå‹•ä¿å­˜åŠŸèƒ½é›–ç„¶çœ‹ä¼¼ç°¡å–®ï¼Œä½†è¦é”åˆ°ç©©å®šæ€§èˆ‡æµæš¢é«”é©—ï¼ŒèƒŒå¾Œéœ€è¦é¢å°è«¸å¤šç´°ç¯€èˆ‡é‚Šç•Œæƒ…å¢ƒçš„æŒ‘æˆ°ã€‚</p>]]></content>
    
    
    <summary type="html">Implementing auto-save functionality with Zustand in Next.js 14 to enhance user experience and data security.</summary>
    
    
    
    <category term="side-project" scheme="https://eva813.github.io/categories/side-project/"/>
    
    
    <category term="side-project" scheme="https://eva813.github.io/tags/side-project/"/>
    
    <category term="Next.js" scheme="https://eva813.github.io/tags/Next-js/"/>
    
  </entry>
  
  <entry>
    <title>Next.js Middleware ä¸­çš„èº«ä»½é©—è­‰ï¼šEdge Runtime é™åˆ¶èˆ‡è§£æ±ºæ–¹æ¡ˆ</title>
    <link href="https://eva813.github.io/2025/05/17/side-project-EdgeRuntime/"/>
    <id>https://eva813.github.io/2025/05/17/side-project-EdgeRuntime/</id>
    <published>2025-05-17T11:06:42.000Z</published>
    <updated>2025-09-07T01:00:35.821Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨åšä¸€å€‹ Side Project æ™‚ï¼Œæˆ‘æƒ³ä¿è­·éƒ¨åˆ†é é¢ï¼ˆåƒæ˜¯ /dashboardï¼‰éœ€è¦ç™»å…¥æ‰èƒ½è¨ªå•ï¼Œæ–¼æ˜¯æ±ºå®šä½¿ç”¨ Next.js çš„ Middleware åŠŸèƒ½ä¾†é€²è¡Œ JWT èº«ä»½é©—è­‰ã€‚</p><p>ç†è«–ä¸Šæ‡‰è©²å¾ˆç°¡å–®â€”â€”å¾ Cookie æŠ“ tokenï¼Œç”¨ jsonwebtoken é©—è­‰å®ƒã€‚ä½†å¾ˆå¿«æˆ‘å°±é‡åˆ°é˜»ç¤™ï¼šåœ¨ Middleware ä¸­ç”¨ verify() è§£ tokenï¼Œç«Ÿç„¶ç›´æ¥å ±éŒ¯ï¼Œå®Œå…¨ç„¡æ³•é‹è¡Œã€‚</p><h2 id="ç‚ºä»€éº¼-jsonwebtoken-åœ¨-Middleware-è£¡å¤±æ•—ï¼Ÿ"><a href="#ç‚ºä»€éº¼-jsonwebtoken-åœ¨-Middleware-è£¡å¤±æ•—ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼ jsonwebtoken åœ¨ Middleware è£¡å¤±æ•—ï¼Ÿ"></a>ç‚ºä»€éº¼ jsonwebtoken åœ¨ Middleware è£¡å¤±æ•—ï¼Ÿ</h2><p>ç•¶ä½ è©¦åœ–é€™æ¨£å¯«æ™‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;next/server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; verify &#125; <span class="keyword">from</span> <span class="string">&#x27;jsonwebtoken&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> token = request.<span class="property">cookies</span>.<span class="title function_">get</span>(<span class="string">&#x27;token&#x27;</span>)?.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> decoded = <span class="title function_">verify</span>(token, process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>); <span class="comment">// âŒ æœƒå ±éŒ¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">next</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;/login&#x27;</span>, request.<span class="property">url</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœƒå‡ºç¾é€™å€‹éŒ¯èª¤è¨Šæ¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Error</span>: <span class="title class_">The</span> <span class="title class_">Edge</span> <span class="title class_">Runtime</span> does not support <span class="title class_">Node</span>.<span class="property">js</span> <span class="string">&#x27;crypto&#x27;</span> <span class="variable language_">module</span>.</span><br></pre></td></tr></table></figure><p>é€™ä»£è¡¨ä½ ä¸èƒ½åœ¨ Middleware ä¸­ä½¿ç”¨ Node.js çš„æŸäº›å¥—ä»¶ï¼Œåƒæ˜¯ cryptoã€‚</p><h3 id="Edge-Runtime-æ˜¯ä»€éº¼ï¼Ÿ"><a href="#Edge-Runtime-æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="Edge Runtime æ˜¯ä»€éº¼ï¼Ÿ"></a>Edge Runtime æ˜¯ä»€éº¼ï¼Ÿ</h3><p>Next.js çš„ Middleware æ˜¯åœ¨ Edge Runtime ä¸ŠåŸ·è¡Œçš„ï¼Œé€™å€‹ç’°å¢ƒæ¥è¿‘æ–¼ç€è¦½å™¨ï¼Œä¸å…·å‚™å®Œæ•´çš„ Node.js APIã€‚æ‰€ä»¥ jsonwebtoken é€™ç¨®ä¾è³´ Node.js crypto æ¨¡çµ„çš„å‡½å¼åº«åœ¨é€™è£¡ç„¡æ³•é‹ä½œã€‚</p><h2 id="è§£æ³•ä¸€ï¼šä½¿ç”¨-jose-å‡½å¼åº«-ï¼ˆæ¡ç”¨æ–¹å¼ï¼‰"><a href="#è§£æ³•ä¸€ï¼šä½¿ç”¨-jose-å‡½å¼åº«-ï¼ˆæ¡ç”¨æ–¹å¼ï¼‰" class="headerlink" title="è§£æ³•ä¸€ï¼šä½¿ç”¨ jose å‡½å¼åº« ï¼ˆæ¡ç”¨æ–¹å¼ï¼‰"></a>è§£æ³•ä¸€ï¼šä½¿ç”¨ jose å‡½å¼åº« ï¼ˆæ¡ç”¨æ–¹å¼ï¼‰</h2><p>jose æ˜¯å°ˆé–€è¨­è¨ˆä¾†å…¼å®¹ Web Crypto API çš„ JWT å‡½å¼åº«ï¼Œå¯ä»¥åœ¨ Edge Runtime ä¸­é †åˆ©é‹ä½œã€‚</p><h3 id="Middleware-é©—è­‰ç¯„ä¾‹ï¼š"><a href="#Middleware-é©—è­‰ç¯„ä¾‹ï¼š" class="headerlink" title="Middleware é©—è­‰ç¯„ä¾‹ï¼š"></a>Middleware é©—è­‰ç¯„ä¾‹ï¼š</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;next/server&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; jwtVerify &#125; <span class="keyword">from</span> <span class="string">&#x27;jose&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> token = request.<span class="property">cookies</span>.<span class="title function_">get</span>(<span class="string">&#x27;token&#x27;</span>)?.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;/login&#x27;</span>, request.<span class="property">url</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> secret = <span class="keyword">new</span> <span class="title class_">TextEncoder</span>().<span class="title function_">encode</span>(process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>); <span class="comment">// Web API å…¼å®¹</span></span><br><span class="line">    <span class="keyword">const</span> &#123; payload &#125; = <span class="keyword">await</span> <span class="title function_">jwtVerify</span>(token, secret);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½ å¯ä»¥é¸æ“‡æŠŠ payload å‚³çµ¦ä¸‹æ¸¸ä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">const</span> requestHeaders = <span class="keyword">new</span> <span class="title class_">Headers</span>(request.<span class="property">headers</span>);</span><br><span class="line">    requestHeaders.<span class="title function_">set</span>(<span class="string">&#x27;x-user-id&#x27;</span>, payload.<span class="property">sub</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">next</span>(&#123;</span><br><span class="line">      <span class="attr">request</span>: &#123;</span><br><span class="line">        <span class="attr">headers</span>: requestHeaders,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;/login&#x27;</span>, request.<span class="property">url</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="attr">matcher</span>: [<span class="string">&#x27;/dashboard/:path*&#x27;</span>, <span class="string">&#x27;/api/protected/:path*&#x27;</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>ç„¡éœ€é¡å¤– API å‘¼å«</li><li>jose æ˜¯é‡å° Web ç’°å¢ƒå„ªåŒ–çš„å‡½å¼åº«ï¼Œæ•ˆèƒ½å¥½ã€å…¼å®¹æ€§å¼·</li></ul><h2 id="è§£æ³•äºŒï¼šå°‡é©—è­‰é‚è¼¯ç§»è‡³-API-Route"><a href="#è§£æ³•äºŒï¼šå°‡é©—è­‰é‚è¼¯ç§»è‡³-API-Route" class="headerlink" title="è§£æ³•äºŒï¼šå°‡é©—è­‰é‚è¼¯ç§»è‡³ API Route"></a>è§£æ³•äºŒï¼šå°‡é©—è­‰é‚è¼¯ç§»è‡³ API Route</h2><p>å¦‚æœä½ å·²ç¶“æ·±åº¦ä¾è³´ jsonwebtokenï¼Œå¯ä»¥å°‡ JWT é©—è­‰é‚è¼¯æ”¾åˆ° API Routeï¼Œç”± Middleware å‘¼å«ã€‚</p><ul><li>API Route è™•ç†é©—è­‰</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/api/auth/verify.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; verify &#125; <span class="keyword">from</span> <span class="string">&#x27;jsonwebtoken&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">handler</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> token = req.<span class="property">body</span>.<span class="property">token</span>;</span><br><span class="line">    <span class="keyword">const</span> decoded = <span class="title function_">verify</span>(token, process.<span class="property">env</span>.<span class="property">JWT_SECRET</span>);</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123; <span class="attr">valid</span>: <span class="literal">true</span>, <span class="attr">user</span>: decoded &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123; <span class="attr">valid</span>: <span class="literal">false</span>, <span class="attr">error</span>: error.<span class="property">message</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Middleware å‘¼å«é©—è­‰ API</li></ul><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;next/server&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> token = request.<span class="property">cookies</span>.<span class="title function_">get</span>(<span class="string">&#x27;token&#x27;</span>)?.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;/login&#x27;</span>, request.<span class="property">url</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`<span class="subst">$&#123;request.nextUrl.origin&#125;</span>/api/auth/verify`</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; token &#125;),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!result.<span class="property">valid</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">redirect</span>(<span class="keyword">new</span> <span class="title function_">URL</span>(<span class="string">&#x27;/login&#x27;</span>, request.<span class="property">url</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¢åŠ ä¸€æ¬¡å…§éƒ¨ API å‘¼å«</li><li>è¼ƒå½±éŸ¿æ•ˆèƒ½èˆ‡ä¼ºæœå™¨è² è¼‰</li></ul><h2 id="ä½¿ç”¨-Web-Crypto-API"><a href="#ä½¿ç”¨-Web-Crypto-API" class="headerlink" title="ä½¿ç”¨ Web Crypto API"></a>ä½¿ç”¨ Web Crypto API</h2><p>é€²éšä½¿ç”¨è€…å¯ä»¥ç›´æ¥ç”¨ Web Crypto API å¯¦ä½œ JWT é©—è­‰ï¼ˆé€™æ˜¯ jose åº•å±¤çš„åšæ³•ï¼‰ï¼Œä½†éœ€è¦è™•ç† Base64 è§£ç¢¼ã€ç°½åé©—è­‰ã€payload æª¢æŸ¥ç­‰ç´°ç¯€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;next/server&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">verifyJWT</span>(<span class="params">token, secret</span>) &#123;</span><br><span class="line">  <span class="comment">// é€™è£¡éœ€è¦å¯¦ä½œ JWT é©—è­‰çš„å„å€‹æ­¥é©Ÿ</span></span><br><span class="line">  <span class="comment">// 1. è§£æ header å’Œ payload</span></span><br><span class="line">  <span class="comment">// 2. ä½¿ç”¨ crypto.subtle é©—è­‰ç°½å</span></span><br><span class="line">  <span class="comment">// 3. æª¢æŸ¥éæœŸæ™‚é–“ç­‰</span></span><br><span class="line">  <span class="comment">// æ³¨æ„ï¼šé€™æ˜¯ç°¡åŒ–çš„ç¤ºä¾‹ï¼Œå¯¦éš›å¯¦ä½œéœ€è¦æ›´å¤šç¨‹å¼ç¢¼</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> parts = token.<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (parts.<span class="property">length</span> !== <span class="number">3</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Invalid token format&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¯¦ä½œ JWT é©—è­‰é‚è¼¯...</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="comment">/* è§£ç¢¼å¾Œçš„ payload */</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request</span>) &#123;</span><br><span class="line">  <span class="comment">// JWT é©—è­‰é‚è¼¯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å°çµï¼š<br>åœ¨ Next.js Middleware ä¸­è™•ç†èº«ä»½é©—è­‰éœ€è¦æ³¨æ„ Edge Runtime çš„é™åˆ¶ã€‚ä½¿ç”¨ jose å‡½å¼åº«æ˜¯æœ€ç›´æ¥çš„è§£æ±ºæ–¹æ¡ˆï¼Œå®ƒå°ˆç‚º Web ç’°å¢ƒè¨­è¨ˆï¼Œèƒ½åœ¨ Edge Runtime ä¸­æ­£å¸¸å·¥ä½œã€‚</p>]]></content>
    
    
    <summary type="html">A project exploring the integration of Edge Runtime with Next.js and MongoDB.</summary>
    
    
    
    <category term="side-project" scheme="https://eva813.github.io/categories/side-project/"/>
    
    
    <category term="side-project" scheme="https://eva813.github.io/tags/side-project/"/>
    
    <category term="Next.js" scheme="https://eva813.github.io/tags/Next-js/"/>
    
  </entry>
  
  <entry>
    <title>Next.js API èˆ‡ MongoDB è¨­è¨ˆå¯¦ä½œï¼šæ•´åˆ NextAuth å¤šå…ƒé©—è­‰æ–¹å¼ï¼ˆCredentials + OAuthï¼‰</title>
    <link href="https://eva813.github.io/2025/05/17/side-project-mongoDB/"/>
    <id>https://eva813.github.io/2025/05/17/side-project-mongoDB/</id>
    <published>2025-05-17T10:23:24.000Z</published>
    <updated>2025-09-07T01:00:44.318Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨é–‹ç™¼ SaaS æˆ–å·¥å…·å‹æ‡‰ç”¨æ™‚ï¼Œã€Œä½¿ç”¨è€…é©—è­‰ç³»çµ±ã€å¾€å¾€æ˜¯é—œéµåŸºç¤è¨­æ–½ã€‚é€™ç¯‡æ–‡ç« å°‡åˆ†äº«æˆ‘å¦‚ä½•ä½¿ç”¨ Next.jsï¼ˆApp Routerï¼‰+ MongoDB + NextAuthï¼ŒåŒæ™‚æ”¯æ´ Google OAuth å’Œ è‡ªå®šç¾©å¸³å¯†ç™»å…¥ï¼Œä¸¦åˆ†äº«å°ˆæ¡ˆ mongoDB è³‡æ–™çµæ§‹èˆ‡ API æ¶æ§‹ã€‚</p><h2 id="MongoDB-è³‡æ–™æ¨¡å‹è¨­è¨ˆ"><a href="#MongoDB-è³‡æ–™æ¨¡å‹è¨­è¨ˆ" class="headerlink" title="MongoDB è³‡æ–™æ¨¡å‹è¨­è¨ˆ"></a>MongoDB è³‡æ–™æ¨¡å‹è¨­è¨ˆ</h2><p>ç‚ºäº†æ”¯æ´å¤šå…ƒç™»å…¥æ–¹å¼ï¼Œæˆ‘è¨­è¨ˆäº†ä»¥ä¸‹å¹¾å€‹é›†åˆï¼ˆCollectionsï¼‰ï¼š</p><ol><li>users - ä½¿ç”¨è€…åŸºæœ¬è³‡è¨Š</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  _id<span class="punctuation">:</span> ObjectId<span class="punctuation">,</span></span><br><span class="line">  email<span class="punctuation">:</span> String<span class="punctuation">,</span></span><br><span class="line">  name<span class="punctuation">:</span> String<span class="punctuation">,</span></span><br><span class="line">  createdAt<span class="punctuation">:</span> Date<span class="punctuation">,</span></span><br><span class="line">  updatedAt<span class="punctuation">:</span> Date</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>authProviders - è‡ªå®šç¾©é©—è­‰æ–¹å¼ï¼ˆå¸³å¯†ï¼‰</li></ol><span id="more"></span><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  userId<span class="punctuation">:</span> ObjectId<span class="punctuation">,</span> <span class="comment">// é—œè¯åˆ° users._id</span></span><br><span class="line">  type<span class="punctuation">:</span> <span class="string">&quot;credentials&quot;</span><span class="punctuation">,</span></span><br><span class="line">  passwordHash<span class="punctuation">:</span> String<span class="punctuation">,</span> <span class="comment">// bcrypt åŠ å¯†</span></span><br><span class="line">  createdAt<span class="punctuation">:</span> Date<span class="punctuation">,</span></span><br><span class="line">  updatedAt<span class="punctuation">:</span> Date</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>folders - ä½¿ç”¨è€…è³‡æ–™å¤¾</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  _id<span class="punctuation">:</span> ObjectId<span class="punctuation">,</span></span><br><span class="line">  userId<span class="punctuation">:</span> ObjectId<span class="punctuation">,</span></span><br><span class="line">  name<span class="punctuation">:</span> String<span class="punctuation">,</span></span><br><span class="line">  description<span class="punctuation">:</span> String<span class="punctuation">,</span></span><br><span class="line">  createdAt<span class="punctuation">:</span> Date<span class="punctuation">,</span></span><br><span class="line">  updatedAt<span class="punctuation">:</span> Date</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="4"><li>snippets </li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  _id<span class="punctuation">:</span> ObjectId<span class="punctuation">,</span></span><br><span class="line">  userId<span class="punctuation">:</span> ObjectId<span class="punctuation">,</span></span><br><span class="line">  folderId<span class="punctuation">:</span> ObjectId<span class="punctuation">,</span></span><br><span class="line">  name<span class="punctuation">:</span> String<span class="punctuation">,</span></span><br><span class="line">  content<span class="punctuation">:</span> String<span class="punctuation">,</span></span><br><span class="line">  shortcut<span class="punctuation">:</span> String<span class="punctuation">,</span></span><br><span class="line">  createdAt<span class="punctuation">:</span> Date<span class="punctuation">,</span></span><br><span class="line">  updatedAt<span class="punctuation">:</span> Date</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="NextAuth-èˆ‡é©—è­‰æµç¨‹è¨­è¨ˆ"><a href="#NextAuth-èˆ‡é©—è­‰æµç¨‹è¨­è¨ˆ" class="headerlink" title="NextAuth èˆ‡é©—è­‰æµç¨‹è¨­è¨ˆ"></a>NextAuth èˆ‡é©—è­‰æµç¨‹è¨­è¨ˆ</h2><p>åœ¨é€™å€‹å°ˆæ¡ˆä¸­ï¼Œæˆ‘å°‡ç™»å…¥é©—è­‰åˆ†ç‚ºå…©æ¢è·¯å¾‘ï¼š</p><table><thead><tr><th>é©—è­‰æ–¹å¼</th><th>å¯¦ä½œæ–¹å¼</th><th>è³‡æ–™è¡¨ä½¿ç”¨</th></tr></thead><tbody><tr><td>Google ç™»å…¥</td><td>NextAuth OAuth Provider</td><td><code>accounts</code> (NextAuth è‡ªå‹•å»ºç«‹)</td></tr><tr><td>å¸³è™Ÿå¯†ç¢¼</td><td>è‡ªå®šç¾© API + bcrypt é©—è­‰</td><td><code>authProviders</code></td></tr></tbody></table><h2 id="NextAuth"><a href="#NextAuth" class="headerlink" title="NextAuth"></a>NextAuth</h2><p>ä½¿ç”¨ NextAuth æ­é… Google ç™»å…¥æ™‚ï¼ŒNextAuth æœƒè‡ªå‹•åœ¨è³‡æ–™åº«ä¸­å»ºç«‹ä¸¦ç®¡ç†ä¸€å€‹ accounts collectionï¼ˆè³‡æ–™è¡¨ï¼‰</p><p>é€™æ˜¯ NextAuth çš„å…§å»ºè¡Œç‚ºï¼Œç”¨ä¾†å„²å­˜èˆ‡ç¬¬ä¸‰æ–¹é©—è­‰ï¼ˆå¦‚ Googleã€GitHub ç­‰ï¼‰ç›¸é—œçš„è³‡è¨Šã€‚</p><p>ä¸‹é¢è©³ç´°è§£èªª NextAuth å¦‚ä½•ä½¿ç”¨ MongoDB ä¸­çš„ <code>accounts</code> collectionï¼š</p><h3 id="NextAuth-è‡ªå‹•å»ºç«‹çš„-Collections"><a href="#NextAuth-è‡ªå‹•å»ºç«‹çš„-Collections" class="headerlink" title="NextAuth è‡ªå‹•å»ºç«‹çš„ Collections"></a>NextAuth è‡ªå‹•å»ºç«‹çš„ Collections</h3><p>ç•¶ä½¿ç”¨ NextAuth èˆ‡ MongoDB æ•´åˆæ™‚ï¼ŒNextAuth æœƒå»ºç«‹ <strong><code>accounts</code></strong>ï¼šå„²å­˜ç¬¬ä¸‰æ–¹é©—è­‰è³‡è¨Š</p><h3 id="accounts-Collection-çš„çµæ§‹"><a href="#accounts-Collection-çš„çµæ§‹" class="headerlink" title="accounts Collection çš„çµæ§‹"></a><code>accounts</code> Collection çš„çµæ§‹</h3><p>ç•¶ä½¿ç”¨è€…é€é Google ç™»å…¥æ™‚ï¼ŒNextAuth æœƒåœ¨ <code>accounts</code> collection ä¸­å»ºç«‹ä¸€ç­†è³‡æ–™ï¼Œçµæ§‹å¦‚ä¸‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;_id&quot;</span>: <span class="string">&quot;ObjectId&quot;</span>,</span><br><span class="line">  <span class="string">&quot;userId&quot;</span>: <span class="string">&quot;ObjectId&quot;</span>, <span class="comment">// é—œè¯åˆ° users collection ä¸­çš„ä½¿ç”¨è€…</span></span><br><span class="line">  <span class="string">&quot;provider&quot;</span>: <span class="string">&quot;google&quot;</span>, <span class="comment">// é©—è­‰æä¾›è€…ï¼Œä¾‹å¦‚ google, github</span></span><br><span class="line">  <span class="string">&quot;providerAccountId&quot;</span>: <span class="string">&quot;google-account-id&quot;</span>, <span class="comment">// Google æä¾›çš„å¸³è™Ÿ ID</span></span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;oauth&quot;</span>, <span class="comment">// é©—è­‰é¡å‹</span></span><br><span class="line">  <span class="string">&quot;access_token&quot;</span>: <span class="string">&quot;google-access-token&quot;</span>,</span><br><span class="line">  <span class="string">&quot;id_token&quot;</span>: <span class="string">&quot;google-id-token&quot;</span>,</span><br><span class="line">  <span class="string">&quot;refresh_token&quot;</span>: <span class="string">&quot;google-refresh-token&quot;</span>,</span><br><span class="line">  <span class="string">&quot;expires_at&quot;</span>: <span class="number">1683500000</span>, <span class="comment">// Token éæœŸæ™‚é–“</span></span><br><span class="line">  <span class="string">&quot;scope&quot;</span>: <span class="string">&quot;email profile&quot;</span>,</span><br><span class="line">  <span class="string">&quot;token_type&quot;</span>: <span class="string">&quot;Bearer&quot;</span>,</span><br><span class="line">  <span class="string">&quot;session_state&quot;</span>: <span class="string">&quot;session-state&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="èˆ‡è‡ªå®šç¾©-authProviders-çš„å€åˆ¥"><a href="#èˆ‡è‡ªå®šç¾©-authProviders-çš„å€åˆ¥" class="headerlink" title="èˆ‡è‡ªå®šç¾© authProviders çš„å€åˆ¥"></a>èˆ‡è‡ªå®šç¾© <code>authProviders</code> çš„å€åˆ¥</h3><p>NextAuth è‡ªå‹•å»ºç«‹çš„ <code>accounts</code> collection èˆ‡è‡ªå®šç¾©çš„ <code>authProviders</code> collection æœ‰ä»¥ä¸‹å€åˆ¥ï¼š</p><ol><li><strong><code>accounts</code></strong>ï¼šç”± NextAuth è‡ªå‹•ç®¡ç†ï¼Œå°ˆé–€ç”¨æ–¼ç¬¬ä¸‰æ–¹é©—è­‰ï¼ˆå¦‚ Googleã€GitHub ç­‰ï¼‰ã€‚</li><li><strong><code>authProviders</code></strong>ï¼šç”±ä½ è‡ªå®šç¾©ï¼Œå°ˆé–€ç”¨æ–¼è‡ªå·±å¯¦ç¾çš„é©—è­‰æ–¹å¼ï¼ˆå¦‚å¸³è™Ÿå¯†ç¢¼ï¼‰ã€‚</li></ol><p>åœ¨ä½ ç›®å‰çš„ç™»å…¥ API åŸ·è¡Œæµç¨‹ä¸­ï¼ˆå¦‚ route.ts æª”æ¡ˆæ‰€ç¤ºï¼‰ï¼Œä½ ä½¿ç”¨ <code>authProviders</code> collection ä¾†å„²å­˜å’Œé©—è­‰ä½¿ç”¨è€…çš„å¯†ç¢¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> authProvider = <span class="keyword">await</span> db</span><br><span class="line">  .<span class="title function_">collection</span>(<span class="string">&quot;authProviders&quot;</span>)</span><br><span class="line">  .<span class="title function_">findOne</span>(&#123; <span class="attr">userId</span>: user.<span class="property">_id</span>, <span class="attr">type</span>: <span class="string">&quot;credentials&quot;</span> &#125;);</span><br><span class="line"><span class="keyword">if</span> (!authProvider || !authProvider.<span class="property">passwordHash</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(</span><br><span class="line">    &#123; <span class="attr">message</span>: <span class="string">&quot;invalid credentials&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">status</span>: <span class="number">401</span> &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="NextAuth-æ•´åˆè¨­è¨ˆ"><a href="#NextAuth-æ•´åˆè¨­è¨ˆ" class="headerlink" title="NextAuth æ•´åˆè¨­è¨ˆ"></a>NextAuth æ•´åˆè¨­è¨ˆ</h3><p> ä½¿ç”¨ MongoDB Adapter</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// src/app/api/auth/[...nextauth]/route.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MongoDBAdapter</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@auth/mongodb-adapter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handler = <span class="title class_">NextAuth</span>(&#123;</span><br><span class="line">  <span class="attr">adapter</span>: <span class="title class_">MongoDBAdapter</span>(clientPromise, &#123;</span><br><span class="line">    <span class="attr">databaseName</span>: process.<span class="property">env</span>.<span class="property">MONGODB_DB</span> || <span class="string">&quot;snippets-auth&quot;</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ”¯æ´å¤šç¨®-Provider"><a href="#æ”¯æ´å¤šç¨®-Provider" class="headerlink" title="æ”¯æ´å¤šç¨® Provider"></a>æ”¯æ´å¤šç¨® Provider</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">providers</span>: [</span><br><span class="line">  <span class="title class_">CredentialsProvider</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Credentials&quot;</span>,</span><br><span class="line">    <span class="attr">authorize</span>: <span class="keyword">async</span> (credentials) =&gt; &#123;</span><br><span class="line">      <span class="comment">// è‡ªå®šç¾©å¸³å¯†é©—è­‰é‚è¼¯</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="title class_">GoogleProvider</span>(&#123;</span><br><span class="line">    <span class="attr">clientId</span>: process.<span class="property">env</span>.<span class="property">GOOGLE_CLIENT_ID</span>!,</span><br><span class="line">    <span class="attr">clientSecret</span>: process.<span class="property">env</span>.<span class="property">GOOGLE_CLIENT_SECRET</span>!,</span><br><span class="line">  &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šç¾©-JWT-èˆ‡-Session-å›å‚³è³‡æ–™"><a href="#è‡ªå®šç¾©-JWT-èˆ‡-Session-å›å‚³è³‡æ–™" class="headerlink" title="è‡ªå®šç¾© JWT èˆ‡ Session å›å‚³è³‡æ–™"></a>è‡ªå®šç¾© JWT èˆ‡ Session å›å‚³è³‡æ–™</h3><p>ç‚ºäº†è®“ API èƒ½æ‹¿åˆ°ä½¿ç”¨è€…è³‡è¨Šï¼Œæˆ‘è‡ªå®šç¾©äº† jwt() èˆ‡ session() callbackï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å›å‚³ä½¿ç”¨è€…è³‡è¨Šçµ¦ token</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">jwt</span>(<span class="params">&#123; token, user, account &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (account?.<span class="property">provider</span> === <span class="string">&#x27;google&#x27;</span> &amp;&amp; user) &#123;</span><br><span class="line">    token.<span class="property">id</span> = user.<span class="property">id</span>;</span><br><span class="line">    token.<span class="property">accessToken</span> = account.<span class="property">access_token</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (account?.<span class="property">provider</span> === <span class="string">&#x27;credentials&#x27;</span> &amp;&amp; user) &#123;</span><br><span class="line">    token.<span class="property">id</span> = user.<span class="property">id</span>;</span><br><span class="line">    token.<span class="property">email</span> = user.<span class="property">email</span>;</span><br><span class="line">    token.<span class="property">token</span> = user.<span class="property">token</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> token;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°‡ token è³‡è¨Šæ›è¼‰åˆ° session.user</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">session</span>(<span class="params">&#123; session, token &#125;</span>) &#123;</span><br><span class="line">  session.<span class="property">user</span> = &#123;</span><br><span class="line">    <span class="attr">id</span>: token.<span class="property">id</span>,</span><br><span class="line">    <span class="attr">email</span>: token.<span class="property">email</span>,</span><br><span class="line">    <span class="attr">token</span>: token.<span class="property">token</span>,</span><br><span class="line">    <span class="attr">accessToken</span>: token.<span class="property">accessToken</span>,</span><br><span class="line">    <span class="attr">image</span>: <span class="keyword">typeof</span> token.<span class="property">image</span> === <span class="string">&#x27;string&#x27;</span> ? token.<span class="property">image</span> : <span class="literal">undefined</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> session;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€™è®“æˆ‘å€‘åœ¨å‰ç«¯å–å¾—ä½¿ç”¨è€…è³‡è¨Šï¼Œæˆ–æ˜¯è®“ Middleware é©—è­‰èº«ä»½æ›´æ–¹ä¾¿ã€‚</p><h2 id="API-è¨­è¨ˆæ¶æ§‹"><a href="#API-è¨­è¨ˆæ¶æ§‹" class="headerlink" title="API è¨­è¨ˆæ¶æ§‹"></a>API è¨­è¨ˆæ¶æ§‹</h2><p>æ‰€æœ‰ API æ¡ç”¨ RESTful å‘½åæ–¹å¼ï¼š</p><p>** èªè­‰ API **<br>POST /api/v1/auth/signup â€“ è¨»å†Šå¸³è™Ÿ</p><p>POST /api/v1/auth/login â€“ ç™»å…¥å–å¾—æ¬Šæ–</p><p>** è³‡æ–™ç®¡ç† API  **<br>GET/POST /api/v1/folders</p><p>GET/PUT/DELETE /api/v1/folders/[id]</p><p>GET/POST /api/v1/snippets</p><p>GET/PUT/DELETE /api/v1/snippets/[id]</p><p>** å¥åº·æª¢æŸ¥ **<br>GET /api/health â€“ MongoDB ç‹€æ…‹å›å ±</p><h2 id="API-Middleware-æ¬Šé™é©—è­‰"><a href="#API-Middleware-æ¬Šé™é©—è­‰" class="headerlink" title="API Middleware æ¬Šé™é©—è­‰"></a>API Middleware æ¬Šé™é©—è­‰</h2><p>ä½¿ç”¨ next-auth/jwt é©—è­‰ JWTï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/middleware.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request: NextRequest</span>) &#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–·å…¬é–‹è·¯å¾‘</span></span><br><span class="line">  <span class="keyword">const</span> publicPaths = [<span class="string">&quot;/api/v1/auth/login&quot;</span>, <span class="string">&quot;/api/v1/auth/signup&quot;</span>, <span class="string">&quot;/api/health&quot;</span>];</span><br><span class="line">  <span class="keyword">if</span> (publicPaths.<span class="title function_">includes</span>(path)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">next</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é©—è­‰æ¬Šæ–</span></span><br><span class="line">  <span class="keyword">const</span> token = <span class="keyword">await</span> <span class="title function_">getToken</span>(&#123; <span class="attr">req</span>: request, <span class="attr">secret</span>: process.<span class="property">env</span>.<span class="property">NEXTAUTH_SECRET</span> &#125;);</span><br><span class="line">  <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;Unauthorized&quot;</span> &#125;, &#123; <span class="attr">status</span>: <span class="number">401</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°‡ä½¿ç”¨è€… ID é™„åŠ åˆ°è«‹æ±‚æ¨™é ­ä¸­</span></span><br><span class="line">  <span class="keyword">const</span> res = <span class="title class_">NextResponse</span>.<span class="title function_">next</span>();</span><br><span class="line">  res.<span class="property">headers</span>.<span class="title function_">set</span>(<span class="string">&quot;x-user-id&quot;</span>, token.<span class="property">id</span> <span class="keyword">as</span> <span class="built_in">string</span>);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> ç¢ºä¿æ‰€æœ‰ä¿è­·çš„ API éƒ½æª¢æŸ¥ x-user-idï¼Œå¯¦ç¾ä½¿ç”¨è€…æ¬Šé™æ§ç®¡ã€‚</p><h2 id="å¯¦ä½œæ¶µè“‹äº†å®Œæ•´é©—è­‰è¨­è¨ˆï¼š"><a href="#å¯¦ä½œæ¶µè“‹äº†å®Œæ•´é©—è­‰è¨­è¨ˆï¼š" class="headerlink" title="å¯¦ä½œæ¶µè“‹äº†å®Œæ•´é©—è­‰è¨­è¨ˆï¼š"></a>å¯¦ä½œæ¶µè“‹äº†å®Œæ•´é©—è­‰è¨­è¨ˆï¼š</h2><ul><li>Google OAuth ç™»å…¥ï¼ˆé€é NextAuth è‡ªå‹•åŒ–ï¼‰</li><li>è‡ªå®šç¾©å¸³å¯†ç™»å…¥ï¼ˆä½¿ç”¨ bcrypt + MongoDBï¼‰</li><li>å¤šç¨®ç™»å…¥æ–¹å¼å…±ç”¨åŒä¸€å€‹ users é›†åˆ</li><li>API æ¬Šé™é©—è­‰ + Middleware æ§åˆ¶</li><li>ä½¿ç”¨ MongoDB Adapter æ•´åˆè³‡æ–™åº«èˆ‡ session ç®¡ç†</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨é–‹ç™¼ SaaS æˆ–å·¥å…·å‹æ‡‰ç”¨æ™‚ï¼Œã€Œä½¿ç”¨è€…é©—è­‰ç³»çµ±ã€å¾€å¾€æ˜¯é—œéµåŸºç¤è¨­æ–½ã€‚é€™ç¯‡æ–‡ç« å°‡åˆ†äº«æˆ‘å¦‚ä½•ä½¿ç”¨ Next.jsï¼ˆApp Routerï¼‰+ MongoDB + NextAuthï¼ŒåŒæ™‚æ”¯æ´ Google OAuth å’Œ è‡ªå®šç¾©å¸³å¯†ç™»å…¥ï¼Œä¸¦åˆ†äº«å°ˆæ¡ˆ mongoDB è³‡æ–™çµæ§‹èˆ‡ API æ¶æ§‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;MongoDB-è³‡æ–™æ¨¡å‹è¨­è¨ˆ&quot;&gt;&lt;a href=&quot;#MongoDB-è³‡æ–™æ¨¡å‹è¨­è¨ˆ&quot; class=&quot;headerlink&quot; title=&quot;MongoDB è³‡æ–™æ¨¡å‹è¨­è¨ˆ&quot;&gt;&lt;/a&gt;MongoDB è³‡æ–™æ¨¡å‹è¨­è¨ˆ&lt;/h2&gt;&lt;p&gt;ç‚ºäº†æ”¯æ´å¤šå…ƒç™»å…¥æ–¹å¼ï¼Œæˆ‘è¨­è¨ˆäº†ä»¥ä¸‹å¹¾å€‹é›†åˆï¼ˆCollectionsï¼‰ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;users - ä½¿ç”¨è€…åŸºæœ¬è³‡è¨Š&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  _id&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; ObjectId&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  email&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  name&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; String&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  createdAt&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; Date&lt;span class=&quot;punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  updatedAt&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; Date&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;punctuation&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;authProviders - è‡ªå®šç¾©é©—è­‰æ–¹å¼ï¼ˆå¸³å¯†ï¼‰&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="side-project" scheme="https://eva813.github.io/categories/side-project/"/>
    
    
    <category term="side-project" scheme="https://eva813.github.io/tags/side-project/"/>
    
    <category term="Next.js" scheme="https://eva813.github.io/tags/Next-js/"/>
    
    <category term="MongoDB" scheme="https://eva813.github.io/tags/MongoDB/"/>
    
    <category term="NextAuth" scheme="https://eva813.github.io/tags/NextAuth/"/>
    
  </entry>
  
  <entry>
    <title>åˆ·é¡Œç·´ç¿’ - Maximum Depth of Binary Tree è§£é¡Œç­–ç•¥</title>
    <link href="https://eva813.github.io/2025/05/01/leetcode-Maximum-Depth-of-Binary-Tree/"/>
    <id>https://eva813.github.io/2025/05/01/leetcode-Maximum-Depth-of-Binary-Tree/</id>
    <published>2025-05-01T05:01:11.000Z</published>
    <updated>2025-09-07T01:01:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>LeetCode é¡Œç›®å¤šæ¨£ï¼Œå°¤å…¶æ˜¯ã€ŒäºŒå…ƒæ¨¹ï¼ˆBinary Treeï¼‰ã€ç›¸é—œé¡Œå‹ï¼Œå®¹æ˜“è®“äººçœ‹äº†ç™¼æ„£ã€‚</p><p>æœ¬ç¯‡æ–‡ç« å°‡æ•™ä½ å¦‚ä½•é‡æ¸…è§£æ³•é‚è¼¯ï¼Œä¸¦å°‡äºŒå…ƒæ¨¹é¡Œå‹æ‹†è§£ç‚ºå…©å¤§é¡è§£é¡Œç­–ç•¥ï¼Œæ­é…ç¯„ä¾‹èˆ‡æ¨¡æ¿ï¼Œå¹«åŠ©ä½ ç”¨ DFSï¼ˆæ·±åº¦å„ªå…ˆæœå°‹ï¼‰æ›´ç³»çµ±åœ°è§£é¡Œ</p><h3 id="é¡å‹ä¸€ï¼šéæ­·å‹ï¼ˆTraversal-Typeï¼‰"><a href="#é¡å‹ä¸€ï¼šéæ­·å‹ï¼ˆTraversal-Typeï¼‰" class="headerlink" title="é¡å‹ä¸€ï¼šéæ­·å‹ï¼ˆTraversal Typeï¼‰"></a>é¡å‹ä¸€ï¼šéæ­·å‹ï¼ˆTraversal Typeï¼‰</h3><p>é€™é¡é¡Œç›®éœ€è¦ã€Œèµ°éæ•´æ£µæ¨¹çš„æ‰€æœ‰ç¯€é»ã€ï¼Œé€šå¸¸æ˜¯ç‚ºäº†è¨ˆç®—æŸç¨®ç¸½é‡ï¼Œä¾‹å¦‚ï¼š</p><ul><li>ç¯€é»ç¸½æ•¸</li><li>æœ€å¤§æ·±åº¦</li><li>æ‰€æœ‰è·¯å¾‘ç¸½å’Œ</li><li>è‘‰å­ç¯€é»çš„æ•¸é‡</li></ul><p>è§£é¡Œæ€è·¯</p><p>å¯æ ¹æ“šéœ€æ±‚ä½¿ç”¨ï¼š</p><ul><li><strong>å¾Œåºéæ­· + å›å‚³å€¼ return</strong> â†’ é©åˆéœ€è¦çµ„åˆå­æ¨¹çµæœçš„æƒ…æ³  </li><li><strong>å‰åºéæ­· + ç‹€æ…‹è®Šæ•¸è¿½è¹¤</strong> â†’ é©åˆéœ€è¦ç´¯åŠ æˆ–è¨˜éŒ„è·¯å¾‘ç‹€æ…‹çš„æƒ…æ³  </li></ul><h4 id="æ¨¡æ¿ï¼ˆå¾Œåº-returnï¼‰"><a href="#æ¨¡æ¿ï¼ˆå¾Œåº-returnï¼‰" class="headerlink" title="æ¨¡æ¿ï¼ˆå¾Œåº + returnï¼‰"></a>æ¨¡æ¿ï¼ˆå¾Œåº + returnï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">dfs</span>(<span class="params">node</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (node === <span class="literal">null</span>) <span class="keyword">return</span> baseValue;</span><br><span class="line">  <span class="keyword">const</span> left = <span class="title function_">dfs</span>(node.<span class="property">left</span>);</span><br><span class="line">  <span class="keyword">const</span> right = <span class="title function_">dfs</span>(node.<span class="property">right</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">combine</span>(left, right, node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ¨¡æ¿ï¼ˆå‰åº-ç‹€æ…‹è®Šæ•¸ï¼‰"><a href="#æ¨¡æ¿ï¼ˆå‰åº-ç‹€æ…‹è®Šæ•¸ï¼‰" class="headerlink" title="æ¨¡æ¿ï¼ˆå‰åº + ç‹€æ…‹è®Šæ•¸ï¼‰"></a>æ¨¡æ¿ï¼ˆå‰åº + ç‹€æ…‹è®Šæ•¸ï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> pathDepth = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">traverse</span>(<span class="params">node</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (node === <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  pathDepth++; <span class="comment">// éè¿´æ·±å…¥ï¼Œæ·±åº¦ +1</span></span><br><span class="line">  <span class="keyword">if</span> (node.<span class="property">left</span> === <span class="literal">null</span> &amp;&amp; node.<span class="property">right</span> === <span class="literal">null</span>) &#123;</span><br><span class="line">    result = <span class="title class_">Math</span>.<span class="title function_">max</span>(result, pathDepth); <span class="comment">// è‹¥ç‚ºè‘‰å­ï¼Œæ›´æ–°æœ€å¤§æ·±åº¦</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">traverse</span>(node.<span class="property">left</span>);</span><br><span class="line">  <span class="title function_">traverse</span>(node.<span class="property">right</span>);</span><br><span class="line"></span><br><span class="line">  pathDepth--; <span class="comment">// å›æ­¸</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="Maximum-Depth-of-Binary-Tree"><a href="#Maximum-Depth-of-Binary-Tree" class="headerlink" title="Maximum Depth of Binary Tree"></a>Maximum Depth of Binary Tree</h2><p>é¡Œç›®é€£çµï¼š<a href="https://leetcode.com/problems/maximum-depth-of-binary-tree/">104. Maximum Depth of Binary Tree</a>  </p><p>é¡Œç›®æè¿°:<br>çµ¦å®šä¸€æ£µäºŒå…ƒæ¨¹ï¼Œè«‹æ±‚å‡ºå®ƒçš„ã€Œæœ€å¤§æ·±åº¦ã€â€”â€”ä¹Ÿå°±æ˜¯å¾æ ¹ç¯€é»èµ°åˆ°æœ€é çš„è‘‰å­ç¯€é»æ‰€éœ€ç¶“éçš„ç¯€é»æ•¸é‡ã€‚</p><p>è§£é¡Œæ€è·¯ï¼šä½¿ç”¨å‰åºéæ­· + ç‹€æ…‹è®Šæ•¸è¿½è¹¤</p><ol><li><p>ä½¿ç”¨ depth è¿½è¹¤ç•¶å‰æ‰€åœ¨ç¬¬å¹¾å±¤</p></li><li><p>æ¯é‡åˆ°ä¸€å€‹è‘‰å­ç¯€é»ï¼Œå°±èˆ‡ <code>result</code> æ¯”è¼ƒä¸¦æ›´æ–°æœ€å¤§å€¼</p></li><li><p>æ‰€æœ‰ç¯€é»éæ­·å®Œç•¢å¾Œï¼Œ<code>result</code> å³ç‚ºæœ€å¤§æ·±åº¦</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">TreeNode</span>&#125; <span class="variable">root</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maxDepth = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> depth = <span class="number">0</span> </span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">traverse</span> = (<span class="params">node</span>) =&gt;&#123;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">if</span>(node === <span class="literal">null</span>) <span class="keyword">return</span></span><br><span class="line">        <span class="comment">// 1. é€²å…¥ç¯€é»ï¼šæ·±åº¦ +1</span></span><br><span class="line">        depth++</span><br><span class="line">        <span class="comment">// 2. å¦‚æœæ˜¯è‘‰å­ï¼ˆå·¦å³éƒ½æ²’æœ‰å­ç¯€é»ï¼‰ï¼Œå°±æ›´æ–° res</span></span><br><span class="line">        <span class="keyword">if</span>(node.<span class="property">left</span> === <span class="literal">null</span> &amp;&amp; node.<span class="property">right</span> === <span class="literal">null</span>)&#123;</span><br><span class="line">            result = <span class="title class_">Math</span>.<span class="title function_">max</span>(result, depth)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 3. ç¹¼çºŒéæ­¸å…©å´</span></span><br><span class="line">        <span class="title function_">traverse</span>(node.<span class="property">left</span>)</span><br><span class="line">        <span class="title function_">traverse</span>(node.<span class="property">right</span>)</span><br><span class="line">         <span class="comment">// 4. é›¢é–‹ç¯€é»ï¼šå›åˆ°çˆ¶å±¤ï¼Œæ·±åº¦ -1</span></span><br><span class="line">        depth--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">traverse</span>(root)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒé¡-Comparison-å‹-æ¯”è¼ƒå…©æ£µ-å…©ç¯€é»"><a href="#ç¬¬äºŒé¡-Comparison-å‹-æ¯”è¼ƒå…©æ£µ-å…©ç¯€é»" class="headerlink" title="ç¬¬äºŒé¡: Comparison å‹ - æ¯”è¼ƒå…©æ£µ/å…©ç¯€é»"></a>ç¬¬äºŒé¡: Comparison å‹ - æ¯”è¼ƒå…©æ£µ/å…©ç¯€é»</h3><p>é€™é¡é¡Œç›®ä¸å†åªæ˜¯å–®ç´”éæ­·ï¼Œè€Œæ˜¯éœ€è¦ã€Œæ¯”è¼ƒå…©å€‹ç¯€é»çš„çµæ§‹èˆ‡æ•¸å€¼æ˜¯å¦ä¸€è‡´ã€ï¼Œä¾‹å¦‚ï¼š</p><ul><li>åˆ¤æ–·å…©æ£µæ¨¹æ˜¯å¦ç›¸åŒï¼ˆSame Treeï¼‰</li><li>åˆ¤æ–·æ˜¯å¦ç‚ºå°ç¨±æ¨¹ï¼ˆSymmetric Treeï¼‰</li></ul><h3 id="è§£é¡Œæ€è·¯"><a href="#è§£é¡Œæ€è·¯" class="headerlink" title="è§£é¡Œæ€è·¯"></a>è§£é¡Œæ€è·¯</h3><ol><li>åŒæ­¥æ¯”è¼ƒå…©å€‹ç¯€é» <code>p</code> èˆ‡ <code>q</code></li><li>ç¢ºèªä¸‰ä»¶äº‹ï¼š<ul><li>æ˜¯å¦éƒ½ç‚º <code>null</code></li><li>æ˜¯å¦æœ‰ä¸€å€‹æ˜¯ <code>null</code>ï¼ˆå¦ä¸€å€‹ä¸æ˜¯ï¼‰</li><li>å…©ç¯€é»çš„å€¼æ˜¯å¦ç›¸ç­‰</li></ul></li><li>æœ€å¾Œéè¿´æ¯”å°å·¦å­æ¨¹èˆ‡å³å­æ¨¹æ˜¯å¦ä¸€è‡´</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">compare</span>(<span class="params">p, q</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (p === <span class="literal">null</span> &amp;&amp; q === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">if</span> (p === <span class="literal">null</span> || q === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">if</span> (p.<span class="property">val</span> !== q.<span class="property">val</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">compare</span>(p.<span class="property">left</span>, q.<span class="property">left</span>) &amp;&amp; <span class="title function_">compare</span>(p.<span class="property">right</span>, q.<span class="property">right</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‘¼æ‡‰-Maximum-Depth-of-Binary-Tree"><a href="#å‘¼æ‡‰-Maximum-Depth-of-Binary-Tree" class="headerlink" title="å‘¼æ‡‰ Maximum Depth of Binary Tree"></a>å‘¼æ‡‰ Maximum Depth of Binary Tree</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxDepth = <span class="keyword">function</span>(<span class="params">root</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> leftMax  = <span class="title function_">maxDepth</span>(root.<span class="property">left</span>);</span><br><span class="line">  <span class="keyword">let</span> rightMax = <span class="title function_">maxDepth</span>(root.<span class="property">right</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">1</span> + <span class="title class_">Math</span>.<span class="title function_">max</span>(leftMax, rightMax);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;LeetCode é¡Œç›®å¤šæ¨£ï¼Œå°¤å…¶æ˜¯ã€ŒäºŒå…ƒæ¨¹ï¼ˆBinary Treeï¼‰ã€ç›¸é—œé¡Œå‹ï¼Œå®¹æ˜“è®“äººçœ‹äº†ç™¼æ„£ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡æ–‡ç« å°‡æ•™ä½ å¦‚ä½•é‡æ¸…è§£æ³•é‚è¼¯ï¼Œä¸¦å°‡äºŒå…ƒæ¨¹é¡Œå‹æ‹†è§£ç‚ºå…©å¤§é¡è§£é¡Œç­–ç•¥ï¼Œæ­é…ç¯„ä¾‹èˆ‡æ¨¡æ¿ï¼Œå¹«åŠ©ä½ ç”¨ DFSï¼ˆæ·±åº¦å„ªå…ˆæœå°‹ï¼‰æ›´ç³»çµ±åœ°è§£é¡Œ&lt;/p&gt;
&lt;h3 id=&quot;é¡å‹ä¸€ï¼šéæ­·å‹ï¼ˆTraversal-Typeï¼‰&quot;&gt;&lt;a href=&quot;#é¡å‹ä¸€ï¼šéæ­·å‹ï¼ˆTraversal-Typeï¼‰&quot; class=&quot;headerlink&quot; title=&quot;é¡å‹ä¸€ï¼šéæ­·å‹ï¼ˆTraversal Typeï¼‰&quot;&gt;&lt;/a&gt;é¡å‹ä¸€ï¼šéæ­·å‹ï¼ˆTraversal Typeï¼‰&lt;/h3&gt;&lt;p&gt;é€™é¡é¡Œç›®éœ€è¦ã€Œèµ°éæ•´æ£µæ¨¹çš„æ‰€æœ‰ç¯€é»ã€ï¼Œé€šå¸¸æ˜¯ç‚ºäº†è¨ˆç®—æŸç¨®ç¸½é‡ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¯€é»ç¸½æ•¸&lt;/li&gt;
&lt;li&gt;æœ€å¤§æ·±åº¦&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰è·¯å¾‘ç¸½å’Œ&lt;/li&gt;
&lt;li&gt;è‘‰å­ç¯€é»çš„æ•¸é‡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è§£é¡Œæ€è·¯&lt;/p&gt;
&lt;p&gt;å¯æ ¹æ“šéœ€æ±‚ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¾Œåºéæ­· + å›å‚³å€¼ return&lt;/strong&gt; â†’ é©åˆéœ€è¦çµ„åˆå­æ¨¹çµæœçš„æƒ…æ³  &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‰åºéæ­· + ç‹€æ…‹è®Šæ•¸è¿½è¹¤&lt;/strong&gt; â†’ é©åˆéœ€è¦ç´¯åŠ æˆ–è¨˜éŒ„è·¯å¾‘ç‹€æ…‹çš„æƒ…æ³  &lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;æ¨¡æ¿ï¼ˆå¾Œåº-returnï¼‰&quot;&gt;&lt;a href=&quot;#æ¨¡æ¿ï¼ˆå¾Œåº-returnï¼‰&quot; class=&quot;headerlink&quot; title=&quot;æ¨¡æ¿ï¼ˆå¾Œåº + returnï¼‰&quot;&gt;&lt;/a&gt;æ¨¡æ¿ï¼ˆå¾Œåº + returnï¼‰&lt;/h4&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;dfs&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;node&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (node === &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; baseValue;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; left = &lt;span class=&quot;title function_&quot;&gt;dfs&lt;/span&gt;(node.&lt;span class=&quot;property&quot;&gt;left&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; right = &lt;span class=&quot;title function_&quot;&gt;dfs&lt;/span&gt;(node.&lt;span class=&quot;property&quot;&gt;right&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;combine&lt;/span&gt;(left, right, node);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;æ¨¡æ¿ï¼ˆå‰åº-ç‹€æ…‹è®Šæ•¸ï¼‰&quot;&gt;&lt;a href=&quot;#æ¨¡æ¿ï¼ˆå‰åº-ç‹€æ…‹è®Šæ•¸ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;æ¨¡æ¿ï¼ˆå‰åº + ç‹€æ…‹è®Šæ•¸ï¼‰&quot;&gt;&lt;/a&gt;æ¨¡æ¿ï¼ˆå‰åº + ç‹€æ…‹è®Šæ•¸ï¼‰&lt;/h4&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; result = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; pathDepth = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;traverse&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;node&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (node === &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pathDepth++; &lt;span class=&quot;comment&quot;&gt;// éè¿´æ·±å…¥ï¼Œæ·±åº¦ +1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (node.&lt;span class=&quot;property&quot;&gt;left&lt;/span&gt; === &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; node.&lt;span class=&quot;property&quot;&gt;right&lt;/span&gt; === &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    result = &lt;span class=&quot;title class_&quot;&gt;Math&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;max&lt;/span&gt;(result, pathDepth); &lt;span class=&quot;comment&quot;&gt;// è‹¥ç‚ºè‘‰å­ï¼Œæ›´æ–°æœ€å¤§æ·±åº¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;title function_&quot;&gt;traverse&lt;/span&gt;(node.&lt;span class=&quot;property&quot;&gt;left&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;title function_&quot;&gt;traverse&lt;/span&gt;(node.&lt;span class=&quot;property&quot;&gt;right&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pathDepth--; &lt;span class=&quot;comment&quot;&gt;// å›æ­¸&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="LeetCode" scheme="https://eva813.github.io/categories/LeetCode/"/>
    
    
    <category term="LeetCode" scheme="https://eva813.github.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>React é‡ç½®æŠ€å·§ï¼šReact Key èˆ‡ CSS offsetWidth</title>
    <link href="https://eva813.github.io/2025/04/16/react-key-reflow/"/>
    <id>https://eva813.github.io/2025/04/16/react-key-reflow/</id>
    <published>2025-04-16T12:03:42.000Z</published>
    <updated>2025-04-16T12:21:51.781Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å‰ç«¯é–‹ç™¼ä¸­ï¼Œå‹•ç•«èˆ‡äº’å‹•æ˜¯æå‡ç”¨æˆ¶é«”é©—çš„é—œéµå…ƒç´ ã€‚ç„¶è€Œï¼Œç•¶å‹•ç•«èˆ‡å…ƒä»¶ç‹€æ…‹ã€ç”Ÿå‘½å‘¨æœŸäº¤ç¹”åœ¨ä¸€èµ·æ™‚ï¼Œå¯¦ä½œä¸Šå°±å¯èƒ½é‡åˆ°å„ç¨®æŒ‘æˆ°ã€‚</p><p>é€™ç¯‡æ–‡ç« è¨˜éŒ„æˆ‘åœ¨ä¸€å€‹ React å°ˆæ¡ˆä¸­ï¼Œè§£æ±ºã€Œå‹•ç•«é‡è¤‡è§¸ç™¼èˆ‡é‡ç½®ã€å•é¡Œçš„éç¨‹ï¼Œæ·±å…¥æ¯”è¼ƒäº†ä½¿ç”¨ key é‡ç½®èˆ‡ CSS Reflowï¼ˆoffsetWidthï¼‰ é‡ç½®çš„æ–¹å¼</p><h2 id="å•é¡Œæ¦‚è¿°"><a href="#å•é¡Œæ¦‚è¿°" class="headerlink" title="å•é¡Œæ¦‚è¿°"></a>å•é¡Œæ¦‚è¿°</h2><p>åœ¨é€™å€‹å°ˆæ¡ˆä¸­ï¼Œæˆ‘æœ‰å…©å€‹è‡ªè¨‚çš„å…ƒä»¶ï¼Œå„è‡ªå…§éƒ¨åŒ…å«ä¸€å€‹ç›¸åŒçµæ§‹çš„ <code>&lt;input&gt;</code>ã€‚ç•¶ä½¿ç”¨è€…é»æ“ŠæŸå€‹æ“ä½œå¾Œï¼Œæˆ‘å¸Œæœ›é€™äº› inputï¼š</p><span id="more"></span><ul><li>åŸ·è¡Œä¸€æ¬¡ CSS å‹•ç•«ï¼ˆä¾‹å¦‚ fade-inï¼‰</li><li>è‡ªå‹•ç²å¾—ç„¦é»ï¼Œä»¥åˆ©ç«‹å³è¼¸å…¥å…§å®¹</li></ul><p>å¯¦å‹™æ“ä½œæ™‚å»ç™¼ç¾å‹•ç•«ç„¡æ³•æ­£å¸¸é‡æ–°è§¸ç™¼ã€‚é€éåˆ†æç™¼ç¾ï¼š</p><ul><li>ç”±æ–¼å…©å€‹å…ƒä»¶ input çµæ§‹ç›¸åŒï¼ŒReact ç‚ºæ•ˆèƒ½è€ƒé‡ï¼Œè¤‡ç”¨äº† DOMã€‚</li><li>å°è‡´ CSS å‹•ç•«ç„¡æ³•é‡æ–°è§¸ç™¼ï¼Œå³ä¾¿å¼·åˆ¶ re-render ä¹Ÿä¸ä¸€å®šèƒ½é †åˆ©é‡æ–°æ’­æ”¾ã€‚</li></ul><p>é€™æ™‚æˆ‘é–‹å§‹æ€è€ƒï¼šæœ‰æ²’æœ‰æ–¹æ³•å¯ä»¥ã€Œé‡ç½®å‹•ç•«ã€ï¼Œä½†ä¸è¦æ•´å€‹å…ƒä»¶éƒ½é‡å»ºï¼Ÿ</p><p>æˆ‘é–‹å§‹å°‹æ‰¾ã€Œèƒ½é‡ç½®å‹•ç•«ä½†ä¸éœ€é‡å»ºå…ƒä»¶ã€çš„æ–¹æ³•ï¼Œæœ€çµ‚ç™¼ç¾å…©å€‹å¯è¡Œæ–¹æ¡ˆã€‚</p><h3 id="æ–¹æ³•ä¸€ï¼šä½¿ç”¨-key-é‡å»ºå…ƒä»¶"><a href="#æ–¹æ³•ä¸€ï¼šä½¿ç”¨-key-é‡å»ºå…ƒä»¶" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä½¿ç”¨ key é‡å»ºå…ƒä»¶"></a>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ key é‡å»ºå…ƒä»¶</h3><p>åœ¨ React ä¸­ï¼Œæ¯å€‹å…ƒä»¶éƒ½å¯ä»¥é€é key ä¾†æ¨™ç¤ºå…¶å”¯ä¸€æ€§ã€‚ç•¶ key æ”¹è®Šæ™‚ï¼ŒReact æœƒï¼š</p><p>å¸è¼‰åŸæœ¬çš„å…ƒä»¶</p><p>æ›è¼‰ä¸€å€‹å…¨æ–°çš„å…ƒä»¶å¯¦ä¾‹</p><p>é€™è¡¨ç¤ºï¼šå…ƒä»¶æœƒå®Œå…¨é‡ç½®ï¼ŒåŒ…æ‹¬å…¶ stateã€effects å’Œå‹•ç•«æ•ˆæœã€‚</p><ul><li><strong>å„ªé»</strong>ï¼š<ul><li>å®Œæ•´é‡ç½®ç‹€æ…‹èˆ‡å‹•ç•«</li><li>ç´” React æ©Ÿåˆ¶ï¼Œç°¡å–®æ˜“æ‡‚</li></ul></li><li><strong>ç¼ºé»</strong>ï¼š<ul><li>æ•´å€‹å…ƒä»¶å¸è¼‰é‡å»ºï¼Œæ•ˆèƒ½æˆæœ¬é«˜</li><li>æ‰€æœ‰ effect é‡è·‘ä¸€éï¼Œéœ€æ³¨æ„å‰¯ä½œç”¨</li></ul></li></ul><p>ç¯„ä¾‹ç¨‹å¼ç¢¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [keyIndex, setKeyIndex] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleReset</span> = (<span class="params"></span>) =&gt; <span class="title function_">setKeyIndex</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleReset&#125;</span>&gt;</span>é‡ç½®å…ƒä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">InputBox</span> <span class="attr">key</span>=<span class="string">&#123;keyIndex&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">InputBox</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;fade-in&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">autoFocus</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">placeholder</span>=<span class="string">&quot;è¼¸å…¥ä¸€äº›å…§å®¹...&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>å„ªé»ï¼š<br>å¯å¾¹åº•é‡ç½®æ‰€æœ‰ç‹€æ…‹èˆ‡å‹•ç•«</li></ul><p>ä¸éœ€é¡å¤–æ“ä½œ DOMï¼Œç´”ç²¹é  React çš„ key æ©Ÿåˆ¶</p><ul><li>ç¼ºé»ï¼š<br>æ•´å€‹å…ƒä»¶æœƒè¢«å¸è¼‰èˆ‡é‡å»ºï¼Œæ•ˆèƒ½é–‹éŠ·è¼ƒå¤§</li></ul><p>æ‰€æœ‰å‰¯ä½œç”¨èˆ‡åˆå§‹åŒ–é‚è¼¯ï¼ˆå¦‚ useEffectï¼‰éƒ½æœƒé‡æ–°åŸ·è¡Œ</p><h3 id="æ–¹æ³•äºŒï¼šä½¿ç”¨-offsetWidth-å¼·åˆ¶-CSS-é‡æ’ï¼ˆReflowï¼‰"><a href="#æ–¹æ³•äºŒï¼šä½¿ç”¨-offsetWidth-å¼·åˆ¶-CSS-é‡æ’ï¼ˆReflowï¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šä½¿ç”¨ offsetWidth å¼·åˆ¶ CSS é‡æ’ï¼ˆReflowï¼‰"></a>æ–¹æ³•äºŒï¼šä½¿ç”¨ offsetWidth å¼·åˆ¶ CSS é‡æ’ï¼ˆReflowï¼‰</h3><p>å¦‚æœåªéœ€è¦ã€Œé‡æ’­å‹•ç•«ã€è€Œä¸éœ€è¦é‡ç½®æ•´å€‹å…ƒä»¶ç‹€æ…‹ï¼Œé‚£å…¶å¯¦ ä¸å¿…é‡å»º DOM å…ƒç´ ï¼Œæˆ‘å€‘å¯ä»¥ç”¨ CSS å‹•ç•«èˆ‡ DOM æ“ä½œä¾†é”æˆã€‚</p><p>åŸç†æ˜¯é€éï¼š</p><p>ç§»é™¤å‹•ç•«é¡åˆ¥</p><p>å­˜å– offsetWidth è§¸ç™¼ Reflow</p><p>é‡æ–°åŠ å…¥å‹•ç•«é¡åˆ¥</p><p>é€™æ¨£å°±èƒ½ã€Œé¨™éã€ç€è¦½å™¨èªç‚ºå‹•ç•«æ˜¯å…¨æ–°çš„ä¸€æ¬¡æ’­æ”¾ã€‚</p><ul><li><strong>å„ªé»</strong>ï¼š<ul><li>è¼•é‡ç´š DOM æ“ä½œ</li><li>é©åˆé »ç¹å‹•ç•«è§¸ç™¼</li></ul></li><li><strong>ç¼ºé»</strong>ï¼š<ul><li>éœ€é€é DOM æ“ä½œæˆ– state ç®¡ç† class</li><li>ç„¡æ³•é‡ç½®å…ƒä»¶å…§éƒ¨ç‹€æ…‹</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> element = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;inputElement&quot;</span>);</span><br><span class="line"></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;animate&quot;</span>);</span><br><span class="line"><span class="keyword">void</span> element.<span class="property">offsetWidth</span>;</span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;animate&quot;</span>);</span><br></pre></td></tr></table></figure><p>React å¯¦ä½œï¼ˆä½¿ç”¨ stateï¼‰ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">InputWithAnimation</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [animate, setAnimate] = <span class="title function_">useState</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">resetAnimation</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setAnimate</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">setAnimate</span>(<span class="literal">true</span>), <span class="number">10</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;resetAnimation&#125;</span>&gt;</span>é‡æ–°æ’­æ”¾å‹•ç•«<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&#123;animate</span> ? &quot;<span class="attr">fade-in</span>&quot; <span class="attr">:</span> &quot;&quot;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">autoFocus</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">placeholder</span>=<span class="string">&quot;è¼¸å…¥æ–‡å­—...&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>å„ªé»ï¼š<br>åªæ›´æ–° DOM å±¬æ€§ï¼Œä¸æœƒé€ æˆå…ƒä»¶é‡å»º</li></ul><p>æ•ˆèƒ½è² æ“”å°ï¼Œé©åˆå–®ä¸€æˆ–å°‘é‡å…ƒç´ çš„å‹•ç•«é‡æ’­</p><ul><li>ç¼ºé»ï¼š<br>éœ€è¦æ“ä½œ DOMï¼ˆé€é ref æˆ– state æ§åˆ¶ classï¼‰</li></ul><p>åªé‡å°å‹•ç•«ï¼Œç„¡æ³•é‡ç½®å…ƒä»¶å…§éƒ¨ç‹€æ…‹</p><h3 id="æœ€å¾Œé¸æ“‡çš„æ–¹å¼ï¼šoffsetWidth-é‡æ’ï¼Œæ›´é«˜æ•ˆåˆç©©å®š"><a href="#æœ€å¾Œé¸æ“‡çš„æ–¹å¼ï¼šoffsetWidth-é‡æ’ï¼Œæ›´é«˜æ•ˆåˆç©©å®š" class="headerlink" title="æœ€å¾Œé¸æ“‡çš„æ–¹å¼ï¼šoffsetWidth é‡æ’ï¼Œæ›´é«˜æ•ˆåˆç©©å®š"></a>æœ€å¾Œé¸æ“‡çš„æ–¹å¼ï¼šoffsetWidth é‡æ’ï¼Œæ›´é«˜æ•ˆåˆç©©å®š</h3><p>åœ¨è¡¡é‡äº†éœ€æ±‚èˆ‡æ•ˆèƒ½ä¹‹å¾Œï¼Œæˆ‘æœ€çµ‚é¸æ“‡ä½¿ç”¨ CSS offsetWidth çš„æ–¹å¼ä¾†é‡æ’­å‹•ç•«ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><h4 id="æŠ€è¡“è€ƒé‡ï¼š"><a href="#æŠ€è¡“è€ƒé‡ï¼š" class="headerlink" title="æŠ€è¡“è€ƒé‡ï¼š"></a>æŠ€è¡“è€ƒé‡ï¼š</h4><p>æˆ‘åªéœ€è¦å‹•ç•«é‡ç½®èˆ‡ focus æ•ˆæœï¼Œä¸éœ€è¦æ•´å€‹å…ƒä»¶é‡å»º</p><p>è‹¥ä½¿ç”¨ keyï¼Œå…ƒä»¶æœƒè¢«å¸è¼‰é‡å»ºï¼Œå°æ•ˆèƒ½å½±éŸ¿å¤ªå¤§</p><p>CSS æ–¹æ³•å¯ä»¥æ›´ç²¾æº–æ§åˆ¶å‹•ç•«è¡Œç‚º</p><h4 id="æ•ˆèƒ½å±¤é¢ï¼š"><a href="#æ•ˆèƒ½å±¤é¢ï¼š" class="headerlink" title="æ•ˆèƒ½å±¤é¢ï¼š"></a>æ•ˆèƒ½å±¤é¢ï¼š</h4><p>ä½¿ç”¨ offsetWidth åªæœƒè§¸ç™¼å±€éƒ¨é‡æ’</p><p>ä¸æœƒé€²å…¥ React çš„ Virtual DOM Diff éç¨‹</p><p>æ›´é©åˆéœ€è¦é«˜äº’å‹•æ€§èˆ‡å‹•ç•«é »ç¹è§¸ç™¼çš„å ´æ™¯</p><h4 id="æŠ€è¡“ç¸½çµèˆ‡å¯¦å‹™å»ºè­°"><a href="#æŠ€è¡“ç¸½çµèˆ‡å¯¦å‹™å»ºè­°" class="headerlink" title="æŠ€è¡“ç¸½çµèˆ‡å¯¦å‹™å»ºè­°"></a>æŠ€è¡“ç¸½çµèˆ‡å¯¦å‹™å»ºè­°</h4><p>å»ºè­°åŸå‰‡ï¼š<br>å‹•ç•«é‡æ’­ï¼šä½¿ç”¨ offsetWidth + class æ“æ§ï¼Œæ•ˆèƒ½è¼ƒä½³ä¸”é‡å°æ€§å¼·<br>ç‹€æ…‹é‡ç½®ï¼šä½¿ç”¨ key å¼·åˆ¶é‡æ–°æ›è¼‰ï¼Œç°¡å–®ç›´æ¥ä½†æ•ˆèƒ½æˆæœ¬è¼ƒé«˜</p><hr><p>åƒè€ƒ<br><a href="https://dev.to/olivare/how-to-make-your-app-faster-with-reacts-key-prop-170n">How to make your app faster with Reactâ€™s key prop</a></p><p><a href="https://stackoverflow.com/questions/60686489/what-purpose-does-void-element-offsetwidth-serve/69029892#69029892">What purpose does void element.offsetWidth serve?</a></p><p><a href="https://dev.to/malapashish/mastering-react-re-renders-the-key-prop-hack-you-need-to-know-17hh">Mastering React Re-Renders : The Key Prop Hack You Need to Know</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨å‰ç«¯é–‹ç™¼ä¸­ï¼Œå‹•ç•«èˆ‡äº’å‹•æ˜¯æå‡ç”¨æˆ¶é«”é©—çš„é—œéµå…ƒç´ ã€‚ç„¶è€Œï¼Œç•¶å‹•ç•«èˆ‡å…ƒä»¶ç‹€æ…‹ã€ç”Ÿå‘½å‘¨æœŸäº¤ç¹”åœ¨ä¸€èµ·æ™‚ï¼Œå¯¦ä½œä¸Šå°±å¯èƒ½é‡åˆ°å„ç¨®æŒ‘æˆ°ã€‚&lt;/p&gt;
&lt;p&gt;é€™ç¯‡æ–‡ç« è¨˜éŒ„æˆ‘åœ¨ä¸€å€‹ React å°ˆæ¡ˆä¸­ï¼Œè§£æ±ºã€Œå‹•ç•«é‡è¤‡è§¸ç™¼èˆ‡é‡ç½®ã€å•é¡Œçš„éç¨‹ï¼Œæ·±å…¥æ¯”è¼ƒäº†ä½¿ç”¨ key é‡ç½®èˆ‡ CSS Reflowï¼ˆoffsetWidthï¼‰ é‡ç½®çš„æ–¹å¼&lt;/p&gt;
&lt;h2 id=&quot;å•é¡Œæ¦‚è¿°&quot;&gt;&lt;a href=&quot;#å•é¡Œæ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;å•é¡Œæ¦‚è¿°&quot;&gt;&lt;/a&gt;å•é¡Œæ¦‚è¿°&lt;/h2&gt;&lt;p&gt;åœ¨é€™å€‹å°ˆæ¡ˆä¸­ï¼Œæˆ‘æœ‰å…©å€‹è‡ªè¨‚çš„å…ƒä»¶ï¼Œå„è‡ªå…§éƒ¨åŒ…å«ä¸€å€‹ç›¸åŒçµæ§‹çš„ &lt;code&gt;&amp;lt;input&amp;gt;&lt;/code&gt;ã€‚ç•¶ä½¿ç”¨è€…é»æ“ŠæŸå€‹æ“ä½œå¾Œï¼Œæˆ‘å¸Œæœ›é€™äº› inputï¼š&lt;/p&gt;</summary>
    
    
    
    <category term="side-project" scheme="https://eva813.github.io/categories/side-project/"/>
    
    
    <category term="side-project" scheme="https://eva813.github.io/tags/side-project/"/>
    
  </entry>
  
  <entry>
    <title>åˆ·é¡Œç·´ç¿’ - Permutation in String</title>
    <link href="https://eva813.github.io/2025/04/15/slide-window-Permutation-in-String/"/>
    <id>https://eva813.github.io/2025/04/15/slide-window-Permutation-in-String/</id>
    <published>2025-04-15T12:34:43.000Z</published>
    <updated>2025-09-07T01:02:35.745Z</updated>
    
    <content type="html"><![CDATA[<p>ç·´ç¿’ä¾†è‡ª <a href="https://labuladong.online/algo/essential-technique/sliding-window-framework/">labuladong çš„æ¼”ç®—æ³•ç­†è¨˜</a> çš„æ»‘å‹•è¦–çª—æ¼”ç®—æ³•æ ¸å¿ƒç¨‹å¼ç¢¼æ¨¡æ¿ã€‚</p><h2 id="åŸºæœ¬è¨­ç½®"><a href="#åŸºæœ¬è¨­ç½®" class="headerlink" title="åŸºæœ¬è¨­ç½®:"></a>åŸºæœ¬è¨­ç½®:</h2><p>ç”¨å…©å€‹æŒ‡é‡ä¾†ç•Œå®šä¸€å€‹å€é–“ï¼Œä¹Ÿå°±æ˜¯ä¸€å€‹ã€Œçª—å£ã€ï¼š</p><ul><li>å·¦æŒ‡é‡ leftï¼šè¡¨ç¤ºçª—å£çš„èµ·å§‹ä½ç½®ã€‚</li><li>å³æŒ‡é‡ rightï¼šè¡¨ç¤ºçª—å£çš„å°¾éƒ¨ï¼ˆé€šå¸¸æ¡ç”¨å·¦é–‰å³é–‹å€é–“ [left, right)ï¼‰ã€‚</li></ul><p>çª—å£å…§çš„è³‡æ–™æœƒéš¨è‘— left å’Œ right çš„ç§»å‹•è€Œå‹•æ…‹æ”¹è®Šã€‚è§£é¡Œçš„é—œéµåœ¨æ–¼ï¼š</p><ul><li>æ“´å¤§çª—å£ï¼šä¸æ–·å°‡æ–°çš„å…ƒç´ åŠ å…¥çª—å£ï¼Œä¸¦æ›´æ–°çª—å£å…§çš„ç‹€æ…‹æˆ–çµ±è¨ˆï¼ˆä¾‹å¦‚å­—å…ƒå‡ºç¾æ¬¡æ•¸ï¼‰ã€‚</li><li>æª¢æŸ¥çª—å£æ˜¯å¦æ»¿è¶³æ¢ä»¶ï¼šæ ¹æ“šé¡Œç›®è¦æ±‚æª¢æŸ¥ç•¶å‰çª—å£æ˜¯å¦ç‚ºåˆæ³•è§£ã€‚</li><li>æ”¶ç¸®çª—å£ï¼šå¦‚æœç•¶å‰çª—å£å·²æ»¿è¶³æ¢ä»¶ï¼Œå˜—è©¦å¾å·¦å´ç§»é™¤å…ƒç´ ä»¥æ‰¾åˆ°æ›´å„ªï¼ˆä¾‹å¦‚æ›´çŸ­ï¼‰çš„è§£ï¼ŒåŒæ™‚æ›´æ–°ç‹€æ…‹ã€‚</li></ul><h2 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> slidingWindow = <span class="keyword">function</span>(<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨åˆé©çš„è³‡æ–™çµæ§‹è¨˜éŒ„è¦–çª—ä¸­çš„è³‡æ–™ï¼Œæ ¹æ“šå…·é«”é¡Œç›®è®Šé€šã€‚</span></span><br><span class="line">    <span class="comment">// ä¾‹å¦‚ï¼šè¨˜éŒ„å­—å…ƒå‡ºç¾çš„æ¬¡æ•¸ï¼Œæˆ–ç´¯åŠ çª—å£å…§å…ƒç´ çš„å’Œã€‚</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable language_">window</span> = &#123;&#125;;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span>, right = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (right &lt; s.<span class="property">length</span>) &#123;</span><br><span class="line">        <span class="comment">// å–å‡ºå°‡è¦åŠ å…¥è¦–çª—çš„å­—å…ƒ</span></span><br><span class="line">        <span class="keyword">let</span> c = s[right];</span><br><span class="line">        right++;  <span class="comment">// æ“´å¤§çª—å£</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›´æ–°çª—å£å…§è³‡æ–™</span></span><br><span class="line">        <span class="comment">// ä¾‹å¦‚ï¼šwindow[c] = (window[c] || 0) + 1;</span></span><br><span class="line">        <span class="comment">// æ ¹æ“šå…·é«”é¡Œç›®é‚è¼¯é€²è¡Œæ›´æ–°</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// *** Debug è¼¸å‡ºä½ç½® *** </span></span><br><span class="line">        <span class="comment">// console.log(&quot;çª—å£: [%d, %d)&quot;, left, right);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç•¶çª—å£ä¸å†æ»¿è¶³é¡Œç›®è¦æ±‚æ™‚ï¼Œæ”¶ç¸®çª—å£</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="comment">/* åˆ¤æ–·çª—å£éœ€è¦æ”¶ç¸®çš„æ¢ä»¶ */</span>) &#123;</span><br><span class="line">            <span class="comment">// å–å¾—å°‡è¦ç§»é™¤çš„å­—å…ƒï¼ˆç‚ºä½¿è®Šæ•¸åç¨±æ›´å…·æè¿°æ€§å¯ç”¨ removedCharï¼‰</span></span><br><span class="line">            <span class="keyword">let</span> removedChar = s[left];</span><br><span class="line">            left++;  <span class="comment">// ç¸®å°çª—å£</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ›´æ–°ç§»é™¤å­—å…ƒå°çª—å£è³‡æ–™çš„å½±éŸ¿</span></span><br><span class="line">            <span class="comment">// ä¾‹å¦‚ï¼šif (window[removedChar] ...) &#123; ... &#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é¡Œç›®"><a href="#é¡Œç›®" class="headerlink" title="é¡Œç›®"></a><a href="https://leetcode.com/problems/permutation-in-string/description/">é¡Œç›®</a></h2><p>Given two strings s1 and s2, return true if s2 contains a permutation of s1, or false otherwise.</p><p>In other words, return true if one of s1â€™s permutations is the substring of s2.</p><p>çµ¦å®šå…©å€‹å­—ä¸² s1 å’Œ s2ï¼Œè‹¥ s2 ä¸­åŒ…å« s1 çš„æŸå€‹æ’åˆ—ï¼Œå‰‡è¿”å› trueï¼›å¦å‰‡è¿”å› falseã€‚</p><p>æ›å¥è©±èªªï¼Œè‹¥ s1 çš„æŸå€‹æ’åˆ—æ˜¯ s2 çš„å­å­—ä¸²ï¼Œå‰‡è¿”å› trueã€‚</p><p>Example 1:</p><p>Input: s1 = â€œabâ€, s2 = â€œeidbaoooâ€<br>Output: true<br>Explanation: s2 contains one permutation of s1 (â€œbaâ€).</p><span id="more"></span><h3 id="è§£é¡Œæ€è·¯ï¼š"><a href="#è§£é¡Œæ€è·¯ï¼š" class="headerlink" title="è§£é¡Œæ€è·¯ï¼š"></a>è§£é¡Œæ€è·¯ï¼š</h3><ol><li>å»ºç«‹éœ€æ±‚è³‡æ–™çµæ§‹ï¼š</li></ol><ul><li>å…ˆå»ºç«‹ä¸€å€‹å“ˆå¸Œè¡¨ needï¼Œè¨˜éŒ„ s1 ä¸­æ¯å€‹å­—å…ƒéœ€å‡ºç¾çš„æ¬¡æ•¸ã€‚é€™ä»£è¡¨è‘—ç•¶è¦–çª—ä¸­ç›¸æ‡‰å­—å…ƒçš„å‡ºç¾æ¬¡æ•¸é”åˆ° need å…§çš„æ•¸é‡ï¼Œè©²å­—å…ƒå³æ»¿è¶³è¦æ±‚ã€‚</li></ul><ol start="2"><li>åˆå§‹åŒ–è¦–çª—ç›¸é—œè®Šæ•¸ï¼š</li></ol><ul><li>å»ºç«‹ä¸€å€‹å“ˆå¸Œè¡¨ window ç”¨ä¾†è¨˜éŒ„ç•¶å‰è¦–çª—å…§å„å­—å…ƒå‡ºç¾æ¬¡æ•¸ã€‚</li><li>åˆå§‹åŒ–å·¦å³æŒ‡æ¨™ left èˆ‡ right ç‚º 0ã€‚</li><li>ä½¿ç”¨è®Šæ•¸ valid ä¾†è¨ˆç®—ç›®å‰åœ¨è¦–çª—ä¸­æ»¿è¶³ need è¦æ±‚çš„å­—å…ƒç¨®é¡æ•¸ã€‚</li><li>ç”±æ–¼ç›®æ¨™æ˜¯æ‰¾å‡ºæ˜¯å¦å­˜åœ¨ s1 ä¸­æ’åˆ—ï¼ˆå³å­—å…ƒçµ„åˆç›¸åŒï¼‰å‡ºç¾åœ¨ s2 ä¸­ï¼Œæ‰€ä»¥è¦æ±‚çš„è¦–çª—å¤§å°å›ºå®šç‚º s1 é•·åº¦ã€‚</li></ul><ol start="3"><li><p>æ“´å¤§è¦–çª—ï¼š<br>åˆ©ç”¨ right æŒ‡æ¨™ä¸æ–·æ“´å¤§çª—å£ï¼Œå°‡ s2 ä¸­çš„å­—å…ƒä¾åºåŠ å…¥çª—å£ä¸­ï¼Œä¸¦æ›´æ–° window çš„è¨ˆæ•¸ã€‚å¦‚æœæŸå€‹å­—å…ƒå‰›å¥½æ»¿è¶³ need çš„æ•¸é‡è¦æ±‚ï¼Œå‰‡ valid åŠ  1ã€‚</p></li><li><p>æ”¶ç¸®è¦–çª—ä¸¦æª¢æŸ¥æ¢ä»¶ï¼š<br>ç•¶è¦–çª—çš„å¤§å°ç­‰æ–¼ s1 çš„é•·åº¦æ™‚ï¼Œæ­¤æ™‚è¦–çª—ä¸­çš„æ‰€æœ‰å­—å…ƒæ§‹æˆä¸€å€‹å€™é¸è§£ã€‚</p></li></ol><ul><li>æª¢æŸ¥ valid æ˜¯å¦ç­‰æ–¼ need ä¸­çš„å­—å…ƒç¨®é¡æ•¸ã€‚å¦‚æœç›¸ç­‰ï¼Œèªªæ˜ç•¶å‰çª—å£ä¸­çš„å­—å…ƒé »ç‡èˆ‡ s1 å®Œå…¨ä¸€è‡´ï¼Œç¬¦åˆæ’åˆ—æ¢ä»¶ï¼Œç›´æ¥è¿”å› trueã€‚</li><li>å¦‚æœä¸ç¬¦åˆï¼Œå‰‡å°‡å·¦å´å­—å…ƒç§»é™¤ï¼ˆæ”¶ç¸®çª—å£ï¼‰ï¼Œä¸¦æ›´æ–° window ä¸­è©²å­—å…ƒçš„è¨ˆæ•¸ä»¥åŠ validï¼ˆè‹¥è©²å­—å…ƒæ•¸é‡å¾æ»¿è¶³è®Šæˆä¸è¶³ï¼‰ã€‚</li><li>çª—å£æ”¶ç¸®å¾Œç¹¼çºŒæ“´å¤§å³å´ä»¥éæ­· s2ã€‚</li></ul><ol start="5"><li>çµæŸï¼š<br>éæ­·å®Œ s2 å¾Œï¼Œè‹¥æœªèƒ½æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„çª—å£ï¼Œå‰‡è¿”å› falseã€‚</li></ol><h3 id="ç¨‹å¼ç¢¼"><a href="#ç¨‹å¼ç¢¼" class="headerlink" title="ç¨‹å¼ç¢¼"></a>ç¨‹å¼ç¢¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">s1</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">s2</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> checkInclusion = <span class="keyword">function</span>(<span class="params">s1, s2</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable language_">window</span> = &#123;&#125;</span><br><span class="line">    <span class="keyword">let</span> need = &#123;&#125;</span><br><span class="line">    <span class="keyword">let</span> right = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> valid = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> required = <span class="title class_">Object</span>.<span class="title function_">keys</span>(need).<span class="property">length</span>;  <span class="comment">// éœ€è¦æ»¿è¶³çš„å­—å…ƒç¨®é¡æ•¸</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> item <span class="keyword">of</span> s1)&#123;</span><br><span class="line">        need[item] = (need[item] || <span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(right &lt; s2.<span class="property">length</span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> char = s2[right]</span><br><span class="line">        right++</span><br><span class="line">        <span class="keyword">if</span>(need[char])&#123;</span><br><span class="line">            <span class="variable language_">window</span>[char] = (<span class="variable language_">window</span>[char] || <span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable language_">window</span>[char] === need[char])&#123;</span><br><span class="line">                valid++</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç•¶çª—å£é•·åº¦é”åˆ° s1 çš„é•·åº¦æ™‚ï¼Œé–‹å§‹æ”¶ç¸®çª—å£</span></span><br><span class="line">        <span class="keyword">while</span>(right - left &gt;= s1.<span class="property">length</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(valid === <span class="title class_">Object</span>.<span class="title function_">keys</span>(need).<span class="property">length</span>) <span class="keyword">return</span> <span class="literal">true</span>    </span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> removedChar = s2[left]</span><br><span class="line">            left++</span><br><span class="line">            <span class="comment">// æ›´æ–°ç§»å‡ºå­—å…ƒå°çª—å£è³‡æ–™çš„å½±éŸ¿</span></span><br><span class="line">            <span class="keyword">if</span>(need[removedChar])&#123; </span><br><span class="line">                <span class="keyword">if</span>(<span class="variable language_">window</span>[removedChar] === need[removedChar])&#123;</span><br><span class="line">                    valid--</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">window</span>[removedChar]--</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦åˆ†æ"><a href="#æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦åˆ†æ" class="headerlink" title="æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦åˆ†æ"></a>æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦åˆ†æ</h2><ol><li>æ™‚é–“è¤‡é›œåº¦ï¼š O(n + m)ï¼Œå…¶ä¸­ n ç‚º s2 çš„é•·åº¦ï¼Œm ç‚º s1 çš„é•·åº¦ã€‚</li><li>ç©ºé–“è¤‡é›œåº¦ï¼š æœ€å£æƒ…æ³ä¸‹ç‚º O(m)ã€‚</li></ol><ul><li>ç¶œåˆç©ºé–“è¤‡é›œåº¦ï¼š<br>å¦‚æœä¸å‡è¨­å­—å…ƒé›†æ˜¯å›ºå®šå¤§å°ï¼ˆä¾‹å¦‚åƒ…é™å°å¯«è‹±æ–‡å­—æ¯ï¼‰ï¼Œé‚£éº¼æœ€å£æƒ…æ³ä¸‹æ•´é«”ç©ºé–“è¤‡é›œåº¦ç‚º O(m)ã€‚<br>æ³¨æ„ï¼š åœ¨è¨±å¤šå¯¦éš›æƒ…æ³ä¸‹ï¼ˆä¾‹å¦‚å­—å…ƒé›†å›ºå®šçš„ç‹€æ³ï¼‰ï¼Œå¯èƒ½æœƒå°‡æ­¤ç©ºé–“è¤‡é›œåº¦è¦–ç‚º O(1)ï¼›ä½†å¾æœ€å£æƒ…æ³åˆ†æè§’åº¦ï¼Œä»ç„¶ç‚º O(m)</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;ç·´ç¿’ä¾†è‡ª &lt;a href=&quot;https://labuladong.online/algo/essential-technique/sliding-window-framework/&quot;&gt;labuladong çš„æ¼”ç®—æ³•ç­†è¨˜&lt;/a&gt; çš„æ»‘å‹•è¦–çª—æ¼”ç®—æ³•æ ¸å¿ƒç¨‹å¼ç¢¼æ¨¡æ¿ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŸºæœ¬è¨­ç½®&quot;&gt;&lt;a href=&quot;#åŸºæœ¬è¨­ç½®&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬è¨­ç½®:&quot;&gt;&lt;/a&gt;åŸºæœ¬è¨­ç½®:&lt;/h2&gt;&lt;p&gt;ç”¨å…©å€‹æŒ‡é‡ä¾†ç•Œå®šä¸€å€‹å€é–“ï¼Œä¹Ÿå°±æ˜¯ä¸€å€‹ã€Œçª—å£ã€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å·¦æŒ‡é‡ leftï¼šè¡¨ç¤ºçª—å£çš„èµ·å§‹ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;å³æŒ‡é‡ rightï¼šè¡¨ç¤ºçª—å£çš„å°¾éƒ¨ï¼ˆé€šå¸¸æ¡ç”¨å·¦é–‰å³é–‹å€é–“ [left, right)ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çª—å£å…§çš„è³‡æ–™æœƒéš¨è‘— left å’Œ right çš„ç§»å‹•è€Œå‹•æ…‹æ”¹è®Šã€‚è§£é¡Œçš„é—œéµåœ¨æ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ“´å¤§çª—å£ï¼šä¸æ–·å°‡æ–°çš„å…ƒç´ åŠ å…¥çª—å£ï¼Œä¸¦æ›´æ–°çª—å£å…§çš„ç‹€æ…‹æˆ–çµ±è¨ˆï¼ˆä¾‹å¦‚å­—å…ƒå‡ºç¾æ¬¡æ•¸ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æª¢æŸ¥çª—å£æ˜¯å¦æ»¿è¶³æ¢ä»¶ï¼šæ ¹æ“šé¡Œç›®è¦æ±‚æª¢æŸ¥ç•¶å‰çª—å£æ˜¯å¦ç‚ºåˆæ³•è§£ã€‚&lt;/li&gt;
&lt;li&gt;æ”¶ç¸®çª—å£ï¼šå¦‚æœç•¶å‰çª—å£å·²æ»¿è¶³æ¢ä»¶ï¼Œå˜—è©¦å¾å·¦å´ç§»é™¤å…ƒç´ ä»¥æ‰¾åˆ°æ›´å„ªï¼ˆä¾‹å¦‚æ›´çŸ­ï¼‰çš„è§£ï¼ŒåŒæ™‚æ›´æ–°ç‹€æ…‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;æ¨¡æ¿&quot;&gt;&lt;a href=&quot;#æ¨¡æ¿&quot; class=&quot;headerlink&quot; title=&quot;æ¨¡æ¿&quot;&gt;&lt;/a&gt;æ¨¡æ¿&lt;/h2&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; slidingWindow = &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;s&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ä½¿ç”¨åˆé©çš„è³‡æ–™çµæ§‹è¨˜éŒ„è¦–çª—ä¸­çš„è³‡æ–™ï¼Œæ ¹æ“šå…·é«”é¡Œç›®è®Šé€šã€‚&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ä¾‹å¦‚ï¼šè¨˜éŒ„å­—å…ƒå‡ºç¾çš„æ¬¡æ•¸ï¼Œæˆ–ç´¯åŠ çª—å£å…§å…ƒç´ çš„å’Œã€‚&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;variable language_&quot;&gt;window&lt;/span&gt; = &amp;#123;&amp;#125;;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; left = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, right = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (right &amp;lt; s.&lt;span class=&quot;property&quot;&gt;length&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// å–å‡ºå°‡è¦åŠ å…¥è¦–çª—çš„å­—å…ƒ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; c = s[right];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        right++;  &lt;span class=&quot;comment&quot;&gt;// æ“´å¤§çª—å£&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// æ›´æ–°çª—å£å…§è³‡æ–™&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// ä¾‹å¦‚ï¼šwindow[c] = (window[c] || 0) + 1;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// æ ¹æ“šå…·é«”é¡Œç›®é‚è¼¯é€²è¡Œæ›´æ–°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// *** Debug è¼¸å‡ºä½ç½® *** &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// console.log(&amp;quot;çª—å£: [%d, %d)&amp;quot;, left, right);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// ç•¶çª—å£ä¸å†æ»¿è¶³é¡Œç›®è¦æ±‚æ™‚ï¼Œæ”¶ç¸®çª—å£&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;comment&quot;&gt;/* åˆ¤æ–·çª—å£éœ€è¦æ”¶ç¸®çš„æ¢ä»¶ */&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// å–å¾—å°‡è¦ç§»é™¤çš„å­—å…ƒï¼ˆç‚ºä½¿è®Šæ•¸åç¨±æ›´å…·æè¿°æ€§å¯ç”¨ removedCharï¼‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; removedChar = s[left];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            left++;  &lt;span class=&quot;comment&quot;&gt;// ç¸®å°çª—å£&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// æ›´æ–°ç§»é™¤å­—å…ƒå°çª—å£è³‡æ–™çš„å½±éŸ¿&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// ä¾‹å¦‚ï¼šif (window[removedChar] ...) &amp;#123; ... &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;é¡Œç›®&quot;&gt;&lt;a href=&quot;#é¡Œç›®&quot; class=&quot;headerlink&quot; title=&quot;é¡Œç›®&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://leetcode.com/problems/permutation-in-string/description/&quot;&gt;é¡Œç›®&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Given two strings s1 and s2, return true if s2 contains a permutation of s1, or false otherwise.&lt;/p&gt;
&lt;p&gt;In other words, return true if one of s1â€™s permutations is the substring of s2.&lt;/p&gt;
&lt;p&gt;çµ¦å®šå…©å€‹å­—ä¸² s1 å’Œ s2ï¼Œè‹¥ s2 ä¸­åŒ…å« s1 çš„æŸå€‹æ’åˆ—ï¼Œå‰‡è¿”å› trueï¼›å¦å‰‡è¿”å› falseã€‚&lt;/p&gt;
&lt;p&gt;æ›å¥è©±èªªï¼Œè‹¥ s1 çš„æŸå€‹æ’åˆ—æ˜¯ s2 çš„å­å­—ä¸²ï¼Œå‰‡è¿”å› trueã€‚&lt;/p&gt;
&lt;p&gt;Example 1:&lt;/p&gt;
&lt;p&gt;Input: s1 = â€œabâ€, s2 = â€œeidbaoooâ€&lt;br&gt;Output: true&lt;br&gt;Explanation: s2 contains one permutation of s1 (â€œbaâ€).&lt;/p&gt;</summary>
    
    
    
    <category term="LeetCode" scheme="https://eva813.github.io/categories/LeetCode/"/>
    
    
    <category term="LeetCode" scheme="https://eva813.github.io/tags/LeetCode/"/>
    
    <category term="slide-window" scheme="https://eva813.github.io/tags/slide-window/"/>
    
  </entry>
  
  <entry>
    <title>side-project-zustand</title>
    <link href="https://eva813.github.io/2025/03/31/side-project-zustand/"/>
    <id>https://eva813.github.io/2025/03/31/side-project-zustand/</id>
    <published>2025-03-30T23:23:58.000Z</published>
    <updated>2025-09-07T01:00:55.203Z</updated>
    
    <content type="html"><![CDATA[<p>é€™æ®µæ™‚é–“åœ¨è£½ä½œä¸€å€‹ snippet ç®¡ç†çš„ side projectï¼Œéç¨‹ä¸­é‡åˆ°äº†ä¸€äº›è·¨é é¢å…±äº«è³‡æ–™çš„éœ€æ±‚ã€‚å°ˆæ¡ˆä¸­æœ‰ä¸€åŒ…è³‡æ–™ç¨±ç‚º snippetï¼Œå…§éƒ¨åŒ…å«å¤šå€‹ folder å’Œå°é …ç›®çš„ snippetsã€‚é€™äº›è³‡æ–™ä¸åƒ…æœƒåœ¨ /snippet è·¯å¾‘ä¸‹çš„å…ƒä»¶ä½¿ç”¨ï¼Œé‚„æœƒè·¨ route è¢«å…¶ä»–é é¢å­˜å–ã€‚</p><p>ä¸€é–‹å§‹ï¼Œæˆ‘é¸æ“‡ä½¿ç”¨ React çš„ Context APIï¼Œé€éå»ºç«‹ä¸€å€‹ SnippetsContext ä¾†ç®¡ç†ç‹€æ…‹ã€‚åœ¨æ‡‰ç”¨ç¨‹å¼çš„æœ€ä¸Šå±¤æ”¾ç½®ä¸€æ¬¡ SnippetsProviderï¼Œç„¶å¾Œåœ¨éœ€è¦çš„ä»»ä½•å…ƒä»¶å…§ç›´æ¥ä½¿ç”¨ import { useSnippets } from â€˜@/contexts/SnippetsContextâ€™ ä¾†å–å¾— contextã€‚ç„¶è€Œï¼Œéš¨è‘—å°ˆæ¡ˆè¦æ¨¡é€æ­¥æ“´å±•ï¼Œé€™ç¨®æ–¹æ³•é€æ¼¸é¡¯éœ²å‡ºå…¶å±€é™æ€§ã€‚æˆ‘ç™¼ç¾å³ä½¿å·²ç¶“æœ‰äº†æœ€ä¸Šå±¤çš„ Providerï¼Œä½†åœ¨å¤šå€‹ dialog æˆ– component ä¸­ï¼Œä»ç„¶éœ€è¦é‡è¤‡åœ°å°å…¥ useSnippetsï¼Œä¸åƒ…é€ æˆä»£ç¢¼é‡è¤‡ï¼Œä¹Ÿä½¿å¾—å°ˆæ¡ˆçµæ§‹è®Šå¾—è‡ƒè…«è¤‡é›œã€‚</p><p>ç‚ºäº†è§£æ±ºä¸Šè¿°å•é¡Œï¼Œæˆ‘å˜—è©¦äº†å¦ä¸€å€‹ç‹€æ…‹ç®¡ç†å·¥å…· â€”â€” Zustandã€‚Zustand æä¾›äº†ä¸€ç¨®æ›´ç›´è¦ºã€æ›´ç²¾ç°¡çš„æ–¹å¼ä¾†å»ºç«‹å’Œå­˜å–å…¨åŸŸç‹€æ…‹ï¼Œä¸éœ€è¦é€é Provider åŒ…è£¹å…ƒä»¶ï¼Œå¤§å¹…æ¸›å°‘äº†æ¨£æ¿ä»£ç¢¼çš„ä½¿ç”¨ï¼Œä¹Ÿè®“è³‡æ–™æµæ›´åŠ æ¸…æ™°æ˜“æ‡‚ã€‚</p><p>åœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æœƒåˆ†äº«å¦‚ä½•åœ¨å°ˆæ¡ˆä¸­å¯¦éš›å°å…¥ä¸¦ä½¿ç”¨ Zustand</p><h2 id="åˆæ­¥å¯¦ä½œ-Zustand"><a href="#åˆæ­¥å¯¦ä½œ-Zustand" class="headerlink" title="åˆæ­¥å¯¦ä½œ Zustand"></a>åˆæ­¥å¯¦ä½œ Zustand</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install zustand</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³ä½¿ç”¨æŒä¹…åŒ–åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å®‰è£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install zustand/middleware</span><br></pre></td></tr></table></figure><h2 id="store-è³‡æ–™å¤¾"><a href="#store-è³‡æ–™å¤¾" class="headerlink" title="store è³‡æ–™å¤¾"></a>store è³‡æ–™å¤¾</h2><p>åœ¨å°ˆæ¡ˆçš„ src è³‡æ–™å¤¾ä¸‹å»ºç«‹ä¸€å€‹ store è³‡æ–™å¤¾ï¼Œé€™ä¹‹ä¸­åŒ…å«çµ¦ folder , snippet çš„ sliceã€‚ä¹‹æ‰€ä»¥æ¡ç”¨ slice æ˜¯å› ç‚ºåŸæœ¬ snippet çš„è™•ç†é‚è¼¯è¼ƒç‚ºè¤‡é›œï¼ŒåŒ…å«äº† folder çš„å„²å­˜ã€å…§éƒ¨ snippet çš„å„²å­˜ï¼Œä»¥åŠä¸€äº›å°ˆé–€çµ¦ dialog ä½¿ç”¨çš„ UI ç‹€æ…‹ã€‚é€éå°‡ store åˆ†æ‹†æˆå¤šå€‹ sliceï¼ˆä¾‹å¦‚ folderSlice èˆ‡ uiSliceï¼‰ï¼Œæ¯å€‹æ¨¡çµ„éƒ½åªè² è²¬è™•ç†è‡ªå·±ç›¸é—œçš„ state èˆ‡æ“ä½œï¼Œèƒ½æ›´å¥½åœ°ç¶­è­·ä»£ç¢¼çš„çµæ§‹èˆ‡å¯è®€æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line"> â”œâ”€â”€ types/</span><br><span class="line"> â”‚    â””â”€â”€ snippet.<span class="property">ts</span>            <span class="comment">// å…±ç”¨å‹åˆ¥ï¼Œä¹Ÿå¯ä»¥æœ‰ auth.ts, settings.ts ç­‰</span></span><br><span class="line"> â””â”€â”€ stores/</span><br><span class="line">      â”œâ”€â”€ snippet/</span><br><span class="line">      â”‚     â”œâ”€â”€ slices/</span><br><span class="line">      â”‚     â”‚     â”œâ”€â”€ folderSlice.<span class="property">ts</span></span><br><span class="line">      â”‚     â”‚     â”œâ”€â”€ snippetSlice.<span class="property">ts</span></span><br><span class="line">      â”‚     â”‚     â””â”€â”€ uiSlice.<span class="property">ts</span></span><br><span class="line">      â”‚     â””â”€â”€ index.<span class="property">ts</span>        <span class="comment">// snippetStore.ts</span></span><br><span class="line">      â”œâ”€â”€ auth/</span><br><span class="line">      â”‚     â””â”€â”€ index.<span class="property">ts</span>        <span class="comment">// å‡å¦‚ä¹‹å¾Œï¼Œ authStore.ts (å¯ä»¥é€²ä¸€æ­¥æ‹†åˆ† authSlices)</span></span><br><span class="line">      â””â”€â”€ settings/</span><br><span class="line">            â””â”€â”€ index.<span class="property">ts</span>        <span class="comment">// å‡å¦‚ä¹‹å¾Œï¼ŒsettingsStore.ts</span></span><br></pre></td></tr></table></figure><p>åœ¨å°ˆæ¡ˆä¸­çš„ snippet è³‡æ–™å¤¾å…§ï¼Œæœƒå»ºç«‹ä¸€å€‹ index.ts æª”æ¡ˆä¾†æ•´åˆæ‰€æœ‰ç¨ç«‹çš„ sliceï¼Œä¸¦å°å‡ºä¸€å€‹å®Œæ•´çš„ Zustand storeã€‚é€™éº¼åšçš„å„ªé»æ˜¯ï¼šä¹‹å¾Œåœ¨ä»»ä½•å…ƒä»¶ä¸­éœ€è¦ä½¿ç”¨ç‹€æ…‹æ™‚ï¼Œåªéœ€å°å…¥æ•´å€‹ storeï¼Œè€Œä¸éœ€è¦é€ä¸€å¼•å…¥æ¯å€‹ slice</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/stores/snippet/index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; persist &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand/middleware&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">FolderSlice</span>, createFolderSlice &#125; <span class="keyword">from</span> <span class="string">&#x27;./slices/folderSlice&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">SnippetSlice</span>, createSnippetSlice &#125; <span class="keyword">from</span> <span class="string">&#x27;./slices/snippetSlice&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UISlice</span>, createUISlice &#125; <span class="keyword">from</span> <span class="string">&#x27;./slices/uiSlice&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çµ„åˆæ‰€æœ‰æ¨¡çµ„çš„å‹åˆ¥</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">AppStore</span> = <span class="title class_">FolderSlice</span> &amp; <span class="title class_">SnippetSlice</span> &amp; <span class="title class_">UISlice</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useSnippetStore = create&lt;<span class="title class_">AppStore</span>&gt;()(</span><br><span class="line">  <span class="title function_">persist</span>(</span><br><span class="line">    <span class="function">(<span class="params">set, get, api</span>) =&gt;</span> (&#123;</span><br><span class="line">      ...<span class="title function_">createFolderSlice</span>(set, get, api),</span><br><span class="line">      ...<span class="title function_">createSnippetSlice</span>(set, get, api),</span><br><span class="line">      ...<span class="title function_">createUISlice</span>(set, get, api),</span><br><span class="line">    &#125;),</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;my-snippets-storage&#x27;</span>,</span><br><span class="line">      <span class="comment">// partialize ä½¿æˆ‘å€‘åªæŒä¹…åŒ– foldersï¼ŒUI ç‹€æ…‹ä¸å¿…å­˜å…¥ localStorage</span></span><br><span class="line">      <span class="attr">partialize</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">folders</span>: state.<span class="property">folders</span> &#125;),</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ zustand æä¾›çš„ persist middlewareï¼Œèƒ½è¼•é¬†å°‡ç‰¹å®šç‹€æ…‹æŒä¹…åŒ–åˆ° localStorageã€‚</li><li>é€é partialize åƒæ•¸ï¼Œæˆ‘èƒ½å¤ éˆæ´»åœ°æŒ‡å®šåªæœ‰æŸäº›ç‹€æ…‹ (ä¾‹å¦‚ï¼šfolders) éœ€è¦æŒä¹…åŒ–ï¼Œè€Œ UI æˆ–å…¶ä»–è‡¨æ™‚ç‹€æ…‹å‰‡ä¿æŒè¨˜æ†¶é«”å…§å³å¯ã€‚</li></ul><h2 id="folderSlice-ts"><a href="#folderSlice-ts" class="headerlink" title="folderSlice.ts"></a>folderSlice.ts</h2><p>åœ¨å»ºç«‹ folderSlice æ™‚ï¼Œé€é Zustand çš„ StateCreator å®šç¾©äº†ä¸€å€‹ sliceï¼Œå°ˆé–€è² è²¬ç®¡ç†è³‡æ–™å¤¾ï¼ˆfoldersï¼‰ç›¸é—œçš„ç‹€æ…‹èˆ‡é‚è¼¯ã€‚é€éé€™å€‹æ–¹å¼ï¼Œèƒ½æ¸…æ¥šåœ°å°‡è³‡æ–™å¤¾çš„æ“ä½œè¡Œç‚ºé›†ä¸­ç®¡ç†ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/stores/snippet/slices/folderSlice.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StateCreator</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Folder</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/snippets&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">FolderSlice</span> &#123;</span><br><span class="line">  <span class="attr">folders</span>: <span class="title class_">Folder</span>[];</span><br><span class="line">  <span class="attr">setFolders</span>: <span class="function">(<span class="params">folders: Folder[]</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">updateFolder</span>: <span class="function">(<span class="params">id: <span class="built_in">string</span>, updates: Partial&lt;Folder&gt;</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">addFolder</span>: <span class="function">(<span class="params">folder: Omit&lt;Folder, <span class="string">&quot;id&quot;</span>&gt;, index?: <span class="built_in">number</span></span>) =&gt;</span> <span class="title class_">Folder</span>;</span><br><span class="line">  <span class="attr">deleteFolder</span>: <span class="function">(<span class="params">id: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">createFolderSlice</span>: <span class="title class_">StateCreator</span>&lt;<span class="title class_">FolderSlice</span>&gt; = <span class="function">(<span class="params">set, get</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">folders</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="string">&#x27;HplOMyf2mDqvVMdphJbt&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;My Sample Snippets&#x27;</span>,</span><br><span class="line">      <span class="attr">description</span>: <span class="string">&#x27;This is a sample folder&#x27;</span>,</span><br><span class="line">      <span class="attr">snippets</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="string">&#x27;5mJw031VPo2WxNIQyeXN&#x27;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;Demo - Plain text&#x27;</span>,</span><br><span class="line">          <span class="attr">content</span>: <span class="string">&#x27;be a software engineer&#x27;</span>,</span><br><span class="line">          <span class="attr">shortcut</span>: <span class="string">&#x27;/do&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="string">&#x27;6mJw031VPo2WxNIQyeYN&#x27;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;Demo - Styled Text&#x27;</span>,</span><br><span class="line">          <span class="attr">content</span>:</span><br><span class="line">            <span class="string">&#x27;be a translate expert, I will give you a sentence and help me translate to english&#x27;</span>,</span><br><span class="line">          <span class="attr">shortcut</span>: <span class="string">&#x27;/doT&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="string">&#x27;folder-1741057188488&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Test&#x27;</span>,</span><br><span class="line">      <span class="attr">description</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">      <span class="attr">snippets</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="string">&#x27;snippet-1741057206823&#x27;</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">          <span class="attr">content</span>: <span class="string">&#x27;&lt;p&gt;New snippet content Test&lt;/p&gt;&#x27;</span>,</span><br><span class="line">          <span class="attr">shortcut</span>: <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">setFolders</span>: <span class="function">(<span class="params">folders</span>) =&gt;</span> <span class="title function_">set</span>(&#123; folders &#125;),</span><br><span class="line">  <span class="attr">updateFolder</span>: <span class="function">(<span class="params">id, updates</span>) =&gt;</span></span><br><span class="line">    <span class="title function_">set</span>(&#123;</span><br><span class="line">      <span class="attr">folders</span>: <span class="title function_">get</span>().<span class="property">folders</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">folder</span>) =&gt;</span></span><br><span class="line">        folder.<span class="property">id</span> === id ? &#123; ...folder, ...updates &#125; : folder</span><br><span class="line">      ),</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æ–°å¢è³‡æ–™å¤¾ï¼Œå¯é¸æ“‡æ’å…¥ä½ç½®</span></span><br><span class="line">    <span class="attr">addFolder</span>: <span class="function">(<span class="params">folder, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="attr">newFolder</span>: <span class="title class_">Folder</span> = &#123; ...folder, <span class="attr">id</span>: <span class="string">`folder-<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>`</span> &#125;;</span><br><span class="line">      <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">        <span class="attr">folders</span>:</span><br><span class="line">          <span class="keyword">typeof</span> index === <span class="string">&quot;number&quot;</span></span><br><span class="line">            ? [</span><br><span class="line">                ...state.<span class="property">folders</span>.<span class="title function_">slice</span>(<span class="number">0</span>, index),</span><br><span class="line">                newFolder,</span><br><span class="line">                ...state.<span class="property">folders</span>.<span class="title function_">slice</span>(index),</span><br><span class="line">              ]</span><br><span class="line">            : [...state.<span class="property">folders</span>, newFolder],</span><br><span class="line">      &#125;));</span><br><span class="line">      <span class="keyword">return</span> newFolder;</span><br><span class="line">    &#125;,</span><br><span class="line">  <span class="attr">deleteFolder</span>: <span class="function">(<span class="params">id</span>) =&gt;</span></span><br><span class="line">    <span class="title function_">set</span>(&#123;</span><br><span class="line">      <span class="attr">folders</span>: <span class="title function_">get</span>().<span class="property">folders</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">folder</span>) =&gt;</span> folder.<span class="property">id</span> !== id),</span><br><span class="line">    &#125;),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ set ä¾†æ›´æ–°ç‹€æ…‹ï¼Œget å–å¾—ç•¶å‰ç‹€æ…‹ã€‚</li><li>addFolder æ–¹æ³•å¯æŒ‡å®šæ–°å¢è³‡æ–™å¤¾çš„ä½ç½®ï¼ˆé€éå¯é¸çš„ index åƒæ•¸ï¼‰ï¼›è‹¥æœªæŒ‡å®šï¼Œå‰‡é è¨­æ–°å¢åˆ°åˆ—è¡¨å°¾ç«¯ã€‚</li></ul><h2 id="snippetSlice-ts"><a href="#snippetSlice-ts" class="headerlink" title="snippetSlice.ts"></a>snippetSlice.ts</h2><p>snippetSlice è² è²¬ snippet çš„æ–°å¢ã€åˆªé™¤èˆ‡æ›´æ–°æ“ä½œã€‚ç”±æ–¼ snippets å­˜æ”¾æ–¼ folders ä¸­ï¼Œå› æ­¤æ­¤ slice æœƒä¾è³´ FolderSlice çš„ç‹€æ…‹ä¾†é€²è¡Œè³‡æ–™è™•ç†ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/stores/snippet/slices/snippetSlice.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StateCreator</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Snippet</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/snippets&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">FolderSlice</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./folderSlice&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">SnippetSlice</span> &#123;</span><br><span class="line">  <span class="attr">addSnippetToFolder</span>: <span class="function">(<span class="params">folderId: <span class="built_in">string</span>, snippet: Omit&lt;Snippet, <span class="string">&#x27;id&#x27;</span>&gt;</span>) =&gt;</span> <span class="title class_">Snippet</span>;</span><br><span class="line">  <span class="attr">deleteSnippetFromFolder</span>: <span class="function">(<span class="params">folderId: <span class="built_in">string</span>, snippetId: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">updateSnippet</span>: <span class="function">(<span class="params">snippetId: <span class="built_in">string</span>, updatedSnippet: Partial&lt;Snippet&gt;</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€™è£¡ä¾è³´ FolderSliceï¼Œå› ç‚º snippets éƒ½å„²å­˜åœ¨ folders å…§</span></span><br><span class="line"><span class="comment">// ä¿®æ”¹å¾Œï¼ŒaddSnippetToFolder å›å‚³æ–° snippet</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">createSnippetSlice</span>: <span class="title class_">StateCreator</span>&lt;</span><br><span class="line">  <span class="title class_">FolderSlice</span> &amp; <span class="title class_">SnippetSlice</span>,</span><br><span class="line">  [],</span><br><span class="line">  [],</span><br><span class="line">  <span class="title class_">SnippetSlice</span></span><br><span class="line">&gt; = <span class="function">(<span class="params">set, get</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="comment">// æ–°å¢ä¸€å€‹ snippet åˆ°æŒ‡å®šçš„è³‡æ–™å¤¾ï¼Œä¸¦å›å‚³æ–°å¢çš„ snippetï¼ˆåŒ…å«è‡ªå‹•ç”Ÿæˆçš„ idï¼‰</span></span><br><span class="line">  <span class="attr">addSnippetToFolder</span>: <span class="function">(<span class="params">folderId, snippet</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">newSnippet</span>: <span class="title class_">Snippet</span> = &#123; ...snippet, <span class="attr">id</span>: <span class="string">`snippet-<span class="subst">$&#123;<span class="built_in">Date</span>.now()&#125;</span>`</span> &#125;;</span><br><span class="line">    <span class="title function_">set</span>(&#123;</span><br><span class="line">      <span class="attr">folders</span>: <span class="title function_">get</span>().<span class="property">folders</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">folder</span>) =&gt;</span></span><br><span class="line">        folder.<span class="property">id</span> === folderId</span><br><span class="line">          ? &#123; ...folder, <span class="attr">snippets</span>: [...folder.<span class="property">snippets</span>, newSnippet] &#125;</span><br><span class="line">          : folder</span><br><span class="line">      ),</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> newSnippet; <span class="comment">// å›å‚³æ–°å¢å¾Œå®Œæ•´çš„ snippet ç‰©ä»¶</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">deleteSnippetFromFolder</span>: <span class="function">(<span class="params">folderId, snippetId</span>) =&gt;</span></span><br><span class="line">    <span class="title function_">set</span>(&#123;</span><br><span class="line">      <span class="attr">folders</span>: <span class="title function_">get</span>().<span class="property">folders</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">folder</span>) =&gt;</span></span><br><span class="line">        folder.<span class="property">id</span> === folderId</span><br><span class="line">          ? &#123;</span><br><span class="line">              ...folder,</span><br><span class="line">              <span class="attr">snippets</span>: folder.<span class="property">snippets</span>.<span class="title function_">filter</span>(</span><br><span class="line">                <span class="function">(<span class="params">snippet</span>) =&gt;</span> snippet.<span class="property">id</span> !== snippetId</span><br><span class="line">              ),</span><br><span class="line">            &#125;</span><br><span class="line">          : folder</span><br><span class="line">      ),</span><br><span class="line">    &#125;),</span><br><span class="line">  <span class="attr">updateSnippet</span>: <span class="function">(<span class="params">snippetId, updatedSnippet</span>) =&gt;</span></span><br><span class="line">    <span class="title function_">set</span>(&#123;</span><br><span class="line">      <span class="attr">folders</span>: <span class="title function_">get</span>().<span class="property">folders</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">folder</span>) =&gt;</span> (&#123;</span><br><span class="line">        ...folder,</span><br><span class="line">        <span class="attr">snippets</span>: folder.<span class="property">snippets</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">snippet</span>) =&gt;</span></span><br><span class="line">          snippet.<span class="property">id</span> === snippetId ? &#123; ...snippet, ...updatedSnippet &#125; : snippet</span><br><span class="line">        ),</span><br><span class="line">      &#125;)),</span><br><span class="line">    &#125;),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><p>æ–°å¢ snippetï¼ˆaddSnippetToFolderï¼‰</p><p>æä¾›ä¸€å€‹è³‡æ–™å¤¾ id å’Œ snippet çš„å…§å®¹ï¼ˆä¸å« idï¼‰ã€‚<br>è‡ªå‹•ç”¢ç”Ÿ snippet çš„ idï¼ˆé€é Date.now()ï¼‰ã€‚<br>å°‡æ–°çš„ snippet æ”¾åˆ°æŒ‡å®šçš„è³‡æ–™å¤¾å…§ï¼Œä¸¦å›å‚³å®Œæ•´çš„æ–° snippetï¼Œæ–¹ä¾¿å¾ŒçºŒæ“ä½œä½¿ç”¨ã€‚</p></li><li><p>åˆªé™¤ snippetï¼ˆdeleteSnippetFromFolderï¼‰</p><p>æ ¹æ“šæŒ‡å®šçš„è³‡æ–™å¤¾ id å’Œ snippet id ç§»é™¤ snippetã€‚<br>ä½¿ç”¨ filter æ–¹æ³•ï¼Œç¢ºä¿å…¶ä»– snippet ä¸å—å½±éŸ¿ã€‚</p></li><li><p>æ›´æ–° snippetï¼ˆupdateSnippetï¼‰</p><p>-æä¾› snippet id å’Œæ¬²æ›´æ–°çš„éƒ¨åˆ† snippet å±¬æ€§ã€‚<br>-ä½¿ç”¨ map æ–¹æ³•ï¼Œåªæ›´æ–°ç¬¦åˆæŒ‡å®š id çš„ snippetï¼Œå…¶ä»– snippet ç¶­æŒä¸è®Šã€‚</p></li></ul><h2 id="uiSlice-ts"><a href="#uiSlice-ts" class="headerlink" title="uiSlice.ts"></a>uiSlice.ts</h2><p>uiSlice å°ˆé–€ç”¨ä¾†ç®¡ç†å°ˆæ¡ˆå…§èˆ‡ UI é¡¯ç¤ºç›¸é—œçš„ç‹€æ…‹ï¼Œä¾‹å¦‚ dialogï¼ˆå°è©±æ¡†ï¼‰çš„é–‹å•Ÿæˆ–é—œé–‰ç‹€æ…‹ï¼Œä»¥åŠç•¶å‰åŒ¹é…ï¼ˆmatchedï¼‰çš„ snippet è³‡è¨Šã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/stores/snippet/slices/uiSlice.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">StateCreator</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MatchedSnippet</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/snippets&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">UISlice</span> &#123;</span><br><span class="line">  <span class="attr">isDialogOpen</span>: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="attr">matchedSnippet</span>: <span class="title class_">MatchedSnippet</span>;</span><br><span class="line">  <span class="attr">setIsDialogOpen</span>: <span class="function">(<span class="params">open: <span class="built_in">boolean</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  <span class="attr">setMatchedSnippet</span>: <span class="function">(<span class="params">snippet: MatchedSnippet</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">createUISlice</span>: <span class="title class_">StateCreator</span>&lt;<span class="title class_">UISlice</span>&gt; = <span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">isDialogOpen</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">matchedSnippet</span>: &#123;</span><br><span class="line">    <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">targetElement</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">insert</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">shortcut</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">setIsDialogOpen</span>: <span class="function">(<span class="params">open: <span class="built_in">boolean</span></span>) =&gt;</span> <span class="title function_">set</span>(&#123; <span class="attr">isDialogOpen</span>: open &#125;),</span><br><span class="line">  <span class="attr">setMatchedSnippet</span>: <span class="function">(<span class="params">snippet: MatchedSnippet</span>) =&gt;</span> <span class="title function_">set</span>(&#123; <span class="attr">matchedSnippet</span>: snippet &#125;),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>isDialogOpen<br>è² è²¬è¿½è¹¤ dialog æ˜¯å¦æ­£åœ¨é¡¯ç¤ºï¼Œä¾¿æ–¼æ§åˆ¶ dialog å…ƒä»¶çš„é¡¯ç¤ºèˆ‡éš±è—ã€‚</li><li>matchedSnippet<br>ç”¨æ–¼æš«æ™‚å„²å­˜ç”¨æˆ¶ç›®å‰åŒ¹é…åˆ°çš„ snippet è³‡è¨Šï¼Œä¾‹å¦‚ snippet çš„å…§å®¹ã€ç›®æ¨™å…ƒç´ ã€å¿«æ·éµè³‡è¨Šç­‰ç­‰ï¼Œè®“ UI èƒ½å³æ™‚åæ‡‰ç”¨æˆ¶æ“ä½œã€‚</li></ul><h2 id="åœ¨é é¢ä¸­ä½¿ç”¨-Zustand-ç®¡ç†çš„ç‹€æ…‹"><a href="#åœ¨é é¢ä¸­ä½¿ç”¨-Zustand-ç®¡ç†çš„ç‹€æ…‹" class="headerlink" title="åœ¨é é¢ä¸­ä½¿ç”¨ Zustand ç®¡ç†çš„ç‹€æ…‹"></a>åœ¨é é¢ä¸­ä½¿ç”¨ Zustand ç®¡ç†çš„ç‹€æ…‹</h2><p>æƒ³åœ¨é é¢æˆ–å…ƒä»¶å…§ä½¿ç”¨å‰›æ‰å»ºç«‹çš„ Zustand ç‹€æ…‹æ™‚ï¼Œåªéœ€å¾æˆ‘å€‘æ•´åˆå¥½çš„ useSnippetStore å¼•å…¥æ‰€éœ€çš„ç‹€æ…‹æˆ–æ–¹æ³•å³å¯</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useSnippetStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/stores/snippet&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Snippet</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@/types/snippets&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// å¾æ•´åˆå¾Œçš„ store ç›´æ¥å–å‡ºéœ€è¦çš„æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">const</span> &#123; addFolder &#125; = <span class="title function_">useSnippetStore</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// èˆ‰ä¾‹ï¼šåœ¨å…ƒä»¶è¼‰å…¥æ™‚æ–°å¢ä¸€å€‹ folder</span></span><br><span class="line">    <span class="keyword">const</span> newFolder = <span class="title function_">addFolder</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;New Folder&#x27;</span>,</span><br><span class="line">      <span class="attr">description</span>: <span class="string">&#x27;Example folder created on load&#x27;</span>,</span><br><span class="line">      <span class="attr">snippets</span>: [],</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ–°å¢äº†è³‡æ–™å¤¾ï¼š&#x27;</span>, newFolder);</span><br><span class="line">  &#125;, [addFolder]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>ä½ çš„å…ƒä»¶å…§å®¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>ä¸å†éœ€è¦é¡å¤–å¼•å…¥ä»»ä½• Context Providerã€‚</li><li>åœ¨ä»»ä½•éœ€è¦å­˜å–å…¨å±€ç‹€æ…‹çš„åœ°æ–¹ï¼Œåªéœ€ç°¡å–®å°å…¥ useSnippetStoreï¼Œç„¶å¾Œç›´æ¥èª¿ç”¨å°æ‡‰çš„æ–¹æ³•æˆ–å–å¾—ç‹€æ…‹å³å¯ã€‚</li></ul><h2 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h2><p>è—‰ç”±å°å…¥ Zustand ä¸¦å°‡ç‹€æ…‹æ‹†åˆ†æˆå¤šå€‹ç¨ç«‹çš„ Sliceï¼ˆfolderSliceã€snippetSliceã€uiSliceï¼‰ï¼Œä½¿æˆ‘èƒ½å¤ ï¼š</p><ul><li>æ¸…æ™°åœ°åˆ†é›¢ç‹€æ…‹è²¬ä»»ï¼šæ¯å€‹ Slice å°ˆæ³¨æ–¼è™•ç†ç‰¹å®šé ˜åŸŸçš„é‚è¼¯ï¼Œå¦‚è³‡æ–™å¤¾ç®¡ç†ã€snippet æ“ä½œï¼Œä»¥åŠ UI ç‹€æ…‹ã€‚</li><li>éˆæ´»ç®¡ç†æŒä¹…åŒ–ç­–ç•¥ï¼šé€é Zustand æä¾›çš„ middlewareï¼ˆå¦‚ persist èˆ‡ partializeï¼‰ï¼Œåªå°‡å¿…è¦çš„è³‡æ–™ï¼ˆä¾‹å¦‚è³‡æ–™å¤¾ï¼‰æŒä¹…åŒ–è‡³ localStorageï¼Œè€Œ UI ç­‰è‡¨æ™‚ç‹€æ…‹å‰‡ä¿ç•™åœ¨è¨˜æ†¶é«”ä¸­ã€‚</li><li>æœ‰æ•ˆé™ä½è€¦åˆåº¦èˆ‡æ¨£æ¿ä»£ç¢¼ï¼šæ¯å€‹å…ƒä»¶ä¸å†éœ€è¦é¡å¤–å¼•å…¥ Providerï¼Œç°¡åŒ–äº†é–‹ç™¼æµç¨‹ï¼Œä¸¦ä¸”é™ä½æœªä¾†ç¶­è­·æˆæœ¬ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;é€™æ®µæ™‚é–“åœ¨è£½ä½œä¸€å€‹ snippet ç®¡ç†çš„ side projectï¼Œéç¨‹ä¸­é‡åˆ°äº†ä¸€äº›è·¨é é¢å…±äº«è³‡æ–™çš„éœ€æ±‚ã€‚å°ˆæ¡ˆä¸­æœ‰ä¸€åŒ…è³‡æ–™ç¨±ç‚º snippetï¼Œå…§éƒ¨åŒ…å«å¤šå€‹ folder å’Œå°é …ç›®çš„ snippetsã€‚é€™äº›è³‡æ–™ä¸åƒ…æœƒåœ¨ /snippet è·¯å¾‘ä¸‹çš„å…ƒä»¶ä½¿ç”¨ï¼Œé‚„æœƒè·¨ rout</summary>
      
    
    
    
    <category term="side-project" scheme="https://eva813.github.io/categories/side-project/"/>
    
    
    <category term="React" scheme="https://eva813.github.io/tags/React/"/>
    
    <category term="side-project" scheme="https://eva813.github.io/tags/side-project/"/>
    
    <category term="Zustand" scheme="https://eva813.github.io/tags/Zustand/"/>
    
  </entry>
  
  <entry>
    <title>figma mcp æ‡‰ç”¨</title>
    <link href="https://eva813.github.io/2025/03/27/figma-mcp/"/>
    <id>https://eva813.github.io/2025/03/27/figma-mcp/</id>
    <published>2025-03-27T11:30:14.000Z</published>
    <updated>2025-03-27T11:52:21.217Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰æ–°æ±è¥¿å°±æ˜¯è¦ä¾†å¿«é€Ÿå˜—è©¦ä¸€ä¸‹ï½ï½ æ³¨æ„ cursor è¦æ˜¯ä»˜è²»ç‰ˆæ‰èƒ½ä½¿ç”¨</p><p>è‡³ GitHub clone å°ˆæ¡ˆ <a href="https://github.com/sonnylazuardi/cursor-talk-to-figma-mcp">Cursor Talk to Figma MCP</a></p><p>ç„¶å¾Œéµå¾ª READMEï¼š<strong>Get Started é–‹å§‹</strong></p><p>å®ƒéœ€è¦å®‰è£ bun å¥—ä»¶ç®¡ç†å·¥å…·</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL <span class="attr">https</span>:<span class="comment">//bun.sh/install | bash</span></span><br></pre></td></tr></table></figure><p>éœ€è¦åœ¨ä½ çš„å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œ:</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /path/to/your/cursor-talk-to-figma-mcp</span><br><span class="line">bun setup</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•Ÿå‹• WebSocket serverï¼ˆå¿…é ˆæŒçºŒåŸ·è¡Œï¼‰</span></span><br><span class="line">bun socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># å•Ÿå‹• MCP serverï¼ˆå¦é–‹ä¸€å€‹çµ‚ç«¯ï¼‰</span></span><br><span class="line">bunx cursor-talk-to-figma-mcp</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// Add the server to your Cursor MCP configuration <span class="keyword">in</span> ~/.cursor/mcp.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;mcpServers&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;TalkToFigma&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;command&quot;</span>: <span class="string">&quot;bunx&quot;</span>,</span><br><span class="line">      <span class="string">&quot;args&quot;</span>: [<span class="string">&quot;cursor-talk-to-figma-mcp&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ç‚ºåœ–ç¤ºï¼š</p><p><img src="https://i.imgur.com/6LuXXYv.png" alt="image.png"></p><span id="more"></span><p>å¾ Figma çš„å®˜ç¶²ä¸‹è¼‰ ï¼š<a href="https://www.figma.com/downloads/">https://www.figma.com/downloads/</a></p><p>åœ¨ç¬¬ä¸€æ¬¡è¨­å®šï¼šé¸æ“‡å·¦ä¸Šè§’çš„ Figma Iconï¼Œé»é¸ã€ŒPluginsã€â†’ã€ŒDevelopmentã€â†’ã€ŒImport plugin from manifestã€</p><ul><li>åœ¨ Figma ä¸­ï¼Œé»é¸é¸å–® â†’ <strong>Plugins</strong> â†’ <strong>Development</strong> â†’ Import plugin from manifest</li><li>æŒ‡å®šä¸¦é¸å–å°ˆæ¡ˆä¸­çš„ <code>src/cursor_mcp_plugin/manifest.json</code> æª”æ¡ˆ</li><li>å®Œæˆå¾Œï¼Œè©²å¤–æ›å°±æœƒå‡ºç¾åœ¨ä½ çš„ Figma Development Plugins åˆ—è¡¨ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚</li></ul><p><img src="https://i.imgur.com/UZwKie7.png" alt="image.png"></p><p>æ­¤å¤–ï¼Œè¦æ³¨æ„ cursor  é€£ç·šï¼Œç•¶ä½ æœ‰æˆåŠŸé€£æ¥ mcp æœƒæœ‰ç¶ é»ï¼Œä¸”å‘ˆç¾ Enable:</p><p><img src="https://i.imgur.com/ei4uzVB.png" alt="image.png"></p><p><img src="https://i.imgur.com/xysn5c0.png" alt="image.png"></p><p>ç¢ºå®šèˆ‡ figma é€£ç·šæˆåŠŸï¼š</p><p>åŸ·è¡Œï¼štalk fo figma , channel id: {ä½ çš„ channel id}</p><p><img src="https://i.imgur.com/YhCxwoq.png" alt="image.png"></p><p>æ¥è‘—ä½ å°±å¯ä»¥å‘Šè¨´ä»–ä½ è¦åšå¾— figma å…§å®¹ï¼Œåƒæ˜¯æˆ‘çš„æŒ‡ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">è¨­è¨ˆä¸€å€‹ ç®¡ç†ai prompt æ¡Œé¢ç‰ˆï¼Œè«‹æå‡ºä»¥ä¸‹æ–¹å¼è®“æˆ‘å®Œæˆ æ‡‰ç”¨ç¨‹å¼ æ‰€æœ‰éœ€è¦çš„è¨­è¨ˆï¼š</span><br><span class="line"></span><br><span class="line">æ€è€ƒä½¿ç”¨è€…éœ€è¦ ç®¡ç†ai prompt æ¡Œé¢ç‰ˆ è¦æä¾›å“ªäº›åŠŸèƒ½:</span><br><span class="line"></span><br><span class="line">ä½œç‚ºç”¢å“ç¶“ç†æå‡ºåŠŸèƒ½è¦åŠƒ</span><br><span class="line"></span><br><span class="line">ä½œç‚ºè¨­è¨ˆå¸«æä¾›æ•´é«”ä»‹é¢è¨­è¨ˆ</span><br><span class="line"></span><br><span class="line">å¯ä»¥ä½¿ç”¨ FrontAwesome ç­‰åœ–ç¤ºå±•ç¤ºï¼Œè®“åŸå‹åœ–æ›´æ¥è¿‘çœŸå¯¦</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä»–åªå¹«æˆ‘ç”¢å‡ºç°¡å–®çš„ layoutï¼Œè¦åšå‡ºä¸€è¨­è¨ˆç¨¿é‚„æ˜¯å¾ˆæœ‰å¤§é›£åº¦</p><p><img src="https://i.imgur.com/yr4O7rI.png" alt="image.png"></p><p>åƒè€ƒï¼š<br><a href="https://muki.tw/figma-mcp-server-cursor/">https://muki.tw/figma-mcp-server-cursor/</a></p><hr><p>ä½¿ç”¨ <a href="https://github.com/GLips/Figma-Context-MCP">https://github.com/GLips/Figma-Context-MCP</a> </p><p>é–±è®€ Readme: <strong>Connecting to Cursor</strong></p><p>1.åœ¨è‡ªå·±çµ‚ç«¯æ©Ÿï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx figma-developer-mcp --figma-api-key=&lt;your-figma-api-key&gt;</span><br></pre></td></tr></table></figure><ul><li>-figma-api-key è¦åˆ° figma ç™»å…¥å¾Œï¼Œé»æ“Šé ­åƒ settings â†’  security â†’ create new token</li></ul><p>2.åˆ° <strong>Cursor â†’ Cursor settings â†’ mcp</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;mcpServers&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Framelink Figma MCP&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://localhost:3000/sse&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.å¯ä»¥å›åˆ° figma ï¼Œè¦é¸æ“‡ä½ è¦çš„ç•«é¢</p><p><img src="https://i.imgur.com/Lbv0HvC.png" alt="image.png"></p><p>æ³¨æ„ä½ åœ¨æœ¬åœ°ï¼Œè¦å…ˆå»ºç«‹å¥½ä¸€ react å°ˆæ¡ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest my-react-app -- --template react</span><br></pre></td></tr></table></figure><p>ç„¶å¾Œåˆ° cursor â†’ cd my-react-app  â†’  chat è²¼ä¸Šï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@https://www.figma.com/design/lImjbdZmdV25TQ23glGfvV/Locofy-Sample-Project---FickleFlight-(Community)?node-id=1003-3841&amp;t=CNAo85NCrYNAJpJ6-4 </span><br><span class="line">è«‹å¹«æˆ‘ç”¨ tailwindcssåšæ­¤ç•«é¢ï¼Œ tailwind css è¨­å®šæˆ‘å·²ç¶“è™•ç†å¥½ï¼Œè«‹å°ˆæ³¨æ–¼åšç•«é¢ï¼Œä¸è¦ç”¨å…¶ä»– cssæ¡†æ¶ï¼Œå°±å…¨éƒ¨ä½¿ç”¨tailwindï¼Œè¨˜å¾—åœ–ç‰‡ä¹Ÿè¦æŠ“ä¸‹ä¾†</span><br></pre></td></tr></table></figure><p>åœ¨è©² cursor å°ˆæ¡ˆï¼š</p><p><img src="https://i.imgur.com/ADYZghc.png" alt="image.png"></p><p>ä»¥ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ä»–åšçš„åˆ‡ç‰ˆï¼š</p><p>æˆ‘åƒç…§çš„ figma template : Locofy Sample Project - FickleFlight (Community)</p><p><img src="https://i.imgur.com/L1PUGuw.png" alt="image.png"></p><p><img src="https://i.imgur.com/yMcOvmL.png" alt="image.png"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ‰æ–°æ±è¥¿å°±æ˜¯è¦ä¾†å¿«é€Ÿå˜—è©¦ä¸€ä¸‹ï½ï½ æ³¨æ„ cursor è¦æ˜¯ä»˜è²»ç‰ˆæ‰èƒ½ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;è‡³ GitHub clone å°ˆæ¡ˆ &lt;a href=&quot;https://github.com/sonnylazuardi/cursor-talk-to-figma-mcp&quot;&gt;Cursor Talk to Figma MCP&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç„¶å¾Œéµå¾ª READMEï¼š&lt;strong&gt;Get Started é–‹å§‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®ƒéœ€è¦å®‰è£ bun å¥—ä»¶ç®¡ç†å·¥å…·&lt;/p&gt;
&lt;figure class=&quot;highlight jsx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl -fsSL &lt;span class=&quot;attr&quot;&gt;https&lt;/span&gt;:&lt;span class=&quot;comment&quot;&gt;//bun.sh/install | bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;éœ€è¦åœ¨ä½ çš„å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œ:&lt;/p&gt;
&lt;figure class=&quot;highlight jsx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd /path/to/your/cursor-talk-to-figma-mcp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bun setup&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# å•Ÿå‹• WebSocket serverï¼ˆå¿…é ˆæŒçºŒåŸ·è¡Œï¼‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bun socket&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# å•Ÿå‹• MCP serverï¼ˆå¦é–‹ä¸€å€‹çµ‚ç«¯ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bunx cursor-talk-to-figma-mcp&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// Add the server to your Cursor MCP configuration &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; ~/.cursor/mcp.json:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&amp;quot;mcpServers&amp;quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&amp;quot;TalkToFigma&amp;quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;string&quot;&gt;&amp;quot;command&amp;quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&amp;quot;bunx&amp;quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;string&quot;&gt;&amp;quot;args&amp;quot;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&amp;quot;cursor-talk-to-figma-mcp&amp;quot;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;ä»¥ä¸‹ç‚ºåœ–ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/6LuXXYv.png&quot; alt=&quot;image.png&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>Vue å‹•æ…‹äº‹ä»¶åç¨±</title>
    <link href="https://eva813.github.io/2025/03/27/vue-dynamic-event/"/>
    <id>https://eva813.github.io/2025/03/27/vue-dynamic-event/</id>
    <published>2025-03-26T23:16:48.000Z</published>
    <updated>2025-03-27T11:54:47.993Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ Vue ä¸­ä½¿ç”¨å‹•æ…‹äº‹ä»¶åç¨±çš„åŠŸèƒ½è‡ª Vue 2.6.0 ç‰ˆæœ¬é–‹å§‹æ”¯æŒã€‚å¯ä»¥ä½¿ç”¨ v-on æˆ– @ ä¾†å‹•æ…‹ç¶å®šäº‹ä»¶åç¨±</p><p>ç°¡å–®èˆ‰ä¾‹ï¼š<br>æ ¹æ“šè£ç½®é¡å‹åˆ‡æ›äº‹ä»¶ï¼ˆæ¡Œæ©Ÿ vs æ‰‹æ©Ÿï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> event = <span class="title function_">ref</span>(navigator.<span class="property">maxTouchPoints</span> ? <span class="string">&#x27;touchstart&#x27;</span> : <span class="string">&#x27;click&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">handle</span> = (<span class="params"></span>) =&gt; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Triggered on&#x27;</span>, event.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @[<span class="attr">event</span>]=<span class="string">&quot;handle&quot;</span>&gt;</span>æŒ‰æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.ã€Œæª”æ¡ˆå¡ç‰‡ã€å…ƒä»¶é è¦½æˆ–è·³è½‰ï¼š</p><p>é»æ“Š (click)ï¼šé¸æ“‡ï¼ä¸‹è¼‰æª”æ¡ˆ<br>æ»‘é¼ ç§»å…¥ (mouseover)ï¼šé è¦½æª”æ¡ˆæ‘˜è¦</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;file-card&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on</span>=<span class="string">&quot;&#123; click: handleDownload, mouseover: handlePreview &#125;&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; fileName &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;showPreview&quot;</span> <span class="attr">class</span>=<span class="string">&quot;preview-popup&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123; previewText &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref, computed, nextTick &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> props = defineProps&lt;&#123; <span class="attr">fileName</span>: string; <span class="attr">fileUrl</span>: string &#125;&gt;()</span><br><span class="line"><span class="keyword">const</span> showPreview = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">const</span> previewText = <span class="title function_">ref</span>(<span class="string">&#x27;Loading previewâ€¦&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»æ“Š â†’ è§¸ç™¼ä¸‹è¼‰</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleDownload</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">open</span>(props.<span class="property">fileUrl</span>, <span class="string">&#x27;_blank&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ»‘é¼ ç§»å…¥ â†’ å–å¾—ä¸¦é¡¯ç¤ºæª”æ¡ˆæ‘˜è¦</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handlePreview</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  showPreview.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  <span class="comment">// æ¨¡æ“¬ API è«‹æ±‚</span></span><br><span class="line">  <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">setTimeout</span>(res, <span class="number">300</span>))</span><br><span class="line">  previewText.<span class="property">value</span> = <span class="string">`Preview of <span class="subst">$&#123;props.fileName&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ»‘é¼ ç§»å‡ºå¾Œéš±è—é è¦½</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">hidePreview</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  showPreview.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›£è½æ»‘é¼ é›¢é–‹æ•´å€‹å¡ç‰‡</span></span><br><span class="line"><span class="keyword">const</span> cardRef = ref&lt;<span class="title class_">HTMLElement</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>)</span><br><span class="line">cardRef.<span class="property">value</span>?.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseleave&#x27;</span>, hidePreview)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.file-card</span> &#123; <span class="attribute">position</span>: relative; <span class="attribute">display</span>: inline-block; &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.preview-popup</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">top</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">padding</span>: <span class="number">0.5rem</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">background</span>: white;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><a href="https://stackblitz.com/edit/vue-tip-dynamic-event-names-evguwtw8?file=README.md">Demo</a></p><p>æ³¨æ„ï¼šåœ¨ã€ŒåŒä¸€æ¬„ä½æœƒå› ä¸åŒæƒ…å¢ƒè€Œåˆ‡æ›è§¸ç™¼äº‹ä»¶ã€æ™‚ï¼Œæ‰å»ºè­°ç”¨å‹•æ…‹ç¶å®šã€‚è‹¥åªæ˜¯å–®ç´”åˆ‡æ›äº‹ä»¶åç¨±ï¼Œå»ºè­°ç›´æ¥åœ¨æ–¹æ³•å…§åˆ¤æ–·å³å¯ã€‚</p><p>ä¹Ÿå¯åƒè€ƒ Michael Hoffmann é€™è£¡çš„å¦ä¸€å¯¦ä½œæ–¹å¼ï¼š<br><a href="https://stackblitz.com/edit/vue-tip-dynamic-event-names?file=src%2FApp.vue">https://stackblitz.com/edit/vue-tip-dynamic-event-names?file=src%2FApp.vue</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨ Vue ä¸­ä½¿ç”¨å‹•æ…‹äº‹ä»¶åç¨±çš„åŠŸèƒ½è‡ª Vue 2.6.0 ç‰ˆæœ¬é–‹å§‹æ”¯æŒã€‚å¯ä»¥ä½¿ç”¨ v-on æˆ– @ ä¾†å‹•æ…‹ç¶å®šäº‹ä»¶åç¨±&lt;/p&gt;
&lt;p&gt;ç°¡å–®èˆ‰ä¾‹ï¼š&lt;br&gt;æ ¹æ“šè£ç½®é¡å‹åˆ‡æ›äº‹ä»¶ï¼ˆæ¡Œæ©Ÿ vs æ‰‹æ©Ÿï¼‰&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;tab</summary>
      
    
    
    
    <category term="Vue" scheme="https://eva813.github.io/categories/Vue/"/>
    
    
    <category term="Vue" scheme="https://eva813.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>twilwindCss-twMerge</title>
    <link href="https://eva813.github.io/2025/03/20/twilwindCss-twMerge/"/>
    <id>https://eva813.github.io/2025/03/20/twilwindCss-twMerge/</id>
    <published>2025-03-20T11:43:16.000Z</published>
    <updated>2025-03-20T12:06:20.200Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨é–‹ç™¼ React æˆ– Vue æ‡‰ç”¨æ™‚ï¼Œå‹•æ…‹çµ„åˆ Tailwind CSS class æ˜¯å¸¸è¦‹çš„éœ€æ±‚ã€‚ä½†ç•¶ class ä¾†æºå¤šæ¨£ï¼ˆä¾‹å¦‚ props å‚³å…¥ã€æ¢ä»¶æ¸²æŸ“ç­‰ï¼‰ï¼Œä½ å¯èƒ½æœƒé‡åˆ° class é‡è¤‡ã€è¡çªæˆ–é›£ä»¥ç¶­è­·çš„å•é¡Œï¼Œé€™æ™‚å€™ï¼ŒtwMerge å°±èƒ½å¹«åŠ©ä½ è§£æ±ºé€™äº›å›°é›£ã€‚</p><h2 id="ä»€éº¼æ˜¯-twMerge"><a href="#ä»€éº¼æ˜¯-twMerge" class="headerlink" title="ä»€éº¼æ˜¯ twMerge"></a>ä»€éº¼æ˜¯ twMerge</h2><p><code>twMerge</code> æ˜¯ä¸€å€‹å°ˆç‚º <strong>Tailwind CSS</strong> è¨­è¨ˆçš„ class åˆä½µå·¥</p><ul><li><strong>è¡çªè§£æ±º</strong>ï¼šç•¶ä½ å¾ä¸åŒä¾†æºï¼ˆä¾‹å¦‚é è¨­æ¨£å¼å’Œ props å‚³å…¥çš„ classï¼‰åˆä½µ class æ™‚ï¼Œå¯èƒ½æœƒå‡ºç¾ç›¸åŒå±¬æ€§çš„é‡è¤‡å®šç¾©ï¼ŒtwMerge æœƒè‡ªå‹•è§£æ±ºé€™äº›è¡çªï¼Œä¿è­‰æœ€çµ‚åªä¿ç•™æ­£ç¢ºçš„ classã€‚</li><li><strong>å‹•æ…‹çµ„åˆ</strong>ï¼šåœ¨å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œå¾ˆå¤šæ™‚å€™ class å­—ç¬¦ä¸²æ˜¯æ ¹æ“šæ¢ä»¶çµ„åˆå‡ºä¾†çš„ï¼Œç›´æ¥æ‹¼æ¥å¯èƒ½æœƒå°è‡´æ„æ–™ä¹‹å¤–çš„è¦†è“‹ã€‚twMerge èƒ½å¤ è®“ä½ çš„ class åˆä½µæ›´æœ‰æ¢ç†ï¼Œé¿å…æ··æ·†ã€‚</li></ul><p>å®‰è£æ–¹å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install tailwind-merge</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">yarn add tailwind-merge</span><br></pre></td></tr></table></figure><p>åŸºæœ¬ä½¿ç”¨ç¯„ä¾‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; twMerge &#125; <span class="keyword">from</span> <span class="string">&#x27;tailwind-merge&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> classes = <span class="title function_">twMerge</span>(<span class="string">&quot;p-4&quot;</span>, <span class="string">&quot;p-2&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(classes); <span class="comment">// è¼¸å‡º: &quot;p-2&quot;ï¼ˆè‡ªå‹•ç§»é™¤è¡çªçš„ p-4ï¼‰</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="ç‚ºä»€éº¼ä¸ç”¨æ‰‹å‹•æ‹¼æ¥-classï¼Ÿ"><a href="#ç‚ºä»€éº¼ä¸ç”¨æ‰‹å‹•æ‹¼æ¥-classï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼ä¸ç”¨æ‰‹å‹•æ‹¼æ¥ classï¼Ÿ"></a>ç‚ºä»€éº¼ä¸ç”¨æ‰‹å‹•æ‹¼æ¥ classï¼Ÿ</h2><h3 id="ç„¡æ³•è™•ç†-Tailwind-class-è¡çª"><a href="#ç„¡æ³•è™•ç†-Tailwind-class-è¡çª" class="headerlink" title="ç„¡æ³•è™•ç† Tailwind class è¡çª"></a><strong>ç„¡æ³•è™•ç† Tailwind class è¡çª</strong></h3><p>ç•¶å…©å€‹ class æœ‰è¡çªæ™‚ï¼Œæ‰‹å‹•æ‹¼æ¥ç„¡æ³•ç¢ºä¿å¾Œä¾†çš„ class æ˜¯å¦æ­£ç¢ºè¦†è“‹å‰è€…ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> finalClasses = <span class="string">`p-4 p-2`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(finalClasses); <span class="comment">// &quot;p-4 p-2&quot; ï¼ˆç„¡æ³•ç§»é™¤è¡çª classï¼‰</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¢ä»¶æ¸²æŸ“æ™‚-class-å¯èƒ½é‡è¤‡æˆ–å¤±æ•ˆ"><a href="#æ¢ä»¶æ¸²æŸ“æ™‚-class-å¯èƒ½é‡è¤‡æˆ–å¤±æ•ˆ" class="headerlink" title="æ¢ä»¶æ¸²æŸ“æ™‚ class å¯èƒ½é‡è¤‡æˆ–å¤±æ•ˆ"></a><strong>æ¢ä»¶æ¸²æŸ“æ™‚ class å¯èƒ½é‡è¤‡æˆ–å¤±æ•ˆ</strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> isActive = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> finalClasses = <span class="string">`px-4 py-2 <span class="subst">$&#123;isActive ? <span class="string">&quot;bg-blue-500&quot;</span> : <span class="string">&quot;bg-gray-200&quot;</span>&#125;</span> bg-red-500`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(finalClasses);</span><br><span class="line"><span class="comment">// &quot;px-4 py-2 bg-blue-500 bg-gray-200 bg-red-500&quot; ï¼ˆèƒŒæ™¯é¡è‰²è¡çªï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¹ä½¿ç”¨ twMerge</span></span><br><span class="line"><span class="keyword">const</span> finalClasses = <span class="title function_">twMerge</span>(<span class="string">&quot;px-4 py-2&quot;</span>, isActive ? <span class="string">&quot;bg-blue-500&quot;</span> : <span class="string">&quot;bg-gray-200&quot;</span>, <span class="string">&quot;bg-red-500&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(finalClasses);</span><br><span class="line"><span class="comment">// &quot;px-4 py-2 bg-red-500&quot; ï¼ˆè‡ªå‹•è§£æ±ºè¡çªï¼‰</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¹Ÿæœ‰ä½¿ç”¨æ¨¡æ¿å­—ä¸²ï¼ˆtemplate-literalï¼‰ä¾†å‹•æ…‹æ‹¼æ¥-classï¼Œä¾‹å¦‚ï¼š"><a href="#ä¹Ÿæœ‰ä½¿ç”¨æ¨¡æ¿å­—ä¸²ï¼ˆtemplate-literalï¼‰ä¾†å‹•æ…‹æ‹¼æ¥-classï¼Œä¾‹å¦‚ï¼š" class="headerlink" title="ä¹Ÿæœ‰ä½¿ç”¨æ¨¡æ¿å­—ä¸²ï¼ˆtemplate literalï¼‰ä¾†å‹•æ…‹æ‹¼æ¥ classï¼Œä¾‹å¦‚ï¼š"></a><strong>ä¹Ÿæœ‰ä½¿ç”¨æ¨¡æ¿å­—ä¸²ï¼ˆtemplate literalï¼‰ä¾†å‹•æ…‹æ‹¼æ¥ classï¼Œä¾‹å¦‚ï¼š</strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> finalClasses = <span class="string">`px-4 py-2 bg-blue-500 text-white <span class="subst">$&#123;isDisabled ? <span class="string">&quot;opacity-50 cursor-not-allowed&quot;</span> : <span class="string">&quot;&quot;</span>&#125;</span>`</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é›–ç„¶ï¼Œé€™æ¨£å¯ä»¥æ ¹æ“šæ¢ä»¶å‹•æ…‹çµ„åˆ classï¼Œä¸éè¦æ³¨æ„å…©é»ï¼š</p><ol><li><p><strong>Tailwind CSS æƒæé™åˆ¶</strong><br> è‹¥ class æ˜¯åœ¨å­—ä¸²æ’å€¼ä¸­ç”¢ç”Ÿçš„ï¼ŒTailwind çš„æƒæå™¨å¯èƒ½ç„¡æ³•æª¢æ¸¬åˆ°æŸäº›å‹•æ…‹çµ„åˆçš„ classï¼Œé€™æœƒå°è‡´å°æ‡‰ CSS æœªè¢«ç”Ÿæˆã€‚é€™æ™‚å€™å¯èƒ½éœ€è¦åœ¨ Tailwind è¨­å®šæª”ä¸­åŠ å…¥ safelistã€‚</p></li><li><p><strong>è¡çªç®¡ç†</strong><br> ç•¶æœ‰å¤šå€‹ä¾†æºçš„ class å­˜åœ¨è¡çªï¼ˆä¾‹å¦‚å…©å€‹ä¸åŒçš„èƒŒæ™¯è‰²ï¼‰ï¼Œä½ å¿…é ˆæ‰‹å‹•ç¢ºä¿æ‹¼æ¥é †åºæ­£ç¢ºã€‚å¦‚æœè¡çªè¼ƒå¤šï¼Œä½¿ç”¨ twMerge å¯ä»¥æ›´æ–¹ä¾¿åœ°è‡ªå‹•è§£æ±ºé€™äº›è¡çªã€‚</p></li></ol><h3 id="twMerge-çš„å¥½è™•"><a href="#twMerge-çš„å¥½è™•" class="headerlink" title="twMerge çš„å¥½è™•"></a>twMerge çš„å¥½è™•</h3><table><thead><tr><th>å•é¡Œ</th><th>æ‰‹å‹•æ‹¼ class</th><th>ä½¿ç”¨ twMerge</th></tr></thead><tbody><tr><td>è¡çªè§£æ±º</td><td>å¿…é ˆè‡ªå·±è¿½è¹¤å“ªå€‹ class æœ€å¾Œç”Ÿæ•ˆ</td><td>è‡ªå‹•ä¿ç•™å¾Œå‡ºç¾çš„ classï¼Œåˆªé™¤é‡è¤‡æˆ–è¡çªé … <a href="https://www.wsquare.io/blogs/how-to-use-and-get-benefits-from-tailwind-merge">wsquare.io</a></td></tr><tr><td>å‹•æ…‹çµ„åˆ</td><td>æ¢ä»¶åˆ¤æ–·æ™‚æ‹¼æ¥å­—ä¸²æ˜“æ¼å¯«æˆ–é‡è¤‡</td><td>å‚³å¤šå€‹åƒæ•¸çµ¦ twMergeï¼Œå³ä½¿ class ä¾†æºè¤‡é›œä¹Ÿåªå›å‚³ä¸€çµ„ä¹¾æ·¨çµæœ <a href="https://tailkits.com/blog/tailwind-css-class-conflicts-using-tailwind-merge/">tailkits.com</a></td></tr><tr><td>ç¶­è­·æˆæœ¬</td><td>éš¨è‘—å°ˆæ¡ˆè®Šå¤§ï¼Œclass å­—ä¸²å®¹æ˜“å¤±æ§</td><td>twMerge æœƒç·©å­˜çµæœï¼Œæ¸›å°‘é‡è¤‡é‹ç®—ä¸¦è®“ç¨‹å¼ç¢¼æ›´æ˜“è®€</td></tr></tbody></table><h2 id="twMerge-çš„å¯¦è¸"><a href="#twMerge-çš„å¯¦è¸" class="headerlink" title="twMerge çš„å¯¦è¸"></a>twMerge çš„å¯¦è¸</h2><h3 id="åœ¨-React-ä¸­æ¢ä»¶æ¸²æŸ“-Tailwind-class"><a href="#åœ¨-React-ä¸­æ¢ä»¶æ¸²æŸ“-Tailwind-class" class="headerlink" title="åœ¨ React ä¸­æ¢ä»¶æ¸²æŸ“ Tailwind class"></a><strong>åœ¨ React ä¸­æ¢ä»¶æ¸²æŸ“ Tailwind class</strong></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Button</span> = (<span class="params">&#123; isDisabled &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;twMerge(</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &quot;<span class="attr">px-4</span> <span class="attr">py-2</span> <span class="attr">rounded</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">isDisabled</span> &amp;&amp; &quot;<span class="attr">opacity-50</span> <span class="attr">cursor-not-allowed</span>&quot;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    )&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      Click Me</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç•¶ <code>isDisabled = true</code>ï¼ŒtwMerge æœƒ<strong>è‡ªå‹•ç§»é™¤ <code>false</code> çš„ class</strong>ï¼Œçµæœè®Šæˆï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// isDisabled = true æ™‚</span></span><br><span class="line"><span class="string">&quot;px-4 py-2 rounded opacity-50 cursor-not-allowed&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// isDisabled = false æ™‚</span></span><br><span class="line"><span class="string">&quot;px-4 py-2 rounded&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€™æ¨£å¯ä»¥ <strong>é¿å…<code>undefined</code> æˆ– <code>false</code> çš„ class å½±éŸ¿æœ€çµ‚è¼¸å‡º</strong>ã€‚</p><hr><h3 id="çµ„ä»¶åŒ–æ™‚åˆä½µ-props-å‚³å…¥çš„-class"><a href="#çµ„ä»¶åŒ–æ™‚åˆä½µ-props-å‚³å…¥çš„-class" class="headerlink" title="çµ„ä»¶åŒ–æ™‚åˆä½µ props å‚³å…¥çš„ class"></a><strong>çµ„ä»¶åŒ–æ™‚åˆä½µ props å‚³å…¥çš„ class</strong></h3><p>ç•¶ä½ é–‹ç™¼ <strong>å¯é‡ç”¨ UI å…ƒä»¶</strong> æ™‚ï¼Œé€šå¸¸æœƒå…è¨±ä½¿ç”¨è€…å‚³å…¥ <code>className</code> ä¾†è¦†è“‹é è¨­æ¨£å¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Text</span> = (<span class="params">&#123; children, className &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;twMerge(</span>&quot;<span class="attr">font-normal</span> <span class="attr">text-lg</span>&quot;, <span class="attr">className</span>)&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Text</span> className=<span class="string">&quot;font-bold text-red-500&quot;</span>&gt;<span class="title class_">Hello</span>&lt;/<span class="title class_">Text</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€™æ¨£ <code>twMerge</code> æœƒç¢ºä¿ï¼š</p><ul><li><code>font-bold</code> æ­£ç¢ºè¦†è“‹ <code>font-normal</code></li><li><code>text-red-500</code> æ­£ç¢ºè¦†è“‹ <code>text-lg</code></li></ul><h2 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h2><p>åœ¨é–‹ç™¼ <strong>éœ€è¦å‹•æ…‹çµ„åˆé¡åˆ¥çš„å…ƒä»¶</strong>ï¼Œæˆ– <strong>å…è¨±ä½¿ç”¨è€…è‡ªè¨‚æ¨£å¼è¦†è“‹</strong> çš„æƒ…å¢ƒä¸‹ï¼Œ<code>twMerge</code> æ˜¯ä¸€å€‹éå¸¸å¯¦ç”¨çš„å·¥å…·ã€‚å®ƒèƒ½å¤ å¹«åŠ©ä½ ï¼š  </p><p><strong>è‡ªå‹•è§£æ±º class è¡çª</strong><br>ä¸å¿…æ‰‹å‹•è¿½è¹¤å“ªäº›é¡åˆ¥å¯èƒ½äº’ç›¸è¦†è“‹ï¼Œ<code>twMerge</code> æœƒç¢ºä¿æœ€å¾Œå®£å‘Šçš„æ¨£å¼ç”Ÿæ•ˆï¼ˆä¾‹å¦‚ <code>p-4 p-2</code> æœ€çµ‚ä¿ç•™ <code>p-2</code>ï¼‰ã€‚  </p><p><strong>æ”¯æ´æ¢ä»¶æ¸²æŸ“</strong><br>å„ªé›…åœ°è™•ç†æ¢ä»¶å¼æ¨£å¼ï¼Œé¿å… <code>false</code>ã€<code>undefined</code> å½±éŸ¿æœ€çµ‚ classï¼Œè®“ç¨‹å¼ç¢¼æ›´ä¹¾æ·¨ã€‚  </p><p><strong>æå‡ç¨‹å¼ç¢¼å¯è®€æ€§èˆ‡ç¶­è­·æ€§</strong><br>è®“å‹•æ…‹çµ„åˆå¤šå€‹ä¾†æºçš„ class è®Šå¾—ç°¡å–®æ¸…æ™°ï¼Œæ¸›å°‘ç¶­è­·æˆæœ¬ï¼Œæé«˜é–‹ç™¼æ•ˆç‡ã€‚</p><p><a href="https://antematter.io/blogs/mastering-css-customization-with-tailwind-merge">Override Tailwind Classes using Tailwind-Merge</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;åœ¨é–‹ç™¼ React æˆ– Vue æ‡‰ç”¨æ™‚ï¼Œå‹•æ…‹çµ„åˆ Tailwind CSS class æ˜¯å¸¸è¦‹çš„éœ€æ±‚ã€‚ä½†ç•¶ class ä¾†æºå¤šæ¨£ï¼ˆä¾‹å¦‚ props å‚³å…¥ã€æ¢ä»¶æ¸²æŸ“ç­‰ï¼‰ï¼Œä½ å¯èƒ½æœƒé‡åˆ° class é‡è¤‡ã€è¡çªæˆ–é›£ä»¥ç¶­è­·çš„å•é¡Œï¼Œé€™æ™‚å€™ï¼ŒtwMerge å°±èƒ½å¹«åŠ©ä½ è§£æ±ºé€™äº›å›°é›£ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä»€éº¼æ˜¯-twMerge&quot;&gt;&lt;a href=&quot;#ä»€éº¼æ˜¯-twMerge&quot; class=&quot;headerlink&quot; title=&quot;ä»€éº¼æ˜¯ twMerge&quot;&gt;&lt;/a&gt;ä»€éº¼æ˜¯ twMerge&lt;/h2&gt;&lt;p&gt;&lt;code&gt;twMerge&lt;/code&gt; æ˜¯ä¸€å€‹å°ˆç‚º &lt;strong&gt;Tailwind CSS&lt;/strong&gt; è¨­è¨ˆçš„ class åˆä½µå·¥&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¡çªè§£æ±º&lt;/strong&gt;ï¼šç•¶ä½ å¾ä¸åŒä¾†æºï¼ˆä¾‹å¦‚é è¨­æ¨£å¼å’Œ props å‚³å…¥çš„ classï¼‰åˆä½µ class æ™‚ï¼Œå¯èƒ½æœƒå‡ºç¾ç›¸åŒå±¬æ€§çš„é‡è¤‡å®šç¾©ï¼ŒtwMerge æœƒè‡ªå‹•è§£æ±ºé€™äº›è¡çªï¼Œä¿è­‰æœ€çµ‚åªä¿ç•™æ­£ç¢ºçš„ classã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‹•æ…‹çµ„åˆ&lt;/strong&gt;ï¼šåœ¨å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œå¾ˆå¤šæ™‚å€™ class å­—ç¬¦ä¸²æ˜¯æ ¹æ“šæ¢ä»¶çµ„åˆå‡ºä¾†çš„ï¼Œç›´æ¥æ‹¼æ¥å¯èƒ½æœƒå°è‡´æ„æ–™ä¹‹å¤–çš„è¦†è“‹ã€‚twMerge èƒ½å¤ è®“ä½ çš„ class åˆä½µæ›´æœ‰æ¢ç†ï¼Œé¿å…æ··æ·†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®‰è£æ–¹å¼ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install tailwind-merge&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# æˆ–&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;yarn add tailwind-merge&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åŸºæœ¬ä½¿ç”¨ç¯„ä¾‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight jsx&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &amp;#123; twMerge &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;#x27;tailwind-merge&amp;#x27;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; classes = &lt;span class=&quot;title function_&quot;&gt;twMerge&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;p-4&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;p-2&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(classes); &lt;span class=&quot;comment&quot;&gt;// è¼¸å‡º: &amp;quot;p-2&amp;quot;ï¼ˆè‡ªå‹•ç§»é™¤è¡çªçš„ p-4ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="frontend" scheme="https://eva813.github.io/categories/frontend/"/>
    
    
    <category term="Tailwind CSS" scheme="https://eva813.github.io/tags/Tailwind-CSS/"/>
    
  </entry>
  
  <entry>
    <title>SOLID ç‰©ä»¶å°å‘</title>
    <link href="https://eva813.github.io/2025/02/24/Net-solid/"/>
    <id>https://eva813.github.io/2025/02/24/Net-solid/</id>
    <published>2025-02-24T07:28:09.000Z</published>
    <updated>2025-03-20T12:07:14.407Z</updated>
    
    <content type="html"><![CDATA[<ul><li>S æŒ‡çš„æ˜¯ Single responsibility principle(SRP) å–®ä¸€è·è²¬åŸå‰‡</li><li>O æŒ‡çš„æ˜¯ Open/close principle(OCP) é–‹æ”¾/å°é–‰åŸå‰‡</li><li>L æŒ‡çš„æ˜¯ Liskov substitution principle(LSP) Liskov æ›¿æ›åŸå‰‡</li><li>I æŒ‡çš„æ˜¯ Interface Segregation Principle(ISP) ä»‹é¢éš”é›¢åŸå‰‡</li><li>D æŒ‡çš„æ˜¯ Dependency Inversion Principle(DIP) ä¾è³´åè½‰åŸå‰‡</li></ul><h2 id="Single-responsibility-principle-SRP-å–®ä¸€è·è²¬åŸå‰‡"><a href="#Single-responsibility-principle-SRP-å–®ä¸€è·è²¬åŸå‰‡" class="headerlink" title="Single responsibility principle(SRP) å–®ä¸€è·è²¬åŸå‰‡"></a>Single responsibility principle(SRP) å–®ä¸€è·è²¬åŸå‰‡</h2><p>ä¸€å€‹ class åˆ¥æ‡‰è©²åªæœ‰ä¸€å€‹è·è²¬ï¼Œä¸¦ä¸”åªæ‡‰è©²å› ç‚ºä¸€å€‹ç†ç”±è€Œæ”¹è®Šã€‚</p><p>C# ç¨‹å¼ç¢¼ç¯„ä¾‹ï¼š</p><p>ä»¥é•å SRP çš„ç¯„ä¾‹ï¼š<br>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼ŒUser é¡åˆ¥åŒæ™‚è² è²¬ä½¿ç”¨è€…è³‡æ–™çš„ç®¡ç†ã€è³‡æ–™åº«å„²å­˜ã€ç™¼é€æ­¡è¿ä¿¡å’Œä½¿ç”¨è€…é©—è­‰ç­‰å¤šå€‹è·è²¬ã€‚é€™é•åäº† SRPã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Username &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Password &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Email &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SaveUserToDatabase</span>()</span> &#123; <span class="comment">/* è³‡æ–™åº«å„²å­˜é‚è¼¯ */</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SendWelcomeEmail</span>()</span> &#123; <span class="comment">/* ç™¼é€æ­¡è¿ä¿¡é‚è¼¯ */</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">ValidateUser</span>()</span> &#123; <span class="comment">/* ä½¿ç”¨è€…é©—è­‰é‚è¼¯ */</span> <span class="keyword">return</span> <span class="literal">true</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¦åˆ SRP çš„ç¯„ä¾‹ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Username &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Password &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Email &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserRepository</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SaveUser</span>(<span class="params">User user</span>)</span> &#123; <span class="comment">/* è³‡æ–™åº«å„²å­˜é‚è¼¯ */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">EmailService</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SendWelcomeEmail</span>(<span class="params">User user</span>)</span> &#123; <span class="comment">/* ç™¼é€æ­¡è¿ä¿¡é‚è¼¯ */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserValidator</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">ValidateUser</span>(<span class="params">User user</span>)</span> &#123; <span class="comment">/* ä½¿ç”¨è€…é©—è­‰é‚è¼¯ */</span> <span class="keyword">return</span> <span class="literal">true</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å°‡ä¸åŒçš„è·è²¬åˆ†é›¢åˆ°ä¸åŒçš„é¡åˆ¥ä¸­ï¼š</p><ul><li>User é¡åˆ¥åªè² è²¬ä½¿ç”¨è€…è³‡æ–™çš„ç®¡ç†ã€‚</li><li>UserRepository é¡åˆ¥è² è²¬è³‡æ–™åº«å„²å­˜ã€‚</li><li>EmailService é¡åˆ¥è² è²¬ç™¼é€æ­¡è¿ä¿¡ã€‚</li><li>UserValidator é¡åˆ¥è² è²¬ä½¿ç”¨è€…é©—è­‰ã€‚<br>é€™æ¨£åšä½¿å¾—æ¯å€‹é¡åˆ¥éƒ½åªæœ‰ä¸€å€‹è·è²¬ï¼Œä¸¦ä¸”åªå› ç‚ºä¸€å€‹ç†ç”±è€Œæ”¹è®Šï¼Œç¬¦åˆäº† SRPã€‚</li></ul><h3 id="å¾å‰ç«¯çš„è§£åº¦ä¾†ç†è§£"><a href="#å¾å‰ç«¯çš„è§£åº¦ä¾†ç†è§£" class="headerlink" title="å¾å‰ç«¯çš„è§£åº¦ä¾†ç†è§£"></a>å¾å‰ç«¯çš„è§£åº¦ä¾†ç†è§£</h3><p>åœ¨å‰ç«¯é–‹ç™¼ä¸­ï¼Œæˆ‘å€‘ç¶“å¸¸ä½¿ç”¨å…ƒä»¶ (Component) çš„æ¦‚å¿µä¾†æ§‹å»ºä½¿ç”¨è€…ä»‹é¢ã€‚ä¸€å€‹å…ƒä»¶é€šå¸¸è² è²¬æ¸²æŸ“ä¸€éƒ¨åˆ†çš„ UIï¼Œä¸¦è™•ç†èˆ‡è©²éƒ¨åˆ† UI ç›¸é—œçš„äº’å‹•ã€‚é€™èˆ‡ SRP çš„æ¦‚å¿µéå¸¸ç›¸ä¼¼ã€‚ä¸€å€‹å¥½çš„å‰ç«¯å…ƒä»¶æ‡‰è©²åªè² è²¬å–®ä¸€çš„è·è²¬ï¼Œä¾‹å¦‚ï¼š</p><p>é¡¯ç¤ºè³‡æ–™ï¼š åªè² è²¬æ¥æ”¶è³‡æ–™ä¸¦å°‡å…¶æ¸²æŸ“åˆ° UI ä¸Šã€‚<br>è™•ç†ä½¿ç”¨è€…è¼¸å…¥ï¼š åªè² è²¬è™•ç†ä½¿ç”¨è€…åœ¨ä»‹é¢ä¸Šçš„è¼¸å…¥äº‹ä»¶ï¼Œä¾‹å¦‚æŒ‰éˆ•é»æ“Šã€è¡¨å–®æäº¤ç­‰ã€‚<br>ç™¼é€ API è«‹æ±‚ï¼š åªè² è²¬å‘å¾Œç«¯ç™¼é€ API è«‹æ±‚ä¸¦è™•ç†å›æ‡‰ã€‚</p><span id="more"></span><h4 id="é€™å€‹ç¯„ä¾‹ä¸­ï¼ŒProductList-å…ƒä»¶åŒæ™‚è² è²¬ï¼š"><a href="#é€™å€‹ç¯„ä¾‹ä¸­ï¼ŒProductList-å…ƒä»¶åŒæ™‚è² è²¬ï¼š" class="headerlink" title="é€™å€‹ç¯„ä¾‹ä¸­ï¼ŒProductList å…ƒä»¶åŒæ™‚è² è²¬ï¼š"></a>é€™å€‹ç¯„ä¾‹ä¸­ï¼ŒProductList å…ƒä»¶åŒæ™‚è² è²¬ï¼š</h4><ul><li>æ¸²æŸ“ç”¢å“åˆ—è¡¨ï¼š products.map éƒ¨åˆ†ã€‚</li><li>è™•ç†åŠ å…¥è³¼ç‰©è»Šçš„é‚è¼¯ï¼š handleAddToCart å‡½æ•¸ã€‚</li><li>æœ¬åœ°å„²å­˜è³¼ç‰©è»Šè³‡æ–™ï¼š localStorage.setItemã€‚</li><li>è¿½è¹¤åŠ å…¥è³¼ç‰©è»Šçš„äº‹ä»¶ï¼š trackAddToCartEvent å‡½æ•¸ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é•å SRP çš„å…ƒä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ProductList</span>(<span class="params">&#123; products &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [cart, setCart] = <span class="title function_">useState</span>([]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleAddToCart</span> = (<span class="params">product</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// åŒæ™‚è™•ç†åŠ å…¥è³¼ç‰©è»Šå’Œæœ¬åœ°å„²å­˜</span></span><br><span class="line">    <span class="title function_">setCart</span>([...cart, product]);</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;cart&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...cart, product]));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒæ™‚è™•ç†è¿½è¹¤äº‹ä»¶</span></span><br><span class="line">    <span class="title function_">trackAddToCartEvent</span>(product);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">trackAddToCartEvent</span> = (<span class="params">product</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// è¿½è¹¤åŠ å…¥è³¼ç‰©è»Šçš„äº‹ä»¶ï¼Œä¾‹å¦‚ç™¼é€åˆ° GA</span></span><br><span class="line">    <span class="comment">// ... è¿½è¹¤ç¨‹å¼ç¢¼ ...</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Product <span class="subst">$&#123;product.name&#125;</span> added to cart.`</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;products.map((product) =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;product.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;product.name&#125; - $&#123;product.price&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> handleAddToCart(product)&#125;&gt;Add to Cart<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥èª¿æ•´ï¼Œå°‡ä¸åŒçš„è·è²¬åˆ†é›¢åˆ°ä¸åŒçš„å‡½æ•¸æˆ–å…ƒä»¶ä¸­ï¼š<br>ProductList å…ƒä»¶åªè² è²¬æ¸²æŸ“ç”¢å“åˆ—è¡¨å’Œè™•ç†æŒ‰éˆ•é»æ“Šäº‹ä»¶ï¼Œä¸¦é€é onAddToCart prop å°‡åŠ å…¥è³¼ç‰©è»Šçš„äº‹ä»¶å‚³éçµ¦çˆ¶å…ƒä»¶ã€‚<br>CartManager è² è²¬ç®¡ç†è³¼ç‰©è»Šçš„ç‹€æ…‹ã€æœ¬åœ°å„²å­˜å’Œè¿½è¹¤äº‹ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¦åˆ SRP çš„å…ƒä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ProductList</span>(<span class="params">&#123; products, onAddToCart &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;products.map((product) =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;product.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;product.name&#125; - $&#123;product.price&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> onAddToCart(product)&#125;&gt;Add to Cart<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CartManager</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [cart, setCart] = <span class="title function_">useState</span>([]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleAddToCart</span> = (<span class="params">product</span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setCart</span>([...cart, product]);</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;cart&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...cart, product]));</span><br><span class="line">        <span class="title function_">trackAddToCartEvent</span>(product); <span class="comment">// å‘¼å«è¿½è¹¤å‡½æ•¸</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">trackAddToCartEvent</span> = (<span class="params">product</span>) =&gt; &#123;</span><br><span class="line">        <span class="comment">// è¿½è¹¤åŠ å…¥è³¼ç‰©è»Šçš„äº‹ä»¶</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Product <span class="subst">$&#123;product.name&#125;</span> added to cart.`</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">ProductList</span> <span class="attr">products</span>=<span class="string">&#123;products&#125;</span> <span class="attr">onAddToCart</span>=<span class="string">&#123;handleAddToCart&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Open-close-principle-OCP-é–‹æ”¾-å°é–‰åŸå‰‡"><a href="#Open-close-principle-OCP-é–‹æ”¾-å°é–‰åŸå‰‡" class="headerlink" title="Open/close principle(OCP) é–‹æ”¾/å°é–‰åŸå‰‡"></a>Open/close principle(OCP) é–‹æ”¾/å°é–‰åŸå‰‡</h2><ul><li>å°æ“´å±•é–‹æ”¾ (Open for extension)ï¼š å…è¨±æ–°å¢åŠŸèƒ½æˆ–è¡Œç‚ºã€‚</li><li>å°ä¿®æ”¹å°é–‰ (Closed for modification)ï¼š ä¸æ‡‰è©²ä¿®æ”¹æ—¢æœ‰çš„ç¨‹å¼ç¢¼</li></ul><p>ä»¥ç”Ÿç‰©åˆ†é¡å­¸ç‚ºèƒŒæ™¯ï¼Œå°‡ã€Œé›ã€å’Œã€Œç«é¾ã€è¦–ç‚ºä¸åŒçš„ç”Ÿç‰©ç¨®é¡ã€‚å®ƒå€‘ä¹‹é–“æœ‰ä¸€äº›å…±åŒçš„ç‰¹æ€§ï¼ˆä¾‹å¦‚éƒ½æœƒå•¼å«ã€ç”¨å…©éš»è…³èµ°è·¯ï¼‰ï¼Œä¹Ÿæœ‰å„è‡ªç¨ç‰¹çš„ç‰¹æ€§ï¼ˆä¾‹å¦‚ç«é¾æœƒåç«ã€æœƒé£›ï¼‰ã€‚</p><p>é€™å€‹ä¾‹å­è¦èªªæ˜çš„æ˜¯ï¼Œç•¶æˆ‘å€‘éœ€è¦æ–°å¢ã€Œç«é¾ã€é€™å€‹è§’è‰²æ™‚ï¼Œå¦‚æœç›´æ¥ä¿®æ”¹ã€Œé›ã€çš„é¡åˆ¥ï¼Œå°±æœƒé•å OCPï¼Œä¸¦ä¸”é€ æˆç¨‹å¼ç¢¼çš„æ··äº‚ã€‚æ­£ç¢ºçš„åšæ³•æ˜¯é€éæŠ½è±¡åŒ–ï¼Œå»ºç«‹æ›´é€šç”¨çš„æ¦‚å¿µï¼ˆä¾‹å¦‚ã€Œé›‰ç§‘ã€ã€ã€Œé£›é¾ç¨®ã€ï¼‰ï¼Œç„¶å¾Œè®“ã€Œé›ã€å’Œã€Œç«é¾ã€åˆ†åˆ¥ç¹¼æ‰¿é€™äº›æ¦‚å¿µï¼Œä¸¦å¯¦ä½œå„è‡ªç¨ç‰¹çš„è¡Œç‚ºã€‚</p><h3 id="åˆå§‹è¨­è¨ˆï¼ˆæœªæ‡‰ç”¨-OCPï¼‰ï¼š"><a href="#åˆå§‹è¨­è¨ˆï¼ˆæœªæ‡‰ç”¨-OCPï¼‰ï¼š" class="headerlink" title="åˆå§‹è¨­è¨ˆï¼ˆæœªæ‡‰ç”¨ OCPï¼‰ï¼š"></a>åˆå§‹è¨­è¨ˆï¼ˆæœªæ‡‰ç”¨ OCPï¼‰ï¼š</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Chicken</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">MakeSound</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Cock-a-doodle-doo!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Walk</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Walking on two legs.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè¦æ–°å¢ Dragonï¼Œç›´æ¥ä¿®æ”¹ Chicken é¡åˆ¥ï¼Œé•å OCP</span></span><br><span class="line"><span class="comment">// public class Chicken</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     ...</span></span><br><span class="line"><span class="comment">//     public void Fly() // é€™æ¨£åšä¸åˆç†</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//         // ...</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure><p>æ‡‰ç”¨ OCP çš„è¨­è¨ˆï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šç¾©ä¸€å€‹æŠ½è±¡çš„ç”Ÿç‰©ä»‹é¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IAnimal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">MakeSound</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Walk</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é›‰ç§‘</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Phasianidae</span> : <span class="title">IAnimal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">MakeSound</span>() <span class="comment">// ä½¿ç”¨ virtual å…è¨±å­é¡åˆ¥è¦†å¯«</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Generic bird sound.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Walk</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Walking on two legs.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é›</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Chicken</span> : <span class="title">Phasianidae</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">MakeSound</span>() <span class="comment">// è¦†å¯« MakeSound æ–¹æ³•</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Cock-a-doodle-doo!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é£›é¾</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Wyvern</span> : <span class="title">IAnimal</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">MakeSound</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Roar!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Walk</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Running on two legs.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fly</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Flying in the sky.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">FireBreath</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Breathing fire!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç«é¾</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Dragon</span> : <span class="title">Wyvern</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">MakeSound</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;ROAR!!!&quot;</span>); <span class="comment">// æ›´å¤§çš„å«è²</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Chicken chicken = <span class="keyword">new</span> Chicken();</span><br><span class="line">        chicken.MakeSound(); <span class="comment">// Cock-a-doodle-doo!</span></span><br><span class="line">        chicken.Walk();      <span class="comment">// Walking on two legs.</span></span><br><span class="line"></span><br><span class="line">        Dragon dragon = <span class="keyword">new</span> Dragon();</span><br><span class="line">        dragon.MakeSound();  <span class="comment">// ROAR!!!</span></span><br><span class="line">        dragon.Walk();       <span class="comment">// Running on two legs.</span></span><br><span class="line">        dragon.Fly();        <span class="comment">// Flying in the sky.</span></span><br><span class="line">        dragon.FireBreath(); <span class="comment">// Breathing fire!</span></span><br><span class="line"></span><br><span class="line">        Console.ReadKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€é IAnimal ä»‹é¢å’ŒæŠ½è±¡é¡åˆ¥ Phasianidae å’Œ Wyvernï¼ŒæˆåŠŸåœ°å°‡ã€Œé›ã€å’Œã€Œç«é¾ã€çš„å…±åŒè¡Œç‚ºå’Œç‰¹æœ‰è¡Œç‚ºåˆ†é›¢é–‹ä¾†ã€‚æ–°å¢ã€Œç«é¾ã€çš„åŠŸèƒ½ä¸éœ€è¦ä¿®æ”¹ Chicken é¡åˆ¥ã€‚</p><h3 id="ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜"><a href="#ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜" class="headerlink" title="ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜"></a>ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜</h3><p>èƒ½å¤ æ·»åŠ æ–°åŠŸèƒ½è€Œä¸éœ€è¦ä¿®æ”¹ç¾æœ‰çš„ä»£ç¢¼ã€‚ä»¥ä¸‹ä»¥ React å…ƒä»¶è¨­è¨ˆæ–¹å¼ä¾†èˆ‰ä¾‹ã€‚</p><p>å°‡æ›¸ç±é¡å‹ï¼Œæœ‰å€åˆ†Premiumã€Free 2ç¨®ï¼ŒBook å…ƒä»¶åŒæ™‚è² è²¬æ¸²æŸ“æ›¸ç±çš„åŸºæœ¬ä¿¡æ¯ï¼ˆå¦‚ title å’Œ imageï¼‰ä»¥åŠè™•ç†ä¸åŒé¡å‹çš„é‚è¼¯ï¼ˆå¦‚ type å’ŒæŒ‰éˆ•è¡Œç‚ºï¼‰ã€‚é€™ç¨®è¨­è¨ˆå°‡å¤šå€‹è²¬ä»»è€¦åˆåœ¨ä¸€èµ·ï¼Œé™ä½äº†å…ƒä»¶çš„å¯ç¶­è­·æ€§ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Book = (&#123; title, image, type, onClickFree, onClickPremium &#125;: IBook) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> handleReadPremium = () =&gt; &#123;</span><br><span class="line">    <span class="comment">// Some logic</span></span><br><span class="line">    onClickPremium();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleReadFree = () =&gt; &#123;</span><br><span class="line">    <span class="comment">// Some logic</span></span><br><span class="line">    onClickFree();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;img src=&#123;image&#125; /&gt;</span><br><span class="line">      &lt;p&gt;&#123;title&#125;&lt;/p&gt;</span><br><span class="line">      &#123;type === <span class="string">&quot;Premium&quot;</span> &amp;&amp; (</span><br><span class="line">        &lt;button onClick=&#123;handleReadPremium&#125;&gt;Add to cart +&lt;/button&gt;</span><br><span class="line">      )&#125;</span><br><span class="line">      &#123;type === <span class="string">&quot;Free&quot;</span> &amp;&amp; &lt;button onClick=&#123;handleReadFree&#125;&gt;Read&lt;/button&gt;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å˜—è©¦éµå¾ª OCPï¼š<br>Book å…ƒä»¶çš„æ ¸å¿ƒé‚è¼¯ï¼ˆå¦‚æ¸²æŸ“æ›¸ç±çš„åŸºæœ¬ä¿¡æ¯ï¼‰ä¿æŒä¸è®Šï¼Œç„¡éœ€å› æ–°å¢æ›¸ç±é¡å‹è€Œä¿®æ”¹ã€‚<br>æ–°çš„æ›¸ç±é¡å‹ï¼ˆå¦‚ PremiumBook æˆ– FreeBookï¼‰å¯ä»¥é€šéçµ„åˆå’Œæ“´å±•ä¾†å¯¦ç¾ï¼Œè€Œä¸éœ€è¦æ”¹å‹• Book å…ƒä»¶çš„ä»£ç¢¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Book</span> = (<span class="params">&#123; title, image, children &#125;: IBook</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;image&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">PremiumBook</span> = (<span class="params">&#123; title, image, onClick &#125;: IBook</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Book</span> <span class="attr">title</span>=<span class="string">&#123;title&#125;</span> <span class="attr">image</span>=<span class="string">&#123;image&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>Add to cart +<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Book</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">FreeBook</span> = (<span class="params">&#123; title, image, onClick &#125;: IBook</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Book</span> <span class="attr">title</span>=<span class="string">&#123;title&#125;</span> <span class="attr">image</span>=<span class="string">&#123;image&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>Read<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Book</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ–°çš„æ›¸ç±é¡å‹å¯ä»¥é€šéå‰µå»ºæ–°çš„å­å…ƒä»¶ï¼ˆå¦‚ PremiumBook æˆ– FreeBookï¼‰ä¾†å¯¦ç¾ï¼Œé€™äº›å­å…ƒä»¶å¯ä»¥è‡ªç”±å®šç¾©è‡ªå·±çš„è¡Œç‚ºå’Œå…§å®¹ã€‚</p><p>ä¾‹å¦‚ï¼Œè‹¥éœ€è¦æ–°å¢ä¸€å€‹ ExclusiveBook é¡å‹ï¼Œåªéœ€å‰µå»ºä¸€å€‹æ–°çš„å…ƒä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">ExclusiveBook</span> = (<span class="params">&#123; title, image, onClick &#125;: IBook</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Book</span> <span class="attr">title</span>=<span class="string">&#123;title&#125;</span> <span class="attr">image</span>=<span class="string">&#123;image&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>Exclusive Access<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Book</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Liskov-substitution-principle-LSP-Liskov-æ›¿æ›åŸå‰‡"><a href="#Liskov-substitution-principle-LSP-Liskov-æ›¿æ›åŸå‰‡" class="headerlink" title="Liskov substitution principle(LSP) Liskov æ›¿æ›åŸå‰‡"></a>Liskov substitution principle(LSP) Liskov æ›¿æ›åŸå‰‡</h2><p>LSP å¼·èª¿çš„æ˜¯ç¹¼æ‰¿é—œä¿‚ä¸­çš„ã€Œå¯æ›¿æ›æ€§ã€ã€‚ä¹Ÿå°±æ˜¯èªªï¼Œä»»ä½•ä½¿ç”¨çˆ¶é¡åˆ¥çš„åœ°æ–¹ï¼Œéƒ½æ‡‰è©²å¯ä»¥æ¯«ç„¡å•é¡Œåœ°æ›¿æ›æˆå­é¡åˆ¥çš„å¯¦ä¾‹ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ä»»ä½•ç¨‹å¼ç¢¼ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Bird</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Fly</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Flying!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Penguin</span> : <span class="title">Bird</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">Fly</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;Penguins can&#x27;t fly!&quot;</span>); <span class="comment">// ä¼éµç„¡æ³•é£›è¡Œï¼Œæ‹‹å‡ºä¾‹å¤–</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;Bird&gt; birds = <span class="keyword">new</span> List&lt;Bird&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">new</span> Bird(),</span><br><span class="line">            <span class="keyword">new</span> Penguin()</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (Bird bird <span class="keyword">in</span> birds)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                bird.Fly(); <span class="comment">// è¿´åœˆä¸­å‘¼å« Fly æ–¹æ³•ï¼Œä¼éµæœƒæ‹‹å‡ºä¾‹å¤–</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(ex.Message); <span class="comment">// æ•æ‰ä¾‹å¤–ä¸¦å°å‡ºè¨Šæ¯</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Console.ReadKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Penguin ç¹¼æ‰¿äº† Birdï¼Œä¸¦è¦†å¯«äº† Fly æ–¹æ³•ï¼Œä½¿å…¶æ‹‹å‡ºä¾‹å¤–ã€‚é€™é•åäº† LSPï¼Œå› ç‚ºæˆ‘å€‘ç„¡æ³•åœ¨ä¸ä¿®æ”¹ç¨‹å¼ç¢¼çš„æƒ…æ³ä¸‹ï¼Œç”¨ Penguin çš„å¯¦ä¾‹æ›¿æ› Bird çš„å¯¦ä¾‹ã€‚</p><ul><li>éœ€è¦é‡æ–°è¨­è¨ˆç¹¼æ‰¿é—œä¿‚ï¼Œå€åˆ†æœƒé£›çš„é³¥é¡å’Œä¸æœƒé£›çš„é³¥é¡ã€‚</li></ul><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šç¾©ä¸€å€‹æœƒé£›çš„é³¥é¡çš„ä»‹é¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IFlyingBird</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Fly</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é³¥é¡åŸºåº•é¡åˆ¥ (å¯ä»¥ä¸ç”¨æ˜¯ abstract class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Bird</span> &#123;</span><br><span class="line">  <span class="comment">// é€šç”¨æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">MakeSound</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Generic bird sound.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">virtual</span> <span class="built_in">string</span> <span class="title">Eat</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">$&quot;<span class="subst">&#123;Name&#125;</span> is eating.&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœƒé£›çš„é³¥é¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Sparrow</span> : <span class="title">Bird</span>, <span class="title">IFlyingBird</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fly</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Sparrow is flying!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">MakeSound</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Chirp!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸æœƒé£›çš„é³¥é¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Penguin</span> : <span class="title">Bird</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">MakeSound</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Squawk!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;Bird&gt; birds = <span class="keyword">new</span> List&lt;Bird&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">new</span> Sparrow(),</span><br><span class="line">            <span class="keyword">new</span> Penguin()</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (Bird bird <span class="keyword">in</span> birds)</span><br><span class="line">        &#123;</span><br><span class="line">            bird.MakeSound(); <span class="comment">// æ‰€æœ‰é³¥é¡éƒ½æœƒç™¼å‡ºå«è²ï¼Œç¬¦åˆé æœŸ</span></span><br><span class="line">            <span class="keyword">if</span>(bird <span class="keyword">is</span> IFlyingBird flyingBird) &#123;</span><br><span class="line">                flyingBird.Fly(); <span class="comment">// åªæœ‰æœƒé£›çš„é³¥é¡æ‰æœƒåŸ·è¡Œ Fly æ–¹æ³•</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Console.ReadKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¬¦åˆ LSP çš„ç¯„ä¾‹ä¸­ï¼š</p><p>æˆ‘å€‘å®šç¾©äº†ä¸€å€‹ IFlyingBird ä»‹é¢ï¼Œåªæœ‰æœƒé£›çš„é³¥é¡æ‰æœƒå¯¦ä½œé€™å€‹ä»‹é¢ã€‚<br>Sparrow ç¹¼æ‰¿äº† Bird ä¸¦ä¸”å¯¦ä½œäº† IFlyingBird ä»‹é¢ã€‚<br>Penguin åªç¹¼æ‰¿äº† Birdï¼Œæ²’æœ‰å¯¦ä½œ IFlyingBird ä»‹é¢ã€‚</p><p> <strong>Liskov æ›¿æ›åŸå‰‡çš„éµå®ˆ</strong>ï¼š<br>    - æ‰€æœ‰ <code>Bird</code> å­é¡åˆ¥éƒ½å¯ä»¥åœ¨éœ€è¦ <code>Bird</code> çš„åœ°æ–¹è¢«æ›¿æ›ï¼Œä¸”è¡Œç‚ºç¬¦åˆé æœŸã€‚<br>    - ç•¶éœ€è¦ç‰¹å®šè¡Œç‚ºï¼ˆå¦‚é£›è¡Œï¼‰æ™‚ï¼Œå¯ä»¥ä½¿ç”¨ä»‹é¢é€²è¡Œé¡å¤–ç´„æŸï¼Œè€Œä¸å½±éŸ¿çˆ¶é¡åˆ¥çš„æ­£ç¢ºæ€§ã€‚</p><h3 id="ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜-1"><a href="#ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜-1" class="headerlink" title="ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜"></a>ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜</h3><p><a href="https://www.youtube.com/watch?v=JkDg4-TPzL8&t=143s">Examples of Liskov Substitution Principle in React and Typescript (React Advanced Concepts)</a></p><p>LSP çš„æ ¸å¿ƒåœ¨æ–¼ã€Œè¡Œç‚ºå­å‹åˆ¥ã€ï¼ˆBehavioral Subtypingï¼‰ï¼Œå³å­å‹åˆ¥æ‡‰è©²èƒ½å¤ å®Œå…¨å–ä»£è¶…å‹åˆ¥ï¼Œä¸¦ä¸”è¡Œç‚ºä¿æŒä¸€è‡´ã€‚ä»¥ä¸‹æ˜¯å½±ç‰‡ä¸­å¦‚ä½•å¯¦ç¾ LSP çš„æ­¥é©Ÿï¼š</p><p>ä¸€å€‹åŸºæœ¬çš„å°è©±æ¡†å…ƒä»¶ï¼Œå…·æœ‰æ¨™é¡Œ (header)ã€å…§å®¹ (content) å’ŒæŒ‰éˆ• (footer) éƒ¨åˆ†ã€‚<br>å®ƒè¢«è¦–ç‚ºä¸€å€‹ superTypeã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è¨­çš„ Dialog å…ƒä»¶ç¨‹å¼ç¢¼</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">DialogProps</span> &#123;</span><br><span class="line">  <span class="attr">header</span>: <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">  <span class="attr">content</span>: <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">  <span class="attr">footer</span>: <span class="title class_">React</span>.<span class="property">ReactNode</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">DialogType</span>&lt;T = &#123;&#125;&gt; = <span class="title class_">React</span>.<span class="property">FC</span>&lt;<span class="title class_">DialogProps</span> &amp; T&gt;;</span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">RegularDialogType</span> = <span class="title class_">DialogType</span>&lt;&#123;</span><br><span class="line">  className?:string</span><br><span class="line">&#125;&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Dialog</span>: <span class="title class_">Dialog</span>: <span class="title class_">RegularDialogTyp</span> = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; header, content, footer, className= <span class="string">&#x27;dialog&#x27;</span> &#125; = props;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">dialog</span> $&#123;<span class="attr">className</span>&#125;`&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">className</span>&#125;<span class="attr">-header</span>`&#125;&gt;</span>&#123;header&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">className</span>&#125;<span class="attr">-content</span>`&#125;&gt;</span>&#123;content&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">className</span>&#125;<span class="attr">-footer</span>`&#125;&gt;</span>&#123;footer&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Dialog</span>;</span><br></pre></td></tr></table></figure><p>è–èª•ç¯€å°è©±æ¡† (XmasDialog) å…ƒä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è¨­çš„ XmasDialog å…ƒä»¶ç¨‹å¼ç¢¼</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">RegularDialogTyp</span>, <span class="title class_">Dialog</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./dialog&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">XmasDialog</span>: <span class="title class_">RegularDialogTyp</span> = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; header, content, footer &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Dialog</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;xmas-dialog&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">header</span>=<span class="string">&#123;header&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">content</span>=<span class="string">&#123;content&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">footer</span>=<span class="string">&#123;footer&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¯„ä¾‹ï¼Œ</p><ul><li>Dialog ä½œç‚º SuperTypeï¼šå®šç¾©äº†æ¨™é¡Œ (header)ã€å…§å®¹ (content)ã€é è…³ (footer) ç­‰åŸºæœ¬å±¬æ€§ï¼Œæ‰€æœ‰å°è©±æ¡†éƒ½æ‡‰è©²ç¬¦åˆé€™äº›å±¬æ€§ã€‚</li><li>XmasDialog ä½œç‚ºå­å‹åˆ¥ï¼šå®ƒèˆ‡ Dialog ä½¿ç”¨ç›¸åŒçš„ propsï¼Œç¢ºä¿ å¯æ›¿æ›æ€§ï¼Œä½†é€é className æ”¹è®Šå¤–è§€ã€‚</li><li>ä¸æ”¹è®Šè¡Œç‚ºï¼š LSP ä¸åƒ…è¦æ±‚å­é¡å‹å’Œ SuperType å…·æœ‰ç›¸åŒçš„ä»‹é¢ï¼Œé‚„è¦æ±‚å®ƒå€‘çš„è¡Œç‚ºä¸€è‡´ï¼Œç•¶ä½¿ç”¨å­é¡å‹æ›¿æ› SuperType æ™‚ï¼Œæ‰€æœ‰å±¬æ€§ (props) éƒ½è¢«å‚³éï¼Œä¸”å…ƒä»¶çš„åŠŸèƒ½æ‡‰è©²ä¿æŒä¸è®Š ï¼ˆå¦‚ï¼ŒXmasDialog å¿…é ˆåƒ Dialog ä¸€æ¨£é‹ä½œï¼Œä¸èƒ½ç¼ºå°‘ä»»ä½•éƒ¨åˆ†æˆ–åœæ­¢é‹ä½œï¼‰</li></ul><h3 id="çµ„åˆ-Composition-è€Œéç¹¼æ‰¿-Inheritance"><a href="#çµ„åˆ-Composition-è€Œéç¹¼æ‰¿-Inheritance" class="headerlink" title="çµ„åˆ (Composition) è€Œéç¹¼æ‰¿ (Inheritance)"></a>çµ„åˆ (Composition) è€Œéç¹¼æ‰¿ (Inheritance)</h3><p>åœ¨å‚³çµ± OOP è¨­è¨ˆä¸­ï¼Œæˆ‘å€‘å¯èƒ½æœƒè®“ XmasDialog ç¹¼æ‰¿ Dialogï¼Œä½†é€™æ¨£åšæœƒå¸¶ä¾†ä»¥ä¸‹å•é¡Œï¼š</p><p>âŒ è€¦åˆåº¦é«˜ï¼šå¦‚æœ Dialog å…§éƒ¨ç™¼ç”Ÿè®ŠåŒ–ï¼ŒXmasDialog å¯èƒ½æœƒå—å½±éŸ¿ï¼Œå°è‡´æ½›åœ¨çš„éŒ¯èª¤ã€‚<br>âŒ å¯ç¶­è­·æ€§å·®ï¼šæ–°å¢å…¶ä»–ç¯€æ—¥ä¸»é¡Œæ™‚ï¼Œéœ€è¦ä¸€ç›´æ“´å±• Dialogï¼Œå°è‡´ç¨‹å¼ç¢¼è¤‡é›œåº¦å¢åŠ ã€‚</p><p>å› æ­¤ï¼Œåœ¨é€™ç¯„ä¾‹é¸æ“‡ çµ„åˆ (Composition) ä¾†è¨­è¨ˆ XmasDialogï¼Œè€Œä¸æ˜¯ç›´æ¥ç¹¼æ‰¿ Dialogï¼š</p><p>XmasDialog å…§éƒ¨ä½¿ç”¨ Dialogï¼Œä½†åªæ”¹è®Š classNameï¼Œé¿å…é‚è¼¯è€¦åˆã€‚<br>é€™ç¨®æ–¹å¼å¯ä»¥è¼•é¬†æ“´å±•å…¶ä»–ç¯€æ—¥ç‰ˆæœ¬ï¼Œä¾‹å¦‚ HalloweenDialog æˆ– NewYearDialogï¼Œè€Œä¸å½±éŸ¿ Dialog çš„æ ¸å¿ƒå¯¦ä½œã€‚</p><h3 id="æ¢ä»¶æ¸²æŸ“-Conditional-Rendering"><a href="#æ¢ä»¶æ¸²æŸ“-Conditional-Rendering" class="headerlink" title="æ¢ä»¶æ¸²æŸ“ (Conditional Rendering)"></a>æ¢ä»¶æ¸²æŸ“ (Conditional Rendering)</h3><p>ä»¥ä¸‹æ ¹æ“šæ‡‰ç”¨ç‹€æ…‹æ±ºå®šè¦é¡¯ç¤ºä¸€èˆ¬å°è©±æ¡† (Dialog) æˆ–è–èª•ç¯€å°è©±æ¡† (XmasDialog)ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š</p><ul><li>é€é appStore.hasSales(â€˜xmasâ€™) åˆ¤æ–·æ˜¯å¦ç‚ºè–èª•ç¯€ï¼Œä¸¦å‹•æ…‹é¸æ“‡ XmasDialog æˆ– Dialogã€‚</li><li>ç¢ºä¿åœ¨ä¸åŒæƒ…å¢ƒä¸‹æ‡‰ç”¨çš„è¡Œç‚ºä»ç„¶ä¸€è‡´ï¼Œä¸æœƒå½±éŸ¿ UI çš„é‹ä½œã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Dialog</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./dialog&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">XmasDialog</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./xmasDialog&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; appStore &#125; <span class="keyword">from</span> <span class="string">&#x27;./helpers&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">App</span>: <span class="title class_">React</span>.<span class="property">FC</span>&lt;&#123;&#125;&gt; = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Component</span> = appStore.<span class="title function_">hasSales</span>(<span class="string">&#x27;xmas&#x27;</span>) ? <span class="title class_">XmasDialog</span> : <span class="title class_">Dialog</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Component</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">header</span>=<span class="string">&#123;</span>&lt;<span class="attr">h3</span>&gt;</span>Profile Details<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">        content=&#123;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Your name...&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Your surname...&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">        footer=&#123;<span class="tag">&lt;<span class="name">button</span>&gt;</span>Save<span class="tag">&lt;/<span class="name">button</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨é€™é‚Šï¼Œä¿æŒ Liskov æ›¿æ›åŸå‰‡ (LSP) ä¸€è‡´æ€§ï¼š</p><ul><li>Component å¯ä»¥æŒ‡å‘ Dialog æˆ– XmasDialogï¼Œä½†å®ƒå€‘çš„ä»‹é¢å®Œå…¨ç›¸åŒï¼Œå› æ­¤å¯ä»¥äº’æ›ã€‚</li><li>ç„¡è«–é¡¯ç¤ºå“ªå€‹å°è©±æ¡†ï¼Œæ‡‰ç”¨çš„é‚è¼¯ä¸æœƒå—åˆ°å½±éŸ¿ã€‚</li></ul><hr><h2 id="Interface-Segregation-Principle-ISP-ä»‹é¢éš”é›¢åŸå‰‡"><a href="#Interface-Segregation-Principle-ISP-ä»‹é¢éš”é›¢åŸå‰‡" class="headerlink" title="Interface Segregation Principle(ISP) ä»‹é¢éš”é›¢åŸå‰‡"></a>Interface Segregation Principle(ISP) ä»‹é¢éš”é›¢åŸå‰‡</h2><p>ä¸æ‡‰è©²å¼·è¿«å®¢æˆ¶ç«¯ä¾è³´å®ƒå€‘ä¸éœ€è¦çš„ä»‹é¢ã€‚å°‡å¤§å‹ä»‹é¢æ‹†åˆ†æˆå°å‹ã€æ›´å…·é«”çš„ä»‹é¢ï¼Œå¯ä»¥æé«˜ç³»çµ±çš„éˆæ´»æ€§å’Œå¯ç¶­è­·æ€§ã€‚</p><p>IMultiFunctionPrinter ä»‹é¢åŒ…å«äº†åˆ—å°ã€æƒæå’Œå‚³çœŸç­‰å¤šå€‹è·è²¬ã€‚SimplePrinter é¡åˆ¥åªéœ€è¦åˆ—å°åŠŸèƒ½ï¼Œä½†å®ƒè¢«è¿«å¯¦ä½œäº† Scan å’Œ Fax æ–¹æ³•ï¼Œé€™é•åäº† ISPã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IMultiFunctionPrinter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Print</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Scan</span>()</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Fax</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">OldPrinter</span> : <span class="title">IMultiFunctionPrinter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Print</span>()</span> &#123; <span class="comment">/* å¯¦ä½œåˆ—å° */</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Scan</span>()</span> &#123; <span class="comment">/* å¯¦ä½œæƒæ */</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fax</span>()</span> &#123; <span class="comment">/* å¯¦ä½œå‚³çœŸ */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SimplePrinter</span> : <span class="title">IMultiFunctionPrinter</span> <span class="comment">// åªéœ€è¦åˆ—å°åŠŸèƒ½</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Print</span>()</span> &#123; <span class="comment">/* å¯¦ä½œåˆ—å° */</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Scan</span>()</span> &#123; <span class="keyword">throw</span> <span class="keyword">new</span> NotImplementedException(); &#125; <span class="comment">// ä¸éœ€è¦æƒæï¼Œè¢«è¿«å¯¦ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fax</span>()</span> &#123; <span class="keyword">throw</span> <span class="keyword">new</span> NotImplementedException(); &#125; <span class="comment">// ä¸éœ€è¦å‚³çœŸï¼Œè¢«è¿«å¯¦ä½œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IPrinter</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Print</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IScanner</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Scan</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IFax</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Fax</span>()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GoodPrinter</span> : <span class="title">IPrinter</span>, <span class="title">IScanner</span>, <span class="title">IFax</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Print</span>()</span> &#123; <span class="comment">/* å¯¦ä½œåˆ—å° */</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Scan</span>()</span> &#123; <span class="comment">/* å¯¦ä½œæƒæ */</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Fax</span>()</span> &#123; <span class="comment">/* å¯¦ä½œå‚³çœŸ */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SimplePrinter</span> : <span class="title">IPrinter</span> <span class="comment">// åªå¯¦ä½œéœ€è¦çš„ä»‹é¢</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Print</span>()</span> &#123; <span class="comment">/* å¯¦ä½œåˆ—å° */</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‰ç«¯-JavaScript-ç¯„ä¾‹ï¼š"><a href="#å‰ç«¯-JavaScript-ç¯„ä¾‹ï¼š" class="headerlink" title="å‰ç«¯ JavaScript ç¯„ä¾‹ï¼š"></a>å‰ç«¯ JavaScript ç¯„ä¾‹ï¼š</h2><p>åœ¨å‰ç«¯ JavaScript ä¸­ï¼Œé›–ç„¶æ²’æœ‰åƒ C# çš„ä»‹é¢ï¼Œä½†æˆ‘å€‘å¯ä»¥ä½¿ç”¨ç‰©ä»¶æˆ–å‡½æ•¸ä¾†æ¨¡æ“¬ä»‹é¢çš„æ•ˆæœã€‚</p><p>é•å ISP çš„ç¯„ä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> userActions = &#123;</span><br><span class="line">    <span class="attr">login</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">/* ç™»å…¥é‚è¼¯ */</span> &#125;,</span><br><span class="line">    <span class="attr">logout</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">/* ç™»å‡ºé‚è¼¯ */</span> &#125;,</span><br><span class="line">    <span class="attr">createUser</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">/* å»ºç«‹ä½¿ç”¨è€…é‚è¼¯ */</span> &#125;,</span><br><span class="line">    <span class="attr">deleteUser</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">/* åˆªé™¤ä½¿ç”¨è€…é‚è¼¯ */</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åªéœ€è¦ç™»å…¥å’Œç™»å‡ºçš„å…ƒä»¶è¢«è¿«ä¾è³´ä¸éœ€è¦çš„ createUser å’Œ deleteUser</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">AuthComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleLogin</span> = (<span class="params"></span>) =&gt; userActions.<span class="title function_">login</span>();</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleLogout</span> = (<span class="params"></span>) =&gt; userActions.<span class="title function_">logout</span>();</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleLogin&#125;</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleLogout&#125;</span>&gt;</span>Logout<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¦åˆ ISP çš„ç¯„ä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> authActions = &#123;</span><br><span class="line">    <span class="attr">login</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">/* ç™»å…¥é‚è¼¯ */</span> &#125;,</span><br><span class="line">    <span class="attr">logout</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">/* ç™»å‡ºé‚è¼¯ */</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> adminActions = &#123;</span><br><span class="line">    <span class="attr">createUser</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">/* å»ºç«‹ä½¿ç”¨è€…é‚è¼¯ */</span> &#125;,</span><br><span class="line">    <span class="attr">deleteUser</span>: <span class="function">() =&gt;</span> &#123; <span class="comment">/* åˆªé™¤ä½¿ç”¨è€…é‚è¼¯ */</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">AuthComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleLogin</span> = (<span class="params"></span>) =&gt; authActions.<span class="title function_">login</span>();</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleLogout</span> = (<span class="params"></span>) =&gt; authActions.<span class="title function_">logout</span>();</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleLogin&#125;</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleLogout&#125;</span>&gt;</span>Logout<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">AdminComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleCreateUser</span> = (<span class="params"></span>) =&gt; adminActions.<span class="title function_">createUser</span>();</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleDeleteUser</span> = (<span class="params"></span>) =&gt; adminActions.<span class="title function_">deleteUser</span>();</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleCreateUser&#125;</span>&gt;</span>Create User<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleDeleteUser&#125;</span>&gt;</span>Delete User<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨è€…æ“ä½œæ‹†åˆ†ç‚º authActions å’Œ adminActions å…©å€‹ç‰©ä»¶ï¼Œåˆ†åˆ¥åŒ…å«ä¸åŒçš„è·è²¬ã€‚AuthComponent åªéœ€è¦ä¾è³´ authActionsï¼ŒAdminComponent åªéœ€è¦ä¾è³´ adminActionsï¼Œé¿å…äº†ä¸å¿…è¦çš„ä¾è³´ã€‚<br>ä¸€å€‹å…ƒä»¶ä¸æ‡‰è©²æ¥æ”¶éå¤šçš„ props æˆ–æä¾›éå¤šçš„æ–¹æ³•ï¼Œè€Œæ˜¯æ‡‰è©²åªæ¥æ”¶å®ƒéœ€è¦çš„ props å’Œæä¾›å®ƒéœ€è¦çš„æ–¹æ³•ã€‚é€™å¯ä»¥æé«˜å…ƒä»¶çš„é‡ç”¨æ€§å’Œå¯ç¶­è­·æ€§ã€‚</p><h2 id="Dependency-Inversion-Principle-DIP-ä¾è³´åè½‰åŸå‰‡"><a href="#Dependency-Inversion-Principle-DIP-ä¾è³´åè½‰åŸå‰‡" class="headerlink" title="Dependency Inversion Principle(DIP) ä¾è³´åè½‰åŸå‰‡"></a>Dependency Inversion Principle(DIP) ä¾è³´åè½‰åŸå‰‡</h2><h3 id="ä»€éº¼æ˜¯é«˜éšæ¨¡çµ„å’Œä½éšæ¨¡çµ„ï¼Ÿ"><a href="#ä»€éº¼æ˜¯é«˜éšæ¨¡çµ„å’Œä½éšæ¨¡çµ„ï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯é«˜éšæ¨¡çµ„å’Œä½éšæ¨¡çµ„ï¼Ÿ"></a>ä»€éº¼æ˜¯é«˜éšæ¨¡çµ„å’Œä½éšæ¨¡çµ„ï¼Ÿ</h3><p>é«˜éšæ¨¡çµ„ä¸æ‡‰ä¾è³´æ–¼ä½éšæ¨¡çµ„ï¼Œå…©è€…çš†æ‡‰ä¾è³´æ–¼æŠ½è±¡å¯¦é«”</p><ol><li>é«˜éšæ¨¡çµ„ (High-level Modules)ï¼š é€™äº›æ¨¡çµ„åŒ…å«æ‡‰ç”¨ç¨‹å¼çš„æ ¸å¿ƒæ¥­å‹™é‚è¼¯å’Œæ§åˆ¶æµç¨‹ã€‚å®ƒå€‘å®šç¾©äº†æ‡‰ç”¨ç¨‹å¼çš„æ•´é«”è¡Œç‚ºï¼Œé€šå¸¸æ¯”è¼ƒæŠ½è±¡ï¼Œé—œæ³¨çš„æ˜¯ã€Œåšä»€éº¼ã€ï¼Œè€Œä¸æ˜¯ã€Œæ€éº¼åšã€ã€‚ä¾‹å¦‚ï¼š<br>è¨‚å–®è™•ç†æ¨¡çµ„ (Order Processing Module)<br>ä½¿ç”¨è€…é©—è­‰æ¨¡çµ„ (User Authentication Module)<br>å ±è¡¨ç”¢ç”Ÿæ¨¡çµ„ (Report Generation Module)</li><li>ä½éšæ¨¡çµ„ (Low-level Modules)ï¼š é€™äº›æ¨¡çµ„è² è²¬å…·é«”çš„å¯¦ä½œç´°ç¯€ï¼Œä¾‹å¦‚è³‡æ–™åº«å­˜å–ã€æª”æ¡ˆæ“ä½œã€ç¶²è·¯é€šè¨Šç­‰ã€‚å®ƒå€‘é—œæ³¨çš„æ˜¯ã€Œæ€éº¼åšã€ï¼Œè€Œä¸æ˜¯ã€Œåšä»€éº¼ã€ã€‚ä¾‹å¦‚ï¼š<br>è³‡æ–™åº«å­˜å–æ¨¡çµ„ (Database Access Module)<br>æª”æ¡ˆç³»çµ±æ¨¡çµ„ (File System Module)<br>éƒµä»¶ç™¼é€æ¨¡çµ„ (Email Sending Module)</li></ol><p>ä»¥å‡è¨­ æƒ…å¢ƒï¼š </p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½éšæ¨¡çµ„ï¼šPayPal ä»˜æ¬¾</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PayPalPayment</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ProcessPayment</span>(<span class="params"><span class="built_in">decimal</span> amount</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Processing payment of <span class="subst">&#123;amount&#125;</span> via PayPal.&quot;</span>);</span><br><span class="line">        <span class="comment">// å¯¦éš›çš„ PayPal ä»˜æ¬¾é‚è¼¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é«˜éšæ¨¡çµ„ï¼šè³¼ç‰©è»Š</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ShoppingCart</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> PayPalPayment _payPalPayment; <span class="comment">// ç›´æ¥ä¾è³´ PayPalPayment</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShoppingCart</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        _payPalPayment = <span class="keyword">new</span> PayPalPayment();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Checkout</span>(<span class="params"><span class="built_in">decimal</span> totalAmount</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _payPalPayment.ProcessPayment(totalAmount);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Order completed.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ShoppingCart cart = <span class="keyword">new</span> ShoppingCart();</span><br><span class="line">        cart.Checkout(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">        Console.ReadKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¦åˆ DIP çš„ç¯„ä¾‹ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ½è±¡ä»‹é¢ï¼šä»˜æ¬¾æ–¹å¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">IPaymentProcessor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">ProcessPayment</span>(<span class="params"><span class="built_in">decimal</span> amount</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½éšæ¨¡çµ„ï¼šPayPal ä»˜æ¬¾</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PayPalPayment</span> : <span class="title">IPaymentProcessor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ProcessPayment</span>(<span class="params"><span class="built_in">decimal</span> amount</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Processing payment of <span class="subst">&#123;amount&#125;</span> via PayPal.&quot;</span>);</span><br><span class="line">        <span class="comment">// å¯¦éš›çš„ PayPal ä»˜æ¬¾é‚è¼¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½éšæ¨¡çµ„ï¼šStripe ä»˜æ¬¾</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">StripePayment</span> : <span class="title">IPaymentProcessor</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ProcessPayment</span>(<span class="params"><span class="built_in">decimal</span> amount</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Processing payment of <span class="subst">&#123;amount&#125;</span> via Stripe.&quot;</span>);</span><br><span class="line">        <span class="comment">// å¯¦éš›çš„ Stripe ä»˜æ¬¾é‚è¼¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é«˜éšæ¨¡çµ„ï¼šè³¼ç‰©è»Š</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ShoppingCart</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> IPaymentProcessor _paymentProcessor; <span class="comment">// ä¾è³´ä»‹é¢</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShoppingCart</span>(<span class="params">IPaymentProcessor paymentProcessor</span>) <span class="comment">// å»ºæ§‹å­æ³¨å…¥</span></span></span><br><span class="line">    &#123;</span><br><span class="line">        _paymentProcessor = paymentProcessor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Checkout</span>(<span class="params"><span class="built_in">decimal</span> totalAmount</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _paymentProcessor.ProcessPayment(totalAmount);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Order completed.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ PayPal ä»˜æ¬¾</span></span><br><span class="line">        IPaymentProcessor payPalPayment = <span class="keyword">new</span> PayPalPayment();</span><br><span class="line">        ShoppingCart cart1 = <span class="keyword">new</span> ShoppingCart(payPalPayment);</span><br><span class="line">        cart1.Checkout(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">        Console.WriteLine();</span><br><span class="line"></span><br><span class="line">        IPaymentProcessor stripePayment = <span class="keyword">new</span> StripePayment();</span><br><span class="line">        ShoppingCart cart2 = <span class="keyword">new</span> ShoppingCart(stripePayment);</span><br><span class="line">        cart2.Checkout(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">        Console.ReadKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜-2"><a href="#ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜-2" class="headerlink" title="ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜"></a>ä»¥å‰ç«¯è§’åº¦ä¾†èªè­˜</h3><p>ä»¥è¡¨å–®å…ƒä»¶çš„é‡ç”¨ï¼Œç•¶æœ‰ä¸€å€‹è¡¨å–®å…ƒä»¶éœ€è¦åœ¨ä¸åŒæƒ…å¢ƒä¸‹é‡ç”¨æ™‚ï¼Œä¾‹å¦‚å‰µå»ºå’Œç·¨è¼¯æ›¸ç±çš„è¡¨å–®ï¼Œå®ƒå€‘çš„ UI ç›¸åŒä½†é‚è¼¯ä¸åŒã€‚<br>è§£æ±ºæ–¹æ¡ˆ: æŠ½è±¡å‡ºä¸€å€‹æ¥å£ï¼ˆå¦‚onSubmitå‡½æ•¸ï¼‰ï¼Œè®“è¡¨å–®å…ƒä»¶ä¾è³´æ–¼é€™å€‹æŠ½è±¡æ¥å£ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¾è³´æ–¼APIè«‹æ±‚çš„å¯¦ç¾ã€‚<br>æŠ½è±¡å‡ºä¸€å€‹æ¥å£ï¼ˆå¦‚onSubmitå‡½æ•¸ï¼‰ï¼Œè®“è¡¨å–®å…ƒä»¶ä¾è³´æ–¼é€™å€‹æŠ½è±¡æ¥å£ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¾è³´æ–¼APIè«‹æ±‚çš„å¯¦ç¾ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ½è±¡æ¥å£</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">BookForm</span> = (<span class="params">&#123; onSubmit &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;onSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;author&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;bookType&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰µå»ºæ›¸ç±çš„é‚è¼¯</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">CreateBookForm</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleCreateBook</span> = <span class="keyword">async</span> (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>(e.<span class="property">currentTarget</span>);</span><br><span class="line">      <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&quot;https://myapi.com/books&quot;</span>, formData);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(err.<span class="property">message</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">BookForm</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleCreateBook&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç·¨è¼¯æ›¸ç±çš„é‚è¼¯</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">EditBookForm</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleEditBook</span> = <span class="keyword">async</span> (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// ç·¨è¼¯æ›¸ç±çš„é‚è¼¯</span></span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(err.<span class="property">message</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">BookForm</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleEditBook&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://adeesh.hashnode.dev/using-the-dependency-inversion-principle-dip-in-react">Using the Dependency Inversion Principle (DIP) in React</a><br><a href="https://dev.to/mikhaelesa/dependency-inversion-principle-in-react-5287">Dependency Inversion Principle in React</a></p>]]></content>
    
    
    <summary type="html">&lt;ul&gt;
&lt;li&gt;S æŒ‡çš„æ˜¯ Single responsibility principle(SRP) å–®ä¸€è·è²¬åŸå‰‡&lt;/li&gt;
&lt;li&gt;O æŒ‡çš„æ˜¯ Open/close principle(OCP) é–‹æ”¾/å°é–‰åŸå‰‡&lt;/li&gt;
&lt;li&gt;L æŒ‡çš„æ˜¯ Liskov substitution principle(LSP) Liskov æ›¿æ›åŸå‰‡&lt;/li&gt;
&lt;li&gt;I æŒ‡çš„æ˜¯ Interface Segregation Principle(ISP) ä»‹é¢éš”é›¢åŸå‰‡&lt;/li&gt;
&lt;li&gt;D æŒ‡çš„æ˜¯ Dependency Inversion Principle(DIP) ä¾è³´åè½‰åŸå‰‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;Single-responsibility-principle-SRP-å–®ä¸€è·è²¬åŸå‰‡&quot;&gt;&lt;a href=&quot;#Single-responsibility-principle-SRP-å–®ä¸€è·è²¬åŸå‰‡&quot; class=&quot;headerlink&quot; title=&quot;Single responsibility principle(SRP) å–®ä¸€è·è²¬åŸå‰‡&quot;&gt;&lt;/a&gt;Single responsibility principle(SRP) å–®ä¸€è·è²¬åŸå‰‡&lt;/h2&gt;&lt;p&gt;ä¸€å€‹ class åˆ¥æ‡‰è©²åªæœ‰ä¸€å€‹è·è²¬ï¼Œä¸¦ä¸”åªæ‡‰è©²å› ç‚ºä¸€å€‹ç†ç”±è€Œæ”¹è®Šã€‚&lt;/p&gt;
&lt;p&gt;C# ç¨‹å¼ç¢¼ç¯„ä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;ä»¥é•å SRP çš„ç¯„ä¾‹ï¼š&lt;br&gt;åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼ŒUser é¡åˆ¥åŒæ™‚è² è²¬ä½¿ç”¨è€…è³‡æ–™çš„ç®¡ç†ã€è³‡æ–™åº«å„²å­˜ã€ç™¼é€æ­¡è¿ä¿¡å’Œä½¿ç”¨è€…é©—è­‰ç­‰å¤šå€‹è·è²¬ã€‚é€™é•åäº† SRPã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; Username &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; Password &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; Email &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SaveUserToDatabase&lt;/span&gt;()&lt;/span&gt; &amp;#123; &lt;span class=&quot;comment&quot;&gt;/* è³‡æ–™åº«å„²å­˜é‚è¼¯ */&lt;/span&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SendWelcomeEmail&lt;/span&gt;()&lt;/span&gt; &amp;#123; &lt;span class=&quot;comment&quot;&gt;/* ç™¼é€æ­¡è¿ä¿¡é‚è¼¯ */&lt;/span&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ValidateUser&lt;/span&gt;()&lt;/span&gt; &amp;#123; &lt;span class=&quot;comment&quot;&gt;/* ä½¿ç”¨è€…é©—è­‰é‚è¼¯ */&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;ç¬¦åˆ SRP çš„ç¯„ä¾‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; Username &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; Password &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; Email &amp;#123; &lt;span class=&quot;keyword&quot;&gt;get&lt;/span&gt;; &lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;UserRepository&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SaveUser&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;User user&lt;/span&gt;)&lt;/span&gt; &amp;#123; &lt;span class=&quot;comment&quot;&gt;/* è³‡æ–™åº«å„²å­˜é‚è¼¯ */&lt;/span&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;EmailService&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;SendWelcomeEmail&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;User user&lt;/span&gt;)&lt;/span&gt; &amp;#123; &lt;span class=&quot;comment&quot;&gt;/* ç™¼é€æ­¡è¿ä¿¡é‚è¼¯ */&lt;/span&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;UserValidator&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ValidateUser&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;User user&lt;/span&gt;)&lt;/span&gt; &amp;#123; &lt;span class=&quot;comment&quot;&gt;/* ä½¿ç”¨è€…é©—è­‰é‚è¼¯ */&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å°‡ä¸åŒçš„è·è²¬åˆ†é›¢åˆ°ä¸åŒçš„é¡åˆ¥ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;User é¡åˆ¥åªè² è²¬ä½¿ç”¨è€…è³‡æ–™çš„ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;UserRepository é¡åˆ¥è² è²¬è³‡æ–™åº«å„²å­˜ã€‚&lt;/li&gt;
&lt;li&gt;EmailService é¡åˆ¥è² è²¬ç™¼é€æ­¡è¿ä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;UserValidator é¡åˆ¥è² è²¬ä½¿ç”¨è€…é©—è­‰ã€‚&lt;br&gt;é€™æ¨£åšä½¿å¾—æ¯å€‹é¡åˆ¥éƒ½åªæœ‰ä¸€å€‹è·è²¬ï¼Œä¸¦ä¸”åªå› ç‚ºä¸€å€‹ç†ç”±è€Œæ”¹è®Šï¼Œç¬¦åˆäº† SRPã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;å¾å‰ç«¯çš„è§£åº¦ä¾†ç†è§£&quot;&gt;&lt;a href=&quot;#å¾å‰ç«¯çš„è§£åº¦ä¾†ç†è§£&quot; class=&quot;headerlink&quot; title=&quot;å¾å‰ç«¯çš„è§£åº¦ä¾†ç†è§£&quot;&gt;&lt;/a&gt;å¾å‰ç«¯çš„è§£åº¦ä¾†ç†è§£&lt;/h3&gt;&lt;p&gt;åœ¨å‰ç«¯é–‹ç™¼ä¸­ï¼Œæˆ‘å€‘ç¶“å¸¸ä½¿ç”¨å…ƒä»¶ (Component) çš„æ¦‚å¿µä¾†æ§‹å»ºä½¿ç”¨è€…ä»‹é¢ã€‚ä¸€å€‹å…ƒä»¶é€šå¸¸è² è²¬æ¸²æŸ“ä¸€éƒ¨åˆ†çš„ UIï¼Œä¸¦è™•ç†èˆ‡è©²éƒ¨åˆ† UI ç›¸é—œçš„äº’å‹•ã€‚é€™èˆ‡ SRP çš„æ¦‚å¿µéå¸¸ç›¸ä¼¼ã€‚ä¸€å€‹å¥½çš„å‰ç«¯å…ƒä»¶æ‡‰è©²åªè² è²¬å–®ä¸€çš„è·è²¬ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;p&gt;é¡¯ç¤ºè³‡æ–™ï¼š åªè² è²¬æ¥æ”¶è³‡æ–™ä¸¦å°‡å…¶æ¸²æŸ“åˆ° UI ä¸Šã€‚&lt;br&gt;è™•ç†ä½¿ç”¨è€…è¼¸å…¥ï¼š åªè² è²¬è™•ç†ä½¿ç”¨è€…åœ¨ä»‹é¢ä¸Šçš„è¼¸å…¥äº‹ä»¶ï¼Œä¾‹å¦‚æŒ‰éˆ•é»æ“Šã€è¡¨å–®æäº¤ç­‰ã€‚&lt;br&gt;ç™¼é€ API è«‹æ±‚ï¼š åªè² è²¬å‘å¾Œç«¯ç™¼é€ API è«‹æ±‚ä¸¦è™•ç†å›æ‡‰ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="dotnet" scheme="https://eva813.github.io/categories/dotnet/"/>
    
    
    <category term="dotnet" scheme="https://eva813.github.io/tags/dotnet/"/>
    
  </entry>
  
  <entry>
    <title>LINQ é€²éšé‹ç®—å­ï¼šæ‹“å±•ä½ çš„æŸ¥è©¢èƒ½åŠ›</title>
    <link href="https://eva813.github.io/2025/01/24/Net-learning-4/"/>
    <id>https://eva813.github.io/2025/01/24/Net-learning-4/</id>
    <published>2025-01-24T06:22:20.000Z</published>
    <updated>2025-01-24T07:01:40.373Z</updated>
    
    <content type="html"><![CDATA[<p>é™¤äº†åŸºç¤é‹ç®—å­ï¼ˆå¦‚ Whereã€Select å’Œ OrderByï¼‰ï¼ŒLINQ é‚„æä¾›äº†è¨±å¤šé€²éšé‹ç®—å­ï¼Œç”¨æ–¼è§£æ±ºæ›´è¤‡é›œçš„æŸ¥è©¢éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨é »ç‡è¼ƒé«˜çš„é€²éšé‹ç®—å­ï¼Œä»¥åŠå®ƒå€‘çš„åŠŸèƒ½èˆ‡æ‡‰ç”¨å ´æ™¯ã€‚</p><h2 id="Projection-Operators-æŠ•å½±"><a href="#Projection-Operators-æŠ•å½±" class="headerlink" title="Projection Operators æŠ•å½±"></a>Projection Operators æŠ•å½±</h2><h3 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h3><p>ç¯„ä¾‹ï¼šæŠ•å½±å­—ä¸²æ¸…å–®ä¸­æ¯å€‹å­—ä¸²çš„ç¬¬ä¸€å€‹å­—æ¯ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">string</span>&gt; words = [<span class="string">&quot;an&quot;</span>, <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;day&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> query = words.Select(word =&gt; word.Substring(<span class="number">0</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> s <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    a</span></span><br><span class="line"><span class="comment">    a</span></span><br><span class="line"><span class="comment">    a</span></span><br><span class="line"><span class="comment">    d</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="SelectMany"><a href="#SelectMany" class="headerlink" title="SelectMany"></a>SelectMany</h3><p>SelectMany å°‡ä¸€å€‹é›†åˆä¸­çš„å­é›†åˆå±•å¹³ï¼ˆFlattenï¼‰ï¼Œç”Ÿæˆå–®ä¸€å±¤ç´šçš„çµæœåºåˆ—ã€‚å®ƒéå¸¸é©åˆè™•ç†åµŒå¥—é›†åˆã€‚</p><p>é©ç”¨å ´æ™¯ï¼šéœ€è¦å¾å¤šå€‹å­é›†åˆä¸­æå–å…ƒç´ ï¼Œä¸¦å°‡å®ƒå€‘çµ„åˆç‚ºå–®ä¸€é›†åˆã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">string</span>&gt; phrases = [<span class="string">&quot;an apple a day&quot;</span>, <span class="string">&quot;the quick brown fox&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> query = <span class="keyword">from</span> phrase <span class="keyword">in</span> phrases</span><br><span class="line">            <span class="keyword">from</span> word <span class="keyword">in</span> phrase.Split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">            <span class="keyword">select</span> word;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> s <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    an</span></span><br><span class="line"><span class="comment">    apple</span></span><br><span class="line"><span class="comment">    a</span></span><br><span class="line"><span class="comment">    day</span></span><br><span class="line"><span class="comment">    the</span></span><br><span class="line"><span class="comment">    quick</span></span><br><span class="line"><span class="comment">    brown</span></span><br><span class="line"><span class="comment">    fox</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">string</span>&gt; phrases = [<span class="string">&quot;an apple a day&quot;</span>, <span class="string">&quot;the quick brown fox&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> query = phrases.SelectMany(phrases =&gt; phrases.Split(<span class="string">&#x27; &#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> s <span class="keyword">in</span> query)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* This code produces the following output:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    an</span></span><br><span class="line"><span class="comment">    apple</span></span><br><span class="line"><span class="comment">    a</span></span><br><span class="line"><span class="comment">    day</span></span><br><span class="line"><span class="comment">    the</span></span><br><span class="line"><span class="comment">    quick</span></span><br><span class="line"><span class="comment">    brown</span></span><br><span class="line"><span class="comment">    fox</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>åœ¨æä¾›ä¸€å€‹ï¼Œè™•ç†å¤šå°å¤šé—œä¿‚æ•¸æ“šï¼ˆå¦‚å­¸ç”Ÿå’Œä»–å€‘çš„é¸ä¿®èª²ç¨‹ï¼‰ã€‚<br>ç¯„ä¾‹ï¼šæ”¤å¹³å­¸ç”Ÿçš„èª²ç¨‹æ¸…å–®</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> students = <span class="keyword">new</span>[]</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">new</span> &#123; Name = <span class="string">&quot;Alice&quot;</span>, Courses = <span class="keyword">new</span>[] &#123; <span class="string">&quot;Math&quot;</span>, <span class="string">&quot;Physics&quot;</span> &#125; &#125;,</span><br><span class="line">    <span class="keyword">new</span> &#123; Name = <span class="string">&quot;Bob&quot;</span>, Courses = <span class="keyword">new</span>[] &#123; <span class="string">&quot;Biology&quot;</span>, <span class="string">&quot;Chemistry&quot;</span> &#125; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å±•å¹³æˆå–®ä¸€èª²ç¨‹æ¸…å–®</span></span><br><span class="line"><span class="keyword">var</span> allCourses = students.SelectMany(s =&gt; s.Courses);</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;æ‰€æœ‰èª²ç¨‹ï¼š&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> course <span class="keyword">in</span> allCourses)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(course);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¼¸å‡ºçµæœ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æ‰€æœ‰èª²ç¨‹ï¼š</span><br><span class="line"><span class="title class_">Math</span></span><br><span class="line"><span class="title class_">Physics</span></span><br><span class="line"><span class="title class_">Biology</span></span><br><span class="line"><span class="title class_">Chemistry</span></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="é›†åˆé‹ç®—å­ï¼šDistinctã€Unionã€Intersectã€Except"><a href="#é›†åˆé‹ç®—å­ï¼šDistinctã€Unionã€Intersectã€Except" class="headerlink" title="é›†åˆé‹ç®—å­ï¼šDistinctã€Unionã€Intersectã€Except"></a>é›†åˆé‹ç®—å­ï¼šDistinctã€Unionã€Intersectã€Except</h2><p>é€™äº›é‹ç®—å­ç”¨æ–¼å°é›†åˆåŸ·è¡Œé›†åˆæ“ä½œï¼ˆå¦‚å»é‡ã€å–äº¤é›†ã€è¯é›†å’Œå·®é›†ï¼‰ã€‚</p><p>Distinct: å¾ä¸€å€‹é›†åˆä¸­ç§»é™¤æ‰€æœ‰çš„é‡è¤‡å…ƒç´ ï¼Œåªä¿ç•™å”¯ä¸€å€¼ã€‚<br>union: åŠŸèƒ½æ˜¯å°‡å…©å€‹é›†åˆåˆä½µï¼Œä¸¦ç§»é™¤é‡è¤‡çš„å…ƒç´ ï¼Œè¿”å›ä¸€å€‹å”¯ä¸€å€¼é›†åˆã€‚<br>Intersect: æ–¹æ³•ä¾†æ‰¾å‡ºå…©å€‹é™£åˆ—ä¸­å…±åŒçš„å…ƒç´ <br>Except: å¿«é€Ÿåˆ—å‡ºå…©å€‹é›†åˆçš„å·®ç•°é …ç›®</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> setA = <span class="keyword">new</span>[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> setB = <span class="keyword">new</span>[] &#123; <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> union = setA.Union(setB); <span class="comment">// è¯é›†</span></span><br><span class="line"><span class="keyword">var</span> intersect = setA.Intersect(setB); <span class="comment">// äº¤é›†</span></span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;è¯é›†ï¼š&quot;</span>);</span><br><span class="line">Console.WriteLine(<span class="built_in">string</span>.Join(<span class="string">&quot;, &quot;</span>, union));</span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">&quot;äº¤é›†ï¼š&quot;</span>);</span><br><span class="line">Console.WriteLine(<span class="built_in">string</span>.Join(<span class="string">&quot;, &quot;</span>, intersect));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="é‡è©é‹ç®—å­ï¼šAny-å’Œ-All"><a href="#é‡è©é‹ç®—å­ï¼šAny-å’Œ-All" class="headerlink" title="é‡è©é‹ç®—å­ï¼šAny å’Œ All"></a>é‡è©é‹ç®—å­ï¼šAny å’Œ All</h2><ul><li>Anyï¼šåˆ¤æ–·é›†åˆä¸­æ˜¯å¦æœ‰ä»»æ„ä¸€å€‹å…ƒç´ æ»¿è¶³æ¢ä»¶ã€‚</li><li>Allï¼šåˆ¤æ–·é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½æ»¿è¶³æ¢ä»¶ã€‚</li></ul><p>å¯ä»¥é©ç”¨æ–¼ï¼š<br>é©—è­‰æ•¸æ“šçš„å®Œæ•´æ€§æˆ–ä¸€è‡´æ€§ã€‚<br>ç¯©é¸é›†åˆä¸­æ˜¯å¦åŒ…å«ç‰¹å®šé¡å‹çš„å…ƒç´ ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> products = <span class="keyword">new</span>[]</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Laptop&quot;</span>, Price = <span class="number">160</span> &#125;,</span><br><span class="line">    <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Mouse&quot;</span>, Price = <span class="number">50</span> &#125;,</span><br><span class="line">    <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Keyboard&quot;</span>, Price = <span class="number">75</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> hasExpensiveProduct = products.Any(p =&gt; p.Price &gt; <span class="number">150</span>); </span><br><span class="line"><span class="built_in">bool</span> allProductsHaveName = products.All(p =&gt; !<span class="built_in">string</span>.IsNullOrEmpty(p.Name)); <span class="comment">// æ˜¯å¦æ‰€æœ‰å•†å“éƒ½æœ‰åç¨±</span></span><br><span class="line"></span><br><span class="line">Console.WriteLine(<span class="string">$&quot;æœ‰åƒ¹æ ¼è¶…é 150 çš„å•†å“å—ï¼Ÿ<span class="subst">&#123;hasExpensiveProduct&#125;</span>&quot;</span>);</span><br><span class="line">Console.WriteLine(<span class="string">$&quot;æ‰€æœ‰å•†å“éƒ½æœ‰åç¨±å—ï¼Ÿ<span class="subst">&#123;allProductsHaveName&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœ‰åƒ¹æ ¼è¶…é 150 çš„å•†å“å—ï¼ŸTrue</span></span><br><span class="line"><span class="comment">// æ‰€æœ‰å•†å“éƒ½æœ‰åç¨±å—ï¼ŸTrue</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="åˆ†çµ„é‹ç®—å­ï¼šGroupBy"><a href="#åˆ†çµ„é‹ç®—å­ï¼šGroupBy" class="headerlink" title="åˆ†çµ„é‹ç®—å­ï¼šGroupBy"></a>åˆ†çµ„é‹ç®—å­ï¼šGroupBy</h2><p>GroupBy æ ¹æ“šéµï¼ˆKeyï¼‰å°‡é›†åˆä¸­çš„å…ƒç´ åˆ†çµ„ï¼Œæ¯å€‹åˆ†çµ„åŒ…å«éµå’Œå€¼é›†åˆã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Product&gt; products = GetProductList();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = <span class="keyword">from</span> p <span class="keyword">in</span>  products</span><br><span class="line">             <span class="keyword">group</span> p <span class="keyword">by</span> p.<span class="function">Category <span class="keyword">into</span> c</span></span><br><span class="line"><span class="function">             <span class="title">select</span> (<span class="params">Category: c.Key , Products: c</span>)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">foreach</span>(<span class="keyword">var</span> orderGroup <span class="keyword">in</span> result)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Products in <span class="subst">&#123;orderGroup.Category&#125;</span> category:&quot;</span>);</span><br><span class="line">        <span class="keyword">foreach</span>(<span class="keyword">var</span> product <span class="keyword">in</span> orderGroup.Products)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;\t<span class="subst">&#123;product&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://learn.microsoft.com/zh-tw/dotnet/csharp/linq/standard-query-operators/projection-operations">learn.microsoft</a><br><a href="https://github.com/dotnet/try-samples/blob/main/101-linq-samples/index.md">101 LINQ Samples</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;é™¤äº†åŸºç¤é‹ç®—å­ï¼ˆå¦‚ Whereã€Select å’Œ OrderByï¼‰ï¼ŒLINQ é‚„æä¾›äº†è¨±å¤šé€²éšé‹ç®—å­ï¼Œç”¨æ–¼è§£æ±ºæ›´è¤‡é›œçš„æŸ¥è©¢éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨é »ç‡è¼ƒé«˜çš„é€²éšé‹ç®—å­ï¼Œä»¥åŠå®ƒå€‘çš„åŠŸèƒ½èˆ‡æ‡‰ç”¨å ´æ™¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Projection-Operators-æŠ•å½±&quot;&gt;&lt;a href=&quot;#Projection-Operators-æŠ•å½±&quot; class=&quot;headerlink&quot; title=&quot;Projection Operators æŠ•å½±&quot;&gt;&lt;/a&gt;Projection Operators æŠ•å½±&lt;/h2&gt;&lt;h3 id=&quot;Select&quot;&gt;&lt;a href=&quot;#Select&quot; class=&quot;headerlink&quot; title=&quot;Select&quot;&gt;&lt;/a&gt;Select&lt;/h3&gt;&lt;p&gt;ç¯„ä¾‹ï¼šæŠ•å½±å­—ä¸²æ¸…å–®ä¸­æ¯å€‹å­—ä¸²çš„ç¬¬ä¸€å€‹å­—æ¯ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;List&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt; words = [&lt;span class=&quot;string&quot;&gt;&amp;quot;an&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;apple&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;a&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;day&amp;quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; query = words.Select(word =&amp;gt; word.Substring(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; s &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; query)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Console.WriteLine(s);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/* This code produces the following output:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    a&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    a&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    a&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    d&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;


&lt;h3 id=&quot;SelectMany&quot;&gt;&lt;a href=&quot;#SelectMany&quot; class=&quot;headerlink&quot; title=&quot;SelectMany&quot;&gt;&lt;/a&gt;SelectMany&lt;/h3&gt;&lt;p&gt;SelectMany å°‡ä¸€å€‹é›†åˆä¸­çš„å­é›†åˆå±•å¹³ï¼ˆFlattenï¼‰ï¼Œç”Ÿæˆå–®ä¸€å±¤ç´šçš„çµæœåºåˆ—ã€‚å®ƒéå¸¸é©åˆè™•ç†åµŒå¥—é›†åˆã€‚&lt;/p&gt;
&lt;p&gt;é©ç”¨å ´æ™¯ï¼šéœ€è¦å¾å¤šå€‹å­é›†åˆä¸­æå–å…ƒç´ ï¼Œä¸¦å°‡å®ƒå€‘çµ„åˆç‚ºå–®ä¸€é›†åˆã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;List&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt; phrases = [&lt;span class=&quot;string&quot;&gt;&amp;quot;an apple a day&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;the quick brown fox&amp;quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; query = &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; phrase &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; phrases&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; word &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; phrase.Split(&lt;span class=&quot;string&quot;&gt;&amp;#x27; &amp;#x27;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;select&lt;/span&gt; word;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; s &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; query)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Console.WriteLine(s);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/* This code produces the following output:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    an&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    apple&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    a&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    day&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    the&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    quick&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    brown&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    fox&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;


&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;List&amp;lt;&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;&amp;gt; phrases = [&lt;span class=&quot;string&quot;&gt;&amp;quot;an apple a day&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;the quick brown fox&amp;quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; query = phrases.SelectMany(phrases =&amp;gt; phrases.Split(&lt;span class=&quot;string&quot;&gt;&amp;#x27; &amp;#x27;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; s &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; query)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Console.WriteLine(s);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/* This code produces the following output:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    an&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    apple&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    a&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    day&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    the&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    quick&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    brown&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;    fox&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;


&lt;p&gt;åœ¨æä¾›ä¸€å€‹ï¼Œè™•ç†å¤šå°å¤šé—œä¿‚æ•¸æ“šï¼ˆå¦‚å­¸ç”Ÿå’Œä»–å€‘çš„é¸ä¿®èª²ç¨‹ï¼‰ã€‚&lt;br&gt;ç¯„ä¾‹ï¼šæ”¤å¹³å­¸ç”Ÿçš„èª²ç¨‹æ¸…å–®&lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; students = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;[]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &amp;#123; Name = &lt;span class=&quot;string&quot;&gt;&amp;quot;Alice&amp;quot;&lt;/span&gt;, Courses = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;[] &amp;#123; &lt;span class=&quot;string&quot;&gt;&amp;quot;Math&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;Physics&amp;quot;&lt;/span&gt; &amp;#125; &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &amp;#123; Name = &lt;span class=&quot;string&quot;&gt;&amp;quot;Bob&amp;quot;&lt;/span&gt;, Courses = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;[] &amp;#123; &lt;span class=&quot;string&quot;&gt;&amp;quot;Biology&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;Chemistry&amp;quot;&lt;/span&gt; &amp;#125; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å±•å¹³æˆå–®ä¸€èª²ç¨‹æ¸…å–®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; allCourses = students.SelectMany(s =&amp;gt; s.Courses);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Console.WriteLine(&lt;span class=&quot;string&quot;&gt;&amp;quot;æ‰€æœ‰èª²ç¨‹ï¼š&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; course &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; allCourses)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Console.WriteLine(course);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;è¼¸å‡ºçµæœ&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;æ‰€æœ‰èª²ç¨‹ï¼š&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title class_&quot;&gt;Math&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title class_&quot;&gt;Physics&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title class_&quot;&gt;Biology&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title class_&quot;&gt;Chemistry&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="dotnet" scheme="https://eva813.github.io/categories/dotnet/"/>
    
    
    <category term="dotnet" scheme="https://eva813.github.io/tags/dotnet/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥æ·ºå‡º C# LINQï¼šè®“æŸ¥è©¢èªæ³•è®Šå¾—æ›´ç°¡å–®</title>
    <link href="https://eva813.github.io/2025/01/18/Net-learning-3/"/>
    <id>https://eva813.github.io/2025/01/18/Net-learning-3/</id>
    <published>2025-01-18T11:28:54.000Z</published>
    <updated>2025-01-24T06:18:38.943Z</updated>
    
    <content type="html"><![CDATA[<p>C# çš„ LINQ (Language Integrated Queryï¼Œèªè¨€æ•´åˆæŸ¥è©¢) æ˜¯ä¸€å€‹éå¸¸å¼·å¤§çš„åŠŸèƒ½ï¼Œå®ƒè®“ä½ å¯ä»¥ä½¿ç”¨é¡ä¼¼ SQL çš„èªæ³•ä¾†æŸ¥è©¢å„ç¨®ä¸åŒçš„è³‡æ–™ä¾†æºã€‚é€™æ„å‘³è‘—ä½ å¯ä»¥ç”¨çµ±ä¸€çš„æ–¹å¼ä¾†è™•ç†è³‡æ–™ï¼Œç„¡è«–è³‡æ–™æ˜¯ä¾†è‡ªé™£åˆ—ã€åˆ—è¡¨ã€è³‡æ–™åº«ã€XML æˆ–å…¶ä»–ä»»ä½•æ”¯æ´ LINQ çš„ä¾†æºã€‚</p><h2 id="LINQ-çš„å…©ç¨®èªæ³•ï¼š"><a href="#LINQ-çš„å…©ç¨®èªæ³•ï¼š" class="headerlink" title="LINQ çš„å…©ç¨®èªæ³•ï¼š"></a>LINQ çš„å…©ç¨®èªæ³•ï¼š</h2><p>LINQ æœ‰å…©ç¨®ä¸»è¦çš„èªæ³•å½¢å¼ï¼š</p><ul><li>æŸ¥è©¢èªæ³• (Query Syntax)ï¼š çœ‹èµ·ä¾†å¾ˆåƒ SQL èªæ³•ï¼Œä½¿ç”¨ fromã€whereã€select ç­‰é—œéµå­—ã€‚é€™ç¨®èªæ³•æ¯”è¼ƒæ˜“è®€ï¼Œå°¤å…¶æ˜¯åœ¨è™•ç†è¤‡é›œçš„æŸ¥è©¢æ™‚ã€‚</li><li>æ–¹æ³•èªæ³• (Method Syntax)ï¼š ä½¿ç”¨æ“´å……æ–¹æ³• (Extension Methods) ä¾†è¡¨ç¤ºæŸ¥è©¢é‹ç®—å­ã€‚é€™ç¨®èªæ³•æ›´ç°¡æ½”ï¼Œä¹Ÿæ›´éˆæ´»ã€‚ç°¡å–®çš„æŸ¥è©¢æˆ–éœ€è¦éˆå¼æ“ä½œæ™‚ï¼Œé€šå¸¸ä½¿ç”¨æ–¹æ³•èªæ³•æ›´ç‚ºæ–¹ä¾¿ã€‚</li></ul><span id="more"></span><h2 id="åŸºæœ¬ç¯„ä¾‹ï¼š"><a href="#åŸºæœ¬ç¯„ä¾‹ï¼š" class="headerlink" title="åŸºæœ¬ç¯„ä¾‹ï¼š"></a>åŸºæœ¬ç¯„ä¾‹ï¼š</h2><p>æ‰€æœ‰çš„ LINQ æŸ¥è©¢ä½œæ¥­éƒ½åŒ…å«ä¸‰å€‹ä¸åŒçš„å‹•ä½œï¼š<br>  å–å¾—è³‡æ–™ä¾†æºã€‚<br>  å»ºç«‹æŸ¥è©¢ã€‚<br>  åŸ·è¡ŒæŸ¥è©¢ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 1. è³‡æ–™ä¾†æº</span></span><br><span class="line"><span class="built_in">int</span>[] numbers = [ <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> ];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å»ºç«‹æŸ¥è©¢</span></span><br><span class="line"><span class="comment">// numQuery is an IEnumerable&lt;int&gt;</span></span><br><span class="line"><span class="keyword">var</span> numQuery = <span class="function"><span class="keyword">from</span> num <span class="keyword">in</span> numbers</span></span><br><span class="line"><span class="function">               <span class="title">where</span> (<span class="params">num % <span class="number">2</span></span>)</span> == <span class="number">0</span></span><br><span class="line">               <span class="keyword">select</span> num;</span><br><span class="line"><span class="comment">// å»ºç«‹æŸ¥è©¢ (æ–¹æ³•èªæ³•)</span></span><br><span class="line"><span class="comment">// var numQuery = numbers.Where(num =&gt; (num % 2) == 0); </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åŸ·è¡ŒæŸ¥è©¢</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> num <span class="keyword">in</span> numQuery)</span><br><span class="line">&#123;</span><br><span class="line">    Console.Write(<span class="string">&quot;&#123;0,1&#125; &quot;</span>, num);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>é‡é»ï¼š å»ºç«‹æŸ¥è©¢çš„æ­¥é©Ÿä¸¦ä¸æœƒå¯¦éš›åŸ·è¡ŒæŸ¥è©¢ï¼Œå®ƒåªæ˜¯å®šç¾©äº†æŸ¥è©¢çš„é‚è¼¯ã€‚æŸ¥è©¢æœ¬èº«ä¸¦ä¸æœƒç«‹å³å¾è³‡æ–™ä¾†æºä¸­æå–ä»»ä½•è³‡æ–™ã€‚</p><h3 id="å°æ¯”ç¯„ä¾‹ï¼Œä¸ç”¨-LINQ-çš„æƒ…æ³"><a href="#å°æ¯”ç¯„ä¾‹ï¼Œä¸ç”¨-LINQ-çš„æƒ…æ³" class="headerlink" title="å°æ¯”ç¯„ä¾‹ï¼Œä¸ç”¨ LINQ çš„æƒ…æ³"></a>å°æ¯”ç¯„ä¾‹ï¼Œä¸ç”¨ LINQ çš„æƒ…æ³</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">List&lt;<span class="built_in">int</span>&gt; numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt;() &#123; <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span> &#125;;</span><br><span class="line">List&lt;<span class="built_in">int</span>&gt; evenNumbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt;();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">int</span> num <span class="keyword">in</span> numbers)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (num % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        evenNumbers.Add(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="built_in">string</span>.Join(<span class="string">&quot;, &quot;</span>, evenNumbers)); <span class="comment">// Output: 0, 2, 4, 6</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æŸ¥è©¢èªæ³•çš„åŸºæœ¬çµæ§‹"><a href="#æŸ¥è©¢èªæ³•çš„åŸºæœ¬çµæ§‹" class="headerlink" title="æŸ¥è©¢èªæ³•çš„åŸºæœ¬çµæ§‹"></a>æŸ¥è©¢èªæ³•çš„åŸºæœ¬çµæ§‹</h2><p>åœ¨ LINQ æŸ¥è©¢ä¸­ï¼Œèªæ³•çš„é–‹é ­å’Œçµå°¾æœ‰è‘—å›ºå®šçš„è¦å‰‡ï¼š</p><ul><li><p>é–‹é ­<br>LINQ æŸ¥è©¢çš„é–‹é ­å¿…é ˆä½¿ç”¨ from å­å¥ã€‚<br>from å­å¥çš„ä½œç”¨ï¼šå®šç¾©è³‡æ–™ä¾†æºï¼ˆæ•¸æ“šæºï¼‰ä»¥åŠç¯„åœè®Šæ•¸ï¼ˆå³ç”¨æ–¼éæ­·æ•¸æ“šçš„è‡¨æ™‚è®Šæ•¸ï¼‰ã€‚<br>é€šå¸¸ï¼Œç¯„åœè®Šæ•¸æœƒåœ¨æ¥ä¸‹ä¾†çš„å­å¥ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚ whereã€select æˆ– orderbyã€‚</p></li><li><p>æŸ¥è©¢éç¨‹ä¸­çš„å­å¥<br>LINQ æ”¯æ´è¨±å¤šé¡ä¼¼ SQL çš„å­å¥ï¼Œä¾‹å¦‚ï¼š</p><ul><li>Whereï¼š æ ¹æ“šæŒ‡å®šçš„æ¢ä»¶ç¯©é¸åºåˆ—ä¸­çš„å…ƒç´ ã€‚</li><li>Selectï¼š å°‡åºåˆ—ä¸­çš„æ¯å€‹å…ƒç´ è½‰æ›æˆæ–°çš„å½¢å¼ã€‚ä½ å¯ä»¥é¸æ“‡å…ƒç´ çš„æŸäº›å±¬æ€§ï¼Œæˆ–è€…é€²è¡Œè¨ˆç®—ã€‚</li><li>OrderByï¼š ä»¥éå¢é †åºæ’åºåºåˆ—ä¸­çš„å…ƒç´ ã€‚</li></ul></li></ul><h3 id="æŸ¥è©¢èªæ³•çš„çµå°¾ï¼šgroup-èˆ‡-select-å­å¥"><a href="#æŸ¥è©¢èªæ³•çš„çµå°¾ï¼šgroup-èˆ‡-select-å­å¥" class="headerlink" title="æŸ¥è©¢èªæ³•çš„çµå°¾ï¼šgroup èˆ‡ select å­å¥"></a>æŸ¥è©¢èªæ³•çš„çµå°¾ï¼šgroup èˆ‡ select å­å¥</h3><p>åœ¨ LINQ æŸ¥è©¢ä¸­ï¼Œæ¯å€‹æŸ¥è©¢çš„çµå°¾å¿…é ˆåŒ…å« group æˆ– select å­å¥ï¼š</p><ol><li>select å­å¥</li></ol><ul><li>ä½œç”¨ï¼šå°‡æ¯å€‹ç¯„åœè®Šæ•¸è½‰æ›ç‚ºæ–°çš„å½¢å¼æˆ–æå–æ‰€éœ€çš„å±¬æ€§ã€‚</li><li>çµæœé¡å‹ï¼šé€šå¸¸æ˜¯ <code>IEnumerable&lt;T&gt;</code>ï¼Œå…¶ä¸­ T æ˜¯è¿”å›å€¼çš„é¡å‹ã€‚</li></ul><ol start="2"><li>group å­å¥</li></ol><ul><li>ä½œç”¨ï¼šå°‡ç¯„åœè®Šæ•¸æ ¹æ“šæŸå€‹éµå€¼ï¼ˆKeyï¼‰é€²è¡Œåˆ†çµ„ã€‚</li><li>çµæœé¡å‹ï¼šæœƒç”¢ç”Ÿä¸€å€‹åˆ†çµ„å¾Œçš„åºåˆ—ï¼Œæ¯å€‹åˆ†çµ„åŒ…å«ä¸€å€‹éµå’Œä¸€çµ„å…ƒç´ ã€‚</li></ul><p>ä½¿ç”¨ group by åˆ†çµ„ï¼Œä»¥ä¸‹æ˜¯ä½¿ç”¨ group by å­å¥é€²è¡Œåˆ†çµ„çš„ç¯„ä¾‹ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>[] countries = &#123; <span class="string">&quot;France&quot;</span>, <span class="string">&quot;Germany&quot;</span>, <span class="string">&quot;Finland&quot;</span>, <span class="string">&quot;India&quot;</span>, <span class="string">&quot;Italy&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ“šåœ‹å®¶åç¨±çš„ç¬¬ä¸€å€‹å­—æ¯åˆ†çµ„</span></span><br><span class="line"><span class="keyword">var</span> groupedCountries = <span class="keyword">from</span> country <span class="keyword">in</span> countries</span><br><span class="line">                       <span class="keyword">group</span> country <span class="keyword">by</span> country[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> <span class="keyword">group</span> <span class="keyword">in</span> groupedCountries)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;Key: <span class="subst">&#123;<span class="keyword">group</span>.Key&#125;</span>&quot;</span>); <span class="comment">// ç¾¤çµ„éµ (åœ‹å®¶åç¨±çš„é¦–å­—æ¯)</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> country <span class="keyword">in</span> <span class="keyword">group</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot; - <span class="subst">&#123;country&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨å‰é¢çš„ç« ç¯€ä¸­ï¼Œæˆ‘å€‘å·²ç¶“äº†è§£äº† LINQ çš„å…©ç¨®èªæ³•å½¢å¼å’ŒåŸºæœ¬çµæ§‹ï¼š</p><ul><li>æŸ¥è©¢èªæ³•æä¾›é¡ä¼¼ SQL çš„ç›´è§€å¯«æ³•</li><li>æ–¹æ³•èªæ³•æ›´åŠ ç°¡æ½”éˆæ´»</li><li>æ¯å€‹ LINQ æŸ¥è©¢éƒ½åŒ…å«ä¸‰å€‹é—œéµæ­¥é©Ÿï¼šå–å¾—è³‡æ–™ä¾†æºã€å»ºç«‹æŸ¥è©¢ã€åŸ·è¡ŒæŸ¥è©¢</li></ul><h2 id="LINQ-çš„å»¶é²åŸ·è¡Œ-Deferred-Execution"><a href="#LINQ-çš„å»¶é²åŸ·è¡Œ-Deferred-Execution" class="headerlink" title="LINQ çš„å»¶é²åŸ·è¡Œ (Deferred Execution)"></a>LINQ çš„å»¶é²åŸ·è¡Œ (Deferred Execution)</h2><p>åœ¨ LINQ ä¸­ï¼ŒæŸ¥è©¢ä¸¦ä¸æœƒåœ¨å®£å‘Šæ™‚ç«‹å³åŸ·è¡Œï¼Œè€Œæ˜¯ç­‰åˆ°ä½ é–‹å§‹åˆ—èˆ‰æŸ¥è©¢çµæœæ™‚ï¼ˆä¾‹å¦‚åœ¨ foreach è¿´åœˆä¸­ï¼‰æ‰æœƒå¯¦éš›åŸ·è¡Œã€‚é€™ç¨®ç‰¹æ€§è¢«ç¨±ç‚ºå»¶é²åŸ·è¡Œï¼ˆDeferred Executionï¼‰ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> query = numbers.Where(n =&gt; n &gt; <span class="number">2</span>); <span class="comment">// å®šç¾©æŸ¥è©¢</span></span><br><span class="line"></span><br><span class="line">numbers.Add(<span class="number">6</span>); <span class="comment">// ä¿®æ”¹åŸæ•¸æ“šæº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> num <span class="keyword">in</span> query) <span class="comment">// æŸ¥è©¢åœ¨é€™è£¡åŸ·è¡Œ</span></span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(num); <span class="comment">// è¼¸å‡ºï¼š3, 4, 5, 6</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æƒ°æ€§æ±‚å€¼ï¼ˆLazy-Evaluationï¼‰"><a href="#æƒ°æ€§æ±‚å€¼ï¼ˆLazy-Evaluationï¼‰" class="headerlink" title="æƒ°æ€§æ±‚å€¼ï¼ˆLazy Evaluationï¼‰"></a>æƒ°æ€§æ±‚å€¼ï¼ˆLazy Evaluationï¼‰</h3><p>æƒ°æ€§æ±‚å€¼ï¼ˆLazy Evaluationï¼‰èˆ‡ LINQ çš„å»¶é²åŸ·è¡Œï¼ˆDeferred Executionï¼‰é—œä¿‚ï¼š<br>åœ¨ C# ä¸­ï¼Œæƒ°æ€§æ±‚å€¼ï¼ˆLazy Evaluationï¼‰å’Œå»¶é²åŸ·è¡Œï¼ˆDeferred Executionï¼‰åŸºæœ¬ä¸Šæ˜¯åŒç¾©çš„ï¼Œå°¤å…¶æ˜¯åœ¨ LINQ çš„èƒŒæ™¯ä¸‹ã€‚é€™å…©å€‹è¡“èªéƒ½æè¿°äº†æŸ¥è©¢åœ¨éœ€è¦æ™‚æ‰è¢«åŸ·è¡Œçš„è¡Œç‚ºï¼Œè€Œä¸æ˜¯åœ¨æŸ¥è©¢å®šç¾©æ™‚ç«‹å³åŸ·è¡Œ</p><ul><li>Lazy Evaluation çš„éˆæ´»æ€§é›–ç„¶å¾ˆé«˜ï¼Œä½†åœ¨æŸäº›å ´æ™¯ä¸‹å¯èƒ½å°è‡´æ•ˆèƒ½å•é¡Œï¼Œç‰¹åˆ¥æ˜¯åœ¨å¤šæ¬¡è¿­ä»£åŒä¸€æŸ¥è©¢æ™‚ã€‚ä»¥ä¸‹æ˜¯å¸¸è¦‹çš„é™·é˜±èˆ‡è§£æ±ºæ–¹æ¡ˆï¼š</li></ul><ol><li>é‡è¤‡åŸ·è¡ŒæŸ¥è©¢<br>å¦‚æœå°åŒä¸€å€‹ LINQ æŸ¥è©¢é€²è¡Œå¤šæ¬¡æ“ä½œï¼Œæœƒå°è‡´æŸ¥è©¢é‚è¼¯è¢«é‡è¤‡åŸ·è¡Œã€‚</li></ol><p>ç¯„ä¾‹ï¼š<br>ç¨‹å¼ä¸­ï¼Œquery åœ¨æ¯æ¬¡ foreach æ™‚éƒ½æœƒé‡æ–°åŸ·è¡Œéæ¿¾é‚è¼¯ï¼Œå°æ–¼å¤§å‹é›†åˆä¾†èªªå¯èƒ½å°è‡´æ•ˆèƒ½ä¸‹é™ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt; &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šç¾©æŸ¥è©¢</span></span><br><span class="line"><span class="keyword">var</span> query = numbers.Where(n =&gt; n &gt; <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡è¤‡éæ­·æŸ¥è©¢çµæœ</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> num <span class="keyword">in</span> query) &#123; Console.WriteLine(num); &#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;---&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> num <span class="keyword">in</span> query) &#123; Console.WriteLine(num); &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥æ”¹ä½¿ç”¨ï¼Œå³æ™‚åŸ·è¡Œ</p><p>å¦‚æœæŸ¥è©¢çµæœä¸éœ€è¦å‹•æ…‹æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨ <code>ToList()</code> æˆ– <code>ToArray()</code> ç­‰æ–¹æ³•ï¼Œå°‡æŸ¥è©¢çµæœç·©å­˜åˆ°é›†åˆä¸­ï¼š</p><ul><li>ä½¿ç”¨ <code>ToList()</code> ä¾†è§¸ç™¼ <strong>eager query execution</strong>ï¼ˆæ€¥åˆ‡æŸ¥è©¢åŸ·è¡Œï¼‰ï¼Œä¹Ÿå°±æ˜¯æŸ¥è©¢æœƒç«‹å³åŸ·è¡Œä¸¦ä¸”çµæœæœƒè¢«å¿«å–ä¸‹ä¾†ã€‚</li><li>ç•¶ä½¿ç”¨ <code>ToList()</code> æ™‚ï¼ŒLINQ æŸ¥è©¢æœƒåœ¨ <code>ToList()</code> èª¿ç”¨çš„é‚£ä¸€åˆ»å°±ç«‹åˆ»åŸ·è¡Œï¼Œä¸¦ä¸”å°‡æŸ¥è©¢çµæœå„²å­˜åˆ°ä¸€å€‹åˆ—è¡¨ä¸­ã€‚</li></ul><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cachedQuery = query.ToList(); <span class="comment">// å°‡çµæœå­˜å…¥æ¸…å–®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> num <span class="keyword">in</span> cachedQuery) &#123; Console.WriteLine(num); &#125;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> num <span class="keyword">in</span> cachedQuery) &#123; Console.WriteLine(num); &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å¦‚ä½•é¸æ“‡-Lazy-Execution-æˆ–-Eager-Execution"><a href="#å¦‚ä½•é¸æ“‡-Lazy-Execution-æˆ–-Eager-Execution" class="headerlink" title="å¦‚ä½•é¸æ“‡ Lazy Execution æˆ– Eager Execution?"></a>å¦‚ä½•é¸æ“‡ Lazy Execution æˆ– Eager Execution?</h3><ol><li>Lazy Execution<br>æ‡¶æ€§åŸ·è¡Œæ˜¯ LINQ çš„é è¨­è¡Œç‚ºã€‚æŸ¥è©¢å®šç¾©æ™‚ä¸æœƒåŸ·è¡Œï¼Œåªæœ‰åœ¨çœŸæ­£éœ€è¦æŸ¥è©¢çµæœæ™‚ï¼ˆå¦‚éæ­·æˆ–èª¿ç”¨çµ‚çµæ“ä½œï¼‰æ‰åŸ·è¡Œã€‚é€™ç¨®æ–¹å¼çš„å„ªå‹¢æ˜¯ï¼š</li></ol><ul><li>é«˜æ•ˆè™•ç†å¤§æ•¸æ“šæºï¼šåƒ…åœ¨éœ€è¦æ™‚æ‰é€²è¡ŒæŸ¥è©¢è¨ˆç®—ã€‚</li><li>æ”¯æŒå‹•æ…‹æ•¸æ“šæºï¼šæŸ¥è©¢çµæœæœƒéš¨è‘—æ•¸æ“šæºçš„è®ŠåŒ–è€Œæ›´æ–°ã€‚</li></ul><p>é©ç”¨æƒ…å¢ƒï¼š</p><ul><li>æŸ¥è©¢çµæœä¸éœ€è¦é »ç¹é‡è¤‡ä½¿ç”¨ã€‚</li><li>æ•¸æ“šæºå¯èƒ½åœ¨æŸ¥è©¢åŸ·è¡Œå‰ç™¼ç”Ÿè®ŠåŒ–ï¼ˆä¾‹å¦‚æ•¸æ“šè¢«æ·»åŠ ã€åˆªé™¤æˆ–ä¿®æ”¹ï¼‰ã€‚</li></ul><ol start="2"><li>Eager Execution<br>æ€¥åˆ‡åŸ·è¡Œæœƒç«‹å³åŸ·è¡ŒæŸ¥è©¢ä¸¦å°‡çµæœå­˜å„²åˆ°è¨˜æ†¶é«”ä¸­ï¼ˆå¦‚ä½¿ç”¨ <code>ToList()</code> æˆ– <code>ToArray()</code>ï¼‰ã€‚é€™ç¨®æ–¹å¼çš„å„ªå‹¢æ˜¯ï¼š</li></ol><ul><li>é¿å…é‡è¤‡åŸ·è¡ŒæŸ¥è©¢é‚è¼¯ï¼šç‰¹åˆ¥æ˜¯ç•¶éœ€è¦å¤šæ¬¡ä½¿ç”¨æŸ¥è©¢çµæœæ™‚ï¼Œå¯ä»¥æå‡æ•ˆèƒ½ã€‚</li><li>çµæœç©©å®šï¼šæŸ¥è©¢çµæœä¸å—æ•¸æ“šæºè®Šæ›´å½±éŸ¿ï¼Œé©åˆè™•ç†ä¸å¯é æ¸¬çš„æ•¸æ“šè®ŠåŒ–æˆ–ä¸¦ç™¼æƒ…å¢ƒã€‚<br>é©ç”¨æƒ…å¢ƒï¼š</li><li>éœ€è¦å¤šæ¬¡ä½¿ç”¨æŸ¥è©¢çµæœï¼Œæˆ–é¿å…é‡è¤‡è¨ˆç®—é–‹éŠ·ã€‚</li><li>æ•¸æ“šæºå¯èƒ½å› å…¶ä»–æ“ä½œç™¼ç”Ÿè®ŠåŒ–ï¼ˆä¾‹å¦‚å¤šç·šç¨‹ç’°å¢ƒï¼‰ã€‚</li></ul><h4 id="é€²ä¸€æ­¥ï¼Œè©¢å•-AI-å·¥å…·ä¾†æä¾›ç¯„ä¾‹å€åˆ†-2-è€…ä½¿ç”¨æƒ…å¢ƒ"><a href="#é€²ä¸€æ­¥ï¼Œè©¢å•-AI-å·¥å…·ä¾†æä¾›ç¯„ä¾‹å€åˆ†-2-è€…ä½¿ç”¨æƒ…å¢ƒ" class="headerlink" title="é€²ä¸€æ­¥ï¼Œè©¢å• AI å·¥å…·ä¾†æä¾›ç¯„ä¾‹å€åˆ† 2 è€…ä½¿ç”¨æƒ…å¢ƒ"></a>é€²ä¸€æ­¥ï¼Œè©¢å• AI å·¥å…·ä¾†æä¾›ç¯„ä¾‹å€åˆ† 2 è€…ä½¿ç”¨æƒ…å¢ƒ</h4><ol><li>å•†å“ç¯©é¸åŠŸèƒ½ï¼ˆLazy Evaluationï¼‰</li></ol><p>åŠŸèƒ½æè¿°ï¼š<br>å‡è¨­æˆ‘å€‘åœ¨é–‹ç™¼ä¸€å€‹é›»å­å•†å‹™å¹³å°ï¼Œé é¢ä¸Šæœ‰å•†å“æ¸…å–®ï¼Œä¸¦ä¸”å…è¨±ç”¨æˆ¶ä½¿ç”¨ç¯©é¸å™¨ï¼ˆä¾‹å¦‚ã€Œåƒ¹æ ¼é«˜æ–¼æŸå€‹é–€æª»ã€ï¼‰å‹•æ…‹æŸ¥çœ‹ç¬¦åˆæ¢ä»¶çš„å•†å“ã€‚<br>åœ¨é€™ç¨®å ´æ™¯ä¸­ï¼š<br>éœ€æ±‚çš„é‡é»ï¼šæ•¸æ“šæºå¯èƒ½éš¨æ™‚è®Šæ›´ï¼ˆä¾‹å¦‚æ–°å¢ã€åˆªé™¤å•†å“ï¼‰ï¼Œç¯©é¸çµæœéœ€è¦å³æ™‚åæ˜ æœ€æ–°çš„ç‹€æ…‹ã€‚<br>é©ç”¨è§£æ±ºæ–¹æ¡ˆï¼šé¸æ“‡ã€Œæ‡¶æ€§åŸ·è¡Œã€ï¼Œè®“æŸ¥è©¢é‚è¼¯åœ¨æ¯æ¬¡è¿­ä»£çµæœæ™‚é‡æ–°è©•ä¼°æ•¸æ“šæºï¼Œç¢ºä¿çµæœå§‹çµ‚æ˜¯æœ€æ–°çš„ã€‚</p><ul><li>æ•¸æ“šè®Šæ›´é »ç¹ï¼šä¾‹å¦‚ï¼Œå¾Œç«¯é€šé API æ–°å¢å•†å“ï¼Œæˆ–è€…æŸäº›å•†å“çš„åƒ¹æ ¼è¢«æ›´æ–°ã€‚</li><li>çµæœä¸éœ€è¦é‡è¤‡ä½¿ç”¨ï¼šæŸ¥è©¢é‚è¼¯åªéœ€è¦åŸ·è¡Œä¸€æ¬¡ï¼Œç‚ºç”¨æˆ¶æä¾›å¯¦æ™‚çš„ç¯©é¸çµæœå³å¯ã€‚</li></ul><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> products = <span class="keyword">new</span> List&lt;Product&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Laptop&quot;</span>, Price = <span class="number">150</span> &#125;,</span><br><span class="line">    <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Mouse&quot;</span>, Price = <span class="number">50</span> &#125;,</span><br><span class="line">    <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Keyboard&quot;</span>, Price = <span class="number">75</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šç¾©ç¯©é¸æ¢ä»¶æŸ¥è©¢</span></span><br><span class="line"><span class="keyword">var</span> expensiveProducts = products.Where(p =&gt; p.Price &gt; <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æˆ¶å‹•æ…‹æ–°å¢å•†å“</span></span><br><span class="line">products.Add(<span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Monitor&quot;</span>, Price = <span class="number">200</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨å‰ç«¯é é¢çœ‹åˆ°çš„çµæœ</span></span><br><span class="line">Console.WriteLine(<span class="string">&quot;ç¯©é¸çµæœï¼š&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> product <span class="keyword">in</span> expensiveProducts)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;product.Name&#125;</span> - $<span class="subst">&#123;product.Price&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>ç”Ÿæˆå•†å“å ±è¡¨åŠŸèƒ½ï¼ˆ Eager Executionï¼‰</li></ol><p>åŠŸèƒ½æè¿°ï¼š<br>å¦ä¸€å€‹éœ€æ±‚æ˜¯ç”Ÿæˆå•†å“çš„éŠ·å”®å ±è¡¨ï¼Œä¾‹å¦‚ç¯©é¸å‡ºåƒ¹æ ¼é«˜æ–¼æŸå€‹é–€æª»çš„å•†å“ï¼Œä¸¦å°‡çµæœå­˜å„²ç‚ºå ±è¡¨æ–‡ä»¶æˆ–å‚³éåˆ°å…¶ä»–æ¥­å‹™æ¨¡çµ„é€²è¡Œè™•ç†ã€‚<br>åœ¨é€™ç¨®å ´æ™¯ä¸­ï¼š<br>éœ€æ±‚çš„é‡é»ï¼šæŸ¥è©¢çµæœæ‡‰ä¿æŒç©©å®šï¼Œä¸å—æ•¸æ“šæºå¾ŒçºŒè®Šæ›´å½±éŸ¿ã€‚<br>é©ç”¨è§£æ±ºæ–¹æ¡ˆï¼šé¸æ“‡ã€Œæ€¥åˆ‡åŸ·è¡Œã€ï¼Œå°‡æŸ¥è©¢çµæœå­˜å„²åˆ°é›†åˆä¸­ï¼ˆå¦‚ <code>List&lt;T&gt;</code>ï¼‰ï¼Œé¿å…æŸ¥è©¢é‚è¼¯é‡è¤‡åŸ·è¡Œï¼Œä¸¦ç¢ºä¿å ±è¡¨æ•¸æ“šçš„ç©©å®šæ€§ã€‚</p><ul><li>æ•¸æ“šè®Šæ›´ä¸å¯é æ¸¬ï¼šä¾‹å¦‚ï¼Œå•†å“æ¸…å–®å¯èƒ½æœƒå› ç”¨æˆ¶æ“ä½œï¼ˆæ–°å¢ã€åˆªé™¤ï¼‰æˆ–å¤–éƒ¨ç³»çµ±å½±éŸ¿ï¼ˆåŒæ­¥å¤±æ•—ï¼‰è€Œæ”¹è®Šã€‚</li><li>çµæœéœ€è¦é‡è¤‡ä½¿ç”¨ï¼šç”Ÿæˆå ±è¡¨å¾Œï¼Œæ•¸æ“šå¯èƒ½æœƒè¢«å¤šæ¬¡è¼¸å‡ºæˆ–å‚³éï¼Œå­˜å…¥é›†åˆå¯ä»¥é¿å…å¤šæ¬¡åŸ·è¡ŒæŸ¥è©¢é‚è¼¯ã€‚</li></ul><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> products = <span class="keyword">new</span> List&lt;Product&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Laptop&quot;</span>, Price = <span class="number">150</span> &#125;,</span><br><span class="line">    <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Mouse&quot;</span>, Price = <span class="number">50</span> &#125;,</span><br><span class="line">    <span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Keyboard&quot;</span>, Price = <span class="number">75</span> &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šç¾©ä¸¦åŸ·è¡ŒæŸ¥è©¢</span></span><br><span class="line"><span class="keyword">var</span> reportData = products.Where(p =&gt; p.Price &gt; <span class="number">100</span>).ToList(); </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ“¬å¾ŒçºŒæ–°å¢å•†å“</span></span><br><span class="line">products.Add(<span class="keyword">new</span> Product &#123; Name = <span class="string">&quot;Monitor&quot;</span>, Price = <span class="number">200</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆå ±è¡¨æ™‚ä½¿ç”¨ç·©å­˜çµæœ</span></span><br><span class="line">Console.WriteLine(<span class="string">&quot;\nå ±è¡¨ç¯©é¸çµæœï¼š&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> product <span class="keyword">in</span> reportData)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;product.Name&#125;</span> - $<span class="subst">&#123;product.Price&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>LINQ æä¾›äº†ä¸€ç¨®ç°¡æ½”ã€å¼·å¤§çš„æ–¹å¼ä¾†æŸ¥è©¢å’Œæ“ä½œå„ç¨®è³‡æ–™ä¾†æºã€‚é€éæœ¬ç¯‡æ–‡ç« ï¼Œå­¸ç¿’äº† LINQ çš„åŸºæœ¬èªæ³•ã€æŸ¥è©¢çµæ§‹å’Œå»¶é²åŸ·è¡Œçš„æ¦‚å¿µã€‚åœ¨å¾ŒçºŒçš„æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å°‡æœƒæ·±å…¥æ¢è¨ LINQ çš„é€²éšé‹ç®—å­å’Œæ›´è¤‡é›œçš„æ‡‰ç”¨å ´æ™¯ã€‚</p><p><a href="https://learn.microsoft.com/zh-tw/dotnet/csharp/linq/get-started/introduction-to-linq-queries">C# çš„ LINQ æŸ¥è©¢ç°¡ä»‹</a><br><a href="https://github.com/dotnet/try-samples/blob/main/101-linq-samples/index.md">101 LINQ Samples</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;C# çš„ LINQ (Language Integrated Queryï¼Œèªè¨€æ•´åˆæŸ¥è©¢) æ˜¯ä¸€å€‹éå¸¸å¼·å¤§çš„åŠŸèƒ½ï¼Œå®ƒè®“ä½ å¯ä»¥ä½¿ç”¨é¡ä¼¼ SQL çš„èªæ³•ä¾†æŸ¥è©¢å„ç¨®ä¸åŒçš„è³‡æ–™ä¾†æºã€‚é€™æ„å‘³è‘—ä½ å¯ä»¥ç”¨çµ±ä¸€çš„æ–¹å¼ä¾†è™•ç†è³‡æ–™ï¼Œç„¡è«–è³‡æ–™æ˜¯ä¾†è‡ªé™£åˆ—ã€åˆ—è¡¨ã€è³‡æ–™åº«ã€XML æˆ–å…¶ä»–ä»»ä½•æ”¯æ´ LINQ çš„ä¾†æºã€‚&lt;/p&gt;
&lt;h2 id=&quot;LINQ-çš„å…©ç¨®èªæ³•ï¼š&quot;&gt;&lt;a href=&quot;#LINQ-çš„å…©ç¨®èªæ³•ï¼š&quot; class=&quot;headerlink&quot; title=&quot;LINQ çš„å…©ç¨®èªæ³•ï¼š&quot;&gt;&lt;/a&gt;LINQ çš„å…©ç¨®èªæ³•ï¼š&lt;/h2&gt;&lt;p&gt;LINQ æœ‰å…©ç¨®ä¸»è¦çš„èªæ³•å½¢å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŸ¥è©¢èªæ³• (Query Syntax)ï¼š çœ‹èµ·ä¾†å¾ˆåƒ SQL èªæ³•ï¼Œä½¿ç”¨ fromã€whereã€select ç­‰é—œéµå­—ã€‚é€™ç¨®èªæ³•æ¯”è¼ƒæ˜“è®€ï¼Œå°¤å…¶æ˜¯åœ¨è™•ç†è¤‡é›œçš„æŸ¥è©¢æ™‚ã€‚&lt;/li&gt;
&lt;li&gt;æ–¹æ³•èªæ³• (Method Syntax)ï¼š ä½¿ç”¨æ“´å……æ–¹æ³• (Extension Methods) ä¾†è¡¨ç¤ºæŸ¥è©¢é‹ç®—å­ã€‚é€™ç¨®èªæ³•æ›´ç°¡æ½”ï¼Œä¹Ÿæ›´éˆæ´»ã€‚ç°¡å–®çš„æŸ¥è©¢æˆ–éœ€è¦éˆå¼æ“ä½œæ™‚ï¼Œé€šå¸¸ä½¿ç”¨æ–¹æ³•èªæ³•æ›´ç‚ºæ–¹ä¾¿ã€‚&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="dotnet" scheme="https://eva813.github.io/categories/dotnet/"/>
    
    
    <category term="dotnet" scheme="https://eva813.github.io/tags/dotnet/"/>
    
  </entry>
  
  <entry>
    <title>C# - class å»ºç«‹èˆ‡ä½¿ç”¨</title>
    <link href="https://eva813.github.io/2025/01/15/Net-learning-2/"/>
    <id>https://eva813.github.io/2025/01/15/Net-learning-2/</id>
    <published>2025-01-15T12:04:35.000Z</published>
    <updated>2025-01-18T11:27:18.828Z</updated>
    
    <content type="html"><![CDATA[<p>class æ˜¯ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ (OOP) èªè¨€çš„æ ¸å¿ƒåŠŸèƒ½ã€‚å®ƒé€šéé‚è¼¯æ€§åœ°çµ„ç¹”æ–¹æ³•å’Œå±¬æ€§ï¼Œä¾†è¡¨ç¤ºä¸¦å°è£ç‰¹å®šçš„å•é¡Œæ¦‚å¿µã€‚</p><h2 id="å»ºç«‹-class-èˆ‡-instance"><a href="#å»ºç«‹-class-èˆ‡-instance" class="headerlink" title="å»ºç«‹ class èˆ‡ instance"></a>å»ºç«‹ class èˆ‡ instance</h2><p>å‡è¨­è¦å»ºç«‹ä¸€ person çš„ class </p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">Person person = <span class="keyword">new</span> Person();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="æ–°å¢-Method-èˆ‡-property"><a href="#æ–°å¢-Method-èˆ‡-property" class="headerlink" title="æ–°å¢ Method èˆ‡ property"></a>æ–°å¢ Method èˆ‡ property</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> FirstName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> LastName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">GetFullName</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;John Smith&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å»ºç«‹ Person é¡åˆ¥çš„å¯¦ä¾‹</span></span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        <span class="comment">// å‘¼å«æ–¹æ³•</span></span><br><span class="line">        animal.GetFullName();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å±¬æ€§-Properties-çš„-get-å’Œ-set-æ¦‚å¿µ"><a href="#å±¬æ€§-Properties-çš„-get-å’Œ-set-æ¦‚å¿µ" class="headerlink" title="å±¬æ€§(Properties)çš„ get å’Œ set æ¦‚å¿µ"></a>å±¬æ€§(Properties)çš„ get å’Œ set æ¦‚å¿µ</h3><ol><li>get (è®€å–)</li></ol><ul><li>å…è¨±è®€å–å±¬æ€§çš„å€¼</li><li>ç•¶ç¨‹å¼ç¢¼å­˜å–å±¬æ€§å€¼æ™‚ï¼Œå°±æœƒèª¿ç”¨ getã€‚</li><li>ä¾‹å¦‚ï¼šç•¶æˆ‘å€‘å¯« <code>string sound = animal.Sound;</code> æ™‚ï¼Œå°±æœƒèª¿ç”¨ Sound å±¬æ€§çš„ get å­˜å–å™¨ã€‚</li><li>get å­˜å–å™¨å¿…é ˆè¿”å›èˆ‡å±¬æ€§ç›¸åŒé¡å‹çš„å€¼</li></ul><ol start="2"><li>set (å¯«å…¥)</li></ol><ul><li>å…è¨±è³¦å€¼çµ¦å±¬æ€§çš„å€¼ã€‚</li><li>ç•¶ç¨‹å¼ç¢¼è³¦å€¼çµ¦å±¬æ€§æ™‚ï¼Œå°±æœƒèª¿ç”¨ set å­˜å–å™¨ã€‚</li><li>ä¾‹å¦‚ï¼šç•¶æˆ‘å€‘å¯« <code>animal.Sound = &quot;Hiii&quot;;</code> æ™‚ï¼Œå°±æœƒèª¿ç”¨ Sound å±¬æ€§çš„ setã€‚</li><li>set æœ‰ä¸€å€‹éš±å«çš„ value åƒæ•¸ï¼Œå®ƒä»£è¡¨è³¦äºˆå±¬æ€§çš„æ–°å€¼ã€‚åœ¨ç¯„ä¾‹ <code>set &#123; sound = value; &#125;</code> ä¸­ï¼Œ<code>value</code> å°±æ˜¯ <code>&quot;Hiii&quot;</code>ã€‚</li></ul><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 1. è‡ªå‹•å¯¦ä½œå±¬æ€§å¯«æ³•</span></span><br><span class="line">    <span class="comment">// é©åˆç”¨åœ¨å–®ç´”éœ€è¦å­˜å–è³‡æ–™,ä¸éœ€è¦é¡å¤–é‚è¼¯çš„æƒ…æ³</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> FirstName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. å®Œæ•´å¯¦ä½œå±¬æ€§å¯«æ³•</span></span><br><span class="line">    <span class="comment">// å…è¨±æˆ‘å€‘å®Œå…¨æ§åˆ¶å±¬æ€§çš„è®€å–å’Œå¯«å…¥é‚è¼¯ã€‚é€éæ˜ç¢ºåœ°å®šç¾© get å’Œ setï¼Œå¯ä»¥åœ¨å­˜å–å±¬æ€§æ™‚åŸ·è¡Œé¡å¤–çš„ç¨‹å¼ç¢¼ï¼Œä¾‹å¦‚é©—è­‰ã€è½‰æ›ã€é€šçŸ¥ç­‰ã€‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> firstName; <span class="comment">// èƒŒæ™¯æ¬„ä½</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> FirstName   <span class="comment">// å±¬æ€§</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> firstName; &#125;<span class="comment">// è®€å–å€¼</span></span><br><span class="line">        <span class="keyword">set</span> &#123; firstName = <span class="keyword">value</span>; &#125;<span class="comment">// è¨­å®šå€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ–¹å¼ï¼š</span></span><br><span class="line">Person person = <span class="keyword">new</span> Person();</span><br><span class="line">person.FirstName = <span class="string">&quot;Hiii&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> nameData = person.FirstName;<span class="comment">// èª¿ç”¨ get</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åœ¨-get-æˆ–-set-ä¸­åŠ å…¥é¡å¤–é‚è¼¯"><a href="#åœ¨-get-æˆ–-set-ä¸­åŠ å…¥é¡å¤–é‚è¼¯" class="headerlink" title="åœ¨ get æˆ– set ä¸­åŠ å…¥é¡å¤–é‚è¼¯"></a>åœ¨ get æˆ– set ä¸­åŠ å…¥é¡å¤–é‚è¼¯</h3><p>å¯¦ç¾è³‡æ–™é©—è­‰ã€æ ¼å¼è½‰æ›ã€é€šçŸ¥å…¶ä»–ç‰©ä»¶ç­‰åŠŸèƒ½ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ProductExample</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Product</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç§æœ‰å­—æ®µ</span></span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">string</span> name;</span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">decimal</span> price;</span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> stock;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å±¬æ€§ - å•†å“åç¨±</span></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> Name</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line">            <span class="keyword">set</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">string</span>.IsNullOrWhiteSpace(<span class="keyword">value</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentException(<span class="string">&quot;Product name cannot be null or empty.&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                name = <span class="keyword">value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å±¬æ€§ - åƒ¹æ ¼</span></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">decimal</span> Price</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> price; &#125;</span><br><span class="line">            <span class="keyword">set</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">value</span> &lt; <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentException(<span class="string">&quot;Price cannot be negative.&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                price = <span class="keyword">value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å±¬æ€§ - åº«å­˜æ•¸é‡</span></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">int</span> Stock</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> stock; &#125;</span><br><span class="line">            <span class="keyword">set</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">value</span> &lt; <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentException(<span class="string">&quot;Stock cannot be negative.&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                stock = <span class="keyword">value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åªè®€å±¬æ€§ - ç¸½åƒ¹ (è¨ˆç®—å±¬æ€§)</span></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">decimal</span> TotalValue</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">get</span> &#123; <span class="keyword">return</span> price * stock; &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ–¹æ³• - æ›´æ–°åº«å­˜</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">UpdateStock</span>(<span class="params"><span class="built_in">int</span> quantity</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (quantity &lt; <span class="number">0</span> &amp;&amp; Math.Abs(quantity) &gt; stock)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="string">&quot;Cannot reduce stock below zero.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            stock += quantity;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// å»ºç«‹ Product ç‰©ä»¶</span></span><br><span class="line">                Product product = <span class="keyword">new</span> Product</span><br><span class="line">                &#123;</span><br><span class="line">                    Name = <span class="string">&quot;Laptop&quot;</span>,</span><br><span class="line">                    Price = <span class="number">1200.50</span>m,</span><br><span class="line">                    Stock = <span class="number">10</span></span><br><span class="line">                &#125;;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// é¡¯ç¤ºåˆå§‹è³‡æ–™</span></span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;Product: <span class="subst">&#123;product.Name&#125;</span>&quot;</span>);</span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;Price: <span class="subst">&#123;product.Price:C&#125;</span>&quot;</span>);</span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;Stock: <span class="subst">&#123;product.Stock&#125;</span>&quot;</span>);</span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;Total Value: <span class="subst">&#123;product.TotalValue:C&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ›´æ–°åº«å­˜</span></span><br><span class="line">                product.UpdateStock(<span class="number">-3</span>);</span><br><span class="line">                Console.WriteLine(<span class="string">&quot;\nAfter selling 3 units:&quot;</span>);</span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;Stock: <span class="subst">&#123;product.Stock&#125;</span>&quot;</span>);</span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;Total Value: <span class="subst">&#123;product.TotalValue:C&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å˜—è©¦è¨­å®šç„¡æ•ˆåƒ¹æ ¼</span></span><br><span class="line">                product.Price = <span class="number">-100</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;\nError: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="constructor-å»ºæ§‹å­"><a href="#constructor-å»ºæ§‹å­" class="headerlink" title="constructor å»ºæ§‹å­"></a>constructor å»ºæ§‹å­</h2><p>åœ¨å»ºç«‹é¡åˆ¥çš„æ–°å¯¦ä¾‹ (instance) æ™‚è‡ªå‹•åŸ·è¡Œã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯åˆå§‹åŒ–ç‰©ä»¶çš„ç‹€æ…‹ï¼Œç¢ºä¿ç‰©ä»¶åœ¨å»ºç«‹å¾Œç«‹å³è™•æ–¼å¯ç”¨ç‹€æ…‹ã€‚<br> <strong>å»ºæ§‹å­çš„å®£å‘Šï¼š</strong><br>    - <strong>åç¨±ï¼š</strong> <code>Person</code>ï¼ˆå¿…é ˆèˆ‡é¡åˆ¥åç¨±ç›¸åŒï¼‰ã€‚<br>    - <strong>é—œéµå­—ï¼š</strong> ä½¿ç”¨ <code>public</code> è®“å»ºæ§‹å­å¯ä»¥å¾å¤–éƒ¨è¨ªå•ã€‚<br>    - <strong>åƒæ•¸ï¼š</strong> åœ¨å°æ‹¬è™Ÿå…§å®šç¾©å»ºæ§‹å­æ‰€éœ€çš„åƒæ•¸ï¼ˆæ­¤ä¾‹ä¸­ç‚º <code>string firstName</code> å’Œ <code>string lastName</code>ï¼‰ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å±¬æ€§å®šç¾©</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> FirstName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> LastName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºæ§‹å­å®šç¾©</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> firstName, <span class="built_in">string</span> lastName</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å°‡å‚³å…¥çš„åƒæ•¸å€¼è³¦å€¼çµ¦å±¬æ€§</span></span><br><span class="line">        FirstName = firstName;</span><br><span class="line">        LastName = lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–¹æ³•å®šç¾©</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Introduce</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Hi, my name is <span class="subst">&#123;FirstName&#125;</span> <span class="subst">&#123;LastName&#125;</span>.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨å»ºæ§‹å­å‰µå»º Person é¡åˆ¥çš„å¯¦ä¾‹</span></span><br><span class="line">        Person person = <span class="keyword">new</span> Person(<span class="string">&quot;John&quot;</span>, <span class="string">&quot;Doe&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘¼å«æ–¹æ³•</span></span><br><span class="line">        person.Introduce();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å»ºæ§‹å­å¤šè¼‰-Constructor-Overloading"><a href="#å»ºæ§‹å­å¤šè¼‰-Constructor-Overloading" class="headerlink" title="å»ºæ§‹å­å¤šè¼‰ (Constructor Overloading)"></a>å»ºæ§‹å­å¤šè¼‰ (Constructor Overloading)</h3><p>é€™äº›å»ºæ§‹å­å¯ä»¥æ¥å—ä¸åŒæ•¸é‡çš„åƒæ•¸æˆ–ä¸åŒé¡å‹çš„åƒæ•¸ï¼Œä»¥æä¾›ä¸åŒçš„åˆå§‹åŒ–æ–¹å¼ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœé¡åˆ¥æ²’æœ‰æ˜ç¢ºå®šç¾©ä»»ä½•å»ºæ§‹å­ï¼ŒC# ç·¨è­¯å™¨æœƒè‡ªå‹•ç”¢ç”Ÿä¸€å€‹é è¨­å»ºæ§‹å­ (Default Constructor) æˆ–ç„¡åƒæ•¸å»ºæ§‹å­ (Parameterless Constructor)ã€‚ é€™å€‹é è¨­å»ºæ§‹å­ä¸æ¥å—ä»»ä½•åƒæ•¸ï¼Œä¸¦ä¸”æœƒå°‡ç‰©ä»¶çš„æ¬„ä½åˆå§‹åŒ–ç‚ºå…¶é è¨­å€¼ (ä¾‹å¦‚ï¼Œint ç‚º 0ï¼Œstring ç‚º null)ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Name &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºæ§‹å­ 1ï¼šæ¥å—å§“åå’Œå¹´é½¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">int</span> age</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Name = name;</span><br><span class="line">        Age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºæ§‹å­ 2ï¼šåªæ¥å—å§“å (ä½¿ç”¨å»ºæ§‹å­éˆçµå‘¼å«å»ºæ§‹å­ 1)</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="title">Person</span>(<span class="params"><span class="built_in">string</span> personName</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Name = personName;</span><br><span class="line">        Age = <span class="number">0</span>; <span class="comment">// æ˜ç¢ºè¨­å®šå¹´é½¡ç‚º 0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºæ§‹å­ 3ï¼šç„¡åƒæ•¸å»ºæ§‹å­</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Name = <span class="string">&quot;Unknown&quot;</span>;</span><br><span class="line">        Age = <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Person person1 = <span class="keyword">new</span> Person(<span class="string">&quot;John&quot;</span>, <span class="number">30</span>); <span class="comment">// ä½¿ç”¨å»ºæ§‹å­ 1</span></span><br><span class="line">        Person person2 = <span class="keyword">new</span> Person(<span class="string">&quot;Jane&quot;</span>);    <span class="comment">// ä½¿ç”¨å»ºæ§‹å­ 2</span></span><br><span class="line">        Person person3 = <span class="keyword">new</span> Person();        <span class="comment">// ä½¿ç”¨å»ºæ§‹å­ 3</span></span><br><span class="line"></span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;person1.Name&#125;</span>, <span class="subst">&#123;person1.Age&#125;</span>&quot;</span>); <span class="comment">// è¼¸å‡ºï¼šJohn, 30</span></span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;person2.Name&#125;</span>, <span class="subst">&#123;person2.Age&#125;</span>&quot;</span>); <span class="comment">// è¼¸å‡ºï¼šJane, 0</span></span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;<span class="subst">&#123;person3.Name&#125;</span>, <span class="subst">&#123;person3.Age&#125;</span>&quot;</span>); <span class="comment">// è¼¸å‡ºï¼šUnknown, -1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>èªªæ˜ï¼š<br>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼ŒPerson é¡åˆ¥å®šç¾©äº†ä¸‰å€‹å»ºæ§‹å­ï¼šä¸€å€‹æ¥å—å§“åå’Œå¹´é½¡ï¼Œä¸€å€‹åªæ¥å—å§“åï¼Œé‚„æœ‰ä¸€å€‹ç„¡åƒæ•¸å»ºæ§‹å­ã€‚</p><ul><li>æ³¨æ„ï¼ŒConstructor Overloading æ˜¯æ ¹æ“šåƒæ•¸çš„ æ•¸é‡ å’Œ é¡å‹ ä¾†å€åˆ†çš„ï¼Œè€Œä¸æ˜¯åƒæ•¸åç¨±ã€‚å› æ­¤ï¼Œè‹¥å»ºæ§‹å­å…·æœ‰ç›¸åŒçš„åƒæ•¸é¡å‹å’Œæ•¸é‡ï¼Œç·¨è­¯å™¨æœƒèªç‚ºå®ƒå€‘æ˜¯ç›¸åŒçš„ï¼Œé€™å°±æœƒå°è‡´ç·¨è­¯éŒ¯èª¤ï¼Œå› ç‚ºå®ƒç„¡æ³•é¸æ“‡å…¶ä¸­ä¸€å€‹æ§‹é€ å‡½æ•¸ä¾†èª¿ç”¨ã€‚</li></ul><p>åƒè€ƒè³‡æ–™ï¼š<br><a href="https://dotnetcademy.net/Learn/2036/Pages/13">dotnetcademy</a><br><a href="https://learn.microsoft.com/zh-tw/shows/c-fundamentals-for-absolute-beginners/17">é©ç”¨æ–¼åˆå­¸è€…çš„ C# åŸºç¤çŸ¥è­˜</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;class æ˜¯ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ (OOP) èªè¨€çš„æ ¸å¿ƒåŠŸèƒ½ã€‚å®ƒé€šéé‚è¼¯æ€§åœ°çµ„ç¹”æ–¹æ³•å’Œå±¬æ€§ï¼Œä¾†è¡¨ç¤ºä¸¦å°è£ç‰¹å®šçš„å•é¡Œæ¦‚å¿µã€‚&lt;/p&gt;
&lt;h2 id=&quot;å»ºç«‹-class-èˆ‡-instance&quot;&gt;&lt;a href=&quot;#å»ºç«‹-class-èˆ‡-instance&quot; class=&quot;headerlink&quot; title=&quot;å»ºç«‹ class èˆ‡ instance&quot;&gt;&lt;/a&gt;å»ºç«‹ class èˆ‡ instance&lt;/h2&gt;&lt;p&gt;å‡è¨­è¦å»ºç«‹ä¸€ person çš„ class &lt;/p&gt;
&lt;figure class=&quot;highlight csharp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Person&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Program&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Main&lt;/span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		Person person = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Person();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="dotnet" scheme="https://eva813.github.io/categories/dotnet/"/>
    
    
    <category term="dotnet" scheme="https://eva813.github.io/tags/dotnet/"/>
    
  </entry>
  
</feed>
