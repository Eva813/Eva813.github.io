<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>JS實作- expense tracker 記帳簿</title><meta name="description" content="Front-end Engineer"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="完成後的成品
觀察須製作的功能
重新整理網頁後，保有過去執行的狀態：localstorage
實作內有使用:
localstorage:setItem,getItem
jason.stringfy/jason.parse






在new transation輸入資料後，會將資料傳入history中
add transation之後，頁面不會刷新(spa)(e.preventdefault)


摸到history中的項目，會出現刪除符號，點擊後刪除



輸入的金額，會顯示於上方income、expense，並且計算總額
有正負值
計算收入、花費




呈現完整語法$(document).ready(function () {
  //預設值的設置，取得存在本地的資料或是空陣列
  var tran.."><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Let's Code" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Eva's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">JS實作- expense tracker 記帳簿</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#觀察須製作的功能"><span class="toc-text">觀察須製作的功能</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#呈現完整語法"><span class="toc-text">呈現完整語法</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#各項目拆解："><span class="toc-text">各項目拆解：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#add-transations按下去之後，頁面不刷新，直接將資料傳入紀錄中"><span class="toc-text">add transations按下去之後，頁面不刷新，直接將資料傳入紀錄中</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#讓transation輸入後顯示"><span class="toc-text">讓transation輸入後顯示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#從表格中取得值"><span class="toc-text">從表格中取得值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#localstorage-執行"><span class="toc-text">localstorage 執行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#利用forEach、splice-刪除陣列內的資料"><span class="toc-text">利用forEach、splice()刪除陣列內的資料</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判斷輸入的數字大小，並給予class"><span class="toc-text">判斷輸入的數字大小，並給予class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#數值的更新"><span class="toc-text">數值的更新</span></a></li></ol></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/JS"><i class="tag post-item-tag">JS</i></a><a href="/tags/append"><i class="tag post-item-tag">append</i></a><a href="/tags/local%20storage"><i class="tag post-item-tag">local storage</i></a><a href="/tags/forEach"><i class="tag post-item-tag">forEach</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">JS實作- expense tracker 記帳簿</h1><time class="has-text-grey" datetime="2021-01-10T02:08:01.000Z">2021-01-10</time><article class="mt-2 post-content"><p>完成後的<a href="https://eva813.github.io/Eva_portfolio/expenseTracker/expenseTracker.html" target="_blank" rel="noopener">成品</a><br><img src="https://i.imgur.com/VSjpRSa.png" alt=""></p>
<h1 id="觀察須製作的功能"><a href="#觀察須製作的功能" class="headerlink" title="觀察須製作的功能"></a>觀察須製作的功能</h1><ol>
<li>重新整理網頁後，保有過去執行的狀態：localstorage<ul>
<li>實作內有使用:</li>
<li>localstorage:setItem,getItem</li>
<li>jason.stringfy/jason.parse</li>
</ul>
</li>
</ol>
<p><img src="https://i.imgur.com/abUVHGM.png" alt=""></p>
<p><img src="https://i.imgur.com/c53IDMj.png" alt=""></p>
<ol start="2">
<li>在new transation輸入資料後，會將資料傳入history中<ul>
<li>add transation之後，頁面不會刷新(spa)(e.preventdefault)</li>
</ul>
</li>
<li>摸到history中的項目，會出現刪除符號，點擊後刪除</li>
</ol>
<p><img src="https://i.imgur.com/X06EsA4.png" alt=""></p>
<ol start="4">
<li>輸入的金額，會顯示於上方income、expense，並且計算總額<ul>
<li>有正負值</li>
<li>計算收入、花費<br><img src="https://i.imgur.com/uofQVuf.png" alt=""></li>
</ul>
</li>
</ol>
<hr>
<h1 id="呈現完整語法"><a href="#呈現完整語法" class="headerlink" title="呈現完整語法"></a>呈現完整語法</h1><pre><code class="javascript">$(document).ready(function () {
  //預設值的設置，取得存在本地的資料或是空陣列
  var transactions = JSON.parse(localStorage.getItem(&#39;Transactions&#39;)) || [];

  //陣列初始
  if (transactions.length &gt; 0) {
    initHistory(transactions);
  }
  //點擊按鈕的事件
  $(&#39;.btn&#39;).click(function (e) {
    e.preventDefault();
    //console.log(&#39;click&#39;);
    //取得表格中的值
    const text_val = $(&#39;#text&#39;).val();
    const amount_val = $(&#39;#amount&#39;).val();
    let id = generateID();

    addTransactions(id, text_val, amount_val, transactions);

    //推入陣列
    transactions.push({
      id: id,
      name: text_val,
      amount: amount_val
    })


    localStorage.setItem(&#39;Transactions&#39;, JSON.stringify(transactions));


  })
  updateValue(transactions);

});


//在list中插入
function addTransactions(id, name, amount, transactions) {
  console.log(&#39;amount:&#39;, amount);

  const Transaction_str = $(&#39;&lt;li&gt;&lt;/li&gt;&#39;).appendTo(&#39;#list&#39;);

  Transaction_str.addClass(amount &lt; 0 ? &#39;minus&#39; : &#39;plus&#39;);
  Transaction_str.html(`${name}&lt;span&gt; ${amount}&lt;/span&gt;&lt;button class=&quot;delete-btn&quot;  data-id=&quot;${id}&quot;&gt;x&lt;/button&gt;`);
  $(&#39;#list&#39;).append(Transaction_str);


  $(&#39;#text&#39;).val(&#39;&#39;);
  $(&#39;#amount&#39;).val(&#39;&#39;);

  //刪除鈕 要交易交出後再綁事件
  $(&#39;.delete-btn&#39;).last().click(function () {
    $(this).parent().remove();
    let id = $(this).data(&#39;id&#39;);
    //console.log(id);
    deleteFromLocalstorage(transactions, id); //要記得傳入id

  });

}
//從localstorage刪除
//要記得在參數放入id
function deleteFromLocalstorage(transactions, id) {
  transactions.forEach(function (item, index, arr) {
    //console.log(&#39;item&#39;, item);
    //console.log(&#39;index&#39;, index);
    //console.log(&#39;arr&#39;, arr);
    if (item.id === id) {
      arr.splice(index, 1);
    }
  });
  //迴圈刪除後，要儲存到localStorage才有確實刪去
  localStorage.setItem(&#39;Transactions&#39;, JSON.stringify(transactions));
}


// Generate random ID
function generateID() {
  return Math.floor(Math.random() * 100000000);
}


//數值更新計算
function updateValue(transactions) {
  const amounts_arr = transactions.map(function (transaction) {
    return transaction.amount
  })

  console.log(amounts_arr);

  //計算加總 
  var total = 0;
  $.each(amounts_arr, function () { total += parseFloat((this)) || 0; });
  //傳回YOUR BALANCE
  $(&#39;#balance&#39;).text(`$${total}`);
  console.log(total);


  //*************************** */
  //從陣列找出&gt;0的值，放置income
  //console.log(amounts)
  var income = amounts_arr.filter(
    function (item) {
      return item &gt; 0
    }
  )
  console.log(income);

  var totalIncome = 0;
  $.each(income, function () { totalIncome += parseFloat((this)) || 0; });

  console.log(totalIncome); //回傳220
  //傳回到income
  $(&#39;#money-plus&#39;).text(`$${totalIncome}`);
  //***************************** */
  //從陣列找出&lt;0的值，放置income
  var expense = amounts_arr.filter(
    function (item) {
      return item &lt; 0
    }
  )
  console.log(expense);

  var totalExpense = 0;
  $.each(expense, function () { totalExpense += parseFloat((this)) || 0; });

  console.log(totalExpense);
  //傳回到expense
  $(&#39;#money-minus&#39;).text(`$${totalExpense}`)


}

//init
function initHistory(transactions) {
  transactions.forEach(transaction =&gt; {
    addTransactions(transaction.id, transaction.name, transaction.amount, transactions);
  });
  updateValue(transactions);

}

</code></pre>
<h1 id="各項目拆解："><a href="#各項目拆解：" class="headerlink" title="各項目拆解："></a>各項目拆解：</h1><h2 id="add-transations按下去之後，頁面不刷新，直接將資料傳入紀錄中"><a href="#add-transations按下去之後，頁面不刷新，直接將資料傳入紀錄中" class="headerlink" title="add transations按下去之後，頁面不刷新，直接將資料傳入紀錄中"></a><code>add transations</code>按下去之後，頁面不刷新，直接將資料傳入紀錄中</h2><pre><code class="javascript">$(document).ready(function () {
  $(&#39;.btn&#39;).click(function () {
    console.log(&#39;click&#39;);
  })
});
//點擊後，有印出click，但很快的刷新頁面</code></pre>
<ul>
<li>加入<code>e.preventDefault();</code> 用來阻止預設動作的發生</li>
</ul>
<p><img src="https://i.imgur.com/4y0J1vA.png" alt=""></p>
<h2 id="讓transation輸入後顯示"><a href="#讓transation輸入後顯示" class="headerlink" title="讓transation輸入後顯示"></a>讓transation輸入後顯示</h2><pre><code class="javascript">$(document).ready(function () {
  $(&#39;.btn&#39;).click(function (e) {
    e.preventDefault();
    console.log(&#39;click&#39;);
    addTransactions(&#39;cash&#39;, &#39;200&#39;);
  })
});


function addTransactions(name, amount) {
  var Transaction_str = `&lt;li class=&#39;plus&#39; &gt;${name}&lt;span&gt; ${amount}&lt;/span&gt;&lt;button class=&quot;delete-btn&quot;&gt;x&lt;/button&gt;&lt;/li&gt;`
  $(&#39;#list&#39;).append(Transaction_str);
}

//</code></pre>
<p><img src="https://i.imgur.com/Vh9uPvJ.png" alt=""></p>
<ul>
<li>提交之後清空<ul>
<li>選擇該輸入框，並利用<code>val()</code>，使內部的值清空</li>
</ul>
</li>
</ul>
<pre><code class="javascript"> $(&#39;#text&#39;).val(&#39;&#39;);
  $(&#39;#amount&#39;).val(&#39;&#39;);
</code></pre>
<p><img src="https://i.imgur.com/uKnX7fd.png" alt=""></p>
<h2 id="從表格中取得值"><a href="#從表格中取得值" class="headerlink" title="從表格中取得值"></a>從表格中取得值</h2><ul>
<li><p>製作按鈕的點擊事件，取得表格中的值</p>
</li>
<li><p>將值傳入函式的參數<code>addTransactions(text_val, amount_val);</code></p>
<pre><code class="javascript">$(document).ready(function () {
$(&#39;.btn&#39;).click(function (e) {
  e.preventDefault();
  console.log(&#39;click&#39;);

  //取得表格中的值
  const text_val = $(&#39;#text&#39;).val();
  const amount_val = $(&#39;#amount&#39;).val();
  addTransactions(text_val, amount_val);
})
</code></pre>
</li>
</ul>
<p>});</p>
<pre><code>
## 製作刪除紐
* 原本的撰寫方式，為選到最後一個刪除鈕，並點擊加以刪除
* 此方式造成，無法確實刪除資料

```javascript
$(&#39;.delete-btn&#39;).last().click(function () {
    console.log(&#39;del&#39;);
  })
}</code></pre><p><img src="https://i.imgur.com/v7n8t3L.png" alt=""></p>
<ul>
<li><p>修改方式，只能綁定一筆transatin或是綁定最後一筆<br><img src="https://i.imgur.com/lhqdwYA.png" alt=""></p>
</li>
<li><p>查看若實現點擊後刪除，是會刪除什麼？</p>
<pre><code class="javascript">$(&#39;.delete-btn&#39;).last().click(function () {
  console.log(this);
})
}</code></pre>
<p><img src="https://i.imgur.com/9dYre8g.png" alt=""></p>
</li>
<li><p>要刪除的是整筆資料，所以要去尋找他鄰近的元素</p>
<pre><code class="javascript">$(&#39;.delete-btn&#39;).last().click(function () {
  $(this).parent().remove();
})</code></pre>
</li>
</ul>
<h2 id="localstorage-執行"><a href="#localstorage-執行" class="headerlink" title="localstorage 執行"></a>localstorage 執行</h2><p>筆記補充：<a href="https://eva813.github.io/2021/01/10/localstorage/" target="_blank" rel="noopener">LocalStorage介紹</a></p>
<p>從此實作，可以看到它是一個陣列，裡面是物件</p>
<ul>
<li>設置一個空陣列</li>
<li>並將物件push進去</li>
</ul>
<pre><code class="javascript">//預設值的設置，取得存在本地的資料或是空陣列
  var transactions = JSON.parse(localStorage.getItem(&#39;Transactions&#39;)) || [];

   //推入陣列
    transactions.push({
      name: text_val,
      amount: amount_val
    })
    localStorage.setItem(&#39;Transactions&#39;, JSON.stringify(transactions));
</code></pre>
<p><img src="https://i.imgur.com/HC2XCpT.png" alt=""></p>
<p><img src="https://i.imgur.com/0b4mWW6.png" alt=""></p>
<ul>
<li>增加初始function<pre><code class="javascript">//init
function initHistory(transactions) {
transactions.forEach(transaction =&gt; {
  addTransactions(transaction.name, transaction.amount);
});
</code></pre>
</li>
</ul>
<p>}</p>
<p>//將此函式放於 $(document).ready()之中</p>
<p>//陣列初始<br>  if (transactions.length &gt; 0) {<br>    initHistory(transactions);<br>  }</p>
<pre><code>
![](https://i.imgur.com/dH3nJ6K.png)

## 將transation刪除後，並沒有完全從localstorage刪除
運用id來刪除
* 從此段落：[localstorage 執行](#localstorage-執行)，圖片中的存取陣列可以看到，沒有設置id

* id是在addTransactions使用
```javascript
// Generate random ID
function generateID() {
  return Math.floor(Math.random() * 100000000);
}

//floor：無條件捨去
//ceil：無條件進位
</code></pre><ul>
<li><p>在創造的陣列中\物件，都加入id</p>
<pre><code class="javascript"> const id = generateID();
  addTransactions(id, text_val, amount_val);

  //推入陣列
  transactions.push({
    id: id,
    name: text_val,
    amount: amount_val
  })
</code></pre>
</li>
</ul>
<pre><code>* 在addTransactions的函式中也要加入id
```javascript
function addTransactions(id, name, amount) {

  console.log(id, name, amount);}
</code></pre><p><img src="https://i.imgur.com/sMtoogJ.png" alt=""></p>
<ul>
<li>在button加入data-id</li>
</ul>
<p>和資料有關的時候：data-原來欄位名稱</p>
<pre><code class="javascript">const Transaction_str = `&lt;li class=&#39;plus&#39; &gt;${name}&lt;span&gt; ${amount}&lt;/span&gt;&lt;button class=&quot;delete-btn&quot;  data-id=&quot;${id}&quot;&gt;x&lt;/button&gt;&lt;/li&gt;`</code></pre>
<p><img src="https://i.imgur.com/cmamimU.png" alt=""></p>
<p><img src="https://i.imgur.com/v8TQspA.png" alt=""></p>
<ul>
<li><p>確定點擊刪除鈕的時後，是有抓到該id</p>
<pre><code class="javascript">
$(&#39;.delete-btn&#39;).last().click(function () {
  $(this).parent().remove();
  let id = $(this).data(&#39;id&#39;);
  console.log(id);
})</code></pre>
</li>
<li><p><code>let id = $(this).data(); 查看id時</code> 取得的是物件<br><img src="https://i.imgur.com/BeBkXAN.png" alt=""></p>
</li>
<li><p>應改為<br><img src="https://i.imgur.com/snvF7AX.png" alt=""></p>
</li>
</ul>
<p>此時還沒有真正刪除id，只是確定有抓到id :point_up_2: </p>
<p>jquery <code>data()</code>： 自定義屬性 (data attributes)，讓我們可以任意讀寫資料在元素上，而且不會影響頁面的 layout<br><a href="https://www.fooish.com/jquery/data.html" target="_blank" rel="noopener">jQuery Data</a></p>
<ul>
<li><h4 id="利用forEach、splice-刪除陣列內的資料"><a href="#利用forEach、splice-刪除陣列內的資料" class="headerlink" title="利用forEach、splice()刪除陣列內的資料"></a>利用forEach、splice()刪除陣列內的資料</h4><pre><code class="javascript">function deleteFromLocalstorage(transactions, id) {
transactions.forEach(function (item, index, arr) {
  //console.log(&#39;item&#39;, item);
  //console.log(&#39;index&#39;, index);
  //console.log(&#39;arr&#39;, arr);
  if (item.id === id) {
    arr.splice(index, 1);
  }
});
//迴圈刪除後，要儲存到localStorage才有確實刪去
localStorage.setItem(&#39;Transactions&#39;, JSON.stringify(transactions));
}</code></pre>
</li>
</ul>
<ul>
<li>查看迴圈的資料<br><img src="https://i.imgur.com/FexS5lt.png" alt=""></li>
</ul>
<ul>
<li>確實刪除存在localstorage的資料<pre><code class="javascript">localStorage.setItem(&#39;Transactions&#39;, JSON.stringify(transactions));</code></pre>
</li>
</ul>
<h3 id="判斷輸入的數字大小，並給予class"><a href="#判斷輸入的數字大小，並給予class" class="headerlink" title="判斷輸入的數字大小，並給予class"></a>判斷輸入的數字大小，並給予class</h3><ul>
<li>放在addTransactions()函式之中</li>
</ul>
<pre><code class="javascript">const Transaction_str = $(&#39;&lt;li&gt;&lt;/li&gt;&#39;).appendTo(&#39;#list&#39;);

  Transaction_str.addClass(amount &lt; 0 ? &#39;minus&#39; : &#39;plus&#39;);
  Transaction_str.html(`${name}&lt;span&gt; ${amount}&lt;/span&gt;&lt;button class=&quot;delete-btn&quot;  data-id=&quot;${id}&quot;&gt;x&lt;/button&gt;`);
  $(&#39;#list&#39;).append(Transaction_str);
</code></pre>
<p><img src="https://i.imgur.com/NYXCDtS.png" alt=""></p>
<h3 id="數值的更新"><a href="#數值的更新" class="headerlink" title="數值的更新"></a>數值的更新</h3><p><img src="https://i.imgur.com/EdCN1cd.png" alt=""></p>
<pre><code class="javascript">function updateValue(transactions) {
  const amounts_arr = transactions.map(function (transaction) {
    return transaction.amount
  })

  console.log(amounts_arr);

  //計算加總 
  var total = 0;
  $.each(amounts_arr, function () { total += parseFloat((this)) || 0; });
  //傳回YOUR BALANCE
  $(&#39;#balance&#39;).text(`$${total}`);
  console.log(total);


  //*************************** */
  //從陣列找出&gt;0的值，放置income
  //console.log(amounts)
  var income = amounts_arr.filter(
    function (item) {
      return item &gt; 0
    }
  )
  console.log(income);
  var totalIncome = 0;
  $.each(income, function () { totalIncome += parseFloat((this)) || 0; });

  //console.log(totalIncome); //回傳220
  //傳回到income
  $(&#39;#money-plus&#39;).text(`$${totalIncome}`);
  //***************************** */
  //從陣列找出&lt;0的值，放置income
  var expense = amounts_arr.filter(
    function (item) {
      return item &lt; 0
    }
  )
  console.log(expense);

  var totalExpense = 0;
  $.each(expense, function () { totalExpense += parseFloat((this)) || 0; });

  console.log(totalExpense);
  //傳回到expense
  $(&#39;#money-minus&#39;).text(`$${totalExpense}`)


}</code></pre>
<ul>
<li>創造一個amount的陣列</li>
</ul>
<pre><code class="javascript">  const amounts_arr = transactions.map(function (transaction) {
    return transaction.amount
  })
  console.log(amounts_arr);
</code></pre>
<p><img src="https://i.imgur.com/sG0YS9J.png" alt=""></p>
<ul>
<li>計算加總數值<pre><code class="javascript">var total = 0;
$.each(amounts_arr, function () { total += parseFloat((this)) || 0; });
//傳回YOUR BALANCE
$(&#39;#balance&#39;).text(`$${total}`);
console.log(total);
</code></pre>
</li>
</ul>
<pre><code>
![](https://i.imgur.com/7c2MqFo.png)

![](https://i.imgur.com/CCXAirK.png)

* income 收入加總計算

```javascript
//從陣列找出&gt;0的值，放置income
  //console.log(amounts)
  var income = amounts_arr.filter(
    function (item) {
      return item &gt; 0
    }
  )
  console.log(income);
  var totalIncome = 0;
  $.each(income, function () { totalIncome += parseFloat((this)) || 0; });

  //console.log(totalIncome); //回傳220
  //傳回到income
  $(&#39;#money-plus&#39;).text(`$${totalIncome}`);</code></pre><p><img src="https://i.imgur.com/9d8Hx3Y.png" alt=""></p>
<p><img src="https://i.imgur.com/KXRi18A.png" alt=""></p>
<ul>
<li>expense支出加總</li>
</ul>
<pre><code class="javascript">//從陣列找出&lt;0的值，放置expense
  var expense = amounts_arr.filter(
    function (item) {
      return item &lt; 0
    }
  )
  console.log(expense);

  var totalExpense = 0;
  $.each(expense, function () { totalExpense += parseFloat((this)) || 0; });

  console.log(totalExpense);
  //傳回到expense
  $(&#39;#money-minus&#39;).text(`$${totalExpense}`)
</code></pre>
<p><img src="https://i.imgur.com/AaIZORC.png" alt=""></p>
<p><img src="https://i.imgur.com/TM4EQrH.png" alt=""></p>
<hr>
<p>錯誤修正：</p>
<ul>
<li>調換推入陣列以及<code>addTransactions</code>的順序<br><img src="https://i.imgur.com/7jdJ7kO.png" alt=""></li>
</ul>
<pre><code class="javascript">//點擊按鈕的事件
  $(&#39;.btn&#39;).click(function (e) {
    e.preventDefault();
    //console.log(&#39;click&#39;);
    //取得表格中的值
    const text_val = $(&#39;#text&#39;).val();
    const amount_val = $(&#39;#amount&#39;).val();
    let id = generateID();

    //推入陣列
    transactions.push({
      id: id,
      name: text_val,
      amount: amount_val
    });

    addTransactions(id, text_val, amount_val, transactions);




    localStorage.setItem(&#39;Transactions&#39;, JSON.stringify(transactions));

    updateValue(transactions);
  })</code></pre>
<ul>
<li>將updateValue()放入事件中</li>
</ul>
<pre><code class="javascript">//刪除鈕 要交易交出後再綁事件
  $(&#39;.delete-btn&#39;).last().click(function () {
    $(this).parent().remove();
    let id = $(this).data(&#39;id&#39;);
    //console.log(id);
    deleteFromLocalstorage(transactions, id); //要記得傳入id
    updateValue(transactions);
  });</code></pre>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2021/01/10/localstorage/" title="認識什麼是LocalStorage"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: 認識什麼是LocalStorage</span></a><a class="button is-default" href="/2021/01/10/js-exchangeRate/" title="JS實作- exchangeRate匯率轉換器"><span class="has-text-weight-semibold">Next: JS實作- exchangeRate匯率轉換器</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/https://github.com/Eva813"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Eva 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>