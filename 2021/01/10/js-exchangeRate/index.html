<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>JS實作- exchangeRate匯率轉換器</title><meta name="description" content="Front-end Engineer"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="實作需求分析

抓取api提供的匯率資料：使用jQuery,ajax
選擇不同幣別，進行匯率換算
swap按鈕，使幣別交換

完成後的成品jQuery.ajax 使用
參考資料：jQuery.ajax()


$.ajax({
  method: &amp;quot;get&amp;quot;,
  url: &amp;quot;https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/USD&amp;quot;,

})
  .done(function( some_data ) {
    console.log(data);
    //成功抓到值的話，就會印出抓取到的資料
  }).fail(function(){

  })


應用於exchangeR.."><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Let's Code" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Eva's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">JS實作- exchangeRate匯率轉換器</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#實作需求分析"><span class="toc-text">實作需求分析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#完成後的成品"><span class="toc-text">完成後的成品</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jQuery-ajax-使用"><span class="toc-text">jQuery.ajax 使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#計算匯率calculate-函式"><span class="toc-text">計算匯率calculate 函式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#函式說明"><span class="toc-text">函式說明:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-先將要抓取的值，宣告變數-分別有選擇的國家幣別、兌換的數量"><span class="toc-text">1.先將要抓取的值，宣告變數;分別有選擇的國家幣別、兌換的數量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-串接資料"><span class="toc-text">2.串接資料</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他輸入值的抓取與連動"><span class="toc-text">其他輸入值的抓取與連動</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#currency-one的改變，會連動上面的函式計算結果"><span class="toc-text">#currency-one的改變，會連動上面的函式計算結果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#發現使用-append-，會出現累積div文字的問題"><span class="toc-text">發現使用.append()，會出現累積div文字的問題</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#swap按鈕-（使幣別交換）"><span class="toc-text">swap按鈕 （使幣別交換）</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/JS"><i class="tag post-item-tag">JS</i></a><a href="/tags/ajax"><i class="tag post-item-tag">ajax</i></a><a href="/tags/input"><i class="tag post-item-tag">input</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">JS實作- exchangeRate匯率轉換器</h1><time class="has-text-grey" datetime="2021-01-10T01:50:30.000Z">2021-01-10</time><article class="mt-2 post-content"><h2 id="實作需求分析"><a href="#實作需求分析" class="headerlink" title="實作需求分析"></a>實作需求分析</h2><p><img src="https://i.imgur.com/cu80NjP.png" alt=""></p>
<ul>
<li>抓取api提供的匯率資料：使用jQuery,ajax</li>
<li>選擇不同幣別，進行匯率換算</li>
<li>swap按鈕，使幣別交換</li>
</ul>
<h4 id="完成後的成品"><a href="#完成後的成品" class="headerlink" title="完成後的成品"></a>完成後的<a href="https://eva813.github.io/Eva_portfolio/exchangeRate/exchangeRate.html" target="_blank" rel="noopener">成品</a></h4><h2 id="jQuery-ajax-使用"><a href="#jQuery-ajax-使用" class="headerlink" title="jQuery.ajax 使用"></a>jQuery.ajax 使用</h2><ul>
<li>參考資料：<a href="https://api.jquery.com/jquery.ajax/" target="_blank" rel="noopener">jQuery.ajax()
</a></li>
</ul>
<pre><code class="javascript">$.ajax({
  method: &quot;get&quot;,
  url: &quot;https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/USD&quot;,

})
  .done(function( some_data ) {
    console.log(data);
    //成功抓到值的話，就會印出抓取到的資料
  }).fail(function(){

  })</code></pre>
<p><img src="https://i.imgur.com/S1kOYmH.png" alt=""></p>
<ul>
<li>應用於exchangeRate:<pre><code class="javascript">$.ajax({
  url: `https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/${currency_one}`,  //注意符號
  method: &#39;get&#39;,//get,post,put
  dataType: &#39;json&#39;,
  success: function (data) {
    //console.log(data);
    const rate = data.conversion_rates[currency_two];
    //console.log(rate);
    $(&#39;#rate&#39;).text(`1 ${currency_one} = ${rate} ${currency_two}`);
    $(&#39;#amount-two&#39;).val((amountOne * rate).toFixed(2));
  }
})
</code></pre>
</li>
</ul>
<pre><code>* #### 詳細說明可以參照內文：[計算匯率calculate函式](#計算匯率calculate-函式)



#### 其他參考資料：

[[ Alex 宅開發 ] 👨‍💻從 jQuery 入門到認識 JavaScript #5 Ajax 與非同步功能操作與原始碼探索](https://www.youtube.com/watch?v=z-hN7GY5K7g)
</code></pre><ul>
<li><code>url</code>:來源，api的位置在哪裏</li>
<li><code>type</code>:api的呼叫方式</li>
<li><code>dataType</code>:它回給你的資料類型</li>
<li><code>data</code>:你要傳給它什麼<pre><code></code></pre></li>
</ul>
<pre><code class="javascript">

$.ajax({
  url: data.json,
  type: &#39;get&#39;,//get,post,put,path,delete
  dataType: &#39;json&#39;, //html,xml,text,jsonp
  data: {}

}).then(function (res) {
  //response &lt;-&gt; request
  console.log(res);
  return def.resolve();
}), function (err) {
  console.log(err);
  return def.reject();
}
</code></pre>
<h2 id="計算匯率calculate-函式"><a href="#計算匯率calculate-函式" class="headerlink" title="計算匯率calculate 函式"></a>計算匯率calculate 函式</h2><ul>
<li>此函式為抓取匯率api的資料並帶入計算匯率</li>
</ul>
<pre><code class="javascript">function calculate() {

  var currency_one = $(&quot;#currency-one&quot;).val();
  var currency_two = $(&#39;#currency-two&#39;).val();
  var amountOne = $(&#39;#amount-one&#39;).val();
  var amountTwo = $(&#39;#amount-two&#39;).val();

  //https://app.exchangerate-api.com/dashboard/confirmed

  $.ajax({
    url: `https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/${currency_one}`,//注意符號
    method: &#39;get&#39;,//抓取值
    dataType: &#39;json&#39;,
    success: function (data) {
      //console.log(data);  //查看抓到的物件

      const rate = data.conversion_rates[currency_two];
      //console.log(rate);

      $(&#39;#rate&#39;).text(`1 ${currency_one} = ${rate} ${currency_two}`);

      //將值帶入
      $(&#39;#amount-two&#39;).val((amountOne * rate).toFixed(2));
    }
  })


}</code></pre>
<h3 id="函式說明"><a href="#函式說明" class="headerlink" title="函式說明:"></a>函式說明:</h3><h4 id="1-先將要抓取的值，宣告變數-分別有選擇的國家幣別、兌換的數量"><a href="#1-先將要抓取的值，宣告變數-分別有選擇的國家幣別、兌換的數量" class="headerlink" title="1.先將要抓取的值，宣告變數;分別有選擇的國家幣別、兌換的數量"></a>1.先將要抓取的值，宣告變數;分別有選擇的國家幣別、兌換的數量</h4><h4 id="2-串接資料"><a href="#2-串接資料" class="headerlink" title="2.串接資料"></a>2.串接資料</h4><p> (1). 抓取資料的位置<br><code>url: https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/${currency_one}</code></p>
<p>注意網址：<br><code>&quot;https://v6.exchangerate-api.com/v6/06f04b805743079a1966771a/latest/USD&quot;</code><br>注意網址後面有修改，要抓取會變動的變數： ${currency_one}</p>
<p> (2) 檢查是否有抓到要的資料：</p>
<ul>
<li>宣告：<code>const rate = data.conversion_rates[currency_two];</code></li>
<li>console.log(rate); </li>
</ul>
<p><img src="https://i.imgur.com/LKGiCmN.png" alt=""></p>
<ul>
<li>確定抓取的值是否正確：<code>console.log($(&#39;#amount-two&#39;).val());</code></li>
</ul>
<p><img src="https://i.imgur.com/r9Nx25o.png" alt=""></p>
<ul>
<li>將計算匯率帶入<br><code>$(&#39;#amount-two&#39;).val((amountOne * rate).toFixed(2));</code></li>
</ul>
<p><img src="https://i.imgur.com/oMBuNFV.png" alt=""></p>
<h2 id="其他輸入值的抓取與連動"><a href="#其他輸入值的抓取與連動" class="headerlink" title="其他輸入值的抓取與連動"></a>其他輸入值的抓取與連動</h2><ul>
<li><h4 id="currency-one的改變，會連動上面的函式計算結果"><a href="#currency-one的改變，會連動上面的函式計算結果" class="headerlink" title="#currency-one的改變，會連動上面的函式計算結果"></a><code>#currency-one的改變</code>，會連動上面的函式計算結果</h4></li>
</ul>
<pre><code class="javascript">$(&quot;#currency-one&quot;).change(function () {
  $(&quot;#rate&quot;).html(&quot;&quot;); 
  calculate();
})</code></pre>
<pre><code class="javascript">
//抓取amountone
$(&quot;#amount-one&quot;).on(&quot;input&quot;, function () {
  $(&quot;#rate&quot;).html(&quot;&quot;);
  calculate();
})

$(&quot;#currency-two&quot;).change(function () {
  $(&quot;#rate&quot;).html(&quot;&quot;);
  calculate();
})

//抓取amountTwo
$(&quot;#amount-two&quot;).on(&quot;input&quot;, function () {
  $(&quot;#rate&quot;).html(&quot;&quot;);
  calculate();
})</code></pre>
<ul>
<li><h4 id="發現使用-append-，會出現累積div文字的問題"><a href="#發現使用-append-，會出現累積div文字的問題" class="headerlink" title="發現使用.append()，會出現累積div文字的問題"></a>發現使用<code>.append()</code>，會出現累積div文字的問題</h4></li>
<li><p>(1) 清除函式<code>.append()</code>，累積div文字呈現的問題<br><code>$(&quot;#rate&quot;).html(&quot;&quot;);</code></p>
</li>
<li><p>(2) 將原本使用<code>.append()</code>的地方，修改為<code>.text()</code>, <code>$(&#39;#rate&#39;).text(`1 ${currency_one} = ${rate} ${currency_two}`);</code></p>
<ul>
<li>位置：<a href="#計算匯率calculate-函式">計算匯率calculate函式</a></li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/GTMuXY0.png" alt=""></p>
<p><img src="https://i.imgur.com/TvspVAq.png" alt=""></p>
<h2 id="swap按鈕-（使幣別交換）"><a href="#swap按鈕-（使幣別交換）" class="headerlink" title="swap按鈕 （使幣別交換）"></a>swap按鈕 （使幣別交換）</h2><ul>
<li>宣告一個變數，紀錄交換前的幣別<code>let temp = $(&quot;#currency-one&quot;).val();</code></li>
<li>確認是否宣告正確：<code>console.log(temp);</code></li>
</ul>
<p><img src="https://i.imgur.com/gkYsHxQ.png" alt=""></p>
<p><img src="https://i.imgur.com/fAZmC0Q.png" alt=""></p>
<pre><code class="javascript">//swap按鈕
$(&#39;#swap&#39;).click(function () {
  let temp = $(&quot;#currency-one&quot;).val();//設一個變數來存放currency-one
  $(&quot;#currency-one&quot;).val($(&quot;#currency-two&quot;).val());
  $(&quot;#currency-two&quot;).val(temp);
  calculate();
})

calculate(); //放於最後</code></pre>
<ul>
<li><code>console.log($(&quot;#currency-one&quot;).val());</code></li>
<li><code>console.log($(&quot;#currency-two&quot;).val());</code></li>
</ul>
<p><img src="https://i.imgur.com/o4JLcIF.png" alt=""></p>
<hr>
<p>參考資料：<br><a href="https://ithelp.ithome.com.tw/articles/10192175" target="_blank" rel="noopener">重新認識 JavaScript: Day 16 那些你知道與不知道的事件們</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2021/01/10/js-expenseTracker/" title="JS實作- expense tracker 記帳簿"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: JS實作- expense tracker 記帳簿</span></a><a class="button is-default" href="/2020/12/28/js-browser/" title="JS-browser"><span class="has-text-weight-semibold">Next: JS-browser</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/https://github.com/Eva813"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Eva 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>