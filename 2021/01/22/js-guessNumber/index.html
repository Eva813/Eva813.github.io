<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>JS實作- 猜數字遊戲</title><meta name="description" content="Front-end Engineer"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="成品
觀察功能需求
練習語音辨識的使用： speech recognition API
SpeechRecognition-MDN


根據不同情形，有不一樣的回覆
依據猜測數字的情形給予：go higher,go lower





數字猜中後，會出現恭喜答對等敘述，並呈現Play Again的按鈕


js部分1.設定隨機數字
Math.floor(Math.random() * 100) + 1取得1-100

// 取得隨1-100隨機數字
function theRandomNum() {
  return Math.floor(Math.random() * 100) + 1;
  //沒有加1，數字會是0-99
}

let randomNum = theRandomNum();
conso.."><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Let's Code" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Eva's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">JS實作- 猜數字遊戲</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#觀察功能需求"><span class="toc-text">觀察功能需求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#js部分"><span class="toc-text">js部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-設定隨機數字"><span class="toc-text">1.設定隨機數字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-SpeechRecognition"><span class="toc-text">2.SpeechRecognition</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-記錄下使用者所說的話"><span class="toc-text">3.記錄下使用者所說的話</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-核對隨機數字與猜的數字是否一致"><span class="toc-text">4.核對隨機數字與猜的數字是否一致</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/JS"><i class="tag post-item-tag">JS</i></a><a href="/tags/jQuery%20"><i class="tag post-item-tag">jQuery </i></a><a href="/tags/random"><i class="tag post-item-tag">random</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">JS實作- 猜數字遊戲</h1><time class="has-text-grey" datetime="2021-01-22T01:28:14.000Z">2021-01-22</time><article class="mt-2 post-content"><p><a href="https://eva813.github.io/Eva_portfolio/guessNumber/guessNumber.html" target="_blank" rel="noopener">成品</a></p>
<h2 id="觀察功能需求"><a href="#觀察功能需求" class="headerlink" title="觀察功能需求"></a>觀察功能需求</h2><ul>
<li>練習語音辨識的使用： speech recognition API<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition" target="_blank" rel="noopener">SpeechRecognition-MDN</a></li>
</ul>
</li>
<li>根據不同情形，有不一樣的回覆<ul>
<li>依據猜測數字的情形給予：go higher,go lower</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/IjVZV5d.png" alt=""></p>
<ul>
<li>數字猜中後，會出現恭喜答對等敘述，並呈現<code>Play Again</code>的按鈕</li>
</ul>
<p><img src="https://i.imgur.com/MhtrTrR.png" alt=""></p>
<h2 id="js部分"><a href="#js部分" class="headerlink" title="js部分"></a>js部分</h2><h3 id="1-設定隨機數字"><a href="#1-設定隨機數字" class="headerlink" title="1.設定隨機數字"></a>1.設定隨機數字</h3><ul>
<li><code>Math.floor(Math.random() * 100) + 1</code>取得1-100</li>
</ul>
<pre><code class="javascript">// 取得隨1-100隨機數字
function theRandomNum() {
  return Math.floor(Math.random() * 100) + 1;
  //沒有加1，數字會是0-99
}

let randomNum = theRandomNum();
console.log(&#39;randomNum:&#39;, randomNum);</code></pre>
<h3 id="2-SpeechRecognition"><a href="#2-SpeechRecognition" class="headerlink" title="2.SpeechRecognition"></a>2.SpeechRecognition</h3><ul>
<li>第一步要先將SpeechRecognition設為全域變數<ul>
<li>檢查瀏覽器是否有支援不需要 prefix 的 speechRecognition 介面，若沒有則將 webkit 標頭的 webkitSpeechRecognition 指定給該全域變數，</li>
</ul>
</li>
<li>要使用 speechRecognition ，必須透過 SpeechRecognition 建構式建立一個物件實例。</li>
<li><code>recognition.onresult</code> 設定取得語音辨識的結果</li>
<li>執行<code>writeMessage(myWord);checkNumber(myWord);</code>兩個函式<pre><code class="javascript">try {
var SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
var recognition = new SpeechRecognition();
//設定辨識語言。
recognition.lang = &#39;zh-tw&#39;;
}
catch (e) {
console.error(e);
</code></pre>
</li>
</ul>
<p>}</p>
<p>// 開始語音辨識<br>recognition.start();<br>//取得語音辨識的結果<br>recognition.onresult = function (event) {<br>  //console.log(event);<br>  let myWord = event.results[0][0].transcript<br>  //console.log(‘You said: ‘, myWord);<br>  writeMessage(myWord);<br>  checkNumber(myWord);<br>};</p>
<pre><code>* 簡易測試，取得得語音辨識 :point_down: 
```javascript=
//取得語音辨識的結果
recognition.onresult = function (event) {
  console.log(&#39;You said: &#39;, event.results[0][0].transcript);
};</code></pre><p><img src="https://i.imgur.com/QLWaJB0.png" alt=""></p>
<p><img src="https://i.imgur.com/FfF5Aqv.png" alt=""></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Speech_API/Using_the_Web_Speech_API" target="_blank" rel="noopener">Using the Web Speech API</a><br><a href="https://www.freecodecamp.org/news/how-to-build-a-simple-speech-recognition-app-a65860da6108/" target="_blank" rel="noopener">How to build a simple speech recognition app</a></p>
<h3 id="3-記錄下使用者所說的話"><a href="#3-記錄下使用者所說的話" class="headerlink" title="3.記錄下使用者所說的話"></a>3.記錄下使用者所說的話</h3><ul>
<li><p>在<code>msg</code>的div插入辨識語言的結果文字</p>
<pre><code class="javascript">function writeMessage(myWord) {
$(&#39;#msg&#39;).html(`
&lt;div&gt;You said:&lt;/div&gt;
  &lt;span class=&quot;box&quot;&gt;${myWord}&lt;/span&gt;

`)
}</code></pre>
<h3 id="4-核對隨機數字與猜的數字是否一致"><a href="#4-核對隨機數字與猜的數字是否一致" class="headerlink" title="4.核對隨機數字與猜的數字是否一致"></a>4.核對隨機數字與猜的數字是否一致</h3></li>
<li><p>設定當辨識到的不是數字：This is not a valid number</p>
</li>
<li><p>當範圍不在1-100之間：Number must be between 1 and 100</p>
</li>
<li><p>猜中數字的結果：Congrats! You have guessed the number!</p>
</li>
<li><p>數字猜測GO LOWER,GO HIGHER</p>
<pre><code class="javascript">function checkNumber(myWord) {
let number = +myWord; //轉為數字
if (Number.isNaN(number)) {
  $(&#39;#msg&#39;).append(`&lt;div&gt;This is not a valid number&lt;/div&gt;`)
  return
}
//設定語句
if (number &gt; 100 || number &lt; 1) {
  $(&#39;#msg&#39;).append(`&lt;div&gt;Number must be between 1 and 100&lt;/div&gt;`);
  return;
}

if (number === randomNum) {
  $(&#39;body&#39;).html(`
  &lt;h2&gt;Congrats! You have guessed the number! &lt;br&gt;&lt;br&gt; 
  It was ${number}&lt;/h2&gt;
  &lt;button class=&quot;play-again&quot; id=&quot;play-again&quot; &gt; Play Again &lt;/button&gt;
  `);
} else if (number &gt; randomNum) {
  $(&#39;#msg&#39;).append(`&lt;div&gt;GO LOWER&lt;/div&gt;`);
} else {
  $(&#39;#msg&#39;).append(`&lt;div&gt;GO HIGHER&lt;/div&gt;`)
}
</code></pre>
</li>
</ul>
<p>}</p>
<pre><code>

* 透過 Number.isNaN() 語法可以判斷，若回傳 true，則表示值為 NaN，否則為 false

[Number.isNaN()](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN)

### 5.使猜數字可以持續猜，直到答對為止
* `recognition.onend`使用於控制語音識別的服務，並應用在結束語音識別時的情境。
* `recognition.start();`每次數字猜完後，都會重新開始語音識別，直到猜中。
* 在數字猜中後，會出現`play again`按鈕，所以要設定此按鈕，按下後能夠重新開始遊戲 =&gt;`window.location.reload()`

```javascript
//https://stackoverflow.com/questions/51080738/how-to-make-speech-recognition-continous-for-a-fix-time-period
recognition.onend = function () {
  recognition.start();
  //點擊按鈕，重啟遊戲畫面
  $(&#39;body&#39;).find(&#39;#play-again&#39;).click(

    function () {
      window.location.reload();
    }

  );
}</code></pre><p><a href="https://ithelp.ithome.com.tw/articles/10187827" target="_blank" rel="noopener">實戰智慧插座 14 - 我說開燈就開燈 ( 語音辨識 )</a></p>
<hr>
<p>其他參考資料:<br><a href="https://tutorialzine.com/2017/08/converting-from-speech-to-text-with-javascript" target="_blank" rel="noopener">Converting from Speech to Text with JavaScript</a><br><a href="https://davidwalsh.name/speech-recognition" target="_blank" rel="noopener">JavaScript Speech Recognition</a><br><a href="https://ithelp.ithome.com.tw/articles/10248999" target="_blank" rel="noopener">Day21 – Speech Recognition (lukechu)</a><br><a href="https://ithelp.ithome.com.tw/articles/10196577" target="_blank" rel="noopener">Day 21 - Speech Detection (Arel)</a><br><a href="https://ithelp.ithome.com.tw/articles/10224891?sc=rss.qu" target="_blank" rel="noopener">DAY20 : Speech Detection (BROWN)</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2021/01/22/js-typingGame/" title="JS實作- typingGame"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: JS實作- typingGame</span></a><a class="button is-default" href="/2021/01/16/js-countDown/" title="JS實作- 新年倒數"><span class="has-text-weight-semibold">Next: JS實作- 新年倒數</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/https://github.com/Eva813"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Eva 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>