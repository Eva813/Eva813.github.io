<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>JS實作- musicPlayer</title><meta name="description" content="Front-end Engineer"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="觀察須製作的功能成品

播放器API的樣式

&amp;lt;audio&amp;gt;: The Embed Audio element

播放時，左方的圓型圖示會旋轉。


先於css檔案製作符合動畫的class
在js時，依照符合的情況加入該class



播放時，上方會跳出播放歌曲的名稱。


先於css檔案製作符合動畫的class，設定opacity1或0，translateY位置的移動
在js時，依照符合的情況加入該class



左右按鍵可以更換曲目，同時圖片會更換


設定陣列，使歌曲與圖片相符
並讓前後的跳轉鍵，依照順序或條件來變化



html部分跳轉按鍵
播放鍵、前/後跳轉的按鈕 

&amp;lt;div class=&amp;quot;nav&amp;quot;&amp;gt;
        &amp;lt;button id=.."><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Let's Code" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Eva's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">JS實作- musicPlayer</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#觀察須製作的功能"><span class="toc-text">觀察須製作的功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#html部分"><span class="toc-text">html部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#跳轉按鍵"><span class="toc-text">跳轉按鍵</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#css部分"><span class="toc-text">css部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#背景顏色"><span class="toc-text">背景顏色</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#圖片圓形以及旋轉"><span class="toc-text">圖片圓形以及旋轉</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#播放進度條的製作"><span class="toc-text">播放進度條的製作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#calc"><span class="toc-text">calc()</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#js部分"><span class="toc-text">js部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-音樂播放鍵-播放與停止"><span class="toc-text">1.音樂播放鍵(播放與停止)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#play-、pause"><span class="toc-text">play()、pause()</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#綁定事件："><span class="toc-text">綁定事件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#綁定於下一首、前一首的圖示被點擊時"><span class="toc-text">綁定於下一首、前一首的圖示被點擊時</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-左右鍵的跳轉"><span class="toc-text">3.左右鍵的跳轉</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-點擊進度條，可以跳轉音樂位置"><span class="toc-text">4.點擊進度條，可以跳轉音樂位置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-顯示粉色進度條"><span class="toc-text">(1).顯示粉色進度條</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-點擊進度條，會跳轉到該位置播放"><span class="toc-text">(2).點擊進度條，會跳轉到該位置播放</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-歌曲播完後，換下一首"><span class="toc-text">5.歌曲播完後，換下一首</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-增加隨機的變換背景色彩"><span class="toc-text">6.增加隨機的變換背景色彩</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/JS"><i class="tag post-item-tag">JS</i></a><a href="/tags/append"><i class="tag post-item-tag">append</i></a><a href="/tags/jQuery%20"><i class="tag post-item-tag">jQuery </i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">JS實作- musicPlayer</h1><time class="has-text-grey" datetime="2021-01-15T13:51:43.000Z">2021-01-15</time><article class="mt-2 post-content"><h2 id="觀察須製作的功能"><a href="#觀察須製作的功能" class="headerlink" title="觀察須製作的功能"></a>觀察須製作的功能</h2><p><a href="https://eva813.github.io/Eva_portfolio/musicPlayer/musicPlayer.html" target="_blank" rel="noopener">成品</a></p>
<ol>
<li>播放器API的樣式</li>
</ol>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio" target="_blank" rel="noopener">&lt;audio&gt;: The Embed Audio element</a></p>
<ol start="2">
<li>播放時，左方的圓型圖示會旋轉。</li>
</ol>
<ul>
<li>先於css檔案製作符合動畫的class</li>
<li>在js時，依照符合的情況加入該class</li>
</ul>
<p><img src="https://i.imgur.com/3LBdMiU.png" alt=""></p>
<ol start="3">
<li>播放時，上方會跳出播放歌曲的名稱。</li>
</ol>
<ul>
<li>先於css檔案製作符合動畫的class，設定<code>opacity</code>1或0，<code>translateY</code>位置的移動</li>
<li>在js時，依照符合的情況加入該class</li>
</ul>
<p><img src="https://i.imgur.com/U3dx7yG.png" alt=""></p>
<ol start="4">
<li>左右按鍵可以更換曲目，同時圖片會更換</li>
</ol>
<ul>
<li>設定陣列，使歌曲與圖片相符</li>
<li>並讓前後的跳轉鍵，依照順序或條件來變化</li>
</ul>
<p><img src="https://i.imgur.com/NuxfsOb.png" alt=""></p>
<hr>
<h2 id="html部分"><a href="#html部分" class="headerlink" title="html部分"></a>html部分</h2><h3 id="跳轉按鍵"><a href="#跳轉按鍵" class="headerlink" title="跳轉按鍵"></a>跳轉按鍵</h3><ul>
<li>播放鍵、前/後跳轉的按鈕 </li>
</ul>
<pre><code class="html">&lt;div class=&quot;nav&quot;&gt;
        &lt;button id=&quot;prev&quot; class=&quot;action-btn&quot;&gt;
          &lt;i class=&quot;fas fa-backward&quot;&gt;&lt;/i&gt;
        &lt;/button&gt;

        &lt;button id=&quot;play&quot; class=&quot;action-btn  action-btn-big&quot;&gt;
          &lt;i class=&quot;fas fa-play&quot;&gt;&lt;/i&gt;
        &lt;/button&gt;

        &lt;button id=&quot;next&quot; class=&quot;action-btn&quot;&gt;
          &lt;i class=&quot;fas fa-forward&quot;&gt;&lt;/i&gt;
        &lt;/button&gt;
&lt;/div&gt;</code></pre>
<p><img src="https://i.imgur.com/w1bpDjr.png" alt=""></p>
<h2 id="css部分"><a href="#css部分" class="headerlink" title="css部分"></a>css部分</h2><h3 id="背景顏色"><a href="#背景顏色" class="headerlink" title="背景顏色"></a>背景顏色</h3><p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/linear-gradient()" target="_blank" rel="noopener">linear-gradient()</a></p>
<pre><code class="css">/* 傾斜度\顏色、從哪個位置開始 */
  background-image:linear-gradient(0deg
  ,rgb(247, 247, 247,1) 23.8%,
  rgba(252,221,221,1) 92% );</code></pre>
<p><img src="https://i.imgur.com/Xb5PpmY.png" alt=""></p>
<h2 id="圖片圓形以及旋轉"><a href="#圖片圓形以及旋轉" class="headerlink" title="圖片圓形以及旋轉"></a>圖片圓形以及旋轉</h2><pre><code class="css">.img-container{
  position: relative;
  width: 110px;
}
/*圖片圓形*/
.img-container img{
  border-radius: 50%;
  object-fit: cover;
/*填滿元素的寬度及高度(維持原比例)，通常會剪掉部分的物件*/
 height: 110px;
 width: inherit; /*繼承自父層的寬度屬性值。*/
 position:absolute;
 bottom: 0;
 left: 0;

 animation: rotate 3s linear infinite;
 animation-play-state: paused;
}

/* 播放class的製作 */
.music-container.play .img-container img{
 animation-play-state:running;

}
@keyframes rotate{
  from{
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}</code></pre>
<ul>
<li>使用animation@keyframe<br><a href="https://wcc723.github.io/development/2020/10/11/img-cover/" target="_blank" rel="noopener">新手前端也不該犯的錯：圖片變形</a></li>
</ul>
<p><img src="https://i.imgur.com/RfUz8Pk.png" alt=""></p>
<ul>
<li>在圖片中間加入圓形點，以看起來像光碟樣式</li>
</ul>
<pre><code class="css">.img-container::after{
  content: &#39;&#39;;
  border-radius: 50%;
  background-color: #fff;
  position: absolute;
  left: 50%;
  bottom: 100%;
  width: 25px;
  height: 25px;
  transform: translate(-50%,50%);
}</code></pre>
<p><img src="https://i.imgur.com/HlnWKJb.png" alt=""></p>
<h3 id="播放進度條的製作"><a href="#播放進度條的製作" class="headerlink" title="播放進度條的製作"></a>播放進度條的製作</h3><ol>
<li>標題<pre><code class="css">.music-info{
background-color: rgba(255,255,255,.5);
border-radius:15px 15px 0 0 ;
position: absolute;
top: 0;
left: 20px;
opacity: 0;
transform: translateY(0%);
transition: transform 0.3s ease-in,opacity 0.3s ease-in;
z-index: 0;
}
</code></pre>
</li>
</ol>
<p>.music-container.play .music-info{<br>  opacity: 1;<br>   transform: translateY(-100%);<br>}</p>
<pre><code>* 將曲目標題設置背景、圓角
* 利用 transfor、opacity來呈現位置的變化

![](https://i.imgur.com/icBK0qt.png)

* 修改標題位置

```css=
 /*放入.music-info之中*/
 width: calc(100% - 40px);
  padding: 10px 10px 10px 150px;</code></pre><h4 id="calc"><a href="#calc" class="headerlink" title="calc()"></a><code>calc()</code></h4><p>calc() 的運算式一樣是按照先乘除後加減進行計算<br> width: calc(100% - 40px);<br>/* 意思是 100% 的寬度 - 去 40px */<br><a href="https://5xruby.tw/posts/css-calc/" target="_blank" rel="noopener">CSS： calc() 數值運算</a></p>
<p><img src="https://i.imgur.com/er3G6Wd.png" alt=""></p>
<pre><code class="css">.music-info h4{
margin: 0;
}
</code></pre>
<p><img src="https://i.imgur.com/qiWmxmu.png" alt=""></p>
<p>2.進度條（progress）</p>
<pre><code class="css">.progress-container{
  background-color: #fff;
  border-radius: 5px;
  height: 4px;
  width: 100%;
  margin: 10px 0;
  cursor: pointer;
}

.progress{
  background-color: #fe8daa;
 border-radius: 5px;
  height: 4px;
  width: 0%;
  transition: width .1s linear ;
}
</code></pre>
<p><img src="https://i.imgur.com/uPUHWcM.png" alt=""></p>
<h2 id="js部分"><a href="#js部分" class="headerlink" title="js部分"></a>js部分</h2><h3 id="1-音樂播放鍵-播放與停止"><a href="#1-音樂播放鍵-播放與停止" class="headerlink" title="1.音樂播放鍵(播放與停止)"></a>1.音樂播放鍵(播放與停止)</h3><ul>
<li>分別有兩個函式：<code>playMusic()</code> 、<code>pauseMusic()</code></li>
<li>在css設定<code>.play</code>的css，並於js綁定事件，加入css的效果(使圖片如同轉盤，會旋轉)</li>
<li>在icon的部分：在播放時：為暫停鍵圖示;在暫停時：為播放鍵的圖示</li>
<li>透過play()、pause()，讓音源播放與暫停</li>
</ul>
<h3 id="play-、pause"><a href="#play-、pause" class="headerlink" title="play()、pause()"></a><code>play()</code>、<code>pause()</code></h3><p>因為play()、pause()是DOM元素，不是jQuery的function，而要用jQuery取得DOM元素<br><code>$(&#39;#audio&#39;).get(0).play()</code> =&gt;<code>$(&#39;#audio&#39;)[0].play()</code><br><code>$(&#39;#audio&#39;).get(0).pause()</code> =&gt;<code>$(&#39;#audio&#39;)[0].pause()</code></p>
<p>參考資料：<br><a href="https://learn.jquery.com/using-jquery-core/faq/how-do-i-pull-a-native-dom-element-from-a-jquery-object/" target="_blank" rel="noopener">How do I pull a native DOM element from a jQuery object?</a><br><a href="https://stackoverflow.com/questions/4646998/play-pause-html-5-video-using-jquery" target="_blank" rel="noopener">Play/pause HTML 5 video using JQuery</a></p>
<pre><code class="javascript">//播放音樂
function playMusic() {

  $(&#39;.music-container&#39;).addClass(&#39;play&#39;);
  $(&#39;#play&#39;).find(&#39;i&#39;).removeClass(&#39;fa-play&#39;);
  $(&#39;#play&#39;).find(&#39;i&#39;).addClass(&#39;fa-pause&#39;);
  $(&#39;#audio&#39;).get(0).play();

};</code></pre>
<pre><code class="javascript">//停止音樂
function pauseMusic() {
  $(&#39;.music-container&#39;).removeClass(&#39;play&#39;);
  $(&#39;#play&#39;).find(&#39;i&#39;).addClass(&#39;fa-play&#39;);
  $(&#39;#play&#39;).find(&#39;i&#39;).removeClass(&#39;fa-pause&#39;);
  $(&#39;#audio&#39;).get(0).pause();
}</code></pre>
<ul>
<li><h4 id="綁定事件："><a href="#綁定事件：" class="headerlink" title="綁定事件："></a>綁定事件：</h4>如果音樂是播放狀態的話，就執行<code>pauseMusic()</code>，反之，音樂不處於波方時，執行<code>playMusic()</code><pre><code class="javascript">$(&#39;#play&#39;).click(function (e) {
  var hasPlay = $(&#39;#music-container&#39;).hasClass(&#39;play&#39;);
  //var a = $(&#39;#audio&#39;).paused;
  if (hasPlay) {
    pauseMusic();
  } else {
    playMusic();
  }
});
</code></pre>
</li>
</ul>
<pre><code>



### 2.載入音樂

* 將歌曲名稱建立陣列，並將此回傳到建立的函式中
* 設定預設的索引`let songIndex = 1`
* 使用 attr( 屬性名, 屬性值 )，獲取屬性的值，在這部分，透過歌曲名稱來取得歌曲與照片

```javascript
var songs_name = [&#39;hey&#39;, &#39;summer&#39;, &#39;ukulele&#39;];
let songIndex = 1;

function loadSongs(song) {
  //console.log(song);
  $(&#39;#title&#39;).text(song);

  $(&#39;#audio&#39;).attr(&#39;src&#39;, `music/${song}.mp3`);
  $(&#39;#cover&#39;).attr(&#39;src&#39;, `img/${song}.jpg`);
}

// Initially load song details into DOM
loadSongs(songs_name[songIndex]);</code></pre><h4 id="綁定於下一首、前一首的圖示被點擊時"><a href="#綁定於下一首、前一首的圖示被點擊時" class="headerlink" title="綁定於下一首、前一首的圖示被點擊時"></a>綁定於下一首、前一首的圖示被點擊時</h4><pre><code class="javascript">$(&#39;#next&#39;).click(nextSong)
  $(&#39;#prev&#39;).click(function () { prevSong();
  });</code></pre>
<ul>
<li><p>查看函式回傳</p>
<pre><code class="javascript">loadSongs(songs_name);</code></pre>
<p><img src="https://i.imgur.com/je9hXJY.png" alt=""></p>
</li>
<li><p>要抓取到該索引</p>
<pre><code class="javascript">loadSongs(songs_name[songIndex]);</code></pre>
<p><img src="https://i.imgur.com/5not1Ji.png" alt=""><br>此段落執行時，出現問題：<br><img src="https://i.imgur.com/dj4H5hb.png" alt=""></p>
</li>
<li><p>搜尋到的處理方式：在html的<code>head</code><link rel="shortcut icon" href="#"><br><a href="https://stackoverflow.com/questions/31075893/im-getting-favicon-ico-error/31329574" target="_blank" rel="noopener">I’m getting favicon.ico error
</a></p>
</li>
</ul>
<p>參考資料：<br><a href="https://iter01.com/470327.html" target="_blank" rel="noopener">jquery prop和attr的區別</a><br><a href="https://cythilya.github.io/2017/09/10/jquery-attr-vs-prop/" target="_blank" rel="noopener">jQuery .attr() vs .prop()</a></p>
<h3 id="3-左右鍵的跳轉"><a href="#3-左右鍵的跳轉" class="headerlink" title="3.左右鍵的跳轉"></a>3.左右鍵的跳轉</h3><ul>
<li>下一首歌曲，與跳至前一首歌曲，兩個函式的撰寫有異曲同工之妙，只有在設條條件上的差異。</li>
<li><code>nextSong()</code>:設定條件為歌曲索引<code>songIndex</code>比 歌曲陣列長度-1<code>songs_name.length - 1</code>還要小，我們就要將索引+1。<ul>
<li>例如這裏預設的索引為1，所以在點擊當下，判斷&lt;<code>songs_name.length - 1</code>，所以需加1，索引變成2，跳至下一首 ‘ukulele’</li>
</ul>
</li>
<li>prevSong()：設定條件為歌曲索引<code>songIndex</code>比0大，就要索引-1，跳轉至上一首歌曲。若沒符合的話，索引就等於<code>songs_name.length - 1</code></li>
</ul>
<pre><code class="javascript">//歌曲的索引，如果比歌曲總數-1還小，就將索引加1，跳轉下一首
function nextSong() {

  if (songIndex &lt; songs_name.length - 1) { songIndex += 1; } else {
    songIndex = 0
  };
  loadSongs(songs_name[songIndex]);
  playMusic();
}


//跳轉前一首


function prevSong() {
  //如果索引沒有大於0。就會播索引[2]
  if (songIndex &gt; 0) { songIndex -= 1; } else {
    songIndex = songs_name.length - 1;
  };
  loadSongs(songs_name[songIndex]);
  playMusic();
}</code></pre>
<p>參考資料：<br><a href="https://www.geeksforgeeks.org/create-a-music-player-using-javascript/" target="_blank" rel="noopener">Create a Music Player using JavaScript</a></p>
<h3 id="4-點擊進度條，可以跳轉音樂位置"><a href="#4-點擊進度條，可以跳轉音樂位置" class="headerlink" title="4.點擊進度條，可以跳轉音樂位置"></a>4.點擊進度條，可以跳轉音樂位置</h3><h4 id="1-顯示粉色進度條"><a href="#1-顯示粉色進度條" class="headerlink" title="(1).顯示粉色進度條"></a>(1).顯示粉色進度條</h4><ul>
<li>duration：音源的時間(一樣是使用get方式取得)</li>
<li>currentTime：音樂播放的當前位置（以秒計）</li>
<li>progressBar：進度條</li>
<li>計算百分比：<code>(currentTime / duration) * 100</code></li>
</ul>
<pre><code class="javascript">//顯示進度條
//為何取[0]
function handleProgress() {
  var duration = $(&#39;#audio&#39;).get(0).duration;
  //console.log(duration)
  var currentTime = $(&#39;#audio&#39;)[0].currentTime;
  //console.log(currentTime)
  const progressBar = $(&#39;#progress&#39;);
  const progressPercent = (currentTime / duration) * 100;

  //currentTime目前播放時間去與影片長度duration轉換成百分比，即可得到目前播放時間的百分比

  progressBar.css(&#39;width&#39;, `${progressPercent}%`);
};
</code></pre>
<h4 id="2-點擊進度條，會跳轉到該位置播放"><a href="#2-點擊進度條，會跳轉到該位置播放" class="headerlink" title="(2).點擊進度條，會跳轉到該位置播放"></a>(2).點擊進度條，會跳轉到該位置播放</h4><ul>
<li>width:獲取該進度條容器的寬度</li>
<li>抓取點擊位置：<ul>
<li>e.pageX:取得滑鼠在頁面裡的位置</li>
<li>elm.offset().left:絕對座標X軸</li>
</ul>
</li>
<li>將（點擊位置除以進度條的總長）乘以 音樂的時間長度，就可以取得點擊的時間位置<code>theTime = ((xPos / width))* duration;</code></li>
<li>最後現在時間設為，計算好的點擊時間</li>
</ul>
<pre><code class="javascript">//點擊進度條

//https://ithelp.ithome.com.tw/articles/10194871
//https://tools.wingzero.tw/article/sn/102


$(&#39;#progress-container&#39;).click(function (e) {
  const width = $(&#39;#progress-container&#39;).width(); //216.25
  //console.log(width);
  //取得點擊位置
  var elm = $(this);
  var xPos = e.pageX - elm.offset().left;

  //console.log(xPos);

  var duration = $(&#39;#audio&#39;)[0].duration;
  var theTime = ((xPos / width))
    * duration;
  //console.log(theTime);
  $(&#39;#audio&#39;)[0].currentTime = theTime;
});
</code></pre>
<p>執行過程，利用console來查看</p>
<pre><code class="javascript">console.log(e.pageX);
console.log(elm.offset().left);
console.log(xPos)</code></pre>
<p>參考資料：<br><a href="https://tools.wingzero.tw/article/sn/102" target="_blank" rel="noopener">取得滑鼠位置、元素位置與區塊內的相對位置</a></p>
<h3 id="5-歌曲播完後，換下一首"><a href="#5-歌曲播完後，換下一首" class="headerlink" title="5.歌曲播完後，換下一首"></a>5.歌曲播完後，換下一首</h3><pre><code class="javascript">  $(&#39;#audio&#39;).on(&#39;ended&#39;,nextSong);</code></pre>
<p>參考資料：<br><a href="https://stackoverflow.com/questions/39325637/audio-auto-play-next-song-when-previous-is-finished/52228798" target="_blank" rel="noopener">audio auto play next song when previous is finished</a></p>
<h2 id="6-增加隨機的變換背景色彩"><a href="#6-增加隨機的變換背景色彩" class="headerlink" title="6.增加隨機的變換背景色彩"></a>6.增加隨機的變換背景色彩</h2><ul>
<li>色彩為0-256;而因為想取的較亮的色系，所以取64-256<ul>
<li><code>Math.random()</code> 會回傳一個偽隨機小數 (pseudo-random) 介於0到1之間(包含 0，不包含1) </li>
<li><code>Math.floor()</code>會將所有的小數無條件捨去到比自身小的最大整數</li>
<li><code>Math.floor(Math.random() * 255) + 64</code>就會取得64 to 256</li>
</ul>
</li>
<li>宣告變數<code>bgColor</code>為rdba(red,green,blue,a)</li>
<li>最後將此函式，放入<code>loadSongs()</code>函式當中，每次播放、跳轉歌曲，同時背景顏色也會改變<br><img src="https://i.imgur.com/piYCbc5.png" alt=""></li>
</ul>
<pre><code class="javascript">function random_bg_color() {
  // Get a random number between 64 to 256 

  // (for getting lighter colors) 
  let red = Math.floor(Math.random() * 255) + 64;
  let green = Math.floor(Math.random() * 255) + 64;
  let blue = Math.floor(Math.random() * 255) + 64;
  let a = 0.5

  // Construct a color withe the given values 
  let bgColor = &quot;rgba(&quot; + red + &quot;, &quot; + green + &quot;, &quot; + blue + &quot;, &quot; + a + &quot;)&quot;;

  var bg = $(document.body).css(&#39;background&#39;, `${bgColor}`);
  // Set the background to the new color 
  bg = bgColor;
  console.log(bg)

} </code></pre>
<p>參考資料：<br><a href="https://www.geeksforgeeks.org/create-a-music-player-using-javascript/" target="_blank" rel="noopener">Create a Music Player using JavaScript</a><br><a href="https://stackoverflow.com/questions/20790579/wont-math-floormath-random-255-generate-uneven-probabilities" target="_blank" rel="noopener">Won’t Math.floor(Math.random() * 255) generate uneven probabilities?
</a><a href="https://ithelp.ithome.com.tw/articles/10197904" target="_blank" rel="noopener">[筆記][JavaScript]用Math.random()取得亂數的技巧</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2021/01/15/js-SortableList/" title="JS實作- SortableList"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: JS實作- SortableList</span></a><a class="button is-default" href="/2021/01/13/form-validator/" title="JS實作- 表單驗證"><span class="has-text-weight-semibold">Next: JS實作- 表單驗證</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/https://github.com/Eva813"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Eva 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>