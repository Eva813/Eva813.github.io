<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>JS實作- 表單驗證</title><meta name="description" content="Front-end Engineer"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="
觀察功能
製作一個會員申請的表單
帳號
email
密碼


輸入框的顏色變化
判斷條件的設置

任務拆解抓出要互動的元素const form = document.querySelector(&amp;#39;#form&amp;#39;);
const username = document.querySelector(&amp;#39;#username&amp;#39;);
const email = document.querySelector(&amp;#39;#email&amp;#39;);
const password = document.querySelector(&amp;#39;#password&amp;#39;);
const password2 = document.querySelector(&amp;#39;#password2&amp;#39;).."><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Let's Code" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Eva's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">JS實作- 表單驗證</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#觀察功能"><span class="toc-text">觀察功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#任務拆解"><span class="toc-text">任務拆解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#抓出要互動的元素"><span class="toc-text">抓出要互動的元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#成功輸入"><span class="toc-text">成功輸入</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#複製相同條件判斷"><span class="toc-text">複製相同條件判斷</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#設定符合的驗證"><span class="toc-text">設定符合的驗證</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#整合簡化-gt-forEach"><span class="toc-text">整合簡化 &#x3D;&gt;forEach</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#將getFieldName-function拉出"><span class="toc-text">將getFieldName() function拉出</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#長度檢查"><span class="toc-text">長度檢查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#密碼檢查"><span class="toc-text">密碼檢查</span></a></li></ol></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/JS"><i class="tag post-item-tag">JS</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">JS實作- 表單驗證</h1><time class="has-text-grey" datetime="2021-01-13T01:17:11.000Z">2021-01-13</time><article class="mt-2 post-content"><p><img src="https://i.imgur.com/Vhxlk8D.png" alt=""></p>
<h2 id="觀察功能"><a href="#觀察功能" class="headerlink" title="觀察功能"></a>觀察功能</h2><ol>
<li>製作一個會員申請的表單<ul>
<li>帳號</li>
<li>email</li>
<li>密碼</li>
</ul>
</li>
<li>輸入框的顏色變化</li>
<li>判斷條件的設置</li>
</ol>
<h2 id="任務拆解"><a href="#任務拆解" class="headerlink" title="任務拆解"></a>任務拆解</h2><h3 id="抓出要互動的元素"><a href="#抓出要互動的元素" class="headerlink" title="抓出要互動的元素"></a>抓出要互動的元素</h3><pre><code class="javascript">const form = document.querySelector(&#39;#form&#39;);
const username = document.querySelector(&#39;#username&#39;);
const email = document.querySelector(&#39;#email&#39;);
const password = document.querySelector(&#39;#password&#39;);
const password2 = document.querySelector(&#39;#password2&#39;);</code></pre>
<ul>
<li>獲取物件層次中的父物件</li>
<li>針對指定元素取得或設置指定的class</li>
</ul>
<pre><code class="javascript">//show input error message
function showError(input, message) {
  const formControl = input.parentElement;
  formControl.className = &#39;form-control error&#39;;
}


form.addEventListener(&#39;submit&#39;, function (e) {
  e.preventDefault();
  if (username.value === &#39;&#39;) {
    showError(username, &#39;Username is required&#39;);
  } else {
    showSuccess(username);
  }
})
</code></pre>
<pre><code class="javascript">const small = formControl.querySelector(&#39;small&#39;);
  small.innerText = &#39;Username is required&#39;;</code></pre>
<ul>
<li>修改顯示文字</li>
</ul>
<p><img src="https://i.imgur.com/NvhXJk8.png" alt=""></p>
<h4 id="成功輸入"><a href="#成功輸入" class="headerlink" title="成功輸入"></a>成功輸入</h4><pre><code class="javascript">//show success outline
function showSuccess(input) {
  const formControl = input.parentElement;
  formControl.className = &#39;form-control success&#39;;
}</code></pre>
<h3 id="複製相同條件判斷"><a href="#複製相同條件判斷" class="headerlink" title="複製相同條件判斷"></a>複製相同條件判斷</h3><ul>
<li>事件為點擊送出之後，會進行條件判斷</li>
</ul>
<pre><code class="javascript">//event listener
form.addEventListener(&#39;submit&#39;, function (e) {
  e.preventDefault();

  if (username.value === &#39;&#39;) {
    showError(username, &#39;Username is required&#39;);
  } else {
    showSuccess(username);
  };

  if (email.value === &#39;&#39;) {
    showError(email, &#39;Email is required&#39;);
  } else {
    showSuccess(email);
  };

  if (password.value === &#39;&#39;) {
    showError(password, &#39;Password is required&#39;);
  } else {
    showSuccess(password);
  };

  if (password2.value === &#39;&#39;) {
    showError(password2, &#39;Password 2 is required&#39;);
  } else {
    showSuccess(password2);
  };
})
</code></pre>
<p><img src="https://i.imgur.com/shKtSSS.png" alt=""></p>
<h3 id="設定符合的驗證"><a href="#設定符合的驗證" class="headerlink" title="設定符合的驗證"></a>設定符合的驗證</h3><ul>
<li>email的輸入應有規範樣式</li>
<li>使用正則表達式</li>
</ul>
<p><img src="https://i.imgur.com/vVVWyGG.png" alt=""></p>
<pre><code class="javascript">//check email is valid
//js email regex
//https://ithelp.ithome.com.tw/articles/10094951

function isValiEmail(email) {
  const re = /^(([^&lt;&gt;()[\]\\.,;:\s@&quot;]+(\.[^&lt;&gt;()[\]\\.,;:\s@&quot;]+)*)|(&quot;.+&quot;))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return re.test(String(email).toLowerCase());
}

//
 if (email.value === &#39;&#39;) {
    showError(email, &#39;Email is required&#39;);
  } else if (!isValiEmail(email.value)) {
    showError(email, &#39;Email is not valid&#39;);
  }
  else {
    showSuccess(email);
  };
</code></pre>
<p><img src="https://i.imgur.com/gdkHO9O.png" alt=""></p>
<h4 id="整合簡化-gt-forEach"><a href="#整合簡化-gt-forEach" class="headerlink" title="整合簡化 =&gt;forEach"></a>整合簡化 =&gt;forEach</h4><pre><code class="javascript">//Check required fields
function checkRequired(inputArr) {
  inputArr.forEach(function (input) {
    if (input.value.trim() === &#39;&#39;) {
      showError(input, &#39;is required&#39;);
    } else {
      showSuccess(input);
    }
  });

}</code></pre>
<ul>
<li>修改showError，套入名稱</li>
</ul>
<pre><code class="javascript">if (input.value.trim() === &#39;&#39;) {
      //console.log(input.id);//會顯示input的所有id
      showError(input, `${input.id}is required`);</code></pre>
<h3 id="將getFieldName-function拉出"><a href="#將getFieldName-function拉出" class="headerlink" title="將getFieldName() function拉出"></a>將getFieldName() function拉出</h3><ul>
<li>製作訊息的第一個字母大寫</li>
</ul>
<pre><code class="javascript">//Check required fields
function checkRequired(inputArr) {
  inputArr.forEach(function (input) {
    if (input.value.trim() === &#39;&#39;) {
      //console.log(input.id);//會顯示input的所有id
      showError(input, `${getFieldName(input)} is required`);
    } else {
      showSuccess(input);
    }
  });

}


//getFieldName
function getFieldName(input) {
  return input.id.charAt(0).toUpperCase() + input.id.slice(1);
  //將第一個字charAt(0)，變大寫，並再接續後面的字slice(1)
}
</code></pre>
<ul>
<li>charAt()从一个字符串中返回指定的字符,<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/charAt" target="_blank" rel="noopener">String.prototype.charAt()</a></li>
</ul>
<h2 id="長度檢查"><a href="#長度檢查" class="headerlink" title="長度檢查"></a>長度檢查</h2><pre><code class="javascript">
// Check input length
function checkLength(input, min, max) {
  if (input.value.length &lt; min) {
    showError(
      input,
      `${getFieldName(input)} must be at least ${min} characters`
    );
  } else if (input.value.length &gt; max) {
    showError(
      input,
      `${getFieldName(input)} must be less than ${max} characters`
    );
  } else {
    showSuccess(input);
  }
}</code></pre>
<p><img src="https://i.imgur.com/sAvU95T.png" alt=""></p>
<h3 id="密碼檢查"><a href="#密碼檢查" class="headerlink" title="密碼檢查"></a>密碼檢查</h3><pre><code class="javascript">// check password match
function checkPasswordMatch(input1, input2) {
  if (input1.value !== input2.value) {
    showError(input2, &#39;Password do not match&#39;)
  }
}</code></pre>
<p><img src="https://i.imgur.com/62UwLS7.png" alt=""></p>
<p>參考資料：<br><a href="https://medium.com/change-or-die/javascript%E5%88%9D%E5%AD%B8-dom%E5%B8%B8%E7%94%A8%E5%B1%AC%E6%80%A7%E8%88%87%E6%96%B9%E6%B3%95-ef851afdb65a" target="_blank" rel="noopener">JavaScript初學：DOM常用屬性與方法</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2021/01/15/js-musicPlayer/" title="JS實作- musicPlayer"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: JS實作- musicPlayer</span></a><a class="button is-default" href="/2021/01/10/localstorage/" title="認識什麼是LocalStorage"><span class="has-text-weight-semibold">Next: 認識什麼是LocalStorage</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/https://github.com/Eva813"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Eva 2022</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>