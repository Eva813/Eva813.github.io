<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>JS基本觀念 - 認識 pass by value、pass by reference 、 pass by sharing，Javascript 又是哪一個？</title><meta name="description" content="Front-end Engineer"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="
之所以會撰寫這篇文，是因為面試過程被考倒的觀念，才發現自己過去從沒注意到這部分啊，那就來寫篇文章來認識它們之中的傳遞方式。
首先，先從型別的認識開始在Javascript分兩大類，一種是基本型別(primitive type)，另一種是物件(Object)。

Primitive type （以純值的形式存在）BooleanNullUndefinedNumberBigIntStringSymbol（於 ECMAScript 6 新定義）
Object物件型別指的是可能由零或多種不同型別 (包括純值與物件) 所組合成，例如object,array, function, map

知道型別後，可以簡易的分類：

primitive type會是 pass by value，
object 是 pass by .."><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Let's Code" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Eva's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">JS基本觀念 - 認識 pass by value、pass by reference 、 pass by sharing，J..</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#首先，先從型別的認識開始"><span class="toc-text">首先，先從型別的認識開始</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#接下來來觀察，它們之間不同"><span class="toc-text">接下來來觀察，它們之間不同</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pass-by-value"><span class="toc-text">pass by value</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#結果："><span class="toc-text">結果：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pass-by-refrence"><span class="toc-text">pass by refrence</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#拆解說明一下"><span class="toc-text">拆解說明一下</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#結果"><span class="toc-text">結果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在不一般情況下，基本型別是-pass-by-value，而物件型別是-pass-by-reference的方式，但總有例外的時候。"><span class="toc-text">在不一般情況下，基本型別是 pass by value，而物件型別是 pass by reference的方式，但總有例外的時候。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pass-by-sharing"><span class="toc-text">pass by  sharing</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#最後，來說說-JavaScript-屬於？"><span class="toc-text">最後，來說說 JavaScript 屬於？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#最終來個綜合練習："><span class="toc-text">最終來個綜合練習：</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/JS"><i class="tag post-item-tag">JS</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">JS基本觀念 - 認識 pass by value、pass by reference 、 pass by sharing，Javascript 又是哪一個？</h1><time class="has-text-grey" datetime="2021-10-09T04:18:41.000Z">2021-10-09</time><article class="mt-2 post-content"><p><img src="https://i.imgur.com/zT0UU5c.jpg" alt=""></p>
<p>之所以會撰寫這篇文，是因為面試過程被考倒的觀念，才發現自己過去從沒注意到這部分啊，那就來寫篇文章來認識它們之中的傳遞方式。</p>
<h2 id="首先，先從型別的認識開始"><a href="#首先，先從型別的認識開始" class="headerlink" title="首先，先從型別的認識開始"></a>首先，先從型別的認識開始</h2><p>在Javascript分兩大類，一種是基本型別(primitive type)，另一種是物件(Object)。</p>
<ul>
<li>Primitive type （以純值的形式存在）<br>Boolean<br>Null<br>Undefined<br>Number<br>BigInt<br>String<br>Symbol（於 ECMAScript 6 新定義）</li>
<li>Object<br>物件型別指的是可能由零或多種不同型別 (包括純值與物件) 所組合成，例如object,array, function, map</li>
</ul>
<p>知道型別後，可以簡易的分類：</p>
<ul>
<li>primitive type會是 pass by value，</li>
<li>object 是 pass by reference。</li>
</ul>
<h2 id="接下來來觀察，它們之間不同"><a href="#接下來來觀察，它們之間不同" class="headerlink" title="接下來來觀察，它們之間不同"></a>接下來來觀察，它們之間不同</h2><h3 id="pass-by-value"><a href="#pass-by-value" class="headerlink" title="pass by value"></a>pass by value</h3><p>範例1：</p>
<pre><code class="javascript">let x=10;
let y=x;

x=20;
console.log(x); //20
console.log(y); //10
</code></pre>
<ul>
<li>注意：x和y是兩個獨立變數 （先記著這點）<ul>
<li>值會存入該變數<br><code>var y = x;</code> 看起來會像是y的內容要複製x，但可以的話要理解為，變數 y 是去建立了一個新的值，然後將變數 x 的內容複製了一份過來。</li>
</ul>
</li>
<li>因為兩的變數，各自獨立，所以當變數 x 的內容後來經過更新變成 20 之後，變數 y 的內容依舊保持原來的 10 而不受影響。</li>
</ul>
<p>範例2</p>
<pre><code class="javascript">var num=3;
console.log(&quot;num start:&quot;,num);

function passByValue(func_num){
  func_num=5;
}

passByValue(num);

console.log(&quot;num end:&quot;, num);
</code></pre>
<h4 id="結果："><a href="#結果：" class="headerlink" title="結果："></a>結果：</h4><pre><code class="javascript">num start:3
num end: 3
</code></pre>
<ul>
<li>先是宣告新變數</li>
<li>隨後建立<code>passByValue()</code> 函式</li>
<li>呼叫<code>passByValue(num)</code> 複製變數num的值，3傳入<code>passByValue(func_num)</code>。<ul>
<li>一開始 值會是3</li>
<li>遇到<code>func_num=5;</code> =&gt; 將值改為 5</li>
</ul>
</li>
<li>但因為出去了函式範圍(scope)，最終的值 <code>num end:3</code></li>
</ul>
<h3 id="pass-by-refrence"><a href="#pass-by-refrence" class="headerlink" title="pass by refrence"></a>pass by refrence</h3><p>範例</p>
<pre><code class="javascript">let x={value:10};
let y=x;

x.value=20;
console.log(x); //{value:20}
console.log(y); //{value:20}
console.log( x === y );  //true
</code></pre>
<h3 id="拆解說明一下"><a href="#拆解說明一下" class="headerlink" title="拆解說明一下"></a>拆解說明一下</h3><ul>
<li>當宣告一個物件</li>
<li>JavaScript 會在記憶體的某處建立起一個物件 (圖右側)，然後再將這個 <code>x</code>變數指向新生成的物件</li>
</ul>
<p><img src="https://i.imgur.com/LPwkZAg.png" alt=""></p>
<ul>
<li>接著，當我們宣告了第二個變數 y ，並且透過 = 將y 指向 x 的位置。</li>
<li>接著當我們更新了 x.value 的內容後， y.value 的內容也被更新了。</li>
</ul>
<p><img src="https://i.imgur.com/vFUhP6X.png" alt=""></p>
<p>範例2</p>
<pre><code class="javascript">var obj1={item:&quot;unchanged&quot;};

console.log(&quot;obj1 start:&quot;,obj1);

function passByReference(ref){
  ref.item= &quot;changed&quot;;
}

passByReference(obj1);

console.log(&quot;obj end&quot;, obj1);
</code></pre>
<h4 id="結果"><a href="#結果" class="headerlink" title="結果"></a>結果</h4><pre><code class="javascript">obj1 start:{item: &quot;unchanged&quot;}
obj1 end:{item:&quot;changed&quot;}
</code></pre>
<ul>
<li>當執行passByReference(obj1) 。想像他是個地址(0x0016)，進入函式中將地址複製，傳入。<ul>
<li>此時他的value 是個地址(0x0016)</li>
</ul>
</li>
<li>進入函式，遇到<code>ref.item</code><ul>
<li>de-reference ，進入原本的記憶體位置，找到item，並改變他的值</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/3Ytn7bk.png" alt=""></p>
<h4 id="在不一般情況下，基本型別是-pass-by-value，而物件型別是-pass-by-reference的方式，但總有例外的時候。"><a href="#在不一般情況下，基本型別是-pass-by-value，而物件型別是-pass-by-reference的方式，但總有例外的時候。" class="headerlink" title="在不一般情況下，基本型別是 pass by value，而物件型別是 pass by reference的方式，但總有例外的時候。"></a>在不一般情況下，基本型別是 pass by value，而物件型別是 pass by reference的方式，但總有例外的時候。</h4><h3 id="pass-by-sharing"><a href="#pass-by-sharing" class="headerlink" title="pass by  sharing"></a>pass by  sharing</h3><pre><code class="javascript">var obj1={item:&quot;unchanged&quot;};

console.log(&quot;obj1 start:&quot;,obj1);

function passBySharing(ref){
  ref={ item: &quot;changed&quot;};
}

passBySharing(obj1);

console.log(&quot;obj end&quot;, obj1);
</code></pre>
<pre><code class="javascript">obj1 start:{item: &quot;unchanged&quot;}
obj1 end:{item:&quot;unchanged&quot;}
</code></pre>
<ul>
<li>傳入之前start 沒有改變</li>
<li>呼叫函式，並進入<code>passBySharing()</code>，還是複製地址，傳入</li>
<li>遇到<code>ref={ item: &quot;changed&quot;};</code>，會直接覆蓋地址(有點類似pass by value)<ul>
<li>這並不是直接更改物件特性</li>
</ul>
</li>
</ul>
<p><img src="https://i.imgur.com/Kst3565.png" alt=""></p>
<h2 id="最後，來說說-JavaScript-屬於？"><a href="#最後，來說說-JavaScript-屬於？" class="headerlink" title="最後，來說說 JavaScript 屬於？"></a>最後，來說說 JavaScript 屬於？</h2><p>看了多篇文章，實在也是有點混亂，該認為三種形式都有呢？還是就是Pass by sharing、Pass by reference呢？ 那例外情形又該如何解釋？</p>
<p>所以這邊的結尾，直接引用Kuro、Huli老師文章的資訊，供給大家參考。</p>
<p>從Kuro Hsu 的<a href="https://ithelp.ithome.com.tw/articles/10191057" target="_blank" rel="noopener">文章</a>、<a href="https://www.tenlong.com.tw/products/9789864344130" target="_blank" rel="noopener">書</a><br>提及認為 JavaScript 應該更屬於 Pass by sharing 的形式。</p>
<ul>
<li>JavaScript 不屬於單純的傳值或傳址。</li>
</ul>
<p>參考 ECMA-262-3 in detail. Chapter 8. Evaluation strategy</p>
<blockquote>
<p>Regardless of usage concept of reference in this case, this strategy should not be confused with the “call by reference” discussed above. The value of the argument is not a direct alias, but the copy of the address.<br>由於在 JavaScript 的物件類型是可變的 (mutable)，當物件更新時，會影響到所有引用這個物件的變數與其副本，修改時會變動到原本的參考，但當賦與新值時，會產生新的實體參考。</p>
</blockquote>
<p>另外在 Huli 的文章中：</p>
<blockquote>
<p>依據細分程度的不同，下面幾句話都是正確的：<br>JavaScript 裡面只有 pass by value<br>JavaScript 的 primitive type 是 pass by value，object 是 pass by sharing</p>
</blockquote>
<hr>
<h2 id="最終來個綜合練習："><a href="#最終來個綜合練習：" class="headerlink" title="最終來個綜合練習："></a>最終來個綜合練習：</h2><p>相信在最後的這個練習，可以更清楚，pass by value，pass by reference，pass by sharing</p>
<pre><code class="javascript">function changeStuff(num,obj,obj2){
  num=num*10;
  obj.item=&quot;changed&quot;;
  obj={item:&quot;changed&quot;};
}

var num=10;
var obj={item: &quot;unchanged&quot;};
var obj2= {item: &quot;unchanged&quot;};

changeStuff(num, obj, obj2);
console.log(num);
console.log(obj.item);
console.log(obj.item);</code></pre>
<pre><code>console=&gt; 10 &quot;changed&quot; &quot;unchanged&quot;</code></pre><p>參考資料：<br><a href="https://medium.com/@mengchiang000/js%E5%9F%BA%E6%9C%AC%E8%A7%80%E5%BF%B5-call-by-value-%E9%82%84%E6%98%AFreference-%E5%8F%88%E6%88%96%E6%98%AF-sharing-22a87ca478fc" target="_blank" rel="noopener">JS基本觀念：call by value 還是reference 又或是 sharing?</a><br><a href="https://ithelp.ithome.com.tw/articles/10191057" target="_blank" rel="noopener">重新認識 JavaScript: Day 05 JavaScript 是「傳值」或「傳址」？</a><br><a href="https://www.youtube.com/watch?v=1YFss_4B_o4&t=302s" target="_blank" rel="noopener">Tech Talk: Pass By Sharing with Javascript</a><br><a href="https://blog.techbridge.cc/2018/06/23/javascript-call-by-value-or-reference/" target="_blank" rel="noopener">深入探討 JavaScript 中的參數傳遞：call by value 還是 reference？</a></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><em></em><a class="button is-default" href="/2021/10/02/newpage/" title="演算法入門"><span class="has-text-weight-semibold">Next: 演算法入門</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/Claudia-theme-blog" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/https://github.com/Eva813"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--></section><p><span>Copyright ©</span><span> Eva 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>